import{r as q,_ as Tr,s as Er,w as R,fH as wr,fI as br,fJ as vr,de as zn,fK as Yn,av as Nr,dq as Pt,j as b,h as Qn,af as Ct,ag as vt,ae as Ve,I as xr,d as F,e as Et,a5 as Dr,C as $n,y as W,H as Ir,ar as Ne,al as xe,an as De,i as Dt,a8 as mt,ad as Mt,ay as Or,fL as Cr,fM as Kn,eh as Ar,R as bt,bB as Tt,eL as Lr,bn as Sr,ai as Lt,V as Jn,ao as Zn,B as tr,fN as Pr,fO as Mr,u as _r,a1 as er,aN as Rr,aO as jr,N as Fr,c as Ge,D as We,S as Xr,b as Br,d4 as He,aH as st,d9 as nr,da as rr,aS as qr,aT as kr,bP as Ur,d7 as Vr,aP as Gr,aB as Wr,aC as Hr,aQ as zr,bX as Yr,aD as Qr,aE as $r,aU as Kr,$ as Jr,aG as Zr,db as ti,aW as ei,aY as ni,aF as ri,d5 as ii,bZ as si,b$ as oi,b_ as ai,aR as ui,fP as ze,fQ as Ye,fR as ci,T as li,dd as Qe,aZ as hi,bC as $e}from"./index-6556bce7.js";import{d as fi,a as pi,b as di,c as mi,f as yi,e as gi,C as Ti}from"./ControlBarSaveButton-e8a7a8aa.js";import{g as Ke,S as Ei,F as wi}from"./DateHelper-25bac1ca.js";import{C as _t}from"./card-6826540c.js";import{_ as bi,c as vi,W as Ni,d as xi,a as Di,b as Ii}from"./Workspace-1e8fa32a.js";var Oi=q.useLayoutEffect,Ci=function(r){var h=q.useRef(r);return Oi(function(){h.current=r}),h},Je=function(r,h){if(typeof r=="function"){r(h);return}r.current=h},Ai=function(r,h){var s=q.useRef();return q.useCallback(function(l){r.current=l,s.current&&Je(s.current,null),s.current=h,h&&Je(h,l)},[h])},Ze={"min-height":"0","max-height":"none",height:"0",visibility:"hidden",overflow:"hidden",position:"absolute","z-index":"-1000",top:"0",right:"0"},tn=function(r){Object.keys(Ze).forEach(function(h){r.style.setProperty(h,Ze[h],"important")})},et=null,Li=function(r,h){var s=r.scrollHeight;return h.sizingStyle.boxSizing==="border-box"?s+h.borderSize:s-h.paddingSize};function Si(t,r,h,s){h===void 0&&(h=1),s===void 0&&(s=1/0),et||(et=document.createElement("textarea"),et.setAttribute("tabindex","-1"),et.setAttribute("aria-hidden","true"),tn(et)),et.parentNode===null&&document.body.appendChild(et);var l=t.paddingSize,n=t.borderSize,e=t.sizingStyle,i=e.boxSizing;Object.keys(e).forEach(function(p){var d=p;et.style[d]=e[d]}),tn(et),et.value=r;var c=Li(et,t);et.value="x";var w=et.scrollHeight-l,T=w*h;i==="border-box"&&(T=T+l+n),c=Math.max(T,c);var E=w*s;return i==="border-box"&&(E=E+l+n),c=Math.min(E,c),[c,w]}var en=function(){},Pi=function(r,h){return r.reduce(function(s,l){return s[l]=h[l],s},{})},Mi=["borderBottomWidth","borderLeftWidth","borderRightWidth","borderTopWidth","boxSizing","fontFamily","fontSize","fontStyle","fontWeight","letterSpacing","lineHeight","paddingBottom","paddingLeft","paddingRight","paddingTop","tabSize","textIndent","textRendering","textTransform","width","wordBreak"],_i=!!document.documentElement.currentStyle,Ri=function(r){var h=window.getComputedStyle(r);if(h===null)return null;var s=Pi(Mi,h),l=s.boxSizing;if(l==="")return null;_i&&l==="border-box"&&(s.width=parseFloat(s.width)+parseFloat(s.borderRightWidth)+parseFloat(s.borderLeftWidth)+parseFloat(s.paddingRight)+parseFloat(s.paddingLeft)+"px");var n=parseFloat(s.paddingBottom)+parseFloat(s.paddingTop),e=parseFloat(s.borderBottomWidth)+parseFloat(s.borderTopWidth);return{sizingStyle:s,paddingSize:n,borderSize:e}},ji=function(r){var h=Ci(r);q.useLayoutEffect(function(){var s=function(n){h.current(n)};return window.addEventListener("resize",s),function(){window.removeEventListener("resize",s)}},[])},Fi=function(r,h){var s=r.cacheMeasurements,l=r.maxRows,n=r.minRows,e=r.onChange,i=e===void 0?en:e,c=r.onHeightChange,w=c===void 0?en:c,T=Tr(r,["cacheMeasurements","maxRows","minRows","onChange","onHeightChange"]),E=T.value!==void 0,p=q.useRef(null),d=Ai(p,h),m=q.useRef(0),v=q.useRef(),I=function(){var u=p.current,y=s&&v.current?v.current:Ri(u);if(y){v.current=y;var x=Si(y,u.value||u.placeholder||"x",n,l),S=x[0],P=x[1];m.current!==S&&(m.current=S,u.style.setProperty("height",S+"px","important"),w(S,{rowHeight:P}))}},C=function(u){E||I(),i(u)};return q.useLayoutEffect(I),ji(I),q.createElement("textarea",Er({},T,{onChange:C,ref:d}))},Xi=q.forwardRef(Fi);const ir=Xi;var Bt={},nn;function Ie(){return nn||(nn=1,function(){Bt.defaults={"0.1":{explicitCharkey:!1,trim:!0,normalize:!0,normalizeTags:!1,attrkey:"@",charkey:"#",explicitArray:!1,ignoreAttrs:!1,mergeAttrs:!1,explicitRoot:!1,validator:null,xmlns:!1,explicitChildren:!1,childkey:"@@",charsAsChildren:!1,includeWhiteChars:!1,async:!1,strict:!0,attrNameProcessors:null,attrValueProcessors:null,tagNameProcessors:null,valueProcessors:null,emptyTag:""},"0.2":{explicitCharkey:!1,trim:!1,normalize:!1,normalizeTags:!1,attrkey:"$",charkey:"_",explicitArray:!0,ignoreAttrs:!1,mergeAttrs:!1,explicitRoot:!0,validator:null,xmlns:!1,explicitChildren:!1,preserveChildrenOrder:!1,childkey:"$$",charsAsChildren:!1,includeWhiteChars:!1,async:!1,strict:!0,attrNameProcessors:null,attrValueProcessors:null,tagNameProcessors:null,valueProcessors:null,rootName:"root",xmldec:{version:"1.0",encoding:"UTF-8",standalone:!0},doctype:null,renderOpts:{pretty:!0,indent:"  ",newline:`
`},headless:!1,chunkSize:1e4,emptyTag:"",cdata:!1}}}.call(R)),Bt}var qt={},lt={},ht={},rn;function ft(){return rn||(rn=1,function(){var t,r,h,s,l,n,e,i=[].slice,c={}.hasOwnProperty;t=function(){var w,T,E,p,d,m;if(m=arguments[0],d=2<=arguments.length?i.call(arguments,1):[],l(Object.assign))Object.assign.apply(null,arguments);else for(w=0,E=d.length;w<E;w++)if(p=d[w],p!=null)for(T in p)c.call(p,T)&&(m[T]=p[T]);return m},l=function(w){return!!w&&Object.prototype.toString.call(w)==="[object Function]"},n=function(w){var T;return!!w&&((T=typeof w)=="function"||T==="object")},h=function(w){return l(Array.isArray)?Array.isArray(w):Object.prototype.toString.call(w)==="[object Array]"},s=function(w){var T;if(h(w))return!w.length;for(T in w)if(c.call(w,T))return!1;return!0},e=function(w){var T,E;return n(w)&&(E=Object.getPrototypeOf(w))&&(T=E.constructor)&&typeof T=="function"&&T instanceof T&&Function.prototype.toString.call(T)===Function.prototype.toString.call(Object)},r=function(w){return l(w.valueOf)?w.valueOf():w},ht.assign=t,ht.isFunction=l,ht.isObject=n,ht.isArray=h,ht.isEmpty=s,ht.isPlainObject=e,ht.getValue=r}.call(R)),ht}var kt={exports:{}},sn;function sr(){return sn||(sn=1,function(){kt.exports=function(){function t(){}return t.prototype.hasFeature=function(r,h){return!0},t.prototype.createDocumentType=function(r,h,s){throw new Error("This DOM method is not implemented.")},t.prototype.createDocument=function(r,h,s){throw new Error("This DOM method is not implemented.")},t.prototype.createHTMLDocument=function(r){throw new Error("This DOM method is not implemented.")},t.prototype.getFeature=function(r,h){throw new Error("This DOM method is not implemented.")},t}()}.call(R)),kt.exports}var Ut={exports:{}},Vt={exports:{}},Gt={exports:{}},on;function Bi(){return on||(on=1,function(){Gt.exports=function(){function t(){}return t.prototype.handleError=function(r){throw new Error(r)},t}()}.call(R)),Gt.exports}var Wt={exports:{}},an;function qi(){return an||(an=1,function(){Wt.exports=function(){function t(r){this.arr=r||[]}return Object.defineProperty(t.prototype,"length",{get:function(){return this.arr.length}}),t.prototype.item=function(r){return this.arr[r]||null},t.prototype.contains=function(r){return this.arr.indexOf(r)!==-1},t}()}.call(R)),Wt.exports}var un;function ki(){return un||(un=1,function(){var t,r;t=Bi(),r=qi(),Vt.exports=function(){function h(){this.defaultParams={"canonical-form":!1,"cdata-sections":!1,comments:!1,"datatype-normalization":!1,"element-content-whitespace":!0,entities:!0,"error-handler":new t,infoset:!0,"validate-if-schema":!1,namespaces:!0,"namespace-declarations":!0,"normalize-characters":!1,"schema-location":"","schema-type":"","split-cdata-sections":!0,validate:!1,"well-formed":!0},this.params=Object.create(this.defaultParams)}return Object.defineProperty(h.prototype,"parameterNames",{get:function(){return new r(Object.keys(this.defaultParams))}}),h.prototype.getParameter=function(s){return this.params.hasOwnProperty(s)?this.params[s]:null},h.prototype.canSetParameter=function(s,l){return!0},h.prototype.setParameter=function(s,l){return l!=null?this.params[s]=l:delete this.params[s]},h}()}.call(R)),Vt.exports}var Ht={exports:{}},zt={exports:{}},Yt={exports:{}},cn;function $(){return cn||(cn=1,function(){Yt.exports={Element:1,Attribute:2,Text:3,CData:4,EntityReference:5,EntityDeclaration:6,ProcessingInstruction:7,Comment:8,Document:9,DocType:10,DocumentFragment:11,NotationDeclaration:12,Declaration:201,Raw:202,AttributeDeclaration:203,ElementDeclaration:204,Dummy:205}}.call(R)),Yt.exports}var Qt={exports:{}},ln;function or(){return ln||(ln=1,function(){var t;t=$(),rt(),Qt.exports=function(){function r(h,s,l){if(this.parent=h,this.parent&&(this.options=this.parent.options,this.stringify=this.parent.stringify),s==null)throw new Error("Missing attribute name. "+this.debugInfo(s));this.name=this.stringify.name(s),this.value=this.stringify.attValue(l),this.type=t.Attribute,this.isId=!1,this.schemaTypeInfo=null}return Object.defineProperty(r.prototype,"nodeType",{get:function(){return this.type}}),Object.defineProperty(r.prototype,"ownerElement",{get:function(){return this.parent}}),Object.defineProperty(r.prototype,"textContent",{get:function(){return this.value},set:function(h){return this.value=h||""}}),Object.defineProperty(r.prototype,"namespaceURI",{get:function(){return""}}),Object.defineProperty(r.prototype,"prefix",{get:function(){return""}}),Object.defineProperty(r.prototype,"localName",{get:function(){return this.name}}),Object.defineProperty(r.prototype,"specified",{get:function(){return!0}}),r.prototype.clone=function(){return Object.create(this)},r.prototype.toString=function(h){return this.options.writer.attribute(this,this.options.writer.filterOptions(h))},r.prototype.debugInfo=function(h){return h=h||this.name,h==null?"parent: <"+this.parent.name+">":"attribute: {"+h+"}, parent: <"+this.parent.name+">"},r.prototype.isEqualNode=function(h){return!(h.namespaceURI!==this.namespaceURI||h.prefix!==this.prefix||h.localName!==this.localName||h.value!==this.value)},r}()}.call(R)),Qt.exports}var $t={exports:{}},hn;function Oe(){return hn||(hn=1,function(){$t.exports=function(){function t(r){this.nodes=r}return Object.defineProperty(t.prototype,"length",{get:function(){return Object.keys(this.nodes).length||0}}),t.prototype.clone=function(){return this.nodes=null},t.prototype.getNamedItem=function(r){return this.nodes[r]},t.prototype.setNamedItem=function(r){var h;return h=this.nodes[r.nodeName],this.nodes[r.nodeName]=r,h||null},t.prototype.removeNamedItem=function(r){var h;return h=this.nodes[r],delete this.nodes[r],h||null},t.prototype.item=function(r){return this.nodes[Object.keys(this.nodes)[r]]||null},t.prototype.getNamedItemNS=function(r,h){throw new Error("This DOM method is not implemented.")},t.prototype.setNamedItemNS=function(r){throw new Error("This DOM method is not implemented.")},t.prototype.removeNamedItemNS=function(r,h){throw new Error("This DOM method is not implemented.")},t}()}.call(R)),$t.exports}var fn;function Ce(){return fn||(fn=1,function(){var t,r,h,s,l,n,e,i,c=function(T,E){for(var p in E)w.call(E,p)&&(T[p]=E[p]);function d(){this.constructor=T}return d.prototype=E.prototype,T.prototype=new d,T.__super__=E.prototype,T},w={}.hasOwnProperty;i=ft(),e=i.isObject,n=i.isFunction,l=i.getValue,s=rt(),t=$(),r=or(),h=Oe(),zt.exports=function(T){c(E,T);function E(p,d,m){var v,I,C,g;if(E.__super__.constructor.call(this,p),d==null)throw new Error("Missing element name. "+this.debugInfo());if(this.name=this.stringify.name(d),this.type=t.Element,this.attribs={},this.schemaTypeInfo=null,m!=null&&this.attribute(m),p.type===t.Document&&(this.isRoot=!0,this.documentObject=p,p.rootObject=this,p.children)){for(g=p.children,I=0,C=g.length;I<C;I++)if(v=g[I],v.type===t.DocType){v.name=this.name;break}}}return Object.defineProperty(E.prototype,"tagName",{get:function(){return this.name}}),Object.defineProperty(E.prototype,"namespaceURI",{get:function(){return""}}),Object.defineProperty(E.prototype,"prefix",{get:function(){return""}}),Object.defineProperty(E.prototype,"localName",{get:function(){return this.name}}),Object.defineProperty(E.prototype,"id",{get:function(){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),Object.defineProperty(E.prototype,"className",{get:function(){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),Object.defineProperty(E.prototype,"classList",{get:function(){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),Object.defineProperty(E.prototype,"attributes",{get:function(){return(!this.attributeMap||!this.attributeMap.nodes)&&(this.attributeMap=new h(this.attribs)),this.attributeMap}}),E.prototype.clone=function(){var p,d,m,v;m=Object.create(this),m.isRoot&&(m.documentObject=null),m.attribs={},v=this.attribs;for(d in v)w.call(v,d)&&(p=v[d],m.attribs[d]=p.clone());return m.children=[],this.children.forEach(function(I){var C;return C=I.clone(),C.parent=m,m.children.push(C)}),m},E.prototype.attribute=function(p,d){var m,v;if(p!=null&&(p=l(p)),e(p))for(m in p)w.call(p,m)&&(v=p[m],this.attribute(m,v));else n(d)&&(d=d.apply()),this.options.keepNullAttributes&&d==null?this.attribs[p]=new r(this,p,""):d!=null&&(this.attribs[p]=new r(this,p,d));return this},E.prototype.removeAttribute=function(p){var d,m,v;if(p==null)throw new Error("Missing attribute name. "+this.debugInfo());if(p=l(p),Array.isArray(p))for(m=0,v=p.length;m<v;m++)d=p[m],delete this.attribs[d];else delete this.attribs[p];return this},E.prototype.toString=function(p){return this.options.writer.element(this,this.options.writer.filterOptions(p))},E.prototype.att=function(p,d){return this.attribute(p,d)},E.prototype.a=function(p,d){return this.attribute(p,d)},E.prototype.getAttribute=function(p){return this.attribs.hasOwnProperty(p)?this.attribs[p].value:null},E.prototype.setAttribute=function(p,d){throw new Error("This DOM method is not implemented."+this.debugInfo())},E.prototype.getAttributeNode=function(p){return this.attribs.hasOwnProperty(p)?this.attribs[p]:null},E.prototype.setAttributeNode=function(p){throw new Error("This DOM method is not implemented."+this.debugInfo())},E.prototype.removeAttributeNode=function(p){throw new Error("This DOM method is not implemented."+this.debugInfo())},E.prototype.getElementsByTagName=function(p){throw new Error("This DOM method is not implemented."+this.debugInfo())},E.prototype.getAttributeNS=function(p,d){throw new Error("This DOM method is not implemented."+this.debugInfo())},E.prototype.setAttributeNS=function(p,d,m){throw new Error("This DOM method is not implemented."+this.debugInfo())},E.prototype.removeAttributeNS=function(p,d){throw new Error("This DOM method is not implemented."+this.debugInfo())},E.prototype.getAttributeNodeNS=function(p,d){throw new Error("This DOM method is not implemented."+this.debugInfo())},E.prototype.setAttributeNodeNS=function(p){throw new Error("This DOM method is not implemented."+this.debugInfo())},E.prototype.getElementsByTagNameNS=function(p,d){throw new Error("This DOM method is not implemented."+this.debugInfo())},E.prototype.hasAttribute=function(p){return this.attribs.hasOwnProperty(p)},E.prototype.hasAttributeNS=function(p,d){throw new Error("This DOM method is not implemented."+this.debugInfo())},E.prototype.setIdAttribute=function(p,d){return this.attribs.hasOwnProperty(p)?this.attribs[p].isId:d},E.prototype.setIdAttributeNS=function(p,d,m){throw new Error("This DOM method is not implemented."+this.debugInfo())},E.prototype.setIdAttributeNode=function(p,d){throw new Error("This DOM method is not implemented."+this.debugInfo())},E.prototype.getElementsByTagName=function(p){throw new Error("This DOM method is not implemented."+this.debugInfo())},E.prototype.getElementsByTagNameNS=function(p,d){throw new Error("This DOM method is not implemented."+this.debugInfo())},E.prototype.getElementsByClassName=function(p){throw new Error("This DOM method is not implemented."+this.debugInfo())},E.prototype.isEqualNode=function(p){var d,m,v;if(!E.__super__.isEqualNode.apply(this,arguments).isEqualNode(p)||p.namespaceURI!==this.namespaceURI||p.prefix!==this.prefix||p.localName!==this.localName||p.attribs.length!==this.attribs.length)return!1;for(d=m=0,v=this.attribs.length-1;0<=v?m<=v:m>=v;d=0<=v?++m:--m)if(!this.attribs[d].isEqualNode(p.attribs[d]))return!1;return!0},E}(s)}.call(R)),zt.exports}var Kt={exports:{}},Jt={exports:{}},pn;function Rt(){return pn||(pn=1,function(){var t,r=function(s,l){for(var n in l)h.call(l,n)&&(s[n]=l[n]);function e(){this.constructor=s}return e.prototype=l.prototype,s.prototype=new e,s.__super__=l.prototype,s},h={}.hasOwnProperty;t=rt(),Jt.exports=function(s){r(l,s);function l(n){l.__super__.constructor.call(this,n),this.value=""}return Object.defineProperty(l.prototype,"data",{get:function(){return this.value},set:function(n){return this.value=n||""}}),Object.defineProperty(l.prototype,"length",{get:function(){return this.value.length}}),Object.defineProperty(l.prototype,"textContent",{get:function(){return this.value},set:function(n){return this.value=n||""}}),l.prototype.clone=function(){return Object.create(this)},l.prototype.substringData=function(n,e){throw new Error("This DOM method is not implemented."+this.debugInfo())},l.prototype.appendData=function(n){throw new Error("This DOM method is not implemented."+this.debugInfo())},l.prototype.insertData=function(n,e){throw new Error("This DOM method is not implemented."+this.debugInfo())},l.prototype.deleteData=function(n,e){throw new Error("This DOM method is not implemented."+this.debugInfo())},l.prototype.replaceData=function(n,e,i){throw new Error("This DOM method is not implemented."+this.debugInfo())},l.prototype.isEqualNode=function(n){return!(!l.__super__.isEqualNode.apply(this,arguments).isEqualNode(n)||n.data!==this.data)},l}(t)}.call(R)),Jt.exports}var dn;function Ae(){return dn||(dn=1,function(){var t,r,h=function(l,n){for(var e in n)s.call(n,e)&&(l[e]=n[e]);function i(){this.constructor=l}return i.prototype=n.prototype,l.prototype=new i,l.__super__=n.prototype,l},s={}.hasOwnProperty;t=$(),r=Rt(),Kt.exports=function(l){h(n,l);function n(e,i){if(n.__super__.constructor.call(this,e),i==null)throw new Error("Missing CDATA text. "+this.debugInfo());this.name="#cdata-section",this.type=t.CData,this.value=this.stringify.cdata(i)}return n.prototype.clone=function(){return Object.create(this)},n.prototype.toString=function(e){return this.options.writer.cdata(this,this.options.writer.filterOptions(e))},n}(r)}.call(R)),Kt.exports}var Zt={exports:{}},mn;function Le(){return mn||(mn=1,function(){var t,r,h=function(l,n){for(var e in n)s.call(n,e)&&(l[e]=n[e]);function i(){this.constructor=l}return i.prototype=n.prototype,l.prototype=new i,l.__super__=n.prototype,l},s={}.hasOwnProperty;t=$(),r=Rt(),Zt.exports=function(l){h(n,l);function n(e,i){if(n.__super__.constructor.call(this,e),i==null)throw new Error("Missing comment text. "+this.debugInfo());this.name="#comment",this.type=t.Comment,this.value=this.stringify.comment(i)}return n.prototype.clone=function(){return Object.create(this)},n.prototype.toString=function(e){return this.options.writer.comment(this,this.options.writer.filterOptions(e))},n}(r)}.call(R)),Zt.exports}var te={exports:{}},yn;function Se(){return yn||(yn=1,function(){var t,r,h,s=function(n,e){for(var i in e)l.call(e,i)&&(n[i]=e[i]);function c(){this.constructor=n}return c.prototype=e.prototype,n.prototype=new c,n.__super__=e.prototype,n},l={}.hasOwnProperty;h=ft().isObject,r=rt(),t=$(),te.exports=function(n){s(e,n);function e(i,c,w,T){var E;e.__super__.constructor.call(this,i),h(c)&&(E=c,c=E.version,w=E.encoding,T=E.standalone),c||(c="1.0"),this.type=t.Declaration,this.version=this.stringify.xmlVersion(c),w!=null&&(this.encoding=this.stringify.xmlEncoding(w)),T!=null&&(this.standalone=this.stringify.xmlStandalone(T))}return e.prototype.toString=function(i){return this.options.writer.declaration(this,this.options.writer.filterOptions(i))},e}(r)}.call(R)),te.exports}var ee={exports:{}},ne={exports:{}},gn;function Pe(){return gn||(gn=1,function(){var t,r,h=function(l,n){for(var e in n)s.call(n,e)&&(l[e]=n[e]);function i(){this.constructor=l}return i.prototype=n.prototype,l.prototype=new i,l.__super__=n.prototype,l},s={}.hasOwnProperty;r=rt(),t=$(),ne.exports=function(l){h(n,l);function n(e,i,c,w,T,E){if(n.__super__.constructor.call(this,e),i==null)throw new Error("Missing DTD element name. "+this.debugInfo());if(c==null)throw new Error("Missing DTD attribute name. "+this.debugInfo(i));if(!w)throw new Error("Missing DTD attribute type. "+this.debugInfo(i));if(!T)throw new Error("Missing DTD attribute default. "+this.debugInfo(i));if(T.indexOf("#")!==0&&(T="#"+T),!T.match(/^(#REQUIRED|#IMPLIED|#FIXED|#DEFAULT)$/))throw new Error("Invalid default value type; expected: #REQUIRED, #IMPLIED, #FIXED or #DEFAULT. "+this.debugInfo(i));if(E&&!T.match(/^(#FIXED|#DEFAULT)$/))throw new Error("Default value only applies to #FIXED or #DEFAULT. "+this.debugInfo(i));this.elementName=this.stringify.name(i),this.type=t.AttributeDeclaration,this.attributeName=this.stringify.name(c),this.attributeType=this.stringify.dtdAttType(w),E&&(this.defaultValue=this.stringify.dtdAttDefault(E)),this.defaultValueType=T}return n.prototype.toString=function(e){return this.options.writer.dtdAttList(this,this.options.writer.filterOptions(e))},n}(r)}.call(R)),ne.exports}var re={exports:{}},Tn;function Me(){return Tn||(Tn=1,function(){var t,r,h,s=function(n,e){for(var i in e)l.call(e,i)&&(n[i]=e[i]);function c(){this.constructor=n}return c.prototype=e.prototype,n.prototype=new c,n.__super__=e.prototype,n},l={}.hasOwnProperty;h=ft().isObject,r=rt(),t=$(),re.exports=function(n){s(e,n);function e(i,c,w,T){if(e.__super__.constructor.call(this,i),w==null)throw new Error("Missing DTD entity name. "+this.debugInfo(w));if(T==null)throw new Error("Missing DTD entity value. "+this.debugInfo(w));if(this.pe=!!c,this.name=this.stringify.name(w),this.type=t.EntityDeclaration,!h(T))this.value=this.stringify.dtdEntityValue(T),this.internal=!0;else{if(!T.pubID&&!T.sysID)throw new Error("Public and/or system identifiers are required for an external entity. "+this.debugInfo(w));if(T.pubID&&!T.sysID)throw new Error("System identifier is required for a public external entity. "+this.debugInfo(w));if(this.internal=!1,T.pubID!=null&&(this.pubID=this.stringify.dtdPubID(T.pubID)),T.sysID!=null&&(this.sysID=this.stringify.dtdSysID(T.sysID)),T.nData!=null&&(this.nData=this.stringify.dtdNData(T.nData)),this.pe&&this.nData)throw new Error("Notation declaration is not allowed in a parameter entity. "+this.debugInfo(w))}}return Object.defineProperty(e.prototype,"publicId",{get:function(){return this.pubID}}),Object.defineProperty(e.prototype,"systemId",{get:function(){return this.sysID}}),Object.defineProperty(e.prototype,"notationName",{get:function(){return this.nData||null}}),Object.defineProperty(e.prototype,"inputEncoding",{get:function(){return null}}),Object.defineProperty(e.prototype,"xmlEncoding",{get:function(){return null}}),Object.defineProperty(e.prototype,"xmlVersion",{get:function(){return null}}),e.prototype.toString=function(i){return this.options.writer.dtdEntity(this,this.options.writer.filterOptions(i))},e}(r)}.call(R)),re.exports}var ie={exports:{}},En;function _e(){return En||(En=1,function(){var t,r,h=function(l,n){for(var e in n)s.call(n,e)&&(l[e]=n[e]);function i(){this.constructor=l}return i.prototype=n.prototype,l.prototype=new i,l.__super__=n.prototype,l},s={}.hasOwnProperty;r=rt(),t=$(),ie.exports=function(l){h(n,l);function n(e,i,c){if(n.__super__.constructor.call(this,e),i==null)throw new Error("Missing DTD element name. "+this.debugInfo());c||(c="(#PCDATA)"),Array.isArray(c)&&(c="("+c.join(",")+")"),this.name=this.stringify.name(i),this.type=t.ElementDeclaration,this.value=this.stringify.dtdElementValue(c)}return n.prototype.toString=function(e){return this.options.writer.dtdElement(this,this.options.writer.filterOptions(e))},n}(r)}.call(R)),ie.exports}var se={exports:{}},wn;function Re(){return wn||(wn=1,function(){var t,r,h=function(l,n){for(var e in n)s.call(n,e)&&(l[e]=n[e]);function i(){this.constructor=l}return i.prototype=n.prototype,l.prototype=new i,l.__super__=n.prototype,l},s={}.hasOwnProperty;r=rt(),t=$(),se.exports=function(l){h(n,l);function n(e,i,c){if(n.__super__.constructor.call(this,e),i==null)throw new Error("Missing DTD notation name. "+this.debugInfo(i));if(!c.pubID&&!c.sysID)throw new Error("Public or system identifiers are required for an external entity. "+this.debugInfo(i));this.name=this.stringify.name(i),this.type=t.NotationDeclaration,c.pubID!=null&&(this.pubID=this.stringify.dtdPubID(c.pubID)),c.sysID!=null&&(this.sysID=this.stringify.dtdSysID(c.sysID))}return Object.defineProperty(n.prototype,"publicId",{get:function(){return this.pubID}}),Object.defineProperty(n.prototype,"systemId",{get:function(){return this.sysID}}),n.prototype.toString=function(e){return this.options.writer.dtdNotation(this,this.options.writer.filterOptions(e))},n}(r)}.call(R)),se.exports}var bn;function je(){return bn||(bn=1,function(){var t,r,h,s,l,n,e,i,c=function(T,E){for(var p in E)w.call(E,p)&&(T[p]=E[p]);function d(){this.constructor=T}return d.prototype=E.prototype,T.prototype=new d,T.__super__=E.prototype,T},w={}.hasOwnProperty;i=ft().isObject,e=rt(),t=$(),r=Pe(),s=Me(),h=_e(),l=Re(),n=Oe(),ee.exports=function(T){c(E,T);function E(p,d,m){var v,I,C,g,u,y;if(E.__super__.constructor.call(this,p),this.type=t.DocType,p.children){for(g=p.children,I=0,C=g.length;I<C;I++)if(v=g[I],v.type===t.Element){this.name=v.name;break}}this.documentObject=p,i(d)&&(u=d,d=u.pubID,m=u.sysID),m==null&&(y=[d,m],m=y[0],d=y[1]),d!=null&&(this.pubID=this.stringify.dtdPubID(d)),m!=null&&(this.sysID=this.stringify.dtdSysID(m))}return Object.defineProperty(E.prototype,"entities",{get:function(){var p,d,m,v,I;for(v={},I=this.children,d=0,m=I.length;d<m;d++)p=I[d],p.type===t.EntityDeclaration&&!p.pe&&(v[p.name]=p);return new n(v)}}),Object.defineProperty(E.prototype,"notations",{get:function(){var p,d,m,v,I;for(v={},I=this.children,d=0,m=I.length;d<m;d++)p=I[d],p.type===t.NotationDeclaration&&(v[p.name]=p);return new n(v)}}),Object.defineProperty(E.prototype,"publicId",{get:function(){return this.pubID}}),Object.defineProperty(E.prototype,"systemId",{get:function(){return this.sysID}}),Object.defineProperty(E.prototype,"internalSubset",{get:function(){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),E.prototype.element=function(p,d){var m;return m=new h(this,p,d),this.children.push(m),this},E.prototype.attList=function(p,d,m,v,I){var C;return C=new r(this,p,d,m,v,I),this.children.push(C),this},E.prototype.entity=function(p,d){var m;return m=new s(this,!1,p,d),this.children.push(m),this},E.prototype.pEntity=function(p,d){var m;return m=new s(this,!0,p,d),this.children.push(m),this},E.prototype.notation=function(p,d){var m;return m=new l(this,p,d),this.children.push(m),this},E.prototype.toString=function(p){return this.options.writer.docType(this,this.options.writer.filterOptions(p))},E.prototype.ele=function(p,d){return this.element(p,d)},E.prototype.att=function(p,d,m,v,I){return this.attList(p,d,m,v,I)},E.prototype.ent=function(p,d){return this.entity(p,d)},E.prototype.pent=function(p,d){return this.pEntity(p,d)},E.prototype.not=function(p,d){return this.notation(p,d)},E.prototype.up=function(){return this.root()||this.documentObject},E.prototype.isEqualNode=function(p){return!(!E.__super__.isEqualNode.apply(this,arguments).isEqualNode(p)||p.name!==this.name||p.publicId!==this.publicId||p.systemId!==this.systemId)},E}(e)}.call(R)),ee.exports}var oe={exports:{}},vn;function Fe(){return vn||(vn=1,function(){var t,r,h=function(l,n){for(var e in n)s.call(n,e)&&(l[e]=n[e]);function i(){this.constructor=l}return i.prototype=n.prototype,l.prototype=new i,l.__super__=n.prototype,l},s={}.hasOwnProperty;t=$(),r=rt(),oe.exports=function(l){h(n,l);function n(e,i){if(n.__super__.constructor.call(this,e),i==null)throw new Error("Missing raw text. "+this.debugInfo());this.type=t.Raw,this.value=this.stringify.raw(i)}return n.prototype.clone=function(){return Object.create(this)},n.prototype.toString=function(e){return this.options.writer.raw(this,this.options.writer.filterOptions(e))},n}(r)}.call(R)),oe.exports}var ae={exports:{}},Nn;function Xe(){return Nn||(Nn=1,function(){var t,r,h=function(l,n){for(var e in n)s.call(n,e)&&(l[e]=n[e]);function i(){this.constructor=l}return i.prototype=n.prototype,l.prototype=new i,l.__super__=n.prototype,l},s={}.hasOwnProperty;t=$(),r=Rt(),ae.exports=function(l){h(n,l);function n(e,i){if(n.__super__.constructor.call(this,e),i==null)throw new Error("Missing element text. "+this.debugInfo());this.name="#text",this.type=t.Text,this.value=this.stringify.text(i)}return Object.defineProperty(n.prototype,"isElementContentWhitespace",{get:function(){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),Object.defineProperty(n.prototype,"wholeText",{get:function(){var e,i,c;for(c="",i=this.previousSibling;i;)c=i.data+c,i=i.previousSibling;for(c+=this.data,e=this.nextSibling;e;)c=c+e.data,e=e.nextSibling;return c}}),n.prototype.clone=function(){return Object.create(this)},n.prototype.toString=function(e){return this.options.writer.text(this,this.options.writer.filterOptions(e))},n.prototype.splitText=function(e){throw new Error("This DOM method is not implemented."+this.debugInfo())},n.prototype.replaceWholeText=function(e){throw new Error("This DOM method is not implemented."+this.debugInfo())},n}(r)}.call(R)),ae.exports}var ue={exports:{}},xn;function Be(){return xn||(xn=1,function(){var t,r,h=function(l,n){for(var e in n)s.call(n,e)&&(l[e]=n[e]);function i(){this.constructor=l}return i.prototype=n.prototype,l.prototype=new i,l.__super__=n.prototype,l},s={}.hasOwnProperty;t=$(),r=Rt(),ue.exports=function(l){h(n,l);function n(e,i,c){if(n.__super__.constructor.call(this,e),i==null)throw new Error("Missing instruction target. "+this.debugInfo());this.type=t.ProcessingInstruction,this.target=this.stringify.insTarget(i),this.name=this.target,c&&(this.value=this.stringify.insValue(c))}return n.prototype.clone=function(){return Object.create(this)},n.prototype.toString=function(e){return this.options.writer.processingInstruction(this,this.options.writer.filterOptions(e))},n.prototype.isEqualNode=function(e){return!(!n.__super__.isEqualNode.apply(this,arguments).isEqualNode(e)||e.target!==this.target)},n}(r)}.call(R)),ue.exports}var ce={exports:{}},Dn;function ar(){return Dn||(Dn=1,function(){var t,r,h=function(l,n){for(var e in n)s.call(n,e)&&(l[e]=n[e]);function i(){this.constructor=l}return i.prototype=n.prototype,l.prototype=new i,l.__super__=n.prototype,l},s={}.hasOwnProperty;r=rt(),t=$(),ce.exports=function(l){h(n,l);function n(e){n.__super__.constructor.call(this,e),this.type=t.Dummy}return n.prototype.clone=function(){return Object.create(this)},n.prototype.toString=function(e){return""},n}(r)}.call(R)),ce.exports}var le={exports:{}},In;function Ui(){return In||(In=1,function(){le.exports=function(){function t(r){this.nodes=r}return Object.defineProperty(t.prototype,"length",{get:function(){return this.nodes.length||0}}),t.prototype.clone=function(){return this.nodes=null},t.prototype.item=function(r){return this.nodes[r]||null},t}()}.call(R)),le.exports}var he={exports:{}},On;function Vi(){return On||(On=1,function(){he.exports={Disconnected:1,Preceding:2,Following:4,Contains:8,ContainedBy:16,ImplementationSpecific:32}}.call(R)),he.exports}var Cn;function rt(){return Cn||(Cn=1,function(){var t,r,h,s,l,n,e,i,c,w,T,E,p,d,m,v,I,C={}.hasOwnProperty;I=ft(),v=I.isObject,m=I.isFunction,d=I.isEmpty,p=I.getValue,i=null,h=null,s=null,l=null,n=null,T=null,E=null,w=null,e=null,r=null,c=null,t=null,Ht.exports=function(){function g(u){this.parent=u,this.parent&&(this.options=this.parent.options,this.stringify=this.parent.stringify),this.value=null,this.children=[],this.baseURI=null,i||(i=Ce(),h=Ae(),s=Le(),l=Se(),n=je(),T=Fe(),E=Xe(),w=Be(),e=ar(),r=$(),c=Ui(),Oe(),t=Vi())}return Object.defineProperty(g.prototype,"nodeName",{get:function(){return this.name}}),Object.defineProperty(g.prototype,"nodeType",{get:function(){return this.type}}),Object.defineProperty(g.prototype,"nodeValue",{get:function(){return this.value}}),Object.defineProperty(g.prototype,"parentNode",{get:function(){return this.parent}}),Object.defineProperty(g.prototype,"childNodes",{get:function(){return(!this.childNodeList||!this.childNodeList.nodes)&&(this.childNodeList=new c(this.children)),this.childNodeList}}),Object.defineProperty(g.prototype,"firstChild",{get:function(){return this.children[0]||null}}),Object.defineProperty(g.prototype,"lastChild",{get:function(){return this.children[this.children.length-1]||null}}),Object.defineProperty(g.prototype,"previousSibling",{get:function(){var u;return u=this.parent.children.indexOf(this),this.parent.children[u-1]||null}}),Object.defineProperty(g.prototype,"nextSibling",{get:function(){var u;return u=this.parent.children.indexOf(this),this.parent.children[u+1]||null}}),Object.defineProperty(g.prototype,"ownerDocument",{get:function(){return this.document()||null}}),Object.defineProperty(g.prototype,"textContent",{get:function(){var u,y,x,S,P;if(this.nodeType===r.Element||this.nodeType===r.DocumentFragment){for(P="",S=this.children,y=0,x=S.length;y<x;y++)u=S[y],u.textContent&&(P+=u.textContent);return P}else return null},set:function(u){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),g.prototype.setParent=function(u){var y,x,S,P,D;for(this.parent=u,u&&(this.options=u.options,this.stringify=u.stringify),P=this.children,D=[],x=0,S=P.length;x<S;x++)y=P[x],D.push(y.setParent(this));return D},g.prototype.element=function(u,y,x){var S,P,D,a,O,L,_,j,k,H,U;if(L=null,y===null&&x==null&&(k=[{},null],y=k[0],x=k[1]),y==null&&(y={}),y=p(y),v(y)||(H=[y,x],x=H[0],y=H[1]),u!=null&&(u=p(u)),Array.isArray(u))for(D=0,_=u.length;D<_;D++)P=u[D],L=this.element(P);else if(m(u))L=this.element(u.apply());else if(v(u)){for(O in u)if(C.call(u,O))if(U=u[O],m(U)&&(U=U.apply()),!this.options.ignoreDecorators&&this.stringify.convertAttKey&&O.indexOf(this.stringify.convertAttKey)===0)L=this.attribute(O.substr(this.stringify.convertAttKey.length),U);else if(!this.options.separateArrayItems&&Array.isArray(U)&&d(U))L=this.dummy();else if(v(U)&&d(U))L=this.element(O);else if(!this.options.keepNullNodes&&U==null)L=this.dummy();else if(!this.options.separateArrayItems&&Array.isArray(U))for(a=0,j=U.length;a<j;a++)P=U[a],S={},S[O]=P,L=this.element(S);else v(U)?!this.options.ignoreDecorators&&this.stringify.convertTextKey&&O.indexOf(this.stringify.convertTextKey)===0?L=this.element(U):(L=this.element(O),L.element(U)):L=this.element(O,U)}else!this.options.keepNullNodes&&x===null?L=this.dummy():!this.options.ignoreDecorators&&this.stringify.convertTextKey&&u.indexOf(this.stringify.convertTextKey)===0?L=this.text(x):!this.options.ignoreDecorators&&this.stringify.convertCDataKey&&u.indexOf(this.stringify.convertCDataKey)===0?L=this.cdata(x):!this.options.ignoreDecorators&&this.stringify.convertCommentKey&&u.indexOf(this.stringify.convertCommentKey)===0?L=this.comment(x):!this.options.ignoreDecorators&&this.stringify.convertRawKey&&u.indexOf(this.stringify.convertRawKey)===0?L=this.raw(x):!this.options.ignoreDecorators&&this.stringify.convertPIKey&&u.indexOf(this.stringify.convertPIKey)===0?L=this.instruction(u.substr(this.stringify.convertPIKey.length),x):L=this.node(u,y,x);if(L==null)throw new Error("Could not create any elements with: "+u+". "+this.debugInfo());return L},g.prototype.insertBefore=function(u,y,x){var S,P,D,a,O;if(u?.type)return D=u,a=y,D.setParent(this),a?(P=children.indexOf(a),O=children.splice(P),children.push(D),Array.prototype.push.apply(children,O)):children.push(D),D;if(this.isRoot)throw new Error("Cannot insert elements at root level. "+this.debugInfo(u));return P=this.parent.children.indexOf(this),O=this.parent.children.splice(P),S=this.parent.element(u,y,x),Array.prototype.push.apply(this.parent.children,O),S},g.prototype.insertAfter=function(u,y,x){var S,P,D;if(this.isRoot)throw new Error("Cannot insert elements at root level. "+this.debugInfo(u));return P=this.parent.children.indexOf(this),D=this.parent.children.splice(P+1),S=this.parent.element(u,y,x),Array.prototype.push.apply(this.parent.children,D),S},g.prototype.remove=function(){var u;if(this.isRoot)throw new Error("Cannot remove the root element. "+this.debugInfo());return u=this.parent.children.indexOf(this),[].splice.apply(this.parent.children,[u,u-u+1].concat([])),this.parent},g.prototype.node=function(u,y,x){var S,P;return u!=null&&(u=p(u)),y||(y={}),y=p(y),v(y)||(P=[y,x],x=P[0],y=P[1]),S=new i(this,u,y),x!=null&&S.text(x),this.children.push(S),S},g.prototype.text=function(u){var y;return v(u)&&this.element(u),y=new E(this,u),this.children.push(y),this},g.prototype.cdata=function(u){var y;return y=new h(this,u),this.children.push(y),this},g.prototype.comment=function(u){var y;return y=new s(this,u),this.children.push(y),this},g.prototype.commentBefore=function(u){var y,x;return y=this.parent.children.indexOf(this),x=this.parent.children.splice(y),this.parent.comment(u),Array.prototype.push.apply(this.parent.children,x),this},g.prototype.commentAfter=function(u){var y,x;return y=this.parent.children.indexOf(this),x=this.parent.children.splice(y+1),this.parent.comment(u),Array.prototype.push.apply(this.parent.children,x),this},g.prototype.raw=function(u){var y;return y=new T(this,u),this.children.push(y),this},g.prototype.dummy=function(){var u;return u=new e(this),u},g.prototype.instruction=function(u,y){var x,S,P,D,a;if(u!=null&&(u=p(u)),y!=null&&(y=p(y)),Array.isArray(u))for(D=0,a=u.length;D<a;D++)x=u[D],this.instruction(x);else if(v(u))for(x in u)C.call(u,x)&&(S=u[x],this.instruction(x,S));else m(y)&&(y=y.apply()),P=new w(this,u,y),this.children.push(P);return this},g.prototype.instructionBefore=function(u,y){var x,S;return x=this.parent.children.indexOf(this),S=this.parent.children.splice(x),this.parent.instruction(u,y),Array.prototype.push.apply(this.parent.children,S),this},g.prototype.instructionAfter=function(u,y){var x,S;return x=this.parent.children.indexOf(this),S=this.parent.children.splice(x+1),this.parent.instruction(u,y),Array.prototype.push.apply(this.parent.children,S),this},g.prototype.declaration=function(u,y,x){var S,P;return S=this.document(),P=new l(S,u,y,x),S.children.length===0?S.children.unshift(P):S.children[0].type===r.Declaration?S.children[0]=P:S.children.unshift(P),S.root()||S},g.prototype.dtd=function(u,y){var x,S,P,D,a,O,L,_,j,k;for(S=this.document(),P=new n(S,u,y),j=S.children,D=a=0,L=j.length;a<L;D=++a)if(x=j[D],x.type===r.DocType)return S.children[D]=P,P;for(k=S.children,D=O=0,_=k.length;O<_;D=++O)if(x=k[D],x.isRoot)return S.children.splice(D,0,P),P;return S.children.push(P),P},g.prototype.up=function(){if(this.isRoot)throw new Error("The root node has no parent. Use doc() if you need to get the document object.");return this.parent},g.prototype.root=function(){var u;for(u=this;u;){if(u.type===r.Document)return u.rootObject;if(u.isRoot)return u;u=u.parent}},g.prototype.document=function(){var u;for(u=this;u;){if(u.type===r.Document)return u;u=u.parent}},g.prototype.end=function(u){return this.document().end(u)},g.prototype.prev=function(){var u;if(u=this.parent.children.indexOf(this),u<1)throw new Error("Already at the first node. "+this.debugInfo());return this.parent.children[u-1]},g.prototype.next=function(){var u;if(u=this.parent.children.indexOf(this),u===-1||u===this.parent.children.length-1)throw new Error("Already at the last node. "+this.debugInfo());return this.parent.children[u+1]},g.prototype.importDocument=function(u){var y;return y=u.root().clone(),y.parent=this,y.isRoot=!1,this.children.push(y),this},g.prototype.debugInfo=function(u){var y,x;return u=u||this.name,u==null&&!((y=this.parent)!=null&&y.name)?"":u==null?"parent: <"+this.parent.name+">":(x=this.parent)!=null&&x.name?"node: <"+u+">, parent: <"+this.parent.name+">":"node: <"+u+">"},g.prototype.ele=function(u,y,x){return this.element(u,y,x)},g.prototype.nod=function(u,y,x){return this.node(u,y,x)},g.prototype.txt=function(u){return this.text(u)},g.prototype.dat=function(u){return this.cdata(u)},g.prototype.com=function(u){return this.comment(u)},g.prototype.ins=function(u,y){return this.instruction(u,y)},g.prototype.doc=function(){return this.document()},g.prototype.dec=function(u,y,x){return this.declaration(u,y,x)},g.prototype.e=function(u,y,x){return this.element(u,y,x)},g.prototype.n=function(u,y,x){return this.node(u,y,x)},g.prototype.t=function(u){return this.text(u)},g.prototype.d=function(u){return this.cdata(u)},g.prototype.c=function(u){return this.comment(u)},g.prototype.r=function(u){return this.raw(u)},g.prototype.i=function(u,y){return this.instruction(u,y)},g.prototype.u=function(){return this.up()},g.prototype.importXMLBuilder=function(u){return this.importDocument(u)},g.prototype.replaceChild=function(u,y){throw new Error("This DOM method is not implemented."+this.debugInfo())},g.prototype.removeChild=function(u){throw new Error("This DOM method is not implemented."+this.debugInfo())},g.prototype.appendChild=function(u){throw new Error("This DOM method is not implemented."+this.debugInfo())},g.prototype.hasChildNodes=function(){return this.children.length!==0},g.prototype.cloneNode=function(u){throw new Error("This DOM method is not implemented."+this.debugInfo())},g.prototype.normalize=function(){throw new Error("This DOM method is not implemented."+this.debugInfo())},g.prototype.isSupported=function(u,y){return!0},g.prototype.hasAttributes=function(){return this.attribs.length!==0},g.prototype.compareDocumentPosition=function(u){var y,x;return y=this,y===u?0:this.document()!==u.document()?(x=t.Disconnected|t.ImplementationSpecific,Math.random()<.5?x|=t.Preceding:x|=t.Following,x):y.isAncestor(u)?t.Contains|t.Preceding:y.isDescendant(u)?t.Contains|t.Following:y.isPreceding(u)?t.Preceding:t.Following},g.prototype.isSameNode=function(u){throw new Error("This DOM method is not implemented."+this.debugInfo())},g.prototype.lookupPrefix=function(u){throw new Error("This DOM method is not implemented."+this.debugInfo())},g.prototype.isDefaultNamespace=function(u){throw new Error("This DOM method is not implemented."+this.debugInfo())},g.prototype.lookupNamespaceURI=function(u){throw new Error("This DOM method is not implemented."+this.debugInfo())},g.prototype.isEqualNode=function(u){var y,x,S;if(u.nodeType!==this.nodeType||u.children.length!==this.children.length)return!1;for(y=x=0,S=this.children.length-1;0<=S?x<=S:x>=S;y=0<=S?++x:--x)if(!this.children[y].isEqualNode(u.children[y]))return!1;return!0},g.prototype.getFeature=function(u,y){throw new Error("This DOM method is not implemented."+this.debugInfo())},g.prototype.setUserData=function(u,y,x){throw new Error("This DOM method is not implemented."+this.debugInfo())},g.prototype.getUserData=function(u){throw new Error("This DOM method is not implemented."+this.debugInfo())},g.prototype.contains=function(u){return u?u===this||this.isDescendant(u):!1},g.prototype.isDescendant=function(u){var y,x,S,P,D;for(D=this.children,S=0,P=D.length;S<P;S++)if(y=D[S],u===y||(x=y.isDescendant(u),x))return!0;return!1},g.prototype.isAncestor=function(u){return u.isDescendant(this)},g.prototype.isPreceding=function(u){var y,x;return y=this.treePosition(u),x=this.treePosition(this),y===-1||x===-1?!1:y<x},g.prototype.isFollowing=function(u){var y,x;return y=this.treePosition(u),x=this.treePosition(this),y===-1||x===-1?!1:y>x},g.prototype.treePosition=function(u){var y,x;return x=0,y=!1,this.foreachTreeNode(this.document(),function(S){if(x++,!y&&S===u)return y=!0}),y?x:-1},g.prototype.foreachTreeNode=function(u,y){var x,S,P,D,a;for(u||(u=this.document()),D=u.children,S=0,P=D.length;S<P;S++){if(x=D[S],a=y(x))return a;if(a=this.foreachTreeNode(x,y),a)return a}},g}()}.call(R)),Ht.exports}var fe={exports:{}},An;function ur(){return An||(An=1,function(){var t=function(h,s){return function(){return h.apply(s,arguments)}},r={}.hasOwnProperty;fe.exports=function(){function h(s){this.assertLegalName=t(this.assertLegalName,this),this.assertLegalChar=t(this.assertLegalChar,this);var l,n,e;s||(s={}),this.options=s,this.options.version||(this.options.version="1.0"),n=s.stringify||{};for(l in n)r.call(n,l)&&(e=n[l],this[l]=e)}return h.prototype.name=function(s){return this.options.noValidation?s:this.assertLegalName(""+s||"")},h.prototype.text=function(s){return this.options.noValidation?s:this.assertLegalChar(this.textEscape(""+s||""))},h.prototype.cdata=function(s){return this.options.noValidation?s:(s=""+s||"",s=s.replace("]]>","]]]]><![CDATA[>"),this.assertLegalChar(s))},h.prototype.comment=function(s){if(this.options.noValidation)return s;if(s=""+s||"",s.match(/--/))throw new Error("Comment text cannot contain double-hypen: "+s);return this.assertLegalChar(s)},h.prototype.raw=function(s){return this.options.noValidation?s:""+s||""},h.prototype.attValue=function(s){return this.options.noValidation?s:this.assertLegalChar(this.attEscape(s=""+s||""))},h.prototype.insTarget=function(s){return this.options.noValidation?s:this.assertLegalChar(""+s||"")},h.prototype.insValue=function(s){if(this.options.noValidation)return s;if(s=""+s||"",s.match(/\?>/))throw new Error("Invalid processing instruction value: "+s);return this.assertLegalChar(s)},h.prototype.xmlVersion=function(s){if(this.options.noValidation)return s;if(s=""+s||"",!s.match(/1\.[0-9]+/))throw new Error("Invalid version number: "+s);return s},h.prototype.xmlEncoding=function(s){if(this.options.noValidation)return s;if(s=""+s||"",!s.match(/^[A-Za-z](?:[A-Za-z0-9._-])*$/))throw new Error("Invalid encoding: "+s);return this.assertLegalChar(s)},h.prototype.xmlStandalone=function(s){return this.options.noValidation?s:s?"yes":"no"},h.prototype.dtdPubID=function(s){return this.options.noValidation?s:this.assertLegalChar(""+s||"")},h.prototype.dtdSysID=function(s){return this.options.noValidation?s:this.assertLegalChar(""+s||"")},h.prototype.dtdElementValue=function(s){return this.options.noValidation?s:this.assertLegalChar(""+s||"")},h.prototype.dtdAttType=function(s){return this.options.noValidation?s:this.assertLegalChar(""+s||"")},h.prototype.dtdAttDefault=function(s){return this.options.noValidation?s:this.assertLegalChar(""+s||"")},h.prototype.dtdEntityValue=function(s){return this.options.noValidation?s:this.assertLegalChar(""+s||"")},h.prototype.dtdNData=function(s){return this.options.noValidation?s:this.assertLegalChar(""+s||"")},h.prototype.convertAttKey="@",h.prototype.convertPIKey="?",h.prototype.convertTextKey="#text",h.prototype.convertCDataKey="#cdata",h.prototype.convertCommentKey="#comment",h.prototype.convertRawKey="#raw",h.prototype.assertLegalChar=function(s){var l,n;if(this.options.noValidation)return s;if(l="",this.options.version==="1.0"){if(l=/[\0-\x08\x0B\f\x0E-\x1F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,n=s.match(l))throw new Error("Invalid character in string: "+s+" at index "+n.index)}else if(this.options.version==="1.1"&&(l=/[\0\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,n=s.match(l)))throw new Error("Invalid character in string: "+s+" at index "+n.index);return s},h.prototype.assertLegalName=function(s){var l;if(this.options.noValidation)return s;if(this.assertLegalChar(s),l=/^([:A-Z_a-z\xC0-\xD6\xD8-\xF6\xF8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])([\x2D\.0-:A-Z_a-z\xB7\xC0-\xD6\xD8-\xF6\xF8-\u037D\u037F-\u1FFF\u200C\u200D\u203F\u2040\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])*$/,!s.match(l))throw new Error("Invalid character in name");return s},h.prototype.textEscape=function(s){var l;return this.options.noValidation?s:(l=this.options.noDoubleEncoding?/(?!&\S+;)&/g:/&/g,s.replace(l,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\r/g,"&#xD;"))},h.prototype.attEscape=function(s){var l;return this.options.noValidation?s:(l=this.options.noDoubleEncoding?/(?!&\S+;)&/g:/&/g,s.replace(l,"&amp;").replace(/</g,"&lt;").replace(/"/g,"&quot;").replace(/\t/g,"&#x9;").replace(/\n/g,"&#xA;").replace(/\r/g,"&#xD;"))},h}()}.call(R)),fe.exports}var pe={exports:{}},de={exports:{}},me={exports:{}},Ln;function jt(){return Ln||(Ln=1,function(){me.exports={None:0,OpenTag:1,InsideTag:2,CloseTag:3}}.call(R)),me.exports}var Sn;function cr(){return Sn||(Sn=1,function(){var t,r,h,s={}.hasOwnProperty;h=ft().assign,t=$(),Se(),je(),Ae(),Le(),Ce(),Fe(),Xe(),Be(),ar(),Pe(),_e(),Me(),Re(),r=jt(),de.exports=function(){function l(n){var e,i,c;n||(n={}),this.options=n,i=n.writer||{};for(e in i)s.call(i,e)&&(c=i[e],this["_"+e]=this[e],this[e]=c)}return l.prototype.filterOptions=function(n){var e,i,c,w,T,E,p,d;return n||(n={}),n=h({},this.options,n),e={writer:this},e.pretty=n.pretty||!1,e.allowEmpty=n.allowEmpty||!1,e.indent=(i=n.indent)!=null?i:"  ",e.newline=(c=n.newline)!=null?c:`
`,e.offset=(w=n.offset)!=null?w:0,e.dontPrettyTextNodes=(T=(E=n.dontPrettyTextNodes)!=null?E:n.dontprettytextnodes)!=null?T:0,e.spaceBeforeSlash=(p=(d=n.spaceBeforeSlash)!=null?d:n.spacebeforeslash)!=null?p:"",e.spaceBeforeSlash===!0&&(e.spaceBeforeSlash=" "),e.suppressPrettyCount=0,e.user={},e.state=r.None,e},l.prototype.indent=function(n,e,i){var c;return!e.pretty||e.suppressPrettyCount?"":e.pretty&&(c=(i||0)+e.offset+1,c>0)?new Array(c).join(e.indent):""},l.prototype.endline=function(n,e,i){return!e.pretty||e.suppressPrettyCount?"":e.newline},l.prototype.attribute=function(n,e,i){var c;return this.openAttribute(n,e,i),c=" "+n.name+'="'+n.value+'"',this.closeAttribute(n,e,i),c},l.prototype.cdata=function(n,e,i){var c;return this.openNode(n,e,i),e.state=r.OpenTag,c=this.indent(n,e,i)+"<![CDATA[",e.state=r.InsideTag,c+=n.value,e.state=r.CloseTag,c+="]]>"+this.endline(n,e,i),e.state=r.None,this.closeNode(n,e,i),c},l.prototype.comment=function(n,e,i){var c;return this.openNode(n,e,i),e.state=r.OpenTag,c=this.indent(n,e,i)+"<!-- ",e.state=r.InsideTag,c+=n.value,e.state=r.CloseTag,c+=" -->"+this.endline(n,e,i),e.state=r.None,this.closeNode(n,e,i),c},l.prototype.declaration=function(n,e,i){var c;return this.openNode(n,e,i),e.state=r.OpenTag,c=this.indent(n,e,i)+"<?xml",e.state=r.InsideTag,c+=' version="'+n.version+'"',n.encoding!=null&&(c+=' encoding="'+n.encoding+'"'),n.standalone!=null&&(c+=' standalone="'+n.standalone+'"'),e.state=r.CloseTag,c+=e.spaceBeforeSlash+"?>",c+=this.endline(n,e,i),e.state=r.None,this.closeNode(n,e,i),c},l.prototype.docType=function(n,e,i){var c,w,T,E,p;if(i||(i=0),this.openNode(n,e,i),e.state=r.OpenTag,E=this.indent(n,e,i),E+="<!DOCTYPE "+n.root().name,n.pubID&&n.sysID?E+=' PUBLIC "'+n.pubID+'" "'+n.sysID+'"':n.sysID&&(E+=' SYSTEM "'+n.sysID+'"'),n.children.length>0){for(E+=" [",E+=this.endline(n,e,i),e.state=r.InsideTag,p=n.children,w=0,T=p.length;w<T;w++)c=p[w],E+=this.writeChildNode(c,e,i+1);e.state=r.CloseTag,E+="]"}return e.state=r.CloseTag,E+=e.spaceBeforeSlash+">",E+=this.endline(n,e,i),e.state=r.None,this.closeNode(n,e,i),E},l.prototype.element=function(n,e,i){var c,w,T,E,p,d,m,v,I,C,g,u,y,x;i||(i=0),C=!1,g="",this.openNode(n,e,i),e.state=r.OpenTag,g+=this.indent(n,e,i)+"<"+n.name,u=n.attribs;for(I in u)s.call(u,I)&&(c=u[I],g+=this.attribute(c,e,i));if(T=n.children.length,E=T===0?null:n.children[0],T===0||n.children.every(function(S){return(S.type===t.Text||S.type===t.Raw)&&S.value===""}))e.allowEmpty?(g+=">",e.state=r.CloseTag,g+="</"+n.name+">"+this.endline(n,e,i)):(e.state=r.CloseTag,g+=e.spaceBeforeSlash+"/>"+this.endline(n,e,i));else if(e.pretty&&T===1&&(E.type===t.Text||E.type===t.Raw)&&E.value!=null)g+=">",e.state=r.InsideTag,e.suppressPrettyCount++,C=!0,g+=this.writeChildNode(E,e,i+1),e.suppressPrettyCount--,C=!1,e.state=r.CloseTag,g+="</"+n.name+">"+this.endline(n,e,i);else{if(e.dontPrettyTextNodes){for(y=n.children,p=0,m=y.length;p<m;p++)if(w=y[p],(w.type===t.Text||w.type===t.Raw)&&w.value!=null){e.suppressPrettyCount++,C=!0;break}}for(g+=">"+this.endline(n,e,i),e.state=r.InsideTag,x=n.children,d=0,v=x.length;d<v;d++)w=x[d],g+=this.writeChildNode(w,e,i+1);e.state=r.CloseTag,g+=this.indent(n,e,i)+"</"+n.name+">",C&&e.suppressPrettyCount--,g+=this.endline(n,e,i),e.state=r.None}return this.closeNode(n,e,i),g},l.prototype.writeChildNode=function(n,e,i){switch(n.type){case t.CData:return this.cdata(n,e,i);case t.Comment:return this.comment(n,e,i);case t.Element:return this.element(n,e,i);case t.Raw:return this.raw(n,e,i);case t.Text:return this.text(n,e,i);case t.ProcessingInstruction:return this.processingInstruction(n,e,i);case t.Dummy:return"";case t.Declaration:return this.declaration(n,e,i);case t.DocType:return this.docType(n,e,i);case t.AttributeDeclaration:return this.dtdAttList(n,e,i);case t.ElementDeclaration:return this.dtdElement(n,e,i);case t.EntityDeclaration:return this.dtdEntity(n,e,i);case t.NotationDeclaration:return this.dtdNotation(n,e,i);default:throw new Error("Unknown XML node type: "+n.constructor.name)}},l.prototype.processingInstruction=function(n,e,i){var c;return this.openNode(n,e,i),e.state=r.OpenTag,c=this.indent(n,e,i)+"<?",e.state=r.InsideTag,c+=n.target,n.value&&(c+=" "+n.value),e.state=r.CloseTag,c+=e.spaceBeforeSlash+"?>",c+=this.endline(n,e,i),e.state=r.None,this.closeNode(n,e,i),c},l.prototype.raw=function(n,e,i){var c;return this.openNode(n,e,i),e.state=r.OpenTag,c=this.indent(n,e,i),e.state=r.InsideTag,c+=n.value,e.state=r.CloseTag,c+=this.endline(n,e,i),e.state=r.None,this.closeNode(n,e,i),c},l.prototype.text=function(n,e,i){var c;return this.openNode(n,e,i),e.state=r.OpenTag,c=this.indent(n,e,i),e.state=r.InsideTag,c+=n.value,e.state=r.CloseTag,c+=this.endline(n,e,i),e.state=r.None,this.closeNode(n,e,i),c},l.prototype.dtdAttList=function(n,e,i){var c;return this.openNode(n,e,i),e.state=r.OpenTag,c=this.indent(n,e,i)+"<!ATTLIST",e.state=r.InsideTag,c+=" "+n.elementName+" "+n.attributeName+" "+n.attributeType,n.defaultValueType!=="#DEFAULT"&&(c+=" "+n.defaultValueType),n.defaultValue&&(c+=' "'+n.defaultValue+'"'),e.state=r.CloseTag,c+=e.spaceBeforeSlash+">"+this.endline(n,e,i),e.state=r.None,this.closeNode(n,e,i),c},l.prototype.dtdElement=function(n,e,i){var c;return this.openNode(n,e,i),e.state=r.OpenTag,c=this.indent(n,e,i)+"<!ELEMENT",e.state=r.InsideTag,c+=" "+n.name+" "+n.value,e.state=r.CloseTag,c+=e.spaceBeforeSlash+">"+this.endline(n,e,i),e.state=r.None,this.closeNode(n,e,i),c},l.prototype.dtdEntity=function(n,e,i){var c;return this.openNode(n,e,i),e.state=r.OpenTag,c=this.indent(n,e,i)+"<!ENTITY",e.state=r.InsideTag,n.pe&&(c+=" %"),c+=" "+n.name,n.value?c+=' "'+n.value+'"':(n.pubID&&n.sysID?c+=' PUBLIC "'+n.pubID+'" "'+n.sysID+'"':n.sysID&&(c+=' SYSTEM "'+n.sysID+'"'),n.nData&&(c+=" NDATA "+n.nData)),e.state=r.CloseTag,c+=e.spaceBeforeSlash+">"+this.endline(n,e,i),e.state=r.None,this.closeNode(n,e,i),c},l.prototype.dtdNotation=function(n,e,i){var c;return this.openNode(n,e,i),e.state=r.OpenTag,c=this.indent(n,e,i)+"<!NOTATION",e.state=r.InsideTag,c+=" "+n.name,n.pubID&&n.sysID?c+=' PUBLIC "'+n.pubID+'" "'+n.sysID+'"':n.pubID?c+=' PUBLIC "'+n.pubID+'"':n.sysID&&(c+=' SYSTEM "'+n.sysID+'"'),e.state=r.CloseTag,c+=e.spaceBeforeSlash+">"+this.endline(n,e,i),e.state=r.None,this.closeNode(n,e,i),c},l.prototype.openNode=function(n,e,i){},l.prototype.closeNode=function(n,e,i){},l.prototype.openAttribute=function(n,e,i){},l.prototype.closeAttribute=function(n,e,i){},l}()}.call(R)),de.exports}var Pn;function qe(){return Pn||(Pn=1,function(){var t,r=function(s,l){for(var n in l)h.call(l,n)&&(s[n]=l[n]);function e(){this.constructor=s}return e.prototype=l.prototype,s.prototype=new e,s.__super__=l.prototype,s},h={}.hasOwnProperty;t=cr(),pe.exports=function(s){r(l,s);function l(n){l.__super__.constructor.call(this,n)}return l.prototype.document=function(n,e){var i,c,w,T,E;for(e=this.filterOptions(e),T="",E=n.children,c=0,w=E.length;c<w;c++)i=E[c],T+=this.writeChildNode(i,e,0);return e.pretty&&T.slice(-e.newline.length)===e.newline&&(T=T.slice(0,-e.newline.length)),T},l}(t)}.call(R)),pe.exports}var Mn;function lr(){return Mn||(Mn=1,function(){var t,r,h,s,l,n,e,i=function(w,T){for(var E in T)c.call(T,E)&&(w[E]=T[E]);function p(){this.constructor=w}return p.prototype=T.prototype,w.prototype=new p,w.__super__=T.prototype,w},c={}.hasOwnProperty;e=ft().isPlainObject,h=sr(),r=ki(),s=rt(),t=$(),n=ur(),l=qe(),Ut.exports=function(w){i(T,w);function T(E){T.__super__.constructor.call(this,null),this.name="#document",this.type=t.Document,this.documentURI=null,this.domConfig=new r,E||(E={}),E.writer||(E.writer=new l),this.options=E,this.stringify=new n(E)}return Object.defineProperty(T.prototype,"implementation",{value:new h}),Object.defineProperty(T.prototype,"doctype",{get:function(){var E,p,d,m;for(m=this.children,p=0,d=m.length;p<d;p++)if(E=m[p],E.type===t.DocType)return E;return null}}),Object.defineProperty(T.prototype,"documentElement",{get:function(){return this.rootObject||null}}),Object.defineProperty(T.prototype,"inputEncoding",{get:function(){return null}}),Object.defineProperty(T.prototype,"strictErrorChecking",{get:function(){return!1}}),Object.defineProperty(T.prototype,"xmlEncoding",{get:function(){return this.children.length!==0&&this.children[0].type===t.Declaration?this.children[0].encoding:null}}),Object.defineProperty(T.prototype,"xmlStandalone",{get:function(){return this.children.length!==0&&this.children[0].type===t.Declaration?this.children[0].standalone==="yes":!1}}),Object.defineProperty(T.prototype,"xmlVersion",{get:function(){return this.children.length!==0&&this.children[0].type===t.Declaration?this.children[0].version:"1.0"}}),Object.defineProperty(T.prototype,"URL",{get:function(){return this.documentURI}}),Object.defineProperty(T.prototype,"origin",{get:function(){return null}}),Object.defineProperty(T.prototype,"compatMode",{get:function(){return null}}),Object.defineProperty(T.prototype,"characterSet",{get:function(){return null}}),Object.defineProperty(T.prototype,"contentType",{get:function(){return null}}),T.prototype.end=function(E){var p;return p={},E?e(E)&&(p=E,E=this.options.writer):E=this.options.writer,E.document(this,E.filterOptions(p))},T.prototype.toString=function(E){return this.options.writer.document(this,this.options.writer.filterOptions(E))},T.prototype.createElement=function(E){throw new Error("This DOM method is not implemented."+this.debugInfo())},T.prototype.createDocumentFragment=function(){throw new Error("This DOM method is not implemented."+this.debugInfo())},T.prototype.createTextNode=function(E){throw new Error("This DOM method is not implemented."+this.debugInfo())},T.prototype.createComment=function(E){throw new Error("This DOM method is not implemented."+this.debugInfo())},T.prototype.createCDATASection=function(E){throw new Error("This DOM method is not implemented."+this.debugInfo())},T.prototype.createProcessingInstruction=function(E,p){throw new Error("This DOM method is not implemented."+this.debugInfo())},T.prototype.createAttribute=function(E){throw new Error("This DOM method is not implemented."+this.debugInfo())},T.prototype.createEntityReference=function(E){throw new Error("This DOM method is not implemented."+this.debugInfo())},T.prototype.getElementsByTagName=function(E){throw new Error("This DOM method is not implemented."+this.debugInfo())},T.prototype.importNode=function(E,p){throw new Error("This DOM method is not implemented."+this.debugInfo())},T.prototype.createElementNS=function(E,p){throw new Error("This DOM method is not implemented."+this.debugInfo())},T.prototype.createAttributeNS=function(E,p){throw new Error("This DOM method is not implemented."+this.debugInfo())},T.prototype.getElementsByTagNameNS=function(E,p){throw new Error("This DOM method is not implemented."+this.debugInfo())},T.prototype.getElementById=function(E){throw new Error("This DOM method is not implemented."+this.debugInfo())},T.prototype.adoptNode=function(E){throw new Error("This DOM method is not implemented."+this.debugInfo())},T.prototype.normalizeDocument=function(){throw new Error("This DOM method is not implemented."+this.debugInfo())},T.prototype.renameNode=function(E,p,d){throw new Error("This DOM method is not implemented."+this.debugInfo())},T.prototype.getElementsByClassName=function(E){throw new Error("This DOM method is not implemented."+this.debugInfo())},T.prototype.createEvent=function(E){throw new Error("This DOM method is not implemented."+this.debugInfo())},T.prototype.createRange=function(){throw new Error("This DOM method is not implemented."+this.debugInfo())},T.prototype.createNodeIterator=function(E,p,d){throw new Error("This DOM method is not implemented."+this.debugInfo())},T.prototype.createTreeWalker=function(E,p,d){throw new Error("This DOM method is not implemented."+this.debugInfo())},T}(s)}.call(R)),Ut.exports}var ye={exports:{}},_n;function Gi(){return _n||(_n=1,function(){var t,r,h,s,l,n,e,i,c,w,T,E,p,d,m,v,I,C,g,u,y,x,S,P={}.hasOwnProperty;S=ft(),y=S.isObject,u=S.isFunction,x=S.isPlainObject,g=S.getValue,t=$(),E=lr(),p=Ce(),s=Ae(),l=Le(),m=Fe(),C=Xe(),d=Be(),w=Se(),T=je(),n=Pe(),i=Me(),e=_e(),c=Re(),h=or(),I=ur(),v=qe(),r=jt(),ye.exports=function(){function D(a,O,L){var _;this.name="?xml",this.type=t.Document,a||(a={}),_={},a.writer?x(a.writer)&&(_=a.writer,a.writer=new v):a.writer=new v,this.options=a,this.writer=a.writer,this.writerOptions=this.writer.filterOptions(_),this.stringify=new I(a),this.onDataCallback=O||function(){},this.onEndCallback=L||function(){},this.currentNode=null,this.currentLevel=-1,this.openTags={},this.documentStarted=!1,this.documentCompleted=!1,this.root=null}return D.prototype.createChildNode=function(a){var O,L,_,j,k,H,U,X;switch(a.type){case t.CData:this.cdata(a.value);break;case t.Comment:this.comment(a.value);break;case t.Element:_={},U=a.attribs;for(L in U)P.call(U,L)&&(O=U[L],_[L]=O.value);this.node(a.name,_);break;case t.Dummy:this.dummy();break;case t.Raw:this.raw(a.value);break;case t.Text:this.text(a.value);break;case t.ProcessingInstruction:this.instruction(a.target,a.value);break;default:throw new Error("This XML node type is not supported in a JS object: "+a.constructor.name)}for(X=a.children,k=0,H=X.length;k<H;k++)j=X[k],this.createChildNode(j),j.type===t.Element&&this.up();return this},D.prototype.dummy=function(){return this},D.prototype.node=function(a,O,L){var _;if(a==null)throw new Error("Missing node name.");if(this.root&&this.currentLevel===-1)throw new Error("Document can only have one root node. "+this.debugInfo(a));return this.openCurrent(),a=g(a),O==null&&(O={}),O=g(O),y(O)||(_=[O,L],L=_[0],O=_[1]),this.currentNode=new p(this,a,O),this.currentNode.children=!1,this.currentLevel++,this.openTags[this.currentLevel]=this.currentNode,L!=null&&this.text(L),this},D.prototype.element=function(a,O,L){var _,j,k,H,U,X;if(this.currentNode&&this.currentNode.type===t.DocType)this.dtdElement.apply(this,arguments);else if(Array.isArray(a)||y(a)||u(a))for(H=this.options.noValidation,this.options.noValidation=!0,X=new E(this.options).element("TEMP_ROOT"),X.element(a),this.options.noValidation=H,U=X.children,j=0,k=U.length;j<k;j++)_=U[j],this.createChildNode(_),_.type===t.Element&&this.up();else this.node(a,O,L);return this},D.prototype.attribute=function(a,O){var L,_;if(!this.currentNode||this.currentNode.children)throw new Error("att() can only be used immediately after an ele() call in callback mode. "+this.debugInfo(a));if(a!=null&&(a=g(a)),y(a))for(L in a)P.call(a,L)&&(_=a[L],this.attribute(L,_));else u(O)&&(O=O.apply()),this.options.keepNullAttributes&&O==null?this.currentNode.attribs[a]=new h(this,a,""):O!=null&&(this.currentNode.attribs[a]=new h(this,a,O));return this},D.prototype.text=function(a){var O;return this.openCurrent(),O=new C(this,a),this.onData(this.writer.text(O,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},D.prototype.cdata=function(a){var O;return this.openCurrent(),O=new s(this,a),this.onData(this.writer.cdata(O,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},D.prototype.comment=function(a){var O;return this.openCurrent(),O=new l(this,a),this.onData(this.writer.comment(O,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},D.prototype.raw=function(a){var O;return this.openCurrent(),O=new m(this,a),this.onData(this.writer.raw(O,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},D.prototype.instruction=function(a,O){var L,_,j,k,H;if(this.openCurrent(),a!=null&&(a=g(a)),O!=null&&(O=g(O)),Array.isArray(a))for(L=0,k=a.length;L<k;L++)_=a[L],this.instruction(_);else if(y(a))for(_ in a)P.call(a,_)&&(j=a[_],this.instruction(_,j));else u(O)&&(O=O.apply()),H=new d(this,a,O),this.onData(this.writer.processingInstruction(H,this.writerOptions,this.currentLevel+1),this.currentLevel+1);return this},D.prototype.declaration=function(a,O,L){var _;if(this.openCurrent(),this.documentStarted)throw new Error("declaration() must be the first node.");return _=new w(this,a,O,L),this.onData(this.writer.declaration(_,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},D.prototype.doctype=function(a,O,L){if(this.openCurrent(),a==null)throw new Error("Missing root node name.");if(this.root)throw new Error("dtd() must come before the root node.");return this.currentNode=new T(this,O,L),this.currentNode.rootNodeName=a,this.currentNode.children=!1,this.currentLevel++,this.openTags[this.currentLevel]=this.currentNode,this},D.prototype.dtdElement=function(a,O){var L;return this.openCurrent(),L=new e(this,a,O),this.onData(this.writer.dtdElement(L,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},D.prototype.attList=function(a,O,L,_,j){var k;return this.openCurrent(),k=new n(this,a,O,L,_,j),this.onData(this.writer.dtdAttList(k,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},D.prototype.entity=function(a,O){var L;return this.openCurrent(),L=new i(this,!1,a,O),this.onData(this.writer.dtdEntity(L,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},D.prototype.pEntity=function(a,O){var L;return this.openCurrent(),L=new i(this,!0,a,O),this.onData(this.writer.dtdEntity(L,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},D.prototype.notation=function(a,O){var L;return this.openCurrent(),L=new c(this,a,O),this.onData(this.writer.dtdNotation(L,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},D.prototype.up=function(){if(this.currentLevel<0)throw new Error("The document node has no parent.");return this.currentNode?(this.currentNode.children?this.closeNode(this.currentNode):this.openNode(this.currentNode),this.currentNode=null):this.closeNode(this.openTags[this.currentLevel]),delete this.openTags[this.currentLevel],this.currentLevel--,this},D.prototype.end=function(){for(;this.currentLevel>=0;)this.up();return this.onEnd()},D.prototype.openCurrent=function(){if(this.currentNode)return this.currentNode.children=!0,this.openNode(this.currentNode)},D.prototype.openNode=function(a){var O,L,_,j;if(!a.isOpen){if(!this.root&&this.currentLevel===0&&a.type===t.Element&&(this.root=a),L="",a.type===t.Element){this.writerOptions.state=r.OpenTag,L=this.writer.indent(a,this.writerOptions,this.currentLevel)+"<"+a.name,j=a.attribs;for(_ in j)P.call(j,_)&&(O=j[_],L+=this.writer.attribute(O,this.writerOptions,this.currentLevel));L+=(a.children?">":"/>")+this.writer.endline(a,this.writerOptions,this.currentLevel),this.writerOptions.state=r.InsideTag}else this.writerOptions.state=r.OpenTag,L=this.writer.indent(a,this.writerOptions,this.currentLevel)+"<!DOCTYPE "+a.rootNodeName,a.pubID&&a.sysID?L+=' PUBLIC "'+a.pubID+'" "'+a.sysID+'"':a.sysID&&(L+=' SYSTEM "'+a.sysID+'"'),a.children?(L+=" [",this.writerOptions.state=r.InsideTag):(this.writerOptions.state=r.CloseTag,L+=">"),L+=this.writer.endline(a,this.writerOptions,this.currentLevel);return this.onData(L,this.currentLevel),a.isOpen=!0}},D.prototype.closeNode=function(a){var O;if(!a.isClosed)return O="",this.writerOptions.state=r.CloseTag,a.type===t.Element?O=this.writer.indent(a,this.writerOptions,this.currentLevel)+"</"+a.name+">"+this.writer.endline(a,this.writerOptions,this.currentLevel):O=this.writer.indent(a,this.writerOptions,this.currentLevel)+"]>"+this.writer.endline(a,this.writerOptions,this.currentLevel),this.writerOptions.state=r.None,this.onData(O,this.currentLevel),a.isClosed=!0},D.prototype.onData=function(a,O){return this.documentStarted=!0,this.onDataCallback(a,O+1)},D.prototype.onEnd=function(){return this.documentCompleted=!0,this.onEndCallback()},D.prototype.debugInfo=function(a){return a==null?"":"node: <"+a+">"},D.prototype.ele=function(){return this.element.apply(this,arguments)},D.prototype.nod=function(a,O,L){return this.node(a,O,L)},D.prototype.txt=function(a){return this.text(a)},D.prototype.dat=function(a){return this.cdata(a)},D.prototype.com=function(a){return this.comment(a)},D.prototype.ins=function(a,O){return this.instruction(a,O)},D.prototype.dec=function(a,O,L){return this.declaration(a,O,L)},D.prototype.dtd=function(a,O,L){return this.doctype(a,O,L)},D.prototype.e=function(a,O,L){return this.element(a,O,L)},D.prototype.n=function(a,O,L){return this.node(a,O,L)},D.prototype.t=function(a){return this.text(a)},D.prototype.d=function(a){return this.cdata(a)},D.prototype.c=function(a){return this.comment(a)},D.prototype.r=function(a){return this.raw(a)},D.prototype.i=function(a,O){return this.instruction(a,O)},D.prototype.att=function(){return this.currentNode&&this.currentNode.type===t.DocType?this.attList.apply(this,arguments):this.attribute.apply(this,arguments)},D.prototype.a=function(){return this.currentNode&&this.currentNode.type===t.DocType?this.attList.apply(this,arguments):this.attribute.apply(this,arguments)},D.prototype.ent=function(a,O){return this.entity(a,O)},D.prototype.pent=function(a,O){return this.pEntity(a,O)},D.prototype.not=function(a,O){return this.notation(a,O)},D}()}.call(R)),ye.exports}var ge={exports:{}},Rn;function Wi(){return Rn||(Rn=1,function(){var t,r,h,s=function(n,e){for(var i in e)l.call(e,i)&&(n[i]=e[i]);function c(){this.constructor=n}return c.prototype=e.prototype,n.prototype=new c,n.__super__=e.prototype,n},l={}.hasOwnProperty;t=$(),h=cr(),r=jt(),ge.exports=function(n){s(e,n);function e(i,c){this.stream=i,e.__super__.constructor.call(this,c)}return e.prototype.endline=function(i,c,w){return i.isLastRootNode&&c.state===r.CloseTag?"":e.__super__.endline.call(this,i,c,w)},e.prototype.document=function(i,c){var w,T,E,p,d,m,v,I,C;for(v=i.children,T=E=0,d=v.length;E<d;T=++E)w=v[T],w.isLastRootNode=T===i.children.length-1;for(c=this.filterOptions(c),I=i.children,C=[],p=0,m=I.length;p<m;p++)w=I[p],C.push(this.writeChildNode(w,c,0));return C},e.prototype.attribute=function(i,c,w){return this.stream.write(e.__super__.attribute.call(this,i,c,w))},e.prototype.cdata=function(i,c,w){return this.stream.write(e.__super__.cdata.call(this,i,c,w))},e.prototype.comment=function(i,c,w){return this.stream.write(e.__super__.comment.call(this,i,c,w))},e.prototype.declaration=function(i,c,w){return this.stream.write(e.__super__.declaration.call(this,i,c,w))},e.prototype.docType=function(i,c,w){var T,E,p,d;if(w||(w=0),this.openNode(i,c,w),c.state=r.OpenTag,this.stream.write(this.indent(i,c,w)),this.stream.write("<!DOCTYPE "+i.root().name),i.pubID&&i.sysID?this.stream.write(' PUBLIC "'+i.pubID+'" "'+i.sysID+'"'):i.sysID&&this.stream.write(' SYSTEM "'+i.sysID+'"'),i.children.length>0){for(this.stream.write(" ["),this.stream.write(this.endline(i,c,w)),c.state=r.InsideTag,d=i.children,E=0,p=d.length;E<p;E++)T=d[E],this.writeChildNode(T,c,w+1);c.state=r.CloseTag,this.stream.write("]")}return c.state=r.CloseTag,this.stream.write(c.spaceBeforeSlash+">"),this.stream.write(this.endline(i,c,w)),c.state=r.None,this.closeNode(i,c,w)},e.prototype.element=function(i,c,w){var T,E,p,d,m,v,I,C,g;w||(w=0),this.openNode(i,c,w),c.state=r.OpenTag,this.stream.write(this.indent(i,c,w)+"<"+i.name),C=i.attribs;for(I in C)l.call(C,I)&&(T=C[I],this.attribute(T,c,w));if(p=i.children.length,d=p===0?null:i.children[0],p===0||i.children.every(function(u){return(u.type===t.Text||u.type===t.Raw)&&u.value===""}))c.allowEmpty?(this.stream.write(">"),c.state=r.CloseTag,this.stream.write("</"+i.name+">")):(c.state=r.CloseTag,this.stream.write(c.spaceBeforeSlash+"/>"));else if(c.pretty&&p===1&&(d.type===t.Text||d.type===t.Raw)&&d.value!=null)this.stream.write(">"),c.state=r.InsideTag,c.suppressPrettyCount++,this.writeChildNode(d,c,w+1),c.suppressPrettyCount--,c.state=r.CloseTag,this.stream.write("</"+i.name+">");else{for(this.stream.write(">"+this.endline(i,c,w)),c.state=r.InsideTag,g=i.children,m=0,v=g.length;m<v;m++)E=g[m],this.writeChildNode(E,c,w+1);c.state=r.CloseTag,this.stream.write(this.indent(i,c,w)+"</"+i.name+">")}return this.stream.write(this.endline(i,c,w)),c.state=r.None,this.closeNode(i,c,w)},e.prototype.processingInstruction=function(i,c,w){return this.stream.write(e.__super__.processingInstruction.call(this,i,c,w))},e.prototype.raw=function(i,c,w){return this.stream.write(e.__super__.raw.call(this,i,c,w))},e.prototype.text=function(i,c,w){return this.stream.write(e.__super__.text.call(this,i,c,w))},e.prototype.dtdAttList=function(i,c,w){return this.stream.write(e.__super__.dtdAttList.call(this,i,c,w))},e.prototype.dtdElement=function(i,c,w){return this.stream.write(e.__super__.dtdElement.call(this,i,c,w))},e.prototype.dtdEntity=function(i,c,w){return this.stream.write(e.__super__.dtdEntity.call(this,i,c,w))},e.prototype.dtdNotation=function(i,c,w){return this.stream.write(e.__super__.dtdNotation.call(this,i,c,w))},e}(h)}.call(R)),ge.exports}var jn;function Hi(){return jn||(jn=1,function(){var t,r,h,s,l,n,e,i,c,w;w=ft(),i=w.assign,c=w.isFunction,h=sr(),s=lr(),l=Gi(),e=qe(),n=Wi(),t=$(),r=jt(),lt.create=function(T,E,p,d){var m,v;if(T==null)throw new Error("Root element needs a name.");return d=i({},E,p,d),m=new s(d),v=m.element(T),d.headless||(m.declaration(d),(d.pubID!=null||d.sysID!=null)&&m.dtd(d)),v},lt.begin=function(T,E,p){var d;return c(T)&&(d=[T,E],E=d[0],p=d[1],T={}),E?new l(T,E,p):new s(T)},lt.stringWriter=function(T){return new e(T)},lt.streamWriter=function(T,E){return new n(T,E)},lt.implementation=new h,lt.nodeType=t,lt.writerState=r}.call(R)),lt}var Fn;function zi(){return Fn||(Fn=1,function(){var t,r,h,s,l,n={}.hasOwnProperty;t=Hi(),r=Ie().defaults,s=function(e){return typeof e=="string"&&(e.indexOf("&")>=0||e.indexOf(">")>=0||e.indexOf("<")>=0)},l=function(e){return"<![CDATA["+h(e)+"]]>"},h=function(e){return e.replace("]]>","]]]]><![CDATA[>")},qt.Builder=function(){function e(i){var c,w,T;this.options={},w=r["0.2"];for(c in w)n.call(w,c)&&(T=w[c],this.options[c]=T);for(c in i)n.call(i,c)&&(T=i[c],this.options[c]=T)}return e.prototype.buildObject=function(i){var c,w,T,E,p;return c=this.options.attrkey,w=this.options.charkey,Object.keys(i).length===1&&this.options.rootName===r["0.2"].rootName?(p=Object.keys(i)[0],i=i[p]):p=this.options.rootName,T=function(d){return function(m,v){var I,C,g,u,y,x;if(typeof v!="object")d.options.cdata&&s(v)?m.raw(l(v)):m.txt(v);else if(Array.isArray(v)){for(u in v)if(n.call(v,u)){C=v[u];for(y in C)g=C[y],m=T(m.ele(y),g).up()}}else for(y in v)if(n.call(v,y))if(C=v[y],y===c){if(typeof C=="object")for(I in C)x=C[I],m=m.att(I,x)}else if(y===w)d.options.cdata&&s(C)?m=m.raw(l(C)):m=m.txt(C);else if(Array.isArray(C))for(u in C)n.call(C,u)&&(g=C[u],typeof g=="string"?d.options.cdata&&s(g)?m=m.ele(y).raw(l(g)).up():m=m.ele(y,g).up():m=T(m.ele(y),g).up());else typeof C=="object"?m=T(m.ele(y),C).up():typeof C=="string"&&d.options.cdata&&s(C)?m=m.ele(y).raw(l(C)).up():(C==null&&(C=""),m=m.ele(y,C.toString()).up());return m}}(this),E=t.create(p,this.options.xmldec,this.options.doctype,{headless:this.options.headless,allowSurrogateChars:this.options.allowSurrogateChars}),T(E,i).end(this.options.renderOpts)},e}()}.call(R)),qt}var Te={},Ee={},Xn;function Yi(){return Xn||(Xn=1,function(t){(function(r){r.parser=function(f,o){return new s(f,o)},r.SAXParser=s,r.SAXStream=T,r.createStream=w,r.MAX_BUFFER_LENGTH=64*1024;var h=["comment","sgmlDecl","textNode","tagName","doctype","procInstName","procInstBody","entity","attribName","attribValue","cdata","script"];r.EVENTS=["text","processinginstruction","sgmldeclaration","doctype","comment","opentagstart","attribute","opentag","closetag","opencdata","cdata","closecdata","error","end","ready","script","opennamespace","closenamespace"];function s(f,o){if(!(this instanceof s))return new s(f,o);var A=this;n(A),A.q=A.c="",A.bufferCheckPosition=r.MAX_BUFFER_LENGTH,A.opt=o||{},A.opt.lowercase=A.opt.lowercase||A.opt.lowercasetags,A.looseCase=A.opt.lowercase?"toLowerCase":"toUpperCase",A.tags=[],A.closed=A.closedRoot=A.sawRoot=!1,A.tag=A.error=null,A.strict=!!f,A.noscript=!!(f||A.opt.noscript),A.state=a.BEGIN,A.strictEntities=A.opt.strictEntities,A.ENTITIES=A.strictEntities?Object.create(r.XML_ENTITIES):Object.create(r.ENTITIES),A.attribList=[],A.opt.xmlns&&(A.ns=Object.create(v)),A.trackPosition=A.opt.position!==!1,A.trackPosition&&(A.position=A.line=A.column=0),L(A,"onready")}Object.create||(Object.create=function(f){function o(){}o.prototype=f;var A=new o;return A}),Object.keys||(Object.keys=function(f){var o=[];for(var A in f)f.hasOwnProperty(A)&&o.push(A);return o});function l(f){for(var o=Math.max(r.MAX_BUFFER_LENGTH,10),A=0,N=0,G=h.length;N<G;N++){var z=f[h[N]].length;if(z>o)switch(h[N]){case"textNode":j(f);break;case"cdata":_(f,"oncdata",f.cdata),f.cdata="";break;case"script":_(f,"onscript",f.script),f.script="";break;default:H(f,"Max buffer length exceeded: "+h[N])}A=Math.max(A,z)}var Q=r.MAX_BUFFER_LENGTH-A;f.bufferCheckPosition=Q+f.position}function n(f){for(var o=0,A=h.length;o<A;o++)f[h[o]]=""}function e(f){j(f),f.cdata!==""&&(_(f,"oncdata",f.cdata),f.cdata=""),f.script!==""&&(_(f,"onscript",f.script),f.script="")}s.prototype={end:function(){U(this)},write:dt,resume:function(){return this.error=null,this},close:function(){return this.write(null)},flush:function(){e(this)}};var i;try{i=wr.Stream}catch{i=function(){}}var c=r.EVENTS.filter(function(f){return f!=="error"&&f!=="end"});function w(f,o){return new T(f,o)}function T(f,o){if(!(this instanceof T))return new T(f,o);i.apply(this),this._parser=new s(f,o),this.writable=!0,this.readable=!0;var A=this;this._parser.onend=function(){A.emit("end")},this._parser.onerror=function(N){A.emit("error",N),A._parser.error=null},this._decoder=null,c.forEach(function(N){Object.defineProperty(A,"on"+N,{get:function(){return A._parser["on"+N]},set:function(G){if(!G)return A.removeAllListeners(N),A._parser["on"+N]=G,G;A.on(N,G)},enumerable:!0,configurable:!1})})}T.prototype=Object.create(i.prototype,{constructor:{value:T}}),T.prototype.write=function(f){if(typeof Buffer=="function"&&typeof Buffer.isBuffer=="function"&&Buffer.isBuffer(f)){if(!this._decoder){var o=br().StringDecoder;this._decoder=new o("utf8")}f=this._decoder.write(f)}return this._parser.write(f.toString()),this.emit("data",f),!0},T.prototype.end=function(f){return f&&f.length&&this.write(f),this._parser.end(),!0},T.prototype.on=function(f,o){var A=this;return!A._parser["on"+f]&&c.indexOf(f)!==-1&&(A._parser["on"+f]=function(){var N=arguments.length===1?[arguments[0]]:Array.apply(null,arguments);N.splice(0,0,f),A.emit.apply(A,N)}),i.prototype.on.call(A,f,o)};var E="[CDATA[",p="DOCTYPE",d="http://www.w3.org/XML/1998/namespace",m="http://www.w3.org/2000/xmlns/",v={xml:d,xmlns:m},I=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,C=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/,g=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,u=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/;function y(f){return f===" "||f===`
`||f==="\r"||f==="	"}function x(f){return f==='"'||f==="'"}function S(f){return f===">"||y(f)}function P(f,o){return f.test(o)}function D(f,o){return!P(f,o)}var a=0;r.STATE={BEGIN:a++,BEGIN_WHITESPACE:a++,TEXT:a++,TEXT_ENTITY:a++,OPEN_WAKA:a++,SGML_DECL:a++,SGML_DECL_QUOTED:a++,DOCTYPE:a++,DOCTYPE_QUOTED:a++,DOCTYPE_DTD:a++,DOCTYPE_DTD_QUOTED:a++,COMMENT_STARTING:a++,COMMENT:a++,COMMENT_ENDING:a++,COMMENT_ENDED:a++,CDATA:a++,CDATA_ENDING:a++,CDATA_ENDING_2:a++,PROC_INST:a++,PROC_INST_BODY:a++,PROC_INST_ENDING:a++,OPEN_TAG:a++,OPEN_TAG_SLASH:a++,ATTRIB:a++,ATTRIB_NAME:a++,ATTRIB_NAME_SAW_WHITE:a++,ATTRIB_VALUE:a++,ATTRIB_VALUE_QUOTED:a++,ATTRIB_VALUE_CLOSED:a++,ATTRIB_VALUE_UNQUOTED:a++,ATTRIB_VALUE_ENTITY_Q:a++,ATTRIB_VALUE_ENTITY_U:a++,CLOSE_TAG:a++,CLOSE_TAG_SAW_WHITE:a++,SCRIPT:a++,SCRIPT_ENDING:a++},r.XML_ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'"},r.ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'",AElig:198,Aacute:193,Acirc:194,Agrave:192,Aring:197,Atilde:195,Auml:196,Ccedil:199,ETH:208,Eacute:201,Ecirc:202,Egrave:200,Euml:203,Iacute:205,Icirc:206,Igrave:204,Iuml:207,Ntilde:209,Oacute:211,Ocirc:212,Ograve:210,Oslash:216,Otilde:213,Ouml:214,THORN:222,Uacute:218,Ucirc:219,Ugrave:217,Uuml:220,Yacute:221,aacute:225,acirc:226,aelig:230,agrave:224,aring:229,atilde:227,auml:228,ccedil:231,eacute:233,ecirc:234,egrave:232,eth:240,euml:235,iacute:237,icirc:238,igrave:236,iuml:239,ntilde:241,oacute:243,ocirc:244,ograve:242,oslash:248,otilde:245,ouml:246,szlig:223,thorn:254,uacute:250,ucirc:251,ugrave:249,uuml:252,yacute:253,yuml:255,copy:169,reg:174,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,ordf:170,laquo:171,not:172,shy:173,macr:175,deg:176,plusmn:177,sup1:185,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,times:215,divide:247,OElig:338,oelig:339,Scaron:352,scaron:353,Yuml:376,fnof:402,circ:710,tilde:732,Alpha:913,Beta:914,Gamma:915,Delta:916,Epsilon:917,Zeta:918,Eta:919,Theta:920,Iota:921,Kappa:922,Lambda:923,Mu:924,Nu:925,Xi:926,Omicron:927,Pi:928,Rho:929,Sigma:931,Tau:932,Upsilon:933,Phi:934,Chi:935,Psi:936,Omega:937,alpha:945,beta:946,gamma:947,delta:948,epsilon:949,zeta:950,eta:951,theta:952,iota:953,kappa:954,lambda:955,mu:956,nu:957,xi:958,omicron:959,pi:960,rho:961,sigmaf:962,sigma:963,tau:964,upsilon:965,phi:966,chi:967,psi:968,omega:969,thetasym:977,upsih:978,piv:982,ensp:8194,emsp:8195,thinsp:8201,zwnj:8204,zwj:8205,lrm:8206,rlm:8207,ndash:8211,mdash:8212,lsquo:8216,rsquo:8217,sbquo:8218,ldquo:8220,rdquo:8221,bdquo:8222,dagger:8224,Dagger:8225,bull:8226,hellip:8230,permil:8240,prime:8242,Prime:8243,lsaquo:8249,rsaquo:8250,oline:8254,frasl:8260,euro:8364,image:8465,weierp:8472,real:8476,trade:8482,alefsym:8501,larr:8592,uarr:8593,rarr:8594,darr:8595,harr:8596,crarr:8629,lArr:8656,uArr:8657,rArr:8658,dArr:8659,hArr:8660,forall:8704,part:8706,exist:8707,empty:8709,nabla:8711,isin:8712,notin:8713,ni:8715,prod:8719,sum:8721,minus:8722,lowast:8727,radic:8730,prop:8733,infin:8734,ang:8736,and:8743,or:8744,cap:8745,cup:8746,int:8747,there4:8756,sim:8764,cong:8773,asymp:8776,ne:8800,equiv:8801,le:8804,ge:8805,sub:8834,sup:8835,nsub:8836,sube:8838,supe:8839,oplus:8853,otimes:8855,perp:8869,sdot:8901,lceil:8968,rceil:8969,lfloor:8970,rfloor:8971,lang:9001,rang:9002,loz:9674,spades:9824,clubs:9827,hearts:9829,diams:9830},Object.keys(r.ENTITIES).forEach(function(f){var o=r.ENTITIES[f],A=typeof o=="number"?String.fromCharCode(o):o;r.ENTITIES[f]=A});for(var O in r.STATE)r.STATE[r.STATE[O]]=O;a=r.STATE;function L(f,o,A){f[o]&&f[o](A)}function _(f,o,A){f.textNode&&j(f),L(f,o,A)}function j(f){f.textNode=k(f.opt,f.textNode),f.textNode&&L(f,"ontext",f.textNode),f.textNode=""}function k(f,o){return f.trim&&(o=o.trim()),f.normalize&&(o=o.replace(/\s+/g," ")),o}function H(f,o){return j(f),f.trackPosition&&(o+=`
Line: `+f.line+`
Column: `+f.column+`
Char: `+f.c),o=new Error(o),f.error=o,L(f,"onerror",o),f}function U(f){return f.sawRoot&&!f.closedRoot&&X(f,"Unclosed root tag"),f.state!==a.BEGIN&&f.state!==a.BEGIN_WHITESPACE&&f.state!==a.TEXT&&H(f,"Unexpected end"),j(f),f.c="",f.closed=!0,L(f,"onend"),s.call(f,f.strict,f.opt),f}function X(f,o){if(typeof f!="object"||!(f instanceof s))throw new Error("bad call to strictFail");f.strict&&H(f,o)}function Ft(f){f.strict||(f.tagName=f.tagName[f.looseCase]());var o=f.tags[f.tags.length-1]||f,A=f.tag={name:f.tagName,attributes:{}};f.opt.xmlns&&(A.ns=o.ns),f.attribList.length=0,_(f,"onopentagstart",A)}function pt(f,o){var A=f.indexOf(":"),N=A<0?["",f]:f.split(":"),G=N[0],z=N[1];return o&&f==="xmlns"&&(G="xmlns",z=""),{prefix:G,local:z}}function ot(f){if(f.strict||(f.attribName=f.attribName[f.looseCase]()),f.attribList.indexOf(f.attribName)!==-1||f.tag.attributes.hasOwnProperty(f.attribName)){f.attribName=f.attribValue="";return}if(f.opt.xmlns){var o=pt(f.attribName,!0),A=o.prefix,N=o.local;if(A==="xmlns")if(N==="xml"&&f.attribValue!==d)X(f,"xml: prefix must be bound to "+d+`
Actual: `+f.attribValue);else if(N==="xmlns"&&f.attribValue!==m)X(f,"xmlns: prefix must be bound to "+m+`
Actual: `+f.attribValue);else{var G=f.tag,z=f.tags[f.tags.length-1]||f;G.ns===z.ns&&(G.ns=Object.create(z.ns)),G.ns[N]=f.attribValue}f.attribList.push([f.attribName,f.attribValue])}else f.tag.attributes[f.attribName]=f.attribValue,_(f,"onattribute",{name:f.attribName,value:f.attribValue});f.attribName=f.attribValue=""}function ut(f,o){if(f.opt.xmlns){var A=f.tag,N=pt(f.tagName);A.prefix=N.prefix,A.local=N.local,A.uri=A.ns[N.prefix]||"",A.prefix&&!A.uri&&(X(f,"Unbound namespace prefix: "+JSON.stringify(f.tagName)),A.uri=N.prefix);var G=f.tags[f.tags.length-1]||f;A.ns&&G.ns!==A.ns&&Object.keys(A.ns).forEach(function(Ue){_(f,"onopennamespace",{prefix:Ue,uri:A.ns[Ue]})});for(var z=0,Q=f.attribList.length;z<Q;z++){var tt=f.attribList[z],it=tt[0],yt=tt[1],Z=pt(it,!0),ct=Z.prefix,gr=Z.local,ke=ct===""?"":A.ns[ct]||"",Xt={name:it,value:yt,prefix:ct,local:gr,uri:ke};ct&&ct!=="xmlns"&&!ke&&(X(f,"Unbound namespace prefix: "+JSON.stringify(ct)),Xt.uri=ct),f.tag.attributes[it]=Xt,_(f,"onattribute",Xt)}f.attribList.length=0}f.tag.isSelfClosing=!!o,f.sawRoot=!0,f.tags.push(f.tag),_(f,"onopentag",f.tag),o||(!f.noscript&&f.tagName.toLowerCase()==="script"?f.state=a.SCRIPT:f.state=a.TEXT,f.tag=null,f.tagName=""),f.attribName=f.attribValue="",f.attribList.length=0}function M(f){if(!f.tagName){X(f,"Weird empty close tag."),f.textNode+="</>",f.state=a.TEXT;return}if(f.script){if(f.tagName!=="script"){f.script+="</"+f.tagName+">",f.tagName="",f.state=a.SCRIPT;return}_(f,"onscript",f.script),f.script=""}var o=f.tags.length,A=f.tagName;f.strict||(A=A[f.looseCase]());for(var N=A;o--;){var G=f.tags[o];if(G.name!==N)X(f,"Unexpected close tag");else break}if(o<0){X(f,"Unmatched closing tag: "+f.tagName),f.textNode+="</"+f.tagName+">",f.state=a.TEXT;return}f.tagName=A;for(var z=f.tags.length;z-- >o;){var Q=f.tag=f.tags.pop();f.tagName=f.tag.name,_(f,"onclosetag",f.tagName);var tt={};for(var it in Q.ns)tt[it]=Q.ns[it];var yt=f.tags[f.tags.length-1]||f;f.opt.xmlns&&Q.ns!==yt.ns&&Object.keys(Q.ns).forEach(function(Z){var ct=Q.ns[Z];_(f,"onclosenamespace",{prefix:Z,uri:ct})})}o===0&&(f.closedRoot=!0),f.tagName=f.attribValue=f.attribName="",f.attribList.length=0,f.state=a.TEXT}function B(f){var o=f.entity,A=o.toLowerCase(),N,G="";return f.ENTITIES[o]?f.ENTITIES[o]:f.ENTITIES[A]?f.ENTITIES[A]:(o=A,o.charAt(0)==="#"&&(o.charAt(1)==="x"?(o=o.slice(2),N=parseInt(o,16),G=N.toString(16)):(o=o.slice(1),N=parseInt(o,10),G=N.toString(10))),o=o.replace(/^0+/,""),isNaN(N)||G.toLowerCase()!==o?(X(f,"Invalid character entity"),"&"+f.entity+";"):String.fromCodePoint(N))}function V(f,o){o==="<"?(f.state=a.OPEN_WAKA,f.startTagPosition=f.position):y(o)||(X(f,"Non-whitespace before first tag."),f.textNode=o,f.state=a.TEXT)}function J(f,o){var A="";return o<f.length&&(A=f.charAt(o)),A}function dt(f){var o=this;if(this.error)throw this.error;if(o.closed)return H(o,"Cannot write after close. Assign an onready handler.");if(f===null)return U(o);typeof f=="object"&&(f=f.toString());for(var A=0,N="";N=J(f,A++),o.c=N,!!N;)switch(o.trackPosition&&(o.position++,N===`
`?(o.line++,o.column=0):o.column++),o.state){case a.BEGIN:if(o.state=a.BEGIN_WHITESPACE,N==="\uFEFF")continue;V(o,N);continue;case a.BEGIN_WHITESPACE:V(o,N);continue;case a.TEXT:if(o.sawRoot&&!o.closedRoot){for(var G=A-1;N&&N!=="<"&&N!=="&";)N=J(f,A++),N&&o.trackPosition&&(o.position++,N===`
`?(o.line++,o.column=0):o.column++);o.textNode+=f.substring(G,A-1)}N==="<"&&!(o.sawRoot&&o.closedRoot&&!o.strict)?(o.state=a.OPEN_WAKA,o.startTagPosition=o.position):(!y(N)&&(!o.sawRoot||o.closedRoot)&&X(o,"Text data outside of root node."),N==="&"?o.state=a.TEXT_ENTITY:o.textNode+=N);continue;case a.SCRIPT:N==="<"?o.state=a.SCRIPT_ENDING:o.script+=N;continue;case a.SCRIPT_ENDING:N==="/"?o.state=a.CLOSE_TAG:(o.script+="<"+N,o.state=a.SCRIPT);continue;case a.OPEN_WAKA:if(N==="!")o.state=a.SGML_DECL,o.sgmlDecl="";else if(!y(N))if(P(I,N))o.state=a.OPEN_TAG,o.tagName=N;else if(N==="/")o.state=a.CLOSE_TAG,o.tagName="";else if(N==="?")o.state=a.PROC_INST,o.procInstName=o.procInstBody="";else{if(X(o,"Unencoded <"),o.startTagPosition+1<o.position){var z=o.position-o.startTagPosition;N=new Array(z).join(" ")+N}o.textNode+="<"+N,o.state=a.TEXT}continue;case a.SGML_DECL:(o.sgmlDecl+N).toUpperCase()===E?(_(o,"onopencdata"),o.state=a.CDATA,o.sgmlDecl="",o.cdata=""):o.sgmlDecl+N==="--"?(o.state=a.COMMENT,o.comment="",o.sgmlDecl=""):(o.sgmlDecl+N).toUpperCase()===p?(o.state=a.DOCTYPE,(o.doctype||o.sawRoot)&&X(o,"Inappropriately located doctype declaration"),o.doctype="",o.sgmlDecl=""):N===">"?(_(o,"onsgmldeclaration",o.sgmlDecl),o.sgmlDecl="",o.state=a.TEXT):(x(N)&&(o.state=a.SGML_DECL_QUOTED),o.sgmlDecl+=N);continue;case a.SGML_DECL_QUOTED:N===o.q&&(o.state=a.SGML_DECL,o.q=""),o.sgmlDecl+=N;continue;case a.DOCTYPE:N===">"?(o.state=a.TEXT,_(o,"ondoctype",o.doctype),o.doctype=!0):(o.doctype+=N,N==="["?o.state=a.DOCTYPE_DTD:x(N)&&(o.state=a.DOCTYPE_QUOTED,o.q=N));continue;case a.DOCTYPE_QUOTED:o.doctype+=N,N===o.q&&(o.q="",o.state=a.DOCTYPE);continue;case a.DOCTYPE_DTD:o.doctype+=N,N==="]"?o.state=a.DOCTYPE:x(N)&&(o.state=a.DOCTYPE_DTD_QUOTED,o.q=N);continue;case a.DOCTYPE_DTD_QUOTED:o.doctype+=N,N===o.q&&(o.state=a.DOCTYPE_DTD,o.q="");continue;case a.COMMENT:N==="-"?o.state=a.COMMENT_ENDING:o.comment+=N;continue;case a.COMMENT_ENDING:N==="-"?(o.state=a.COMMENT_ENDED,o.comment=k(o.opt,o.comment),o.comment&&_(o,"oncomment",o.comment),o.comment=""):(o.comment+="-"+N,o.state=a.COMMENT);continue;case a.COMMENT_ENDED:N!==">"?(X(o,"Malformed comment"),o.comment+="--"+N,o.state=a.COMMENT):o.state=a.TEXT;continue;case a.CDATA:N==="]"?o.state=a.CDATA_ENDING:o.cdata+=N;continue;case a.CDATA_ENDING:N==="]"?o.state=a.CDATA_ENDING_2:(o.cdata+="]"+N,o.state=a.CDATA);continue;case a.CDATA_ENDING_2:N===">"?(o.cdata&&_(o,"oncdata",o.cdata),_(o,"onclosecdata"),o.cdata="",o.state=a.TEXT):N==="]"?o.cdata+="]":(o.cdata+="]]"+N,o.state=a.CDATA);continue;case a.PROC_INST:N==="?"?o.state=a.PROC_INST_ENDING:y(N)?o.state=a.PROC_INST_BODY:o.procInstName+=N;continue;case a.PROC_INST_BODY:if(!o.procInstBody&&y(N))continue;N==="?"?o.state=a.PROC_INST_ENDING:o.procInstBody+=N;continue;case a.PROC_INST_ENDING:N===">"?(_(o,"onprocessinginstruction",{name:o.procInstName,body:o.procInstBody}),o.procInstName=o.procInstBody="",o.state=a.TEXT):(o.procInstBody+="?"+N,o.state=a.PROC_INST_BODY);continue;case a.OPEN_TAG:P(C,N)?o.tagName+=N:(Ft(o),N===">"?ut(o):N==="/"?o.state=a.OPEN_TAG_SLASH:(y(N)||X(o,"Invalid character in tag name"),o.state=a.ATTRIB));continue;case a.OPEN_TAG_SLASH:N===">"?(ut(o,!0),M(o)):(X(o,"Forward-slash in opening tag not followed by >"),o.state=a.ATTRIB);continue;case a.ATTRIB:if(y(N))continue;N===">"?ut(o):N==="/"?o.state=a.OPEN_TAG_SLASH:P(I,N)?(o.attribName=N,o.attribValue="",o.state=a.ATTRIB_NAME):X(o,"Invalid attribute name");continue;case a.ATTRIB_NAME:N==="="?o.state=a.ATTRIB_VALUE:N===">"?(X(o,"Attribute without value"),o.attribValue=o.attribName,ot(o),ut(o)):y(N)?o.state=a.ATTRIB_NAME_SAW_WHITE:P(C,N)?o.attribName+=N:X(o,"Invalid attribute name");continue;case a.ATTRIB_NAME_SAW_WHITE:if(N==="=")o.state=a.ATTRIB_VALUE;else{if(y(N))continue;X(o,"Attribute without value"),o.tag.attributes[o.attribName]="",o.attribValue="",_(o,"onattribute",{name:o.attribName,value:""}),o.attribName="",N===">"?ut(o):P(I,N)?(o.attribName=N,o.state=a.ATTRIB_NAME):(X(o,"Invalid attribute name"),o.state=a.ATTRIB)}continue;case a.ATTRIB_VALUE:if(y(N))continue;x(N)?(o.q=N,o.state=a.ATTRIB_VALUE_QUOTED):(X(o,"Unquoted attribute value"),o.state=a.ATTRIB_VALUE_UNQUOTED,o.attribValue=N);continue;case a.ATTRIB_VALUE_QUOTED:if(N!==o.q){N==="&"?o.state=a.ATTRIB_VALUE_ENTITY_Q:o.attribValue+=N;continue}ot(o),o.q="",o.state=a.ATTRIB_VALUE_CLOSED;continue;case a.ATTRIB_VALUE_CLOSED:y(N)?o.state=a.ATTRIB:N===">"?ut(o):N==="/"?o.state=a.OPEN_TAG_SLASH:P(I,N)?(X(o,"No whitespace between attributes"),o.attribName=N,o.attribValue="",o.state=a.ATTRIB_NAME):X(o,"Invalid attribute name");continue;case a.ATTRIB_VALUE_UNQUOTED:if(!S(N)){N==="&"?o.state=a.ATTRIB_VALUE_ENTITY_U:o.attribValue+=N;continue}ot(o),N===">"?ut(o):o.state=a.ATTRIB;continue;case a.CLOSE_TAG:if(o.tagName)N===">"?M(o):P(C,N)?o.tagName+=N:o.script?(o.script+="</"+o.tagName,o.tagName="",o.state=a.SCRIPT):(y(N)||X(o,"Invalid tagname in closing tag"),o.state=a.CLOSE_TAG_SAW_WHITE);else{if(y(N))continue;D(I,N)?o.script?(o.script+="</"+N,o.state=a.SCRIPT):X(o,"Invalid tagname in closing tag."):o.tagName=N}continue;case a.CLOSE_TAG_SAW_WHITE:if(y(N))continue;N===">"?M(o):X(o,"Invalid characters in closing tag");continue;case a.TEXT_ENTITY:case a.ATTRIB_VALUE_ENTITY_Q:case a.ATTRIB_VALUE_ENTITY_U:var Q,tt;switch(o.state){case a.TEXT_ENTITY:Q=a.TEXT,tt="textNode";break;case a.ATTRIB_VALUE_ENTITY_Q:Q=a.ATTRIB_VALUE_QUOTED,tt="attribValue";break;case a.ATTRIB_VALUE_ENTITY_U:Q=a.ATTRIB_VALUE_UNQUOTED,tt="attribValue";break}N===";"?(o[tt]+=B(o),o.entity="",o.state=Q):P(o.entity.length?u:g,N)?o.entity+=N:(X(o,"Invalid character in entity name"),o[tt]+="&"+o.entity+N,o.entity="",o.state=Q);continue;default:throw new Error(o,"Unknown state: "+o.state)}return o.position>=o.bufferCheckPosition&&l(o),o}/*! http://mths.be/fromcodepoint v0.1.0 by @mathias */String.fromCodePoint||function(){var f=String.fromCharCode,o=Math.floor,A=function(){var N=16384,G=[],z,Q,tt=-1,it=arguments.length;if(!it)return"";for(var yt="";++tt<it;){var Z=Number(arguments[tt]);if(!isFinite(Z)||Z<0||Z>1114111||o(Z)!==Z)throw RangeError("Invalid code point: "+Z);Z<=65535?G.push(Z):(Z-=65536,z=(Z>>10)+55296,Q=Z%1024+56320,G.push(z,Q)),(tt+1===it||G.length>N)&&(yt+=f.apply(null,G),G.length=0)}return yt};Object.defineProperty?Object.defineProperty(String,"fromCodePoint",{value:A,configurable:!0,writable:!0}):String.fromCodePoint=A}()})(t)}(Ee)),Ee}var we={},Bn;function Qi(){return Bn||(Bn=1,function(){we.stripBOM=function(t){return t[0]==="\uFEFF"?t.substring(1):t}}.call(R)),we}var gt={},qn;function hr(){return qn||(qn=1,function(){var t;t=new RegExp(/(?!xmlns)^.*:/),gt.normalize=function(r){return r.toLowerCase()},gt.firstCharLowerCase=function(r){return r.charAt(0).toLowerCase()+r.slice(1)},gt.stripPrefix=function(r){return r.replace(t,"")},gt.parseNumbers=function(r){return isNaN(r)||(r=r%1===0?parseInt(r,10):parseFloat(r)),r},gt.parseBooleans=function(r){return/^(?:true|false)$/i.test(r)&&(r=r.toLowerCase()==="true"),r}}.call(R)),gt}var nt={},kn={},Un;function $i(){return Un||(Un=1,function(t,r){if(t.setImmediate)return;var h=1,s={},l=!1,n=t.document,e;function i(g){typeof g!="function"&&(g=new Function(""+g));for(var u=new Array(arguments.length-1),y=0;y<u.length;y++)u[y]=arguments[y+1];var x={callback:g,args:u};return s[h]=x,e(h),h++}function c(g){delete s[g]}function w(g){var u=g.callback,y=g.args;switch(y.length){case 0:u();break;case 1:u(y[0]);break;case 2:u(y[0],y[1]);break;case 3:u(y[0],y[1],y[2]);break;default:u.apply(r,y);break}}function T(g){if(l)setTimeout(T,0,g);else{var u=s[g];if(u){l=!0;try{w(u)}finally{c(g),l=!1}}}}function E(){e=function(g){process.nextTick(function(){T(g)})}}function p(){if(t.postMessage&&!t.importScripts){var g=!0,u=t.onmessage;return t.onmessage=function(){g=!1},t.postMessage("","*"),t.onmessage=u,g}}function d(){var g="setImmediate$"+Math.random()+"$",u=function(y){y.source===t&&typeof y.data=="string"&&y.data.indexOf(g)===0&&T(+y.data.slice(g.length))};t.addEventListener?t.addEventListener("message",u,!1):t.attachEvent("onmessage",u),e=function(y){t.postMessage(g+y,"*")}}function m(){var g=new MessageChannel;g.port1.onmessage=function(u){var y=u.data;T(y)},e=function(u){g.port2.postMessage(u)}}function v(){var g=n.documentElement;e=function(u){var y=n.createElement("script");y.onreadystatechange=function(){T(u),y.onreadystatechange=null,g.removeChild(y),y=null},g.appendChild(y)}}function I(){e=function(g){setTimeout(T,0,g)}}var C=Object.getPrototypeOf&&Object.getPrototypeOf(t);C=C&&C.setTimeout?C:t,{}.toString.call(t.process)==="[object process]"?E():p()?d():t.MessageChannel?m():n&&"onreadystatechange"in n.createElement("script")?v():I(),C.setImmediate=i,C.clearImmediate=c}(typeof self>"u"?typeof R>"u"?R:R:self)),kn}var Vn;function Ki(){if(Vn)return nt;Vn=1;var t=typeof R<"u"&&R||typeof self<"u"&&self||window,r=Function.prototype.apply;nt.setTimeout=function(){return new h(r.call(setTimeout,t,arguments),clearTimeout)},nt.setInterval=function(){return new h(r.call(setInterval,t,arguments),clearInterval)},nt.clearTimeout=nt.clearInterval=function(s){s&&s.close()};function h(s,l){this._id=s,this._clearFn=l}return h.prototype.unref=h.prototype.ref=function(){},h.prototype.close=function(){this._clearFn.call(t,this._id)},nt.enroll=function(s,l){clearTimeout(s._idleTimeoutId),s._idleTimeout=l},nt.unenroll=function(s){clearTimeout(s._idleTimeoutId),s._idleTimeout=-1},nt._unrefActive=nt.active=function(s){clearTimeout(s._idleTimeoutId);var l=s._idleTimeout;l>=0&&(s._idleTimeoutId=setTimeout(function(){s._onTimeout&&s._onTimeout()},l))},$i(),nt.setImmediate=typeof self<"u"&&self.setImmediate||typeof R<"u"&&R.setImmediate||R&&R.setImmediate,nt.clearImmediate=typeof self<"u"&&self.clearImmediate||typeof R<"u"&&R.clearImmediate||R&&R.clearImmediate,nt}var Gn;function Ji(){return Gn||(Gn=1,function(t){(function(){var r,h,s,l,n,e,i,c,w=function(p,d){return function(){return p.apply(d,arguments)}},T=function(p,d){for(var m in d)E.call(d,m)&&(p[m]=d[m]);function v(){this.constructor=p}return v.prototype=d.prototype,p.prototype=new v,p.__super__=d.prototype,p},E={}.hasOwnProperty;i=Yi(),s=vr,r=Qi(),e=hr(),c=Ki().setImmediate,h=Ie().defaults,l=function(p){return typeof p=="object"&&p!=null&&Object.keys(p).length===0},n=function(p,d,m){var v,I,C;for(v=0,I=p.length;v<I;v++)C=p[v],d=C(d,m);return d},t.Parser=function(p){T(d,p);function d(m){this.parseStringPromise=w(this.parseStringPromise,this),this.parseString=w(this.parseString,this),this.reset=w(this.reset,this),this.assignOrPush=w(this.assignOrPush,this),this.processAsync=w(this.processAsync,this);var v,I,C;if(!(this instanceof t.Parser))return new t.Parser(m);this.options={},I=h["0.2"];for(v in I)E.call(I,v)&&(C=I[v],this.options[v]=C);for(v in m)E.call(m,v)&&(C=m[v],this.options[v]=C);this.options.xmlns&&(this.options.xmlnskey=this.options.attrkey+"ns"),this.options.normalizeTags&&(this.options.tagNameProcessors||(this.options.tagNameProcessors=[]),this.options.tagNameProcessors.unshift(e.normalize)),this.reset()}return d.prototype.processAsync=function(){var m,v;try{return this.remaining.length<=this.options.chunkSize?(m=this.remaining,this.remaining="",this.saxParser=this.saxParser.write(m),this.saxParser.close()):(m=this.remaining.substr(0,this.options.chunkSize),this.remaining=this.remaining.substr(this.options.chunkSize,this.remaining.length),this.saxParser=this.saxParser.write(m),c(this.processAsync))}catch(I){if(v=I,!this.saxParser.errThrown)return this.saxParser.errThrown=!0,this.emit(v)}},d.prototype.assignOrPush=function(m,v,I){return v in m?(m[v]instanceof Array||(m[v]=[m[v]]),m[v].push(I)):this.options.explicitArray?m[v]=[I]:m[v]=I},d.prototype.reset=function(){var m,v,I,C;return this.removeAllListeners(),this.saxParser=i.parser(this.options.strict,{trim:!1,normalize:!1,xmlns:this.options.xmlns}),this.saxParser.errThrown=!1,this.saxParser.onerror=function(g){return function(u){if(g.saxParser.resume(),!g.saxParser.errThrown)return g.saxParser.errThrown=!0,g.emit("error",u)}}(this),this.saxParser.onend=function(g){return function(){if(!g.saxParser.ended)return g.saxParser.ended=!0,g.emit("end",g.resultObject)}}(this),this.saxParser.ended=!1,this.EXPLICIT_CHARKEY=this.options.explicitCharkey,this.resultObject=null,C=[],m=this.options.attrkey,v=this.options.charkey,this.saxParser.onopentag=function(g){return function(u){var y,x,S,P,D;if(S=Object.create(null),S[v]="",!g.options.ignoreAttrs){D=u.attributes;for(y in D)E.call(D,y)&&(!(m in S)&&!g.options.mergeAttrs&&(S[m]=Object.create(null)),x=g.options.attrValueProcessors?n(g.options.attrValueProcessors,u.attributes[y],y):u.attributes[y],P=g.options.attrNameProcessors?n(g.options.attrNameProcessors,y):y,g.options.mergeAttrs?g.assignOrPush(S,P,x):S[m][P]=x)}return S["#name"]=g.options.tagNameProcessors?n(g.options.tagNameProcessors,u.name):u.name,g.options.xmlns&&(S[g.options.xmlnskey]={uri:u.uri,local:u.local}),C.push(S)}}(this),this.saxParser.onclosetag=function(g){return function(){var u,y,x,S,P,D,a,O,L,_;if(D=C.pop(),P=D["#name"],(!g.options.explicitChildren||!g.options.preserveChildrenOrder)&&delete D["#name"],D.cdata===!0&&(u=D.cdata,delete D.cdata),L=C[C.length-1],D[v].match(/^\s*$/)&&!u?(y=D[v],delete D[v]):(g.options.trim&&(D[v]=D[v].trim()),g.options.normalize&&(D[v]=D[v].replace(/\s{2,}/g," ").trim()),D[v]=g.options.valueProcessors?n(g.options.valueProcessors,D[v],P):D[v],Object.keys(D).length===1&&v in D&&!g.EXPLICIT_CHARKEY&&(D=D[v])),l(D)&&(typeof g.options.emptyTag=="function"?D=g.options.emptyTag():D=g.options.emptyTag!==""?g.options.emptyTag:y),g.options.validator!=null&&(_="/"+function(){var j,k,H;for(H=[],j=0,k=C.length;j<k;j++)S=C[j],H.push(S["#name"]);return H}().concat(P).join("/"),function(){var j;try{return D=g.options.validator(_,L&&L[P],D)}catch(k){return j=k,g.emit("error",j)}}()),g.options.explicitChildren&&!g.options.mergeAttrs&&typeof D=="object"){if(!g.options.preserveChildrenOrder)S=Object.create(null),g.options.attrkey in D&&(S[g.options.attrkey]=D[g.options.attrkey],delete D[g.options.attrkey]),!g.options.charsAsChildren&&g.options.charkey in D&&(S[g.options.charkey]=D[g.options.charkey],delete D[g.options.charkey]),Object.getOwnPropertyNames(D).length>0&&(S[g.options.childkey]=D),D=S;else if(L){L[g.options.childkey]=L[g.options.childkey]||[],a=Object.create(null);for(x in D)E.call(D,x)&&(a[x]=D[x]);L[g.options.childkey].push(a),delete D["#name"],Object.keys(D).length===1&&v in D&&!g.EXPLICIT_CHARKEY&&(D=D[v])}}return C.length>0?g.assignOrPush(L,P,D):(g.options.explicitRoot&&(O=D,D=Object.create(null),D[P]=O),g.resultObject=D,g.saxParser.ended=!0,g.emit("end",g.resultObject))}}(this),I=function(g){return function(u){var y,x;if(x=C[C.length-1],x)return x[v]+=u,g.options.explicitChildren&&g.options.preserveChildrenOrder&&g.options.charsAsChildren&&(g.options.includeWhiteChars||u.replace(/\\n/g,"").trim()!=="")&&(x[g.options.childkey]=x[g.options.childkey]||[],y={"#name":"__text__"},y[v]=u,g.options.normalize&&(y[v]=y[v].replace(/\s{2,}/g," ").trim()),x[g.options.childkey].push(y)),x}}(this),this.saxParser.ontext=I,this.saxParser.oncdata=function(g){return function(u){var y;if(y=I(u),y)return y.cdata=!0}}()},d.prototype.parseString=function(m,v){var I;v!=null&&typeof v=="function"&&(this.on("end",function(C){return this.reset(),v(null,C)}),this.on("error",function(C){return this.reset(),v(C)}));try{return m=m.toString(),m.trim()===""?(this.emit("end",null),!0):(m=r.stripBOM(m),this.options.async?(this.remaining=m,c(this.processAsync),this.saxParser):this.saxParser.write(m).close())}catch(C){if(I=C,this.saxParser.errThrown||this.saxParser.ended){if(this.saxParser.ended)throw I}else return this.emit("error",I),this.saxParser.errThrown=!0}},d.prototype.parseStringPromise=function(m){return new Promise(function(v){return function(I,C){return v.parseString(m,function(g,u){return g?C(g):I(u)})}}(this))},d}(s),t.parseString=function(p,d,m){var v,I,C;return m!=null?(typeof m=="function"&&(v=m),typeof d=="object"&&(I=d)):(typeof d=="function"&&(v=d),I={}),C=new t.Parser(I),C.parseString(p,v)},t.parseStringPromise=function(p,d){var m,v;return typeof d=="object"&&(m=d),v=new t.Parser(m),v.parseStringPromise(p)}}).call(R)}(Te)),Te}var fr,pr;(function(){var t,r,h,s=function(n,e){for(var i in e)l.call(e,i)&&(n[i]=e[i]);function c(){this.constructor=n}return c.prototype=e.prototype,n.prototype=new c,n.__super__=e.prototype,n},l={}.hasOwnProperty;r=Ie(),t=zi(),h=Ji(),hr(),r.defaults,function(n){s(e,n);function e(i){this.message=i}return e}(Error),pr=t.Builder,h.Parser,fr=h.parseString,h.parseStringPromise}).call(R);const dr=-1,mr=t=>t.charAt(0).toUpperCase()+t.slice(1),At=()=>{const t=localStorage.getItem("MissionEditingAssessmentSA");return t?JSON.parse(t):null},Zi=()=>{const t=localStorage.getItem("MissionEditingOverviewSA");return t?JSON.parse(t):null},ve=t=>{localStorage.setItem("MissionEditingAssessmentSA",JSON.stringify(t))},Nt=t=>{localStorage.setItem("MissionEditingOverviewSA",JSON.stringify(t))},ts=t=>{const r=ns(t);return[es(t,r[1]),r[0]]},es=(t,r)=>{const h=t.CONTENT.TASK[0],s=h.$;return{type:mr(s.kind),isManuallyGraded:!0,closeAt:s.duedate,coverImage:s.coverimage,id:dr,maxXp:r,number:s.number||"",openAt:s.startdate,title:s.title,reading:h.READING?h.READING[0]:"",shortSummary:h.WEBSUMMARY?h.WEBSUMMARY[0]:"",status:zn.attempting,story:s.story,xp:0,gradingStatus:"none"}},ns=t=>{const r=t.CONTENT.TASK[0],h=r.$,s=is(r);return[{type:mr(h.kind),id:dr,globalDeployment:St(r.DEPLOYMENT),graderDeployment:St(r.GRADERDEPLOYMENT),longSummary:r.TEXT[0],missionPDF:"google.com",questions:s[0],title:h.title},s[1]]},rs=t=>Function('"use strict";return ('+t+")")(),St=t=>{if(t===void 0)return Yn();{const r=t[0],h=r.IMPORT||r.EXTERNAL,s=h?h[0].$.name:"NONE",l=h?h[0].SYMBOL||[]:[],n=r.GLOBAL?r.GLOBAL.map(e=>[e.IDENTIFIER[0],rs(e.VALUE[0]),e.VALUE[0]]):[];return{chapter:parseInt(r.$.interpreter,10),external:{name:s,symbols:l},globals:n}}},is=t=>{let r=0;const h=[];return t.PROBLEMS[0].PROBLEM.forEach((s,l)=>{const n=s.$.maxxp?parseInt(s.$.maxxp,10):0,e={answer:null,content:s.TEXT[0],id:l,library:St(s.DEPLOYMENT),graderLibrary:St(s.GRADERDEPLOYMENT),type:s.$.type,xp:0,maxXp:n};r+=n,e.type==="programming"&&h.push(os(s,e)),e.type==="mcq"&&h.push(ss(s,e))}),[h,r]},ss=(t,r)=>{const h=[],s=t.SNIPPET?t.SNIPPET[0].SOLUTION:void 0;let l=0;return t.CHOICE.forEach((n,e)=>{h.push({content:n.TEXT[0],hint:null}),l=n.$.correct==="true"?e:l}),{...r,type:"mcq",answer:s?parseInt(s[0],10):0,choices:h,solution:l}},os=(t,r)=>{const h=t.SNIPPET[0].TESTCASES,s=h?h[0].PUBLIC||[]:[],l=h?h[0].PRIVATE||[]:[],n=t.SNIPPET[0].PREPEND,e=t.SNIPPET[0].POSTPEND,i=t.SNIPPET[0].SOLUTION,c={...r,autogradingResults:[],prepend:n?n[0].trim():"",solutionTemplate:t.SNIPPET[0].TEMPLATE[0].trim(),postpend:e?e[0].trim():"",testcases:s.map(w=>Wn(w)),testcasesPrivate:l.map(w=>Wn(w)),answer:i?i[0].trim():"",type:"programming"};return t.SNIPPET[0].GRADER&&(c.graderTemplate=t.SNIPPET[0].GRADER[0]),c},Wn=t=>({type:Nr.public,answer:t.$.answer,score:parseInt(t.$.score,10),program:t._}),as=()=>{const t=localStorage.getItem("MissionEditingAssessmentSA"),r=localStorage.getItem("MissionEditingOverviewSA");if(t&&r){const h=JSON.parse(t),s=JSON.parse(r),l=s.fileName||s.title,n=new pr,e=cs(h,s),i={CONTENT:{$:{"xmlns:xsi":"http://www.w3.org/2001/XMLSchema-instance"},TASK:e}};let c=n.buildObject(i);c=c.replace(/(&#xD;)+/g,""),us(l+".xml",c)}},us=(t,r)=>{const h=document.createElement("a");h.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(r)),h.setAttribute("download",t),h.style.display="none",document.body.appendChild(h),h.click(),document.body.removeChild(h)},It=t=>{const r={$:{interpreter:t.chapter.toString()},EXTERNAL:{$:{name:t.external.name}}};return t.external.symbols.length!==0&&(r.EXTERNAL.SYMBOL=t.external.symbols),t.globals.length!==0&&(r.GLOBAL=t.globals.map(h=>({IDENTIFIER:h[0],VALUE:h[2]}))),r},cs=(t,r)=>{const h={},s={coverimage:r.coverImage,duedate:r.closeAt,kind:r.type.toLowerCase(),number:r.number||"",startdate:r.openAt,story:r.story,title:r.title};return h.$=s,r.reading&&r.reading!==""&&(h.READING=r.reading),h.WEBSUMMARY=r.shortSummary,h.TEXT=t.longSummary,h.PROBLEMS={PROBLEM:[]},h.DEPLOYMENT=It(t.globalDeployment),t.graderDeployment.chapter!==-1&&(h.GRADERDEPLOYMENT=It(t.graderDeployment)),t.questions.forEach(l=>{const n={$:{type:l.type},SNIPPET:{SOLUTION:l.answer},TEXT:l.content,CHOICE:[]};if(l.library.chapter!==-1&&(n.$.DEPLOYMENT=It(l.library)),l.graderLibrary.chapter!==-1&&(n.$.GRADERDEPLOYMENT=It(l.graderLibrary)),l.maxXp&&(n.$.maxxp=l.maxXp),l.type==="programming"){l.graderTemplate&&(n.SNIPPET.GRADER=l.graderTemplate);const e={...n.SNIPPET,TEMPLATE:l.solutionTemplate,PREPEND:l.prepend,POSTPEND:l.postpend,TESTCASES:""};if(l.testcases.length||l.testcasesPrivate.length){if(e.TESTCASES={},l.testcases.length){const i=l.testcases.map(c=>({$:{answer:c.answer,score:c.score},_:c.program}));e.TESTCASES.PUBLIC=i}if(l.testcasesPrivate&&l.testcasesPrivate.length){const i=l.testcasesPrivate.map(c=>({$:{answer:c.answer,score:c.score},_:c.program}));e.TESTCASES.PRIVATE=i}}n.SNIPPET=e}l.type==="mcq"&&l.choices.forEach((e,i)=>{n.CHOICE.push({$:{correct:l.solution===i?"true":"false"},TEXT:e.content})}),h.PROBLEMS.PROBLEM.push(n)}),h},ls=t=>{const[r,h]=q.useState(""),[s,l]=q.useState(""),[n,e]=q.useState(!1),i=u=>y=>{const x={...t.overview,[u]:s};h(""),l(""),Nt(x),t.updateEditingOverview(x)},c=u=>{l(u.target.value)},w=u=>y=>{r!==u&&(h(u),l(t.overview[u]))},T=()=>{e(!n)},E=u=>{as()},p=u=>b.jsx(ir,{autoFocus:!0,className:"editing-textarea",onChange:c,onBlur:i(u),value:s}),d=u=>b.jsx("div",{children:b.jsxs(_t,{className:"row listing",elevation:Qn.ONE,children:[b.jsx("div",{className:"col-xs-3 listing-picture",onClick:w("coverImage"),children:r==="coverImage"?p("coverImage"):b.jsx("img",{alt:"Assessment cover",className:`cover-image-${u.status}`,src:u.coverImage?u.coverImage:fi})}),b.jsxs("div",{className:"col-xs-9 listing-text",children:[m(u,u.title),b.jsx("div",{className:"row listing-xp",children:b.jsxs(Ct,{children:[" ",`Max XP: ${u.maxXp}`," "]})}),b.jsx("div",{className:"row listing-description",onClick:w("shortSummary"),children:r==="shortSummary"?p("shortSummary"):b.jsx(vt,{content:wt(u.shortSummary)})}),b.jsxs("div",{className:"listing-controls",children:[b.jsxs(Ve,{className:"listing-due-date",children:[b.jsx(xr,{className:"listing-due-icon",iconSize:12,icon:F.TIME}),b.jsx("div",{className:"date-container",children:"Opens at:"}),b.jsx("div",{className:"date-container",onClick:w("openAt"),children:r==="openAt"?p("openAt"):`${Ke(u.openAt)}`}),b.jsx("div",{className:"date-container",children:"Due:"}),b.jsx("div",{className:"date-container",onClick:w("closeAt"),children:r==="closeAt"?p("closeAt"):`${Ke(u.closeAt)}`})]}),b.jsx(Et,{icon:F.WRENCH,minimal:!0,onClick:T,children:"Other Options"}),b.jsx(Dr,{to:`${t.listingPath}/${u.id.toString()}/${$n.defaultQuestionId}`,children:b.jsx(W,{label:"Edit mission",icon:F.EDIT})})]})]})]})}),m=(u,y)=>b.jsxs("div",{className:"row listing-title",children:[b.jsx(Ve,{ellipsize:!0,className:"col-xs-10",children:b.jsx(Ir,{onClick:w("title"),children:r==="title"?p("title"):wt(y)})}),b.jsx("div",{className:"col-xs-2",children:v()})]}),v=u=>b.jsx(Et,{icon:F.EXPORT,intent:Ne.DANGER,minimal:!0,onClick:E,children:"Save as XML"}),I=(u,y)=>{const x={...t.overview,category:u};Nt(x),t.updateEditingOverview(x)},C=()=>b.jsx(xe,{canOutsideClickClose:!1,className:"assessment-reset",icon:F.WRENCH,isCloseButtonShown:!0,isOpen:n,onClose:T,title:"Other options",children:b.jsxs("div",{className:De,children:[b.jsx(Dt,{children:"Assessment Type"}),g(t.overview.type,I),b.jsx(Dt,{children:"Number"}),b.jsx("div",{onClick:w("number"),children:r==="number"?p("number"):wt(t.overview.number||"")}),b.jsx(Dt,{children:"Story"}),b.jsx("div",{onClick:w("story"),children:r==="story"?p("story"):wt(t.overview.story||"")}),b.jsx("br",{}),b.jsx(Dt,{children:"Filename"}),b.jsx("div",{onClick:w("fileName"),children:r==="fileName"?p("fileName"):wt(t.overview.fileName||"")})]})}),g=(u,y=(x,S)=>{})=>b.jsx(hs,{className:mt,items:t.assessmentTypes,onItemSelect:y,itemRenderer:fs,filterable:!1,children:b.jsx(Et,{className:mt,text:u,rightIcon:F.DOUBLE_CARET_VERTICAL})});return b.jsxs("div",{children:[C(),d(t.overview)]})},wt=t=>t.match(`^(
| )*$`)?"Enter Value Here (If Applicable)":t,hs=Pt.ofType(),fs=(t,{handleClick:r,modifiers:h,query:s})=>b.jsx(Mt,{active:!1,onClick:r,text:t},t),ps=({toggleEditMode:t,editingMode:r})=>{const h=r==="question"?"Global":"Question Specific";return b.jsx(Or,{content:"Switch to "+h+" Editing Mode",children:b.jsx(W,{label:h+" Editing Mode",icon:F.REFRESH,onClick:t})})},K=(t,r)=>{for(const h of t)r=r[h];return r},xt=(t,r,h)=>{let s=0;for(s=0;s<t.length-1;s++)h=h[t[s]];h[t[s]]=r},yr=(t=0,r=null)=>h=>{h=typeof h=="string"?parseInt(h,10):h;let s;return t!==null&&h<t?s=t:r!==null&&h>r?s=r:s=h,s},at=t=>{const r=t.isNumber||!1,[h,s]=q.useState(!1),[l]=q.useState(r),[n,e]=q.useState(""),[i]=q.useState(t.useRawValue||r),c=d=>{let m;l?(m=parseInt(n,10),isNaN(m)&&(m=K(t.path,t.assessment))):m=n;const v=K(t.path,t.assessment);if(t.processResults&&(m=t.processResults(m)),m!==v){const I=t.assessment;xt(t.path,m,I),t.updateAssessment(I)}s(!1)},w=d=>{e(d.target.value)},T=()=>b.jsx(ir,{autoFocus:!0,className:"editing-textarea",onChange:w,onBlur:c,value:n}),E=()=>d=>{if(!h){const m=K(t.path,t.assessment)||"";s(!0),e(typeof m=="string"?m:m.toString())}};let p;if(h)p=T();else{const d="Please enter value (if applicable)";let m=K(t.path,t.assessment);t.isNumber||(m=m||"",m=m.match(/^\s*$/)?d:m),i?p=m:p=b.jsx(vt,{content:m})}return b.jsx("div",{onClick:E(),children:p})},ds=t=>{const r=w=>()=>{w.push(Cr()),t.updateAssessment(t.assessment)},h=(w,T)=>{w.splice(T,1),t.updateAssessment(t.assessment)},s=(w,T)=>{const E=K(w,t.assessment),p=E[T];return b.jsx("div",{children:b.jsx(_t,{className:"row listing",elevation:Qn.ONE,children:b.jsxs("div",{className:"col-xs-9 listing-text",children:[b.jsx("div",{className:"row listing-program",children:b.jsxs(Ct,{children:["Test Program:",b.jsx(at,{assessment:t.assessment,path:w.concat([T,"program"]),useRawValue:!0,updateAssessment:t.updateAssessment})]})}),b.jsx("div",{className:"row listing-expected",children:b.jsxs(Ct,{children:["Score:",b.jsx(at,{assessment:t.assessment,isNumber:!0,path:w.concat([T,"score"]),updateAssessment:t.updateAssessment})]})}),b.jsx("div",{className:"row listing-expected",children:b.jsxs(Ct,{children:["Expected Answer:",b.jsx(at,{assessment:t.assessment,path:w.concat([T,"answer"]),useRawValue:!0,updateAssessment:t.updateAssessment})]})}),b.jsx("div",{className:"listing-controls",children:b.jsxs("div",{children:[b.jsx(W,{label:"Test",icon:F.PLAY,onClick:()=>t.handleTestcaseEval(p)}),b.jsx(W,{label:"Delete",icon:F.DELETE,onClick:()=>h(E,T)})]})})]})})})},l=t.assessment.questions[t.questionId],n=["questions",t.questionId,"testcases"],e=l.testcases.map((w,T)=>b.jsx("div",{children:s(n,T)},T)),i=["questions",t.questionId,"testcasesPrivate"],c=l.testcasesPrivate.map((w,T)=>b.jsx("div",{children:s(i,T)},T));return b.jsxs("div",{children:["Public Testcases",e,b.jsx(W,{label:"New public testcase",icon:F.PLUS,onClick:r(l.testcases)}),b.jsx("br",{}),b.jsx("br",{}),"Private Testcases",c,b.jsx(W,{label:"New private testcase",icon:F.PLUS,onClick:r(l.testcasesPrivate)})]})},Ot=t=>{const r=()=>{const d=t.pathToLibrary,m=K(d,t.assessment),v=m.external.symbols.map((y,x)=>b.jsxs("tr",{children:[b.jsx("td",{children:h(d.concat(["external","symbols",x]))}),b.jsx("td",{style:{width:"100px"},children:b.jsx(W,{label:"Delete",icon:F.MINUS,onClick:n(x)})})]},x)),I=m.globals.map((y,x)=>b.jsxs("tr",{children:[b.jsx("td",{style:{width:"170px"},children:h(d.concat(["globals",x,0]))}),b.jsx("td",{children:s(x)}),b.jsx("td",{style:{width:"90px"},children:b.jsx(W,{label:"Delete",icon:F.MINUS,onClick:i(x)})})]},x)),C=b.jsx(W,{label:"Use this Library",icon:F.REFRESH,onClick:()=>t.handleRefreshLibrary(m)}),g=b.jsxs(bt.Fragment,{children:["External Library:",b.jsx("br",{}),bs(m.external.name,T),b.jsx(Tt,{}),b.jsx("div",{children:"Symbols:"}),b.jsx("br",{}),b.jsx("table",{style:{width:"100%"},children:b.jsx("tbody",{children:v})}),b.jsx(W,{label:"New Symbol",icon:F.PLUS,onClick:e})]}),u=b.jsxs(bt.Fragment,{children:[b.jsx("div",{children:"Globals:"}),b.jsx("br",{}),b.jsx("table",{style:{width:"100%",borderSpacing:"5px"},children:b.jsx("tbody",{children:I})}),b.jsx(W,{label:"New Global",icon:F.PLUS,onClick:c})]});return b.jsxs("div",{children:[b.jsx(Tt,{}),C,b.jsx(Tt,{}),"Interpreter:",b.jsx("br",{}),gs(m.chapter,m.variant,w),b.jsx(Tt,{}),g,b.jsx(Tt,{}),u]})},h=d=>b.jsx(at,{assessment:t.assessment,path:d,processResults:ms,updateAssessment:t.updateAssessment,useRawValue:!0}),s=d=>{const m=t.pathToLibrary.concat(["globals",d,2]);return b.jsx(at,{assessment:t.assessment,path:m,updateAssessment:l(d),useRawValue:!0})},l=d=>m=>{const I=K(t.pathToLibrary,t.assessment).globals[d];try{I[1]=ys(I[2]),t.updateAssessment(m)}catch{I[2]='"Invalid Expression"'}},n=d=>()=>{const m=t.assessment;K(t.pathToLibrary,m).external.symbols.splice(d,1),t.updateAssessment(m)},e=()=>{const d=t.assessment;K(t.pathToLibrary,d).external.symbols.push("new_symbol"),t.updateAssessment(d)},i=d=>()=>{const m=t.assessment;K(t.pathToLibrary,m).globals.splice(d,1),t.updateAssessment(m)},c=()=>{const d=t.assessment;K(t.pathToLibrary,d).globals.push(["new_global",null,"null"]),t.updateAssessment(d)},w=(d,m)=>{const v=t.assessment,I=K(t.pathToLibrary,v);I.chapter=d.chapter,t.updateAssessment(v)},T=(d,m)=>{const v=t.assessment,I=K(t.pathToLibrary,v);I.external.name=d.name,I.external.symbols=JSON.parse(JSON.stringify(Kn.get(d.name))),t.updateAssessment(v)},E=()=>{const d=t.assessment;if(p()){let m=K(t.pathToCopy||["globalDeployment"],d);m.chapter===-1&&(m=d.globalDeployment),m=JSON.parse(JSON.stringify(m)),xt(t.pathToLibrary,m,d)}else xt(t.pathToLibrary,Yn(),d);t.updateAssessment(d)},p=(d=t.pathToLibrary)=>K(d.concat(["chapter"]),t.assessment)===-1;return t.isOptionalDeployment?b.jsxs("div",{children:[b.jsx(Ar,{checked:!p(),label:"Enable "+t.label+" Deployment",onChange:E}),p()?null:r()]}):b.jsxs("div",{children:[t.label+" Deployment",b.jsx("br",{}),r()]})},ms=t=>typeof t=="string"?t.replace(/\s+/g,""):t,ys=t=>Function('"use strict";return ('+t+")")(),gs=(t,r=Lt.Variant.DEFAULT,h=(s,l)=>{})=>b.jsx(Ts,{className:mt,items:Lr,onItemSelect:h,itemRenderer:Es,filterable:!1,children:b.jsx(Et,{className:mt,text:Sr(t,r),rightIcon:F.DOUBLE_CARET_VERTICAL})}),Ts=Pt.ofType(),Es=(t,{handleClick:r,modifiers:h,query:s})=>b.jsx(Mt,{active:!1,onClick:r,text:t.displayName},t.displayName),ws=Array.from(Kn.entries()).map((t,r)=>({name:t[0],key:r,symbols:t[1]})),bs=(t,r)=>b.jsx(vs,{className:mt,items:ws,onItemSelect:r,itemRenderer:Ns,filterable:!1,children:b.jsx(Et,{className:mt,text:t,rightIcon:F.DOUBLE_CARET_VERTICAL})}),vs=Pt.ofType(),Ns=(t,{handleClick:r,modifiers:h,query:s})=>b.jsx(Mt,{active:!1,onClick:r,text:t.name},t.key),xs=t=>{const r=h=>b.jsx(at,{assessment:t.assessment,isNumber:!0,path:h,processResults:yr(0),updateAssessment:t.updateAssessment});return b.jsxs("div",{children:["Max Xp:",r(t.path.concat(["maxXp"]))]})},Ds=t=>{const r=Jn(),[h,s]=q.useState(!1),[l,n]=q.useState(()=>{}),e=p=>b.jsxs("div",{children:[b.jsx(W,{label:"Clone",icon:F.DOCUMENT,onClick:T(c(()=>Is(t.assessment.questions[p]),p))}),b.jsx(W,{label:"Delete",icon:F.REMOVE,onClick:T(w(p))}),b.jsx(W,{label:"Shift Up",icon:F.CARET_UP,onClick:T(i(-1,p)),isDisabled:p===0}),b.jsx(W,{label:"Shift Down",icon:F.CARET_DOWN,onClick:T(i(1,p)),isDisabled:p>=t.assessment.questions.length-1}),b.jsx("br",{}),b.jsx(W,{label:"Insert Programming Question",icon:F.FONT,onClick:T(c(Pr,p))}),b.jsx(W,{label:"Insert MCQ Question",icon:F.CONFIRM,onClick:T(c(Mr,p))})]}),i=(p,d)=>()=>{const m=t.assessment,v=d+p;if(v>=0&&v<m.questions.length){const I=m.questions[d],C=m.questions;C[d]=C[v],C[v]=I,m.questions=C,t.updateAssessment(m),r("/mission-control/-1/"+v.toString())}},c=(p,d)=>()=>{const m=t.assessment;d=d+1;const v=m.questions;v.splice(d,0,p()),m.questions=v,t.updateAssessment(m),r("/mission-control/-1/"+d.toString())},w=p=>()=>{const d=t.assessment;let m=d.questions;m.length>1&&(m=m.slice(0,p).concat(m.slice(p+1))),d.questions=m,t.updateAssessment(d)},T=p=>()=>{t.hasUnsavedChanges?(s(!0),n(p)):p()},E=b.jsxs(xe,{className:"assessment-reset",icon:F.ERROR,isCloseButtonShown:!0,isOpen:h,title:"Confirmation: Save unsaved changes?",children:[b.jsx("div",{className:De,children:b.jsx(vt,{content:"Are you sure you want to save over your unsaved changes?"})}),b.jsx("div",{className:Zn,children:b.jsxs(tr,{children:[b.jsx(W,{label:"Cancel",onClick:()=>s(!1),options:{minimal:!1}}),b.jsx(W,{label:"Confirm",onClick:()=>{l(),s(!1)},options:{minimal:!1,intent:Ne.DANGER}})]})})]});return b.jsxs("div",{children:[E,t.assessment.questions.map((p,d)=>b.jsxs("div",{children:["Question ",d+1,b.jsx("br",{}),b.jsx(Et,{className:"mcq-option col-xs-12",minimal:!0,children:b.jsx(vt,{content:p.content.length>200?p.content.substring(0,300)+"...":p.content})}),e(d),b.jsx("br",{}),b.jsx("br",{})]},d))]})},Is=t=>JSON.parse(JSON.stringify(t)),Os=t=>{const r=()=>{const{assessment:c,questionId:w}=t,T=c.questions[w],E=T.choices.concat([{content:"A",hint:null}]);T.choices=E,c.questions[w]=T,t.updateAssessment(c)},h=()=>{const{assessment:c,questionId:w}=t,T=c.questions[w],E=T.choices.slice(0,T.choices.length-1);T.choices=E,c.questions[w]=T,t.updateAssessment(c)},s=(c,w=!1,T=[0])=>w?b.jsx(at,{assessment:t.assessment,isNumber:!0,path:c,processResults:yr(T[0],T[1]),updateAssessment:t.updateAssessment}):b.jsx(at,{assessment:t.assessment,path:c,updateAssessment:t.updateAssessment}),{questionId:l}=t,n=t.assessment.questions[l],e=n.choices.map((c,w)=>b.jsxs("div",{className:"mcq-option col-xs-12",children:["Option ",w,":",s(["questions",l,"choices",w,"content"]),b.jsx("br",{}),"Hint:",s(["questions",l,"choices",w,"hint"])]},w)),i=b.jsx(W,{label:"Delete Option",icon:F.REMOVE,onClick:h});return b.jsx("div",{className:"MCQChooser row",children:b.jsx(_t,{className:"mcq-content-parent col-xs-12 middle-xs",children:b.jsxs("div",{className:"row mcq-options-parent between-xs",children:[e,"Solution:",s(["questions",l,"solution"],!0,[0,n.choices.length]),b.jsx("br",{}),b.jsx(W,{label:"Add Option",icon:F.CONFIRM,onClick:r}),n.choices.length>0?i:void 0]})})})},Cs=Pt.ofType(),Hn=[{label:"Prepend",icon:F.CHEVRON_UP,id:"prepend"},{label:"Postpend",icon:F.CHEVRON_DOWN,id:"postpend"},{label:"Solution Template",icon:F.MANUAL,id:"solutionTemplate"},{label:"Suggested Answer",icon:F.TICK,id:"answer"}],As=t=>{const[r,h]=q.useState(Hn[0]),[s,l]=q.useState(""),[n,e]=q.useState(!1),i=()=>{const m=["questions",t.questionId].concat(r.id),v=b.jsx(W,{label:"Copy from Editor",icon:F.IMPORT,onClick:E(m)}),I=b.jsx(W,{label:"Copy to Editor",icon:F.EXPORT,onClick:p(m)}),C=b.jsxs("div",{children:[v,I,b.jsx(Tt,{}),c(m)]}),g=(y,{handleClick:x})=>b.jsx(Mt,{active:!1,onClick:x,text:y.label,icon:y.icon},y.id),u=(y,x)=>b.jsx(Cs,{className:mt,items:Hn,itemRenderer:g,onItemSelect:x,filterable:!1,children:b.jsx(Et,{className:mt,text:y.label,icon:F.EDIT,rightIcon:F.DOUBLE_CARET_VERTICAL})});return b.jsx("div",{className:"side-content",children:b.jsxs(_t,{children:[u(r,h),b.jsx(Tt,{}),b.jsx("div",{className:"side-content-text",children:C})]})})},c=d=>{const m=n?s:K(d,t.assessment);return b.jsx("div",{onClick:w(d),onBlur:T(d),children:b.jsx(bi,{className:"react-ace",editorProps:{$blockScrolling:1/0},fontSize:14,highlightActiveLine:!1,mode:"javascript",onChange:l,theme:"source",value:m,width:"100%"})})},w=d=>m=>{n||(l(K(d,t.assessment)),e(!0))},T=d=>m=>{if(n){if(K(d,t.assessment)!==s){const I=t.assessment;xt(d,s,I),t.updateAssessment(I)}if(r.id==="prepend"){const I=s;t.handleUpdateWorkspace({programPrependValue:I})}else if(r.id==="postpend"){const I=s;t.handleUpdateWorkspace({programPostpendValue:I})}l(""),e(!1)}},E=d=>()=>{const m=t.assessment;xt(d,t.editorValue,m),t.updateAssessment(m)},p=d=>()=>{const m=K(d,t.assessment);t.handleEditorValueChange(m)};return i()},be="assessment",Ls=t=>{const[r,h]=q.useState(At()),[s,l]=q.useState("question"),[n,e]=q.useState(!1),[i,c]=q.useState(!1),[w,T]=q.useState(0),E=_r(),p=Jn(),{isFolderModeEnabled:d,activeEditorTabIndex:m,editorTabs:v}=er(M=>M.workspaces[be]);q.useEffect(()=>{r&&(D(),T(_()))},[]),q.useEffect(()=>S());const I=bt.useCallback(M=>E(Rr(be,M)),[E]),C=bt.useCallback(M=>E(jr(be,M)),[E]),{handleEditorValueChange:g}=t,u=bt.useCallback(M=>g(0,M),[g]);if(r===null||r.questions.length===0)return b.jsx(Fr,{className:Ge("WorkspaceParent",We),description:"Getting mission ready...",icon:b.jsx(Xr,{size:Br.LARGE})});const y=()=>{let M=t.questionId;return M<0?M=0:M>=r.questions.length&&(M=r.questions.length-1),M},x=()=>b.jsxs(xe,{className:"assessment-reset",icon:F.ERROR,isCloseButtonShown:!0,isOpen:i,title:"Confirmation: Reset editor?",children:[b.jsx("div",{className:De,children:b.jsx(vt,{content:"Are you sure you want to reset to your last save?"})}),b.jsx("div",{className:Zn,children:b.jsxs(tr,{children:[b.jsx(W,{label:"Cancel",onClick:()=>c(!1),options:{minimal:!1}}),b.jsx(W,{label:"Confirm",onClick:()=>{const M=At();h(M),e(!1),c(!1),T(_()),P(),D()},options:{minimal:!1,intent:Ne.DANGER}})]})})]});function S(){if(r===void 0)return;const M=-1,B=y();(t.storedAssessmentId!==M||t.storedQuestionId!==B)&&(D(),t.handleUpdateCurrentAssessmentId(M,B),t.handleUpdateHasUnsavedChanges(!1),n&&(h(At()),e(!1)),P())}const P=(M=void 0)=>{const B=r.questions[y()];if(M||(M=B.library.chapter===-1?r.globalDeployment:B.library),M&&M.globals.length>0){const V=M.globals.map(dt=>dt[0]),J=M.external.symbols.concat(V);M={...M,external:{name:M.external.name,symbols:Ss(J)}}}t.handleClearContext(M,!0)},D=()=>{const M=r.questions[y()];let B,V="",J="";M.type===He.programming?(M.editorValue?B=M.editorValue:B=M.solutionTemplate,V=M.prepend,J=M.postpend):B="//If you see this, this is a bug. Please report bug.",t.handleResetWorkspace({editorTabs:[{value:B,highlightedLines:[],breakpoints:[]}],programPrependValue:V,programPostpendValue:J}),t.handleEditorValueChange(0,B)},a=M=>{const B=[M];t.handleUpdateWorkspace({editorTestcases:B}),t.handleTestcaseEval(0)},O=()=>{r.questions[y()].editorValue=v[0].value,h(r),e(!1),ve(r),L()},L=()=>{const M=_(),B=M-w;if(B!==0){const V=t.assessmentOverview;B!==0&&(V.maxXp=M),T(M),t.updateAssessmentOverview(V),Nt(V)}},_=()=>{let M=0;const B=r.questions;for(const V of B)M+=V.maxXp;return M},j=M=>{h(M),e(!0)},k=M=>{h(M),P(),O(),D()},H=()=>{l(s==="question"?"global":"question")},U=(M,B)=>{const V=r;let J;if(s==="question"){const dt=V.questions[M.questionId].type,f=dt==="mcq"?b.jsx(Os,{assessment:V,questionId:B,updateAssessment:j}):b.jsx(As,{assessment:V,questionId:B,updateAssessment:j,editorValue:v[0].value,handleEditorValueChange:u,handleUpdateWorkspace:M.handleUpdateWorkspace});J=[{label:`Question ${B+1}`,iconName:F.NINJA,body:b.jsx(at,{assessment:V,path:["questions",B,"content"],updateAssessment:j}),id:st.editorQuestionOverview},{label:"Question Template",iconName:F.DOCUMENT,body:f,id:st.editorQuestionTemplate},{label:"Manage Local Deployment",iconName:F.HOME,body:b.jsx(Ot,{assessment:V,label:"Question Specific",handleRefreshLibrary:P,pathToLibrary:["questions",B,"library"],updateAssessment:j,isOptionalDeployment:!0}),id:st.editorLocalDeployment},{label:"Manage Local Grader Deployment",iconName:F.CONFIRM,body:b.jsx(Ot,{assessment:V,label:"Question Specific Grader",handleRefreshLibrary:P,pathToLibrary:["questions",B,"graderLibrary"],pathToCopy:["questions",B,"library"],updateAssessment:j,isOptionalDeployment:!0}),id:st.editorLocalGraderDeployment},{label:"Grading",iconName:F.TICK,body:b.jsx(xs,{assessment:V,path:["questions",B],updateAssessment:j}),id:st.editorGrading}],dt==="programming"&&J.push({label:"Autograder",iconName:F.AIRPLANE,body:b.jsx(ds,{assessment:V,questionId:B,handleTestcaseEval:a,updateAssessment:j}),id:st.editorAutograder}),V.globalDeployment.external.symbols.includes("get_matrix")&&J.push({label:"Tone Matrix",iconName:F.GRID_VIEW,body:b.jsx(Ei,{}),id:st.toneMatrix})}else J=[{label:`${V.type} Briefing`,iconName:F.BRIEFCASE,body:b.jsx(at,{assessment:V,path:["longSummary"],updateAssessment:j}),id:st.editorBriefing},{label:"Manage Question",iconName:F.WRENCH,body:b.jsx(Ds,{assessment:V,hasUnsavedChanges:n,questionId:B,updateAssessment:k}),id:st.editorManageQuestion},{label:"Manage Global Deployment",iconName:F.GLOBE,body:b.jsx(Ot,{assessment:V,label:"Global",handleRefreshLibrary:P,pathToLibrary:["globalDeployment"],updateAssessment:j,isOptionalDeployment:!1}),id:st.editorGlobalDeployment},{label:"Manage Global Grader Deployment",iconName:F.CONFIRM,body:b.jsx(Ot,{assessment:V,label:"Global Grader",handleRefreshLibrary:P,pathToLibrary:["graderDeployment"],updateAssessment:j,isOptionalDeployment:!0}),id:st.editorGlobalGraderDeployment}];return{tabs:{beforeDynamicTabs:J,afterDynamicTabs:[]}}},X=M=>{const B="/mission-control",V=B+`/${r.id.toString()}`,J=[M+1,r.questions.length],dt=()=>p(V+`/${(M-1).toString()}`),f=()=>p(V+`/${(M+1).toString()}`),o=()=>p(B),A=()=>{c(()=>n)},N=b.jsx(pi,{onClickNext:f,onClickReturn:o,questionProgress:J},"next_question"),G=b.jsx(di,{onClick:dt,questionProgress:J},"previous_question"),z=b.jsx(mi,{questionProgress:J},"question_view"),Q=b.jsx(yi,{onClick:A},"reset_template");return{editorButtons:[b.jsx(xi,{isEntrypointFileDefined:m!==null,handleEditorEval:t.handleEditorEval},"run"),b.jsx(gi,{hasUnsavedChanges:n,onClickSave:O},"save"),Q],flowButtons:[G,z,N],editingWorkspaceButtons:[b.jsx(ps,{editingMode:s,toggleEditMode:H},"toggle_edit_mode")]}};function Ft(){const M=b.jsx(Di,{handleReplOutputClear:t.handleReplOutputClear},"clear_repl");return[b.jsx(Ii,{handleReplEval:t.handleReplEval,isRunning:t.isRunning},"eval_repl"),M]}const pt=y(),ot=r.questions[pt],ut={controlBarProps:X(pt),editorContainerProps:ot.type===He.programming?{editorVariant:"normal",isFolderModeEnabled:d,activeEditorTabIndex:m,setActiveEditorTabIndex:I,removeEditorTabByIndex:C,editorTabs:v.map(vi).map((M,B)=>B!==0?M:{...M,editorValue:M.editorValue||ot.editorValue||ot.solutionTemplate}),editorSessionId:"",handleDeclarationNavigate:t.handleDeclarationNavigate,handleEditorEval:t.handleEditorEval,handleEditorValueChange:t.handleEditorValueChange,handleEditorUpdateBreakpoints:t.handleEditorUpdateBreakpoints,handleUpdateHasUnsavedChanges:t.handleUpdateHasUnsavedChanges,handlePromptAutocomplete:t.handlePromptAutocomplete,isEditorAutorun:!1}:void 0,handleSideContentHeightChange:t.handleSideContentHeightChange,hasUnsavedChanges:n,mcqProps:{mcq:ot,handleMCQSubmit:M=>t.handleSave(r.questions[pt].id,M)},sideBarProps:{tabs:[]},sideContentHeight:t.sideContentHeight,sideContentProps:U(t,pt),replProps:{handleBrowseHistoryDown:t.handleBrowseHistoryDown,handleBrowseHistoryUp:t.handleBrowseHistoryUp,handleReplEval:t.handleReplEval,handleReplValueChange:t.handleReplValueChange,output:t.output,replValue:t.replValue,sourceChapter:ot?.library?.chapter||Lt.Chapter.SOURCE_4,sourceVariant:Lt.Variant.DEFAULT,externalLibrary:ot?.library?.external?.name||"NONE",replButtons:Ft()}};return b.jsxs("div",{className:Ge("WorkspaceParent",We),children:[x(),b.jsx(Ni,{...ut})]})};function Ss(t){const r={};return t.filter(h=>r.hasOwnProperty(h)?!1:r[h]=!0)}const Ps=(t,r)=>({hasUnsavedChanges:t.workspaces.assessment.hasUnsavedChanges,isRunning:t.workspaces.assessment.isRunning,isDebugging:t.workspaces.assessment.isDebugging,enableDebugging:t.workspaces.assessment.enableDebugging,output:t.workspaces.assessment.output,replValue:t.workspaces.assessment.replValue,sideContentHeight:t.workspaces.assessment.sideContentHeight,storedAssessmentId:t.workspaces.assessment.currentAssessment,storedQuestionId:t.workspaces.assessment.currentQuestion}),Y="assessment",Ms=t=>rr({handleBrowseHistoryDown:()=>qr(Y),handleBrowseHistoryUp:()=>kr(Y),handleChapterSelect:(r,h)=>Ur(r,Lt.Variant.DEFAULT,Y),handleClearContext:(r,h)=>Vr(Y,r,h),handleDeclarationNavigate:r=>Gr(Y,r),handleEditorEval:()=>Wr(Y),handleEditorValueChange:(r,h)=>Hr(Y,r,h),handleEditorUpdateBreakpoints:(r,h)=>zr(Y,r,h),handleInterruptEval:()=>Yr(Y),handleReplEval:()=>Qr(Y),handleReplOutputClear:()=>$r(Y),handleReplValueChange:r=>Kr(r,Y),handleResetWorkspace:r=>Jr(Y,r),handleUpdateWorkspace:r=>Zr(Y,r),handleSave:ti,handleSideContentHeightChange:r=>ei(r,Y),handleTestcaseEval:r=>ni(Y,r),handleUpdateHasUnsavedChanges:r=>ri(Y,r),handleUpdateCurrentAssessmentId:ii,handleDebuggerPause:()=>si(Y),handleDebuggerResume:()=>oi(Y),handleDebuggerReset:()=>ai(Y),handlePromptAutocomplete:(r,h,s)=>ui(Y,r,h,s)},t),_s=nr(Ps,Ms)(Ls);function Rs(t){const[r,h]=q.useState("Import XML");let s;q.useEffect(()=>{const i=At();i&&t.newAssessment(i)},[t.newAssessment]);const l=i=>c=>{if(!s)return;const w=s.result;w&&fr(w,(T,E)=>{console.dir(i);try{const p=ts(E);p[0].fileName=i.name.slice(0,-4),Nt(p[0]),t.updateEditingOverview(p[0]),ve(p[1]),t.newAssessment(p[1]),h("Success!")}catch(p){console.log(p),h("Invalid XML!")}})},n=i=>{const c=i.target.files;i.target.files&&(s=new FileReader,s.onloadend=l(c[0]),s.readAsText(c[0]))},e=()=>{Nt(ze()),t.updateEditingOverview(ze()),ve(Ye()),t.newAssessment(Ye())};return b.jsxs("div",{children:[b.jsx("div",{children:"Please ensure that the xml uploaded is trustable."}),b.jsx("div",{children:b.jsx(wi,{text:r,inputProps:{accept:".xml"},onChange:n})}),b.jsx("div",{children:b.jsx(W,{label:"Make New Mission",icon:F.NEW_OBJECT,onClick:e})})]})}const js=(t,r)=>r,Fs=t=>rr({newAssessment:ci},t),Xs=nr(js,Fs)(Rs),Bs=()=>{},qs=()=>{const{assessmentConfigurations:t}=er(c=>c.session),r=t?.map(c=>c.type)||[],[h,s]=q.useState(Zi()),l=li();if(l.assessmentId&&!l.assessmentId?.match(Qe)||l.questionId&&!l.questionId?.match(Qe))return b.jsx(hi,{to:"/mission-control"});const n=$e(l.assessmentId),e=$e(l.questionId)||$n.defaultQuestionId;if(n===-1&&h){const c=h,w={assessmentId:n,questionId:e,assessmentOverview:c,updateAssessmentOverview:s,notAttempted:c.status===zn.not_attempted,closeDate:c.closeAt};return b.jsx("div",{className:"Academy",children:b.jsx(_s,{...w})})}const i=b.jsxs(b.Fragment,{children:[b.jsx(Xs,{updateEditingOverview:s}),h&&b.jsx(ls,{overview:h,updateEditingOverview:s,listingPath:"/mission-control",assessmentTypes:r})]});return b.jsx("div",{className:"Assessment Academy",children:b.jsx(Ti,{display:i,loadContentDispatch:Bs})})},ks=qs;ks.displayName="MissionControl";export{ks as Component,qs as default};
