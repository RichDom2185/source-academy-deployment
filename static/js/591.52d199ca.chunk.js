"use strict";(globalThis.webpackChunkfrontend=globalThis.webpackChunkfrontend||[]).push([[591],{60363:(e,t,s)=>{s.d(t,{k:()=>d});var i=s(51411),a=s(59118),n=(s(72791),s(17862)),o=s(90362),r=s(50472),l=s(80184);const d=e=>{const t=!e.isDebugging&&(0,l.jsx)(r.h,{handleEditorEval:e.handleEditorEval,isEntrypointFileDefined:e.isEntrypointFileDefined,color:e.isRunning?"#39FF14":void 0,className:e.isRunning?"WaitingCursor":void 0},"run"),s=e.isEditorAutorun&&(0,l.jsx)(n.Z,{label:"Auto",icon:a.d.AUTOMATIC_UPDATES}),d=!e.pauseDisabled&&e.isRunning&&!e.isDebugging&&(0,l.jsx)(n.Z,{label:"Pause",icon:a.d.STOP,onClick:e.handleDebuggerPause}),c=!e.isRunning&&e.isDebugging&&(0,l.jsx)(n.Z,{label:"Resume",icon:a.d.CHEVRON_RIGHT,onClick:e.handleDebuggerResume}),h=t=>e.isDebugging&&(0,l.jsx)(n.Z,{label:t,icon:a.d.STOP,onClick:e.handleDebuggerReset}),{isMobileBreakpoint:u}=(0,o.Fs)();return u?(0,l.jsxs)(l.Fragment,{children:[false,d,c,h("Stop")]}):(0,l.jsxs)(l.Fragment,{children:[!e.autorunDisabled&&(0,l.jsx)("div",{className:"Switch",children:(0,l.jsx)(i.rs,{label:"",checked:e.isEditorAutorun,onChange:e.handleToggleEditorAutorun})}),s||t,d,c,h("Stop Debugger")]})}},60054:(e,t,s)=>{s.d(t,{b:()=>v});var i=s(51411),a=s(37305),n=s(59118),o=s(95785),r=s(28644),l=s(42543),d=(s(72791),s(95134)),c=s(9631),h=s(90362),u=s(80184);const p=e=>{let{itemsParentRef:t,renderItem:s,items:a}=e;const n=a.filter((e=>{let{variant:t}=e;return t===l.Variant.DEFAULT})),o=a.filter((e=>{let{variant:t}=e;return t!==l.Variant.DEFAULT}));return(0,u.jsxs)(i.v2,{ulRef:t,style:{display:"flex",flexDirection:"column"},children:[n.map(s),o.length>0&&(0,u.jsx)(i.sN,{text:"Variants",icon:"cog",children:o.map(s)},"variant-menu")]})},m=e=>(t,s)=>{let{handleClick:a}=s;const n=e&&t.chapter===l.Chapter.SOURCE_1,r=n?"Folder mode makes use of lists which are not available in Source 1. To switch to Source 1, disable Folder mode.":void 0;return(0,u.jsx)(o.u,{content:r,disabled:void 0===r,children:(0,u.jsx)(i.sN,{onClick:a,text:t.displayName,disabled:n})},t.displayName)},x=r.P.ofType(),v=e=>{let{isFolderModeEnabled:t,sourceChapter:s,sourceVariant:o,handleChapterSelect:r=(()=>{}),disabled:l=!1}=e;const v=(0,h.ix)((e=>e.playground.languageConfig.mainLanguage)),g=[...d.Vf,...c.Z.playgroundOnly?[d.qP,d.uQ,d.s6]:[],...d.ik,...d.YB];return(0,u.jsx)(x,{items:g.filter((e=>{let{mainLanguage:t}=e;return t===v})),onItemSelect:r,itemRenderer:m(t),itemListRenderer:p,filterable:!1,disabled:l,children:(0,u.jsx)(i.zx,{className:a.IRm,text:(0,d.w$)(s,o),rightIcon:l?null:n.d.DOUBLE_CARET_VERTICAL,disabled:l})})}},45686:(e,t,s)=>{s.d(t,{Z:()=>_});var i=s(55048),a=s(59118),n=s(72791),o=s(24805),r=s(14635),l=s(29860),d=s(55360),c=s(70152),h=s(39215),u=s(59962),p=s.n(u),m=s(1324),x=s(80184);const v=e=>(0,x.jsx)(p(),{axis:"y",handle:"#dragHandle",position:e.position,bounds:{top:-500,left:0,right:0,bottom:0},onDrag:e.onDrag,disabled:e.disabled,children:(0,x.jsxs)("div",{className:"mobile-draggable",children:[e.disabled?(0,x.jsx)("div",{className:"handle disabled",id:"draghandle",children:["1","2","3"].map((e=>(0,x.jsx)("div",{className:"circle"},e)))}):(0,x.jsx)("div",{className:"handle enabled",id:"dragHandle",children:["1","2","3"].map((e=>(0,x.jsx)("div",{className:"circle"},e)))}),(0,x.jsx)("div",{className:"REPL-content",children:(0,x.jsx)(m.Z,{...e.replProps})})]})});var g=s(81495),b=s.n(g);const f=e=>{const[t,s]=n.useState(!1),[i,a]=n.useState("\u1438"),[o,r]=n.useState({x:0,y:0}),[l,d]=n.useState(1),c=e=>{e.preventDefault()},h={onKeyPress:t=>{if(!e.targetKeyboardInput)return;const s=e.targetKeyboardInput;"{arrowleft}"===t?s.navigateLeft():"{arrowright}"===t?s.navigateRight():"{bksp}"===t?s.remove("left"):"{tab}"===t?s.insert("\t"):["+","-","*","/","%","=>","===","&&","||"].includes(t)?s.insert(" "+t+" "):s.insert(t)},baseClass:"simple-keyboard-shortcut",layout:{default:["{ } ( ) \" ' _ => ;","{tab} && || ! < > = ===","+ - * / % // {arrowleft} {arrowright}"]},buttonTheme:[{class:"mobile-navigation",buttons:"{arrowleft} {arrowright}"},{class:"big-buttons",buttons:"=== &&"}],theme:"hg-theme-default",preventMouseDownDefault:!0,disableCaretPositioning:!1};return(0,x.jsx)(p(),{axis:"y",handle:"#floating-dragHandle",position:o,bounds:{top:-200,left:0,right:0,bottom:200},onDrag:(e,t)=>{r(t)},children:(0,x.jsxs)("div",{className:"mobile-floating-keyboard",id:"mobile-floating-toggle",children:[(0,x.jsx)("button",{className:"mobile-floating-toggle",onClick:e=>{t?(document.getElementById("mobile-keyboard-toggle").style.setProperty("display","none"),document.getElementById("mobile-floating-toggle").style.setProperty("width","42px"),document.getElementById("mobile-floating-toggle").style.setProperty("opacity","0.6"),a("\u1438"),s(!1)):(document.getElementById("mobile-keyboard-toggle").style.setProperty("display","flex"),document.getElementById("mobile-floating-toggle").style.setProperty("width","99%"),document.getElementById("mobile-floating-toggle").style.setProperty("opacity","1"),a("\u1433"),s(!0))},onMouseDown:c,children:i}),(0,x.jsxs)("div",{className:"mobile-keyboard-toggle-container",id:"mobile-keyboard-toggle",children:[(0,x.jsx)("div",{className:"mobile-keyboard-container",children:(0,x.jsx)(b(),{...h})}),(0,x.jsx)("button",{className:"mobile-keyboard-row-toggle",onClick:e=>{d((l+1)%3);const t=document.getElementsByClassName("simple-keyboard-shortcut");Array.from(t)[0].style.top=45*-l+"px"},onMouseDown:c,children:"\u2938"})]}),(0,x.jsx)("div",{id:"floating-dragHandle",children:":"})]})})};var j=s(51411),E=s(37305),y=s(95785),S=s(81694),C=s.n(S),N=s(80757),w=s(60879),k=s(65047);const T=e=>{const t=(0,x.jsxs)("div",{className:"mobile-control-bar",children:[e.editorButtons,e.flowButtons,e.editingWorkspaceButtons]});return(0,x.jsx)(k.p,{content:t,autoFocus:!1,children:(0,x.jsx)(j.zx,{icon:a.d.COG,className:C()(E.IRm,"mobile-control-bar-button")})})},P=e=>{let{selectedTabId:t,renderActiveTabPanelOnly:s,mobileControlBarProps:i,...a}=e;const n=/iPhone|iPod/.test(navigator.platform),o=e=>e.map((e=>((e,s)=>{if(!e.body)return;const i=s?{...e.body,props:{...e.body.props,workspaceLocation:s}}:e.body;return(0,x.jsx)("div",{className:e.id===t?"mobile-selected-panel":"mobile-unselected-panel",children:i},e.id)})(e,a.workspaceLocation)));return(0,x.jsx)(N.Z,{...a,renderFunction:(e,r)=>(0,x.jsxs)(x.Fragment,{children:[o(e),(0,x.jsx)("div",{className:"mobile-tabs-container",children:(0,x.jsxs)(j.mQ,{id:"mobile-side-content",onChange:r,renderActiveTabPanelOnly:s,selectedTabId:t,className:C()(E.Pyr,"mobile-side-content"),children:[e.map((e=>((e,t,s)=>{const i=void 0===e.id?e.label:e.id,a=(0,x.jsx)(y.u,{content:e.label,onOpening:()=>{var e;t&&(null===(e=document.getElementById((0,N.Y)(i)))||void 0===e||e.click())},children:(0,x.jsx)("div",{className:"side-content-tooltip",id:(0,N.Y)(i),children:(0,x.jsx)(j.JO,{icon:e.iconName,iconSize:20})})});return(0,x.jsx)(j.OK,{id:i,title:a,disabled:e.disabled,className:"side-content-tab"},i)})(e,n,a.workspaceLocation))),("playground"===a.workspaceLocation||"sicp"===a.workspaceLocation)&&(0,x.jsx)(T,{...i})]})})]})})},R=n.memo(P,w.t),_=e=>{var t;const s=/Android/.test(navigator.userAgent),u=(0,o.useMediaQuery)({orientation:"portrait"}),[p,m]=n.useState({x:0,y:0}),[g,b]=n.useState(!1);i.$.onlyShowFocusOnTabs(),n.useEffect((()=>("assessment"===e.mobileSideContentProps.workspaceLocation&&document.documentElement.style.setProperty("--mobile-panel-height","calc(100% - 100px - 1.1rem)"),()=>{document.documentElement.style.setProperty("--mobile-panel-height","calc(100% - 70px)")})),[]),n.useEffect((()=>{if(u&&s){document.documentElement.style.setProperty("overflow","auto");document.querySelector("meta[name=viewport]").setAttribute("content","height="+window.innerHeight+", width=device-width")}return()=>{if(s){document.documentElement.style.setProperty("overflow","hidden");document.querySelector("meta[name=viewport]").setAttribute("content","width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0")}N()}}),[u,s]);const[j,E]=n.useState(null),y=()=>E(null),S=e=>({...e,onFocus:(t,s)=>{e.onFocus&&e.onFocus(t,s),s&&E(s)},onBlur:(t,s)=>{e.onBlur&&e.onBlur(t,s),y()}}),C=e=>{document.documentElement.style.setProperty("--mobile-repl-height",Math.max(-e,0)+"px"),m({x:0,y:e})},N=()=>{m({x:0,y:0}),document.documentElement.style.setProperty("--mobile-repl-height","0px")},w=null===(t=e.editorContainerProps)||void 0===t?void 0:t.handleEditorEval,k=n.useCallback(((e,t)=>{e===h.B.mobileEditorRun&&w&&w(),e===h.B.mobileEditorRun&&t!==h.B.substVisualizer&&t!==h.B.autograder&&t!==h.B.testcases?C(-300):N(),e===h.B.folder||e===h.B.substVisualizer||t===h.B.substVisualizer&&e===h.B.mobileEditorRun?b(!0):b(!1)}),[w]),T=e.mobileSideContentProps.onChange,P=n.useCallback(((e,t,s)=>{T(e,t,s),k(e,t)}),[k,T]),_=e.sideBarProps.tabs.filter((e=>void 0!==e.id)),L=n.useMemo((()=>({label:"Editor",iconName:a.d.EDIT,body:null,id:h.B.mobileEditor})),[]),O=n.useMemo((()=>({label:"Run",iconName:a.d.PLAY,body:null,id:h.B.mobileEditorRun})),[]),z=n.useCallback((()=>({...e.mobileSideContentProps,onChange:P,tabs:{beforeDynamicTabs:[..._,L,...e.mobileSideContentProps.tabs.beforeDynamicTabs],afterDynamicTabs:[...e.mobileSideContentProps.tabs.afterDynamicTabs,O]}})),[P,L,O,e.mobileSideContentProps,_]),A="assessment"===e.mobileSideContentProps.workspaceLocation||"githubAssessment"===e.mobileSideContentProps.workspaceLocation;return(0,x.jsxs)("div",{className:"workspace mobile-workspace",children:[(0,x.jsx)(c.N,{when:!!e.hasUnsavedChanges,message:"You have changes that may not be saved. Are you sure you want to leave?"}),A&&(0,x.jsx)(r.Z,{...e.mobileSideContentProps.mobileControlBarProps}),(0,x.jsxs)("div",{children:[(0,x.jsx)("div",{className:"mobile-editor-panel",children:(()=>{if(e.editorContainerProps){const t={...e.editorContainerProps};return"sourcecast"===t.editorVariant&&(t.setDraggableReplPosition=()=>C(-100)),(0,x.jsx)(l.Z,{...S(e.editorContainerProps)})}return(0,x.jsx)(d.Z,{...e.mcqProps})})()}),(0,x.jsx)(R,{...z()})]}),(0,x.jsx)(v,{position:p,onDrag:(e,t)=>{document.documentElement.style.setProperty("--mobile-repl-height",Math.max(-t.y,0)+"px"),m(t)},disabled:g,replProps:(e=>({...e,onFocus:t=>{e.onFocus&&e.onFocus(t),E(t)},onBlur:()=>{e.onBlur&&e.onBlur(),y()}}))(e.replProps)},"repl"),(0,x.jsx)(f,{targetKeyboardInput:j})]})}},38321:(e,t,s)=>{s.d(t,{Z:()=>x});var i=s(37305),a=s(51411),n=s(59118),o=s(81694),r=s.n(o),l=s(72791),d=s(37325),c=s(51185),h=s(9631),u=s(80184);const p={PREVIOUS_STEP:"left",NEXT_STEP:"right"};class m extends l.Component{constructor(e){super(e),this.onPrevButtonClick=()=>{this.setState((e=>({currentStep:e.currentStep-1})))},this.onNextButtonClick=()=>{this.setState((e=>({currentStep:e.currentStep+1})))},this.state={steps:[],currentStep:0},c.Z.init((e=>{if(this.state.steps.length>0){const e=document.getElementById("data_visualizer-icon");null===e||void 0===e||e.classList.add("side-content-tab-alert")}this.setState({steps:e,currentStep:0})}))}render(){const e=()=>0===this.state.currentStep,t=()=>!this.state.steps||this.state.currentStep===this.state.steps.length-1,s={PREVIOUS_STEP:this.onPrevButtonClick,NEXT_STEP:this.onNextButtonClick};(0,d.configure)({ignoreEventsCondition:s=>"ArrowLeft"===s.key&&e()||"ArrowRight"===s.key&&t(),ignoreRepeatedEventsWhenKeyHeldDown:!1,stopEventPropagationAfterIgnoring:!1});const o=this.state.steps[this.state.currentStep];return(0,u.jsx)(d.GlobalHotKeys,{keyMap:p,handlers:s,children:(0,u.jsxs)("div",{className:r()("sa-data-visualizer",i.Pyr),children:[this.state.steps.length>1?(0,u.jsxs)("div",{style:{position:"relative",display:"flex",justifyContent:"center",alignItems:"center",marginBottom:10},children:[(0,u.jsx)(a.zx,{style:{position:"absolute",left:0},large:!0,outlined:!0,icon:n.d.ARROW_LEFT,onClick:this.onPrevButtonClick,disabled:e(),children:"Previous"}),(0,u.jsxs)("h3",{className:"bp4-text-large",children:["Call ",this.state.currentStep+1,"/",this.state.steps.length]}),(0,u.jsx)(a.zx,{style:{position:"absolute",right:0},large:!0,outlined:!0,icon:n.d.ARROW_RIGHT,onClick:this.onNextButtonClick,disabled:t(),children:"Next"})]}):null,this.state.steps.length>0?(0,u.jsx)("div",{style:{display:"flex",flexDirection:"row",overflowX:"auto"},children:null===o||void 0===o?void 0:o.map(((e,t)=>(0,u.jsxs)("div",{style:{margin:o.length>1?0:"0 auto"},children:[" ",(0,u.jsxs)(a.Zb,{style:{background:"#1a2530",padding:10},children:[o.length>1&&(0,u.jsxs)("h5",{className:"bp4-heading bp4-monospace-text",style:{marginTop:0,marginBottom:20,whiteSpace:"nowrap"},children:["Structure ",t+1]}),e]})]},t)))},o.length):(0,u.jsxs)("p",{id:"data-visualizer-default-text",className:i.Qyt,children:["The data visualizer helps you to visualize data structures.",this.state.steps,(0,u.jsx)("br",{}),(0,u.jsx)("br",{}),"It is activated by calling the function"," ",(0,u.jsxs)("code",{children:["draw_data(x",(0,u.jsx)("sub",{children:"1"}),", x",(0,u.jsx)("sub",{children:"2"}),", ... x",(0,u.jsx)("sub",{children:"n"}),")"]}),", where"," ",(0,u.jsxs)("code",{children:["x",(0,u.jsx)("sub",{children:"k"})]})," ","would be the"," ",(0,u.jsxs)("code",{children:["k",(0,u.jsx)("sup",{children:"th"})]})," ","data structure that you want to visualize and ",(0,u.jsx)("code",{children:"n"})," is the number of structures.",(0,u.jsx)("br",{}),(0,u.jsx)("br",{}),"The data visualizer uses box-and-pointer diagrams, as introduced in"," ",(0,u.jsx)("a",{href:h.y.textbookChapter2_2,rel:"noopener noreferrer",target:"_blank",children:(0,u.jsx)("i",{children:"Structure and Interpretation of Computer Programs, JavaScript Edition, Chapter 2, Section 2"})}),"."]})]})})}}const x=m},626:(e,t,s)=>{s.d(t,{Z:()=>j});var i=s(37305),a=s(51411),n=s(95785),o=s(81694),r=s.n(o),l=s(763),d=s(72791),c=s(37325),h=s(78687),u=s(59050),p=s(28727),m=s(52290),x=s(9631),v=s(89702),g=s(80184);const b={FIRST_STEP:"a",NEXT_STEP:"f",PREVIOUS_STEP:"b",LAST_STEP:"e"};class f extends d.Component{constructor(e){super(e),this.handleResize=(0,l.debounce)((()=>{const e=this.calculateWidth(this.props.editorWidth),t=this.calculateHeight(this.props.sideContentHeight);e===this.state.width&&t===this.state.height||(this.setState({height:t,width:e}),p.Z.updateDimensions(e,t))}),300),this.sliderRelease=e=>{this.props.handleEditorEval(this.props.workspaceLocation)},this.sliderShift=e=>{this.props.handleEnvStepUpdate(e,this.props.workspaceLocation),this.setState((t=>({value:e})))},this.stepPrevious=()=>{1!==this.state.value&&(this.sliderShift(this.state.value-1),this.props.handleEditorEval(this.props.workspaceLocation))},this.stepNext=()=>{const e=this.props.numOfStepsTotal;this.state.value!==e&&(this.sliderShift(this.state.value+1),this.props.handleEditorEval(this.props.workspaceLocation))},this.stepFirst=()=>{this.sliderShift(1),this.props.handleEditorEval(this.props.workspaceLocation)},this.stepLast=e=>()=>{this.sliderShift(e),this.props.handleEditorEval(this.props.workspaceLocation)},this.stepNextBreakpoint=()=>{for(const e of this.props.breakpointSteps)if(e>this.state.value)return this.sliderShift(e),void this.props.handleEditorEval(this.props.workspaceLocation);this.sliderShift(this.props.numOfStepsTotal),this.props.handleEditorEval(this.props.workspaceLocation)},this.stepPrevBreakpoint=()=>{for(let e=this.props.breakpointSteps.length-1;e>=0;e--){const t=this.props.breakpointSteps[e];if(t<this.state.value)return this.sliderShift(t),void this.props.handleEditorEval(this.props.workspaceLocation)}this.sliderShift(1),this.props.handleEditorEval(this.props.workspaceLocation)},this.state={visualization:null,value:-1,width:this.calculateWidth(e.editorWidth),height:this.calculateHeight(e.sideContentHeight)},p.Z.init((e=>this.setState({visualization:e})),this.state.width,this.state.height,(t=>{e.setEditorHighlightedLines(e.workspaceLocation,0,t)}))}calculateWidth(e){let t;return t=void 0===e?window.innerWidth-50:Math.min(5e3,window.innerWidth*(100-parseFloat(e))/100-50),Math.min(t,5e3)}calculateHeight(e){let t;return t=window.innerWidth<x.Z.mobileBreakpoint||void 0===e?window.innerHeight-150:e-150,Math.min(t,5e3)}componentDidMount(){this.handleResize(),window.addEventListener("resize",this.handleResize)}componentWillUnmount(){this.handleResize.cancel(),window.removeEventListener("resize",this.handleResize)}componentDidUpdate(e){e.sideContentHeight===this.props.sideContentHeight&&e.editorWidth===this.props.editorWidth||this.handleResize(),e.needEnvUpdate&&!this.props.needEnvUpdate&&this.stepFirst()}render(){const e=this.state.visualization?{FIRST_STEP:this.stepFirst,NEXT_STEP:this.stepNext,PREVIOUS_STEP:this.stepPrevious,LAST_STEP:this.stepLast(this.props.numOfStepsTotal)}:{FIRST_STEP:()=>{},NEXT_STEP:()=>{},PREVIOUS_STEP:()=>{},LAST_STEP:()=>{}};return(0,g.jsxs)(c.HotKeys,{keyMap:b,handlers:e,style:{maxHeight:"100%",overflow:this.state.visualization?"hidden":"auto"},children:[(0,g.jsxs)("div",{className:r()("sa-substituter",i.Pyr),children:[(0,g.jsx)(a.iR,{disabled:!this.state.visualization,min:1,max:this.props.numOfStepsTotal,onChange:this.sliderShift,onRelease:this.sliderRelease,value:this.state.value<1?1:this.state.value}),(0,g.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,g.jsxs)(a.hE,{children:[(0,g.jsx)(n.u,{content:"Agenda and Stash",compact:!0,children:(0,g.jsx)(a.AN,{onMouseUp:()=>{this.state.visualization&&p.Z.getCompactLayout()&&(p.Z.toggleAgendaStash(),p.Z.redraw())},icon:"layers",disabled:!this.state.visualization||!p.Z.getCompactLayout(),children:(0,g.jsx)(a.XZ,{checked:p.Z.getAgendaStash(),disabled:!p.Z.getCompactLayout(),style:{margin:0}})})}),(0,g.jsx)(n.u,{content:"Truncate Agenda",compact:!0,children:(0,g.jsx)(a.AN,{onMouseUp:()=>{this.state.visualization&&p.Z.getAgendaStash()&&(p.Z.toggleStackTruncated(),p.Z.redraw())},icon:"minimize",disabled:!this.state.visualization||!p.Z.getAgendaStash(),children:(0,g.jsx)(a.XZ,{checked:p.Z.getStackTruncated(),disabled:!p.Z.getAgendaStash(),style:{margin:0}})})})]}),(0,g.jsxs)(a.hE,{children:[(0,g.jsx)(a.zx,{disabled:!this.state.visualization,icon:"double-chevron-left",onClick:this.stepPrevBreakpoint}),(0,g.jsx)(a.zx,{disabled:!this.state.visualization,icon:"chevron-left",onClick:this.stepPrevious}),(0,g.jsx)(a.zx,{disabled:!this.state.visualization,icon:"chevron-right",onClick:this.stepNext}),(0,g.jsx)(a.zx,{disabled:!this.state.visualization,icon:"double-chevron-right",onClick:this.stepNextBreakpoint})]}),(0,g.jsxs)(a.hE,{children:[(0,g.jsx)(n.u,{content:"Experimental",compact:!0,children:(0,g.jsx)(a.AN,{onMouseUp:()=>{this.state.visualization&&(p.Z.toggleCompactLayout(),p.Z.redraw())},icon:"build",disabled:!this.state.visualization,children:(0,g.jsx)(a.XZ,{checked:!p.Z.getCompactLayout(),disabled:!this.state.visualization,style:{margin:0}})})}),(0,g.jsx)(n.u,{content:"Print",compact:!0,children:(0,g.jsx)(a.AN,{onMouseUp:()=>{this.state.visualization&&(p.Z.togglePrintableMode(),p.Z.redraw())},icon:"print",disabled:!this.state.visualization,children:(0,g.jsx)(a.XZ,{disabled:!this.state.visualization,checked:p.Z.getPrintableMode(),style:{margin:0}})})}),(0,g.jsx)(n.u,{content:"Save",compact:!0,children:(0,g.jsx)(a.AN,{icon:"floppy-disk",disabled:!this.state.visualization,onClick:m.A.exportImage})})]})]})]})," ",this.state.visualization||(0,g.jsxs)("div",{id:"env-visualizer-default-text",className:i.Qyt,"data-testid":"env-visualizer-default-text",children:["The environment model visualizer generates environment model diagrams following a notation introduced in"," ",(0,g.jsx)("a",{href:x.y.textbookChapter3_2,rel:"noopener noreferrer",target:"_blank",children:(0,g.jsx)("i",{children:"Structure and Interpretation of Computer Programs, JavaScript Edition, Chapter 3, Section 2"})}),".",(0,g.jsx)("br",{}),(0,g.jsx)("br",{})," On this tab, the REPL will be hidden from view, so do check that your code has no errors before running the stepper. You may use this tool by running your program and then dragging the slider above to see the state of the environment at different stages in the evaluation of your program. Clicking on the fast-forward button (double chevron) will take you to the next breakpoint in your program",(0,g.jsx)("br",{}),(0,g.jsx)("br",{}),(0,g.jsx)(a.iz,{}),"Some useful keyboard shortcuts:",(0,g.jsx)("br",{}),(0,g.jsx)("br",{}),"a: Move to the first step",(0,g.jsx)("br",{}),"e: Move to the last step",(0,g.jsx)("br",{}),"f: Move to the next step",(0,g.jsx)("br",{}),"b: Move to the previous step",(0,g.jsx)("br",{}),(0,g.jsx)("br",{}),"Note that these shortcuts are only active when the browser focus is on this tab."]}),(0,g.jsxs)(a.hE,{vertical:!0,style:{position:"absolute",bottom:"20px",right:"20px"},children:[(0,g.jsx)(a.zx,{icon:"plus",disabled:!this.state.visualization,onClick:()=>m.A.zoomStage(!0,5),style:{marginBottom:"5px",borderRadius:"3px"}}),(0,g.jsx)(a.zx,{icon:"minus",disabled:!this.state.visualization,onClick:()=>m.A.zoomStage(!1,5),style:{borderRadius:"3px"}})]})]})}}const j=(0,h.$j)(((e,t)=>{let s;return s="playground"===t.workspaceLocation||"sicp"===t.workspaceLocation?t.workspaceLocation:"playground",{...t,numOfStepsTotal:e.workspaces[s].envStepsTotal,numOfSteps:e.workspaces[s].envSteps,breakpointSteps:e.workspaces[s].breakpointSteps,needEnvUpdate:e.workspaces[s].updateEnv}}),(e=>(0,u.DE)({handleEditorEval:e=>(0,v.evalEditor)(e),handleEnvStepUpdate:(e,t)=>(0,v.updateEnvSteps)(e,t),setEditorHighlightedLines:(e,t,s)=>(0,v.setEditorHighlightedLinesAgenda)(e,t,s)},e)))(f)},18465:(e,t,s)=>{s.d(t,{cM:()=>o,wH:()=>r});var i=s(92810);const a={},n={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_PLAYGROUND_ONLY:"true",REACT_APP_MODULE_BACKEND_URL:"https://source-academy.github.io/modules",REACT_APP_SW_EXCLUDE_REGEXES:void 0}.REACT_APP_CADET_LOGGER;function o(e,t){var s;n&&(s={...t,questionId:a[e],sessionId:e},new Promise(((e,t)=>{d().then((i=>{const a=i.transaction([l],"readwrite");a.oncomplete=e,a.onerror=t,a.objectStore(l).add(s)}))})))}function r(e,t){const s=(0,i.Z)();return a[s]=e,o(s,{...t,type:"init",time:Date.now()}),s}const l="logs",d=function(e){let t=null;return()=>t||(t=e(),t)}((()=>new Promise(((e,t)=>{const s=indexedDB.open("evtlogs",1);s.onsuccess=t=>{e(s.result)},s.onerror=e=>{console.error("Failed to get db",e),t(s.error)},s.onupgradeneeded=e=>{(null===e||void 0===e?void 0:e.target).result.createObjectStore(l,{keyPath:"id",autoIncrement:!0})}}))))},84259:(e,t,s)=>{s.d(t,{gM:()=>ue,NG:()=>he,HE:()=>pe,nf:()=>me,EG:()=>xe,sd:()=>ve,a0:()=>ge,JN:()=>ce});var i=s(59118),a=s(87583),n=s(51411),o=s(37305),r=s(81694),l=s.n(r),d=s(72791),c=s(78687),h=s(11087),u=s(80184);const p=()=>(0,u.jsx)("div",{style:{margin:"2em 1em"},children:(0,u.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",id:"board-Layer_1","data-name":"Layer 1",viewBox:"0 0 110.73 170.04",width:"138.92260644554224",height:"213.33333333333334",children:[(0,u.jsxs)("defs",{children:[(0,u.jsxs)("linearGradient",{id:"board-linear-gradient",x1:"-374.89",y1:"432.9",x2:"-374.89",y2:"432.82",gradientTransform:"matrix(110.73 0 0 -106.94 41567.45 46425.3)",gradientUnits:"userSpaceOnUse",children:[(0,u.jsx)("stop",{offset:"0",stopColor:"#f1f1f1"}),(0,u.jsx)("stop",{offset:"1",stopColor:"#7a7a7a"})]}),(0,u.jsxs)("linearGradient",{id:"board-linear-gradient-2",x1:"-376",y1:"450.74",x2:"-376",y2:"450.72",gradientTransform:"matrix(100.11 0 0 -79.18 37697.19 35762.28)",gradientUnits:"userSpaceOnUse",children:[(0,u.jsx)("stop",{offset:"0",stopColor:"#a8aaa8"}),(0,u.jsx)("stop",{offset:"1",stopColor:"gray"})]}),(0,u.jsxs)("linearGradient",{id:"board-linear-gradient-3",x1:"-376.21",y1:"614.94",x2:"-376.21",y2:"614.75",gradientTransform:"matrix(98.29 0 0 -23.36 37033.43 14529.9)",gradientUnits:"userSpaceOnUse",children:[(0,u.jsx)("stop",{offset:"0",stopColor:"#a8aaa8"}),(0,u.jsx)("stop",{offset:"1",stopColor:"#535453"})]}),(0,u.jsxs)("linearGradient",{id:"board-linear-gradient-black",x1:"-382.07",y1:"493.36",x2:"-382.07",y2:"494.25",gradientTransform:"matrix(65.53 0 0 -48.84 25091.11 24228.69)",gradientUnits:"userSpaceOnUse",children:[(0,u.jsx)("stop",{offset:"0",stopColor:"#6a6a6a"}),(0,u.jsx)("stop",{offset:".52",stopColor:"#6a6a6a"}),(0,u.jsx)("stop",{offset:"1",stopColor:"#6a6a6a"})]}),(0,u.jsxs)("linearGradient",{id:"board-linear-gradient-green",x2:"145",y2:"48",gradientUnits:"userSpaceOnUse",children:[(0,u.jsx)("stop",{offset:"0",stopColor:"#6a6a6a"}),(0,u.jsx)("stop",{offset:".52",stopColor:"#8CE300"}),(0,u.jsx)("stop",{offset:"1",stopColor:"#6a6a6a"})]}),(0,u.jsxs)("linearGradient",{id:"board-linear-gradient-red",x2:"145",y2:"48",gradientUnits:"userSpaceOnUse",children:[(0,u.jsx)("stop",{offset:"0",stopColor:"#6a6a6a"}),(0,u.jsx)("stop",{offset:".52",stopColor:"#D02E26"}),(0,u.jsx)("stop",{offset:"1",stopColor:"#6a6a6a"})]}),(0,u.jsxs)("linearGradient",{id:"board-linear-gradient-orange",x2:"145",y2:"48",gradientUnits:"userSpaceOnUse",children:[(0,u.jsx)("stop",{offset:"0",stopColor:"#6a6a6a"}),(0,u.jsx)("stop",{offset:".52",stopColor:"#F8D039"}),(0,u.jsx)("stop",{offset:"1",stopColor:"#6a6a6a"})]}),(0,u.jsxs)("linearGradient",{id:"board-linear-gradient-5",x1:"-743.87",y1:"1256.85",x2:"-743.87",y2:"1257.21",gradientTransform:"matrix(3.03 0 0 -6.22 2312.41 7891.56)",gradientUnits:"userSpaceOnUse",children:[(0,u.jsx)("stop",{offset:"0",stopColor:"#757575"}),(0,u.jsx)("stop",{offset:"1",stopColor:"#393939"})]}),(0,u.jsx)("clipPath",{id:"board-clip-path",children:(0,u.jsx)("path",{fill:"none",d:"M86.48 149.58h12.38v12.38H86.48z"})})]}),(0,u.jsxs)("g",{id:"board-EV3",children:[(0,u.jsxs)("g",{id:"board-brick",children:[(0,u.jsx)("path",{id:"board-ev3_body_2","data-name":"ev3 body 2",d:"M2 31.7h106.76a2 2 0 0 1 2 2v103a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2v-103a2 2 0 0 1 2-2z",fill:"url(#board-linear-gradient)"}),(0,u.jsx)("path",{id:"board-ev3_body_1","data-name":"ev3 body 1",d:"M8.19 127.57h94.35a2 2 0 0 1 2 2v38.53a2 2 0 0 1-2 2H8.19a2 2 0 0 1-2-2v-38.56a2 2 0 0 1 2-2z",fill:"#f1f1f1"}),(0,u.jsx)("path",{id:"board-ev3_screen_grey","data-name":"ev3 screen grey",d:"M7.28 0h96.17a2 2 0 0 1 2 2v75.21a2 2 0 0 1-2 2H7.28a2 2 0 0 1-2-2V2a2 2 0 0 1 2-2z",fill:"url(#board-linear-gradient-2)"}),(0,u.jsx)("path",{id:"board-ev3_screenborder","data-name":"ev3 screenborder",d:"M18.2 10.47h74.48a3.79 3.79 0 0 1 3.79 3.79v41.86a3.8 3.8 0 0 1-3.79 3.8H18.2a3.8 3.8 0 0 1-3.79-3.8V14.26a3.79 3.79 0 0 1 3.79-3.79z",fill:"#393939"}),(0,u.jsx)("path",{id:"board-ev3_screen","data-name":"ev3 screen",d:"M24 12.44h63.22A2.73 2.73 0 0 1 90 15.17v40.35a2.73 2.73 0 0 1-2.73 2.73H24a2.73 2.73 0 0 1-2.73-2.73V15.17A2.73 2.73 0 0 1 24 12.44z",fill:"#97b5a6"}),(0,u.jsx)("path",{id:"board-ev3_grey_buttom","data-name":"ev3 grey buttom",d:"M6.22 146.68h98.29v21.39a2 2 0 0 1-2 2H8.19a2 2 0 0 1-2-2z",fill:"url(#board-linear-gradient-3)"})]}),(0,u.jsxs)("g",{id:"board-buttons",children:[(0,u.jsx)("path",{id:"board-btn_grey","data-name":"btn grey",d:"M48.69 133.94c-5.58-5.39-14.26-14.26-14.26-14.26v-1.82H31a8.27 8.27 0 1 1 0-16.53h3.41V99.5l14.13-14.41h14.11C69 91.61 76.75 99.2 76.75 99.2v2.13H80a8.27 8.27 0 1 1 0 16.53h-3.25v1.82c-7.51 7.73-14 14.26-14 14.26z",fill:"#6a6a6a"}),(0,u.jsx)("path",{id:"board-btn_color","data-name":"btn color",d:"M48.69 133.94c-5.58-5.39-14.26-14.26-14.26-14.26v-1.82H31a8.27 8.27 0 1 1 0-16.53h3.41V99.5l14.13-14.41h14.11C69 91.61 76.75 99.2 76.75 99.2v2.13H80a8.27 8.27 0 1 1 0 16.53h-3.25v1.82c-7.51 7.73-14 14.26-14 14.26z",fill:"url(#board-linear-gradient-black)",style:{fill:'url("#board-linear-gradient-black")'}}),(0,u.jsx)("path",{id:"board-btn_left","data-name":"btn left",d:"M30.87 103.3h10.39v12.28H30.87a6.14 6.14 0 0 1-6.14-6.14 6.14 6.14 0 0 1 6.14-6.14z",fill:"#a8aaa8",className:"sim-button"}),(0,u.jsx)("path",{id:"board-btn_right","data-name":"btn right",d:"M80 115.58H69.62V103.3H80a6.14 6.14 0 0 1 6.15 6.14 6.14 6.14 0 0 1-6.15 6.14z",fill:"#a8aaa8",className:"sim-button"}),(0,u.jsx)("path",{id:"board-btn_enter","data-name":"btn enter",d:"M49.45 103.3h12a.46.46 0 0 1 .46.45v11.38a.46.46 0 0 1-.46.45h-12a.46.46 0 0 1-.46-.45v-11.38a.46.46 0 0 1 .46-.45z",fill:"#393939",className:"sim-button"}),(0,u.jsx)("path",{id:"board-btn_up","data-name":"btn up",d:"M49.15 87.37l12.74-.15 9.55 9.86L67.5 101v7.13h-3.64v-4.1a3 3 0 0 0-3-3H49.78a2.47 2.47 0 0 0-2.58 2.35v4.77h-3.67V101l-3.94-4z",fill:"#a8aaa8",className:"sim-button"}),(0,u.jsx)("path",{id:"board-btn_down","data-name":"btn down",d:"M61.83 131.54l-12.66.1-9.58-9.85 4-3.91v-7.17h3.6v4.11a3.06 3.06 0 0 0 3 3.06c3 .05 11 0 11 0a2.6 2.6 0 0 0 2.65-2.55v-4.62h3.67v7.17l3.91 3.91z",fill:"#a8aaa8",className:"sim-button"}),(0,u.jsx)("path",{id:"board-btn_part_4","data-name":"btn part 4",fill:"#393939",d:"M54 59.76h3.03v13.8H54z"}),(0,u.jsx)("path",{id:"board-btn_part_3","data-name":"btn part 3",fill:"#9a9a9a",d:"M54 72.96h3.03v6.07H54z"}),(0,u.jsx)("path",{id:"board-btn_part_2","data-name":"btn part 2",fill:"url(#board-linear-gradient-5)",d:"M54 72.96h3.03v6.22H54z"}),(0,u.jsx)("path",{id:"board-btn_part_1","data-name":"btn part 1",fill:"gray",d:"M54 79.18h3.03v5.92H54z"}),(0,u.jsx)("path",{id:"board-btn_back","data-name":"btn back",d:"M13.2 79.18h23.66v5.71c-2.62 2.64-6 6-6 6H15.17a2 2 0 0 1-2-2z",fill:"#a8aaa8",className:"sim-button"})]}),(0,u.jsxs)("g",{id:"board-LEGO_logo","data-name":"LEGO logo",children:[(0,u.jsx)("path",{id:"board-logo_white_bg","data-name":"logo white bg",fill:"#fff",d:"M86.56 149.66h12.21v12.21H86.56z"}),(0,u.jsxs)("g",{id:"board-lego",children:[(0,u.jsx)("g",{clipPath:"url(#board-clip-path)",children:(0,u.jsx)("g",{id:"board-logo_part_5","data-name":"logo part 5",children:(0,u.jsx)("path",{id:"board-Path_18","data-name":"Path 18",d:"M86.56 161.87h12.21v-12.21H86.56zM98 154.73a4.76 4.76 0 0 1-.24 1.18c-.43 1.27-.91 2.07-2.07 2.07a1.12 1.12 0 0 1-1.16-.7v-.15l-.09.11a1.86 1.86 0 0 1-1.46.72 1.29 1.29 0 0 1-1-.43l-.07-.09-.06.06a1.6 1.6 0 0 1-1.16.42 1.32 1.32 0 0 1-1-.37h-.09l-.07.07a1.55 1.55 0 0 1-1.11.37.87.87 0 0 1-.95-.79.37.37 0 0 1 0-.11 8.15 8.15 0 0 1 1.09-3.1 1 1 0 0 1 .92-.52.78.78 0 0 1 .57.17c.11.11.11.2.13.42v.28l.16-.24a1.6 1.6 0 0 1 1.52-.65 1 1 0 0 1 .9.37v.09l.06-.07a1.8 1.8 0 0 1 1.2-.39 1.53 1.53 0 0 1 1.12.37.69.69 0 0 1 .13.2l.07.11.08-.11a1.59 1.59 0 0 1 1.31-.57 1.27 1.27 0 0 1 1 .35 1.37 1.37 0 0 1 .26 1",fill:"#ffed00"})})}),(0,u.jsx)("g",{clipPath:"url(#board-clip-path)",children:(0,u.jsx)("g",{id:"board-logo_part_4","data-name":"logo part 4",children:(0,u.jsx)("path",{id:"board-Path_19","data-name":"Path 19",d:"M86.56 161.87h12.21v-12.21H86.56zm11.75-6.66a6.73 6.73 0 0 1-.52 1.59 2.28 2.28 0 0 1-2.1 1.55 1.67 1.67 0 0 1-1.36-.54 2.18 2.18 0 0 1-1.48.54 1.73 1.73 0 0 1-1.09-.35 2.12 2.12 0 0 1-1.22.35 1.8 1.8 0 0 1-1-.3 2.19 2.19 0 0 1-1.18.3 1.28 1.28 0 0 1-1.36-1.21 8.26 8.26 0 0 1 1.18-3.34 1.37 1.37 0 0 1 1.22-.8c.59 0 .79.17.9.37a2.24 2.24 0 0 1 1.46-.4 1.51 1.51 0 0 1 1 .33A2.4 2.4 0 0 1 94 153a1.74 1.74 0 0 1 1.36.45 2 2 0 0 1 1.33-.43 1.53 1.53 0 0 1 1.37.61 1.79 1.79 0 0 1 .29 1.55",fill:"#d42715"})})}),(0,u.jsx)("g",{clipPath:"url(#board-clip-path)",children:(0,u.jsx)("g",{id:"board-logo_part_3","data-name":"logo part 3",children:(0,u.jsx)("path",{id:"board-Path_20","data-name":"Path 20",d:"M86.48 162h12.38v-12.42H86.48zm12.2-.18h-12v-12h12z",fill:"#171714"})})}),(0,u.jsx)("g",{clipPath:"url(#board-clip-path)",children:(0,u.jsx)("g",{id:"board-logo_part_2","data-name":"logo part 2",children:(0,u.jsx)("path",{id:"board-Path_21","data-name":"Path 21",d:"M98.25 153.29v-.09h.06s.07 0 .07.05 0 0-.07 0zm.2.17v-.06c0-.05 0-.07-.06-.07a.09.09 0 0 0 .08-.09.07.07 0 0 0-.07-.08h-.17v.3h.07v-.13.07zm-.16-.39a.24.24 0 0 1 0 .48.24.24 0 0 1-.24-.24.26.26 0 0 1 .24-.24m0-.07a.31.31 0 0 0 0 .62.31.31 0 0 0 .31-.31.32.32 0 0 0-.31-.31",fill:"#171714"})})}),(0,u.jsx)("g",{clipPath:"url(#board-clip-path)",children:(0,u.jsx)("g",{id:"board-logo_part_1","data-name":"logo part 1",children:(0,u.jsx)("path",{id:"board-Path_22","data-name":"Path 22",d:"M96.7 153.33a1.73 1.73 0 0 0-1.38.61.66.66 0 0 0-.15-.22 1.47 1.47 0 0 0-1.16-.41 1.87 1.87 0 0 0-1.25.41 1.1 1.1 0 0 0-1-.41 1.7 1.7 0 0 0-1.6.7.52.52 0 0 0-.15-.46.87.87 0 0 0-.63-.2 1.1 1.1 0 0 0-1 .57 8.73 8.73 0 0 0-1.13 3.17 1 1 0 0 0 1 1h.08a1.53 1.53 0 0 0 1.18-.39 1.35 1.35 0 0 0 1 .39 1.61 1.61 0 0 0 1.23-.46 1.36 1.36 0 0 0 1.09.46 1.92 1.92 0 0 0 1.53-.77 1.2 1.2 0 0 0 1.24.75c1.2 0 1.73-.83 2.16-2.12a4.54 4.54 0 0 0 .27-1.2 1.21 1.21 0 0 0-1-1.37 1.29 1.29 0 0 0-.34 0m-8 3.28c.62-.11.79.11.77.33-.07.61-.63.76-1.12.74a.62.62 0 0 1-.69-.55 8.47 8.47 0 0 1 1.07-3 .72.72 0 0 1 .68-.39c.31 0 .37.15.37.33a14.2 14.2 0 0 1-1.07 2.55m2-.57c0 .11-.11.35-.17.59a3.1 3.1 0 0 1 .61-.09c.31 0 .48.14.48.38 0 .59-.66.76-1.11.76a.85.85 0 0 1-.94-.75v-.08a6 6 0 0 1 .67-2.27 1.36 1.36 0 0 1 1.53-.9c.31 0 .68.13.68.44s-.35.56-.68.59h-.5a3.58 3.58 0 0 0-.24.48c.64-.09.9 0 .79.41s-.59.52-1.12.44m3.13-1.55a.46.46 0 0 0-.37.21 6.33 6.33 0 0 0-.64 1.73c0 .28.09.35.22.35s.46-.24.55-.61c0 0-.42 0-.31-.37s.33-.44.68-.46c.7 0 .63.48.57.76a1.81 1.81 0 0 1-1.7 1.6.9.9 0 0 1-1-.79v-.18a5 5 0 0 1 .4-1.55c.37-.87.76-1.48 1.77-1.48.59 0 1.07.22 1 .76a.67.67 0 0 1-.64.68c-.11 0-.52 0-.39-.42 0-.13 0-.24-.15-.24m3.75.75a7.06 7.06 0 0 1-.59 1.61 1.41 1.41 0 0 1-1.37.86.82.82 0 0 1-.94-.86 5.11 5.11 0 0 1 .39-1.63c.31-.83.63-1.51 1.66-1.49s.94 1.05.85 1.51m-.85-.52a9.84 9.84 0 0 1-.63 1.85.33.33 0 0 1-.31.22c-.13 0-.17-.09-.2-.2a7.75 7.75 0 0 1 .7-1.94c.09-.13.18-.16.26-.13s.18.11.18.2",fill:"#171714"})})})]})]}),(0,u.jsxs)("g",{id:"board-EV3_logo","data-name":"EV3 logo",fill:"#f1f1f1",children:[(0,u.jsx)("path",{id:"board-ev3_3","data-name":"ev3 3",d:"M36 155a.18.18 0 0 1 .2.16v.84a.16.16 0 0 1-.17.14H34a.36.36 0 0 0-.38.33v1.14a.34.34 0 0 0 .38.3h2c.19 0 .17.14.17.14v.82c0 .08-.06.14-.17.14h-3.43a.2.2 0 0 1-.2-.19v-.05a.38.38 0 0 0-.38-.38h-1.12a.38.38 0 0 0-.38.38v1.64a.37.37 0 0 0 .38.33h6.75a.36.36 0 0 0 .39-.3v-6.89a.36.36 0 0 0-.39-.3H30.9a.34.34 0 0 0-.38.3v1.67a.38.38 0 0 0 .35.38H32a.36.36 0 0 0 .35-.36v-.05a.17.17 0 0 1 .16-.19H36z"}),(0,u.jsx)("path",{id:"board-ev3_v","data-name":"ev3 v",d:"M29.29 153.2H27.7c-.24 0-.33.17-.44.38L25.32 158a.27.27 0 0 1-.19.11.23.23 0 0 1-.19-.14L23 153.58c-.11-.21-.22-.38-.46-.38h-1.62c-.35 0-.41.19-.3.41l3.2 6.73c.17.32.28.38.58.38h1.42a.55.55 0 0 0 .57-.38l3.22-6.73c.11-.22 0-.41-.32-.41"}),(0,u.jsx)("path",{id:"board-ev3_e","data-name":"ev3 e",d:"M19.39 156.1a.34.34 0 0 1 .38.3v1.17a.33.33 0 0 1-.38.3h-5.05c-.11 0-.2.06-.2.14v.82c0 .08.09.14.2.14h5.05a.33.33 0 0 1 .38.3v1.15a.33.33 0 0 1-.35.3h-6.75a.35.35 0 0 1-.38-.3v-6.89a.34.34 0 0 1 .38-.3h6.75a.31.31 0 0 1 .35.28v1.17a.31.31 0 0 1-.33.3h-5.08c-.11 0-.22 0-.22.13v.89c0 .08.09.14.19.14z"})]})]})]})}),m=e=>{let{port:t}=e;return(0,u.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",id:"port-svg6348",viewBox:"0 0 49.96 58.93",children:(0,u.jsxs)("g",{id:"port-icn_port","data-name":"icn port",children:[(0,u.jsx)("path",{id:"port-port_2","data-name":"port 2",d:"M4.48 0h50v58.93h-50z",transform:"translate(-4.48)",fill:"#eaeaea"}),(0,u.jsx)("path",{id:"port-port_1","data-name":"port 1",d:"M9.74 46.49V18.66h17.11v-6.91h4.72V2.59h12.92v8.82h5.06v35.08h-8v7.43H38.9v-7.51h-2v7.5h-2.19v-7.5h-2.16v7.5h-2.1v-7.5H28.6v7.5h-2.1v-7.5h-1.82v7.5h-2.46v-7.5h-1.68v7.5H18v-7.45z",transform:"translate(-4.48)",fill:"#a8aaa8"}),(0,u.jsx)("g",{id:"port-text10060",style:{isolation:"isolate"},children:(0,u.jsx)("text",{id:"port-port_text",transform:"translate(22.21 40.2)",style:{isolation:"isolate",userSelect:"none"},fontSize:"16",fill:"#fff",fontFamily:"ArialMT,Arial",children:t})})]})})};var x=s(71829),v=s(97594),g=s(44439);const b=e=>{let{src:t,alt:s="Image",text:i}=e;return(0,u.jsx)("div",{className:"col-xs-3",children:(0,u.jsxs)("div",{className:l()(o.FZf),style:{textAlign:"center",padding:12,backgroundColor:"#2f343c"},children:["string"==typeof t?(0,u.jsx)("img",{style:{maxWidth:72},src:t,alt:s}):t,(0,u.jsx)("span",{style:{whiteSpace:"pre-wrap"},children:i})]})})};var f=s(95785),j=s(77063),E=s(66359);function y(e){const t=d.useRef(null),[s,i]=d.useState(!0),a=d.useCallback((()=>{var a;const n=!e||e(null===(a=t.current)||void 0===a?void 0:a.value);return s!==n&&i(n),n}),[s,e]),n=d.useCallback((()=>{a()}),[a]);return{ref:t,isValid:s,setIsValid:i,validate:a,onChange:n}}function S(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];return-1===t.findIndex((e=>{let{isValid:t}=e;return!t}))}function C(e){return"string"===typeof e&&e.length>0}var N,w=s(53757);function k(e){let{isOpen:t,onClose:s,deviceToEdit:i,defaultSecret:a}=e;const r=(0,c.I0)(),h=y(C),p=y(),m=y(C),[v,g]=d.useState(!1),[b,k]=d.useState(),[T,P]=d.useState(!1),[R,_]=d.useState(N.ENVIRONMENT),L=(0,u.jsx)(f.u,{content:"Scan QR Code",children:(0,u.jsx)(n.zx,{minimal:!0,icon:"clip",onClick:()=>P((()=>!T))})});return(0,u.jsxs)(n.Vq,{icon:i?"edit":"add",title:i?`Edit ${i.title} (${i.type})`:"Add new device",isOpen:t,className:o.Pyr,onClose:s,canEscapeKeyClose:!v,canOutsideClickClose:!v,isCloseButtonShown:!v,onOpening:()=>{k(void 0),h.setIsValid(!0),m.setIsValid(!0)},children:[(0,u.jsxs)("div",{className:o.TmF,children:[(0,u.jsx)(n.cw,{label:"Name",labelFor:"sa-remote-execution-name",helperText:"Shown to you only. You can key in a different name from other users.",children:(0,u.jsx)("input",{id:"sa-remote-execution-name",className:l()(o.O4S,o.ur0,h.isValid||o.GsM),type:"text",ref:h.ref,onChange:h.onChange,disabled:v,...i?{defaultValue:i.title}:void 0})}),(0,u.jsx)(n.cw,{label:"Type",labelFor:"sa-remote-execution-type",children:(0,u.jsx)(n.Lu,{id:"sa-remote-execution-type",className:l()(o.ur0),elementRef:e=>{p.ref.current=e},disabled:v||!!i,...i?{value:i.type}:void 0,children:w.n6.map((e=>{let{id:t,name:s}=e;return(0,u.jsx)("option",{value:t,children:s},t)}))})}),(0,u.jsx)(n.cw,{label:"Secret",labelFor:"sa-remote-execution-secret",children:(0,u.jsx)(n.BZ,{id:"sa-remote-execution-secret",className:l()(o.ur0,m.isValid||o.GsM),type:"text",inputRef:m.ref,onChange:m.onChange,disabled:v,readOnly:!!i,defaultValue:a,...i?{value:i.secret}:{rightElement:L}})}),T&&(0,u.jsxs)("div",{style:{textAlign:"center",display:"flex",flexDirection:"column",rowGap:"0.5rem"},children:[(0,u.jsx)(j.T,{onResult:e=>{if(e){P(!1);const t=m.ref.current;t&&(t.value=e.getText())}},constraints:{aspectRatio:1,frameRate:{ideal:12},deviceId:{ideal:"0"},facingMode:{ideal:R}},containerStyle:{width:"50%",marginInline:"auto"},videoStyle:{borderRadius:"0.3em"}}),(0,u.jsx)(n.zx,{style:{margin:"auto"},icon:"refresh",onClick:()=>{P(!1),_((()=>R===N.USER?N.ENVIRONMENT:N.USER)),setTimeout((()=>P(!0)),1)},children:"Change Camera"})]}),b&&(0,u.jsx)(n.UW,{intent:"danger",children:b})]}),(0,u.jsx)("div",{className:o.Alt,children:(0,u.jsxs)("div",{className:o.e$L,children:[(0,u.jsx)(n.zx,{onClick:s,disabled:v,children:"Cancel"}),(0,u.jsx)(n.zx,{intent:"primary",onClick:async()=>{const e=function(){let e=!0;const t=[];for(var s=arguments.length,i=new Array(s),a=0;a<s;a++)i[a]=arguments[a];for(const o of i)if(o.ref.current){var n;const s=o.validate();e=e&&s,t.push(null===(n=o.ref.current)||void 0===n?void 0:n.value)}else e=!1;return e?t:null}(h,p,m);if(!e)return;const[t,a,n]=e;try{k(void 0),g(!0),i?await(0,x.RD)({id:i.id,title:t}):await(0,x.tL)({title:t,type:a,secret:n})}catch(o){return k((null===o||void 0===o?void 0:o.message)||"Unknown error occurred."),void g(!1)}r(E.N.remoteExecFetchDevices()),s(),g(!1)},disabled:v||!S(h,m),children:i?"Edit":"Add"})]})})]})}!function(e){e.USER="user",e.ENVIRONMENT="environment",e.LEFT="left",e.RIGHT="right"}(N||(N={}));const T=s.p+"static/media/motorL.d9881b397c675cf48ac480a5d76dd80f.svg";const P=s.p+"static/media/motorM.6dabd58cacf5d4baa54380d2a2bcf141.svg";const R=s.p+"static/media/sColor.e3a59d23aeff25f724337d526aaf119d.svg";const _=s.p+"static/media/sGyro.e8909007059c30b5cb5420a6a9961780.svg";const L=s.p+"static/media/sTouch.cc0ed63f1df4c0521734a900abc2c770.svg";const O=s.p+"static/media/sUltrasonic.b9532e97bde2e7e50fe28a6d2c9c276e.svg";let z;var A,M,I;!function(e){e.LARGE="lego-ev3-l-motor",e.MEDIUM="lego-ev3-m-motor"}(z||(z={})),function(e){e.TOUCH="TOUCH"}(A||(A={})),function(e){e.ANGLE="GYRO-ANG",e.RATE="GYRO-RATE"}(M||(M={})),function(e){e[e.NONE=0]="NONE",e[e.BLACK=1]="BLACK",e[e.BLUE=2]="BLUE",e[e.GREEN=3]="GREEN",e[e.YELLOW=4]="YELLOW",e[e.RED=5]="RED",e[e.WHITE=6]="WHITE",e[e.BROWN=7]="BROWN"}(I||(I={}));const D=Object.freeze({[I.NONE]:"None",[I.BLACK]:"Black",[I.BLUE]:"Blue",[I.GREEN]:"Green",[I.YELLOW]:"Yellow",[I.RED]:"Red",[I.WHITE]:"White",[I.BROWN]:"Brown"});var B,H;let F;!function(e){e.COLOR="COL-COLOR",e.REFLECTED_LIGHT="COL-REFLECT",e.AMBIENT_LIGHT="COL-AMBIENT"}(B||(B={})),function(e){e.DISTANCE_CM="US-DIST-CM"}(H||(H={})),function(e){e.COLOR_SENSOR="lego-ev3-color",e.GYRO_SENSOR="lego-ev3-gyro",e.TOUCH_SENSOR="lego-ev3-touch",e.ULTRASONIC_SENSOR="lego-ev3-us"}(F||(F={}));const U=Object.freeze({[B.AMBIENT_LIGHT]:e=>`Ambient Light: ${e}`,[B.COLOR]:e=>`Color: ${D[e]}`,[B.REFLECTED_LIGHT]:e=>`Reflected Light: ${e}`,[M.ANGLE]:e=>`Angle: ${e}\xb0`,[M.RATE]:e=>`Rate: ${e}\xb0/s`,[A.TOUCH]:e=>"Touch: "+(e?"Yes":"No"),[H.DISTANCE_CM]:e=>`Dist: ${e/10}cm`}),V=Object.freeze({[F.COLOR_SENSOR]:R,[F.GYRO_SENSOR]:_,[F.TOUCH_SENSOR]:L,[F.ULTRASONIC_SENSOR]:O,[z.LARGE]:T,[z.MEDIUM]:P});var Z=s(90362);const G=e=>{let{text:t,handleDelete:s,handleEdit:i}=e;return(0,u.jsxs)(u.Fragment,{children:[t,(0,u.jsxs)("div",{className:"edit-buttons",children:[(0,u.jsx)(n.zx,{small:!0,minimal:!0,icon:"edit",onClick:e=>{e.stopPropagation(),i(e)}}),(0,u.jsx)(n.zx,{small:!0,minimal:!0,intent:"danger",icon:"trash",onClick:e=>{e.stopPropagation(),s(e)}})]})]})},W=e=>{let{session:t}=e;if(!t)return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("p",{children:"Not connected to a device\u2014programs are run in your local browser."}),(0,u.jsx)("p",{children:"Select a device from the right."})]});const{device:s,connection:i}=t;switch(i.status){case"CONNECTED":return(0,u.jsxs)("p",{children:["Connected to ",s.title," (",s.type,")."]});case"CONNECTING":return(0,u.jsx)(n.tR,{description:"Connecting...",icon:(0,u.jsx)(n.$j,{})});default:return(0,u.jsxs)(n.UW,{intent:"danger",children:["Could not connect to ",s.title,": ",i.error||"unknown error"]})}},Y=["portA","portB","portC","portD"],$=["port1","port2","port3","port4"],K=e=>{const[t,s]=d.useState(!!e.secretParams||void 0),[i,a]=d.useState(e.secretParams),r=(0,Z.ix)((e=>!!e.session.accessToken&&!!e.session.role)),f=(0,Z.ix)((e=>e.session.remoteExecutionDevices)),j=(0,Z.ix)((e=>e.session.remoteExecutionSession)),y=(0,c.I0)(),S="CONNECTED"===(null===j||void 0===j?void 0:j.connection.status);d.useEffect((()=>{j&&j.workspace!==e.workspace&&y(E.N.remoteExecUpdateSession({...j,workspace:e.workspace}))}),[j,y,e.workspace]),d.useEffect((()=>{!f&&r&&y(E.N.remoteExecFetchDevices())}),[y,f,r]),d.useEffect((()=>()=>{y(E.N.remoteExecDisconnect())}),[y]);const C=(0,d.useCallback)((async e=>{if(await(0,v.pG)({title:"Really delete device?",contents:`Are you sure you want to delete ${e.title} (${e.type})?`,positiveLabel:"Delete",positiveIntent:"danger",negativeLabel:"No",icon:"trash"})){try{await(0,x.n1)(e)}catch(t){return void(0,g.N9)(t.message||"Unknown error occurred.")}S&&y(E.N.remoteExecDisconnect()),y(E.N.remoteExecFetchDevices())}}),[y,S]);if(!r)return(0,u.jsxs)(n.UW,{intent:"danger",children:["Please ",(0,u.jsx)(h.OL,{to:"/login",children:"log in"})," to execute on a remote device."]});const N=null===j||void 0===j?void 0:j.device;return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)("div",{className:"sa-remote-execution row",children:[(0,u.jsx)("div",{className:"col-xs-6",children:(0,u.jsx)(W,{session:j})}),(0,u.jsx)("div",{className:"col-xs-6 devices-menu-container",children:(0,u.jsxs)(n.v2,{className:l()(o.FZf),children:[(0,u.jsx)(n.sN,{text:"Browser",onClick:()=>y(E.N.remoteExecDisconnect()),icon:N?void 0:"tick",intent:N?void 0:"success"}),null===f||void 0===f?void 0:f.map((t=>{const{id:i,title:a,type:o}=t,r=(null===N||void 0===N?void 0:N.id)===t.id;return(0,u.jsx)(n.sN,{onClick:()=>y(E.N.remoteExecConnect(e.workspace,t)),text:`${a} (${o})`,icon:r&&"tick",labelElement:(0,u.jsx)(G,{text:r&&S?"Connected":void 0,handleEdit:()=>s(t),handleDelete:async()=>await C(t)}),intent:r&&S?"success":void 0},i)})),(0,u.jsx)(n.R,{}),(0,u.jsx)(n.sN,{text:"Add new device...",icon:"add",onClick:()=>s(!0)})]})}),(0,u.jsx)(k,{isOpen:!!t,deviceToEdit:"object"===typeof t?t:void 0,defaultSecret:!0===t?i:void 0,onClose:()=>{s(void 0),a(void 0),e.callbackFunction&&e.callbackFunction(void 0)}})]}),S&&N&&N.peripherals&&(0,u.jsx)("div",{children:(0,u.jsxs)("div",{style:{textAlign:"center",maxWidth:480,marginInline:"auto",marginBlock:"2rem"},children:[(0,u.jsx)("div",{className:"sa-remote-execution row",children:Y.map((e=>{var t;const s=null===(t=N.peripherals)||void 0===t?void 0:t[e];return s?(0,u.jsx)(b,{src:V[s.type],text:`Speed: ${s.speed}\xb0/s\nPosition: ${s.position}\xb0`}):(0,u.jsx)(b,{src:(0,u.jsx)(m,{port:e.substring(e.length-1)})})}))}),(0,u.jsx)(p,{}),(0,u.jsx)("div",{className:"sa-remote-execution row",children:$.map((e=>{var t;const s=null===(t=N.peripherals)||void 0===t?void 0:t[e];return s?(0,u.jsx)(b,{src:V[s.type],text:U[s.mode](s.value)}):(0,u.jsx)(b,{src:(0,u.jsx)(m,{port:e.substring(e.length-1)})})}))})]})})]})};var X=s(626),Q=s(38399),q=s(37325),J=s(13982);s(59341);const ee=()=>(0,u.jsx)("div",{children:(0,u.jsxs)("div",{id:"substituter-default-text",className:o.Qyt,children:["Welcome to the Stepper!",(0,u.jsx)("br",{}),(0,u.jsx)("br",{}),"On this tab, the REPL will be hidden from view, so do check that your code has no errors before running the stepper. You may use this tool by writing your program on the left, then dragging the slider above to see its evaluation.",(0,u.jsx)("br",{}),(0,u.jsx)("br",{}),"On even-numbered steps, the part of the program that will be evaluated next is highlighted in yellow. On odd-numbered steps, the result of the evaluation is highlighted in green. You can change the maximum steps limit (500-5000, default 1000) in the control bar.",(0,u.jsx)("br",{}),(0,u.jsx)("br",{}),(0,u.jsx)(n.iz,{}),"Some useful keyboard shortcuts:",(0,u.jsx)("br",{}),(0,u.jsx)("br",{}),"a: Move to the first step",(0,u.jsx)("br",{}),"e: Move to the last step",(0,u.jsx)("br",{}),"f: Move to the next step",(0,u.jsx)("br",{}),"b: Move to the previous step",(0,u.jsx)("br",{}),(0,u.jsx)("br",{}),"Note that these shortcuts are only active when the browser focus is on this tab (click on or above the explanation text)."]})}),te={FIRST_STEP:"a",NEXT_STEP:"f",PREVIOUS_STEP:"b",LAST_STEP:"e"},se=e=>(0,u.jsx)(n.Zb,{children:(0,u.jsx)(n.SU,{className:"result-output",children:e.content})});class ie extends d.Component{constructor(e){super(e),this.getDiffMarkers=e=>{const t=e<=this.props.content.length?e-1:0,s=this.props.content[t],i=s.code,a=s.redex.split("\n"),n=[];if(a.length>0){const t=i.split("@redex");let s=t[0],o=s.split("\n"),r=o.length-1,l=o[r].length;for(let i=0;i<t.length-1;i++){const d=r+a.length-1,c=1===a.length?l+a[a.length-1].length:a[a.length-1].length;n.push({startRow:r,startCol:l,endRow:d,endCol:c,className:e%2===0?"beforeMarker":"afterMarker",type:"background"}),s=s+a+t[i+1],o=s.split("\n"),r=o.length-1,l=o[r].length}}return n},this.sliderShift=e=>{this.setState((t=>({value:e})))},this.stepFirst=()=>{this.sliderShift(1)},this.stepLast=e=>()=>{this.sliderShift(e)},this.stepPrevious=()=>{1!==this.state.value&&this.sliderShift(this.state.value-1)},this.stepNext=()=>{const e=this.props.content.length;this.state.value!==e&&this.sliderShift(this.state.value+1)},this.stepPreviousFunctionCall=e=>()=>{const t=this.getPreviousFunctionCall(e);null!==t&&this.sliderShift(t)},this.stepNextFunctionCall=e=>()=>{const t=this.getNextFunctionCall(e);null!==t&&this.sliderShift(t)},this.hasPreviousFunctionCall=e=>{const t=e<=this.props.content.length?e-1:0,s=this.props.content[t].function;if(void 0===s)return!1;for(let i=t-1;i>-1;i--){const e=this.props.content[i].function;if(void 0!==e&&s===e)return!0}return!1},this.hasNextFunctionCall=e=>{const t=e<=this.props.content.length?e-1:0,s=this.props.content[t].function;if(void 0===s)return!1;for(let i=t+1;i<this.props.content.length;i++){const e=this.props.content[i].function;if(void 0!==e&&s===e)return!0}return!1},this.getPreviousFunctionCall=e=>{const t=e<=this.props.content.length?e-1:0,s=this.props.content[t].function;if(void 0===s)return null;for(let i=t-1;i>-1;i--){const e=this.props.content[i].function;if(void 0!==e&&s===e)return i+1}return null},this.getNextFunctionCall=e=>{const t=e<=this.props.content.length?e-1:0,s=this.props.content[t].function;if(void 0===s)return null;for(let i=t+1;i<this.props.content.length;i++){const e=this.props.content[i].function;if(void 0!==e&&s===e)return i+1}return null},this.state={value:1},(0,J.du)(2),(0,J.om)(2)}componentDidUpdate(e,t){e.content!==this.props.content&&this.setState((e=>({value:1})))}render(){const e=this.props.content.length,t=0!==e,s=t?{FIRST_STEP:this.stepFirst,NEXT_STEP:this.stepNext,PREVIOUS_STEP:this.stepPrevious,LAST_STEP:this.stepLast(e)}:{FIRST_STEP:()=>{},NEXT_STEP:()=>{},PREVIOUS_STEP:()=>{},LAST_STEP:()=>{}};return(0,u.jsx)(q.HotKeys,{keyMap:te,handlers:s,children:(0,u.jsx)("div",{children:(0,u.jsxs)("div",{className:l()("sa-substituter",o.Pyr),children:[(0,u.jsx)(n.iR,{disabled:!t,min:1,max:this.props.content.length,onChange:this.sliderShift,value:this.state.value<=e?this.state.value:1}),(0,u.jsx)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center"},children:(0,u.jsxs)(n.hE,{children:[(0,u.jsx)(n.zx,{disabled:!t||!this.hasPreviousFunctionCall(this.state.value),icon:"double-chevron-left",onClick:this.stepPreviousFunctionCall(this.state.value)}),(0,u.jsx)(n.zx,{disabled:!t||1===this.state.value,icon:"chevron-left",onClick:this.stepPrevious}),(0,u.jsx)(n.zx,{disabled:!t||this.state.value===e,icon:"chevron-right",onClick:this.stepNext}),(0,u.jsx)(n.zx,{disabled:!t||!this.hasNextFunctionCall(this.state.value),icon:"double-chevron-right",onClick:this.stepNextFunctionCall(this.state.value)})]})})," ",(0,u.jsx)("br",{}),t?(0,u.jsx)(Q.ZP,{className:"react-ace",mode:"source2defaultNONE",theme:"source",fontSize:17,highlightActiveLine:!1,wrapEnabled:!0,height:"unset",width:"100%",showGutter:!1,readOnly:!0,maxLines:1/0,value:this.getText(this.state.value),markers:this.getDiffMarkers(this.state.value),setOptions:{fontFamily:"'Inconsolata', 'Consolas', monospace"}}):(0,u.jsx)(ee,{}),t?(0,u.jsx)(se,{content:this.state.value<=e?this.props.content[this.state.value-1].explanation:this.props.content[0].explanation}):null]})})})}getText(e){const t=e<=this.props.content.length?e-1:0,s=this.props.content[t],i=s.code,a=s.redex,n=s.code.split("@redex");if(n.length>1){let e=n[0];for(let t=1;t<n.length;t++)e=e+a+n[t];return e}return i}}const ae=ie;var ne=s(74106),oe=s(38321);const re=/^Line \d+: /i,le=e=>{const{content:t,handleAddHtmlConsoleError:s}=e;return(0,d.useEffect)((()=>{const e=e=>{const t=e.data;"string"===typeof t&&t.match(re)&&s(t)};return window.addEventListener("message",e),()=>window.removeEventListener("message",e)})),(0,u.jsx)("iframe",{className:"sa-html-display",title:"HTML Display",sandbox:"allow-scripts",srcDoc:JSON.parse(t),src:"about:blank"})};var de=s(39215);const ce=[de.B.mobileEditor,de.B.mobileEditorRun],he=[de.B.introduction],ue={label:"Data Visualizer",iconName:i.d.EYE_OPEN,body:(0,u.jsx)(oe.Z,{}),id:de.B.dataVisualizer},pe=e=>({label:"Env Visualizer",iconName:i.d.GLOBE,body:(0,u.jsx)(X.Z,{workspaceLocation:e}),id:de.B.envVisualizer}),me=(e,t)=>({label:"HTML Display",iconName:i.d.MODAL,body:(0,u.jsx)(le,{content:e.value,handleAddHtmlConsoleError:t}),id:de.B.htmlDisplay}),xe=e=>({label:"Introduction",iconName:i.d.HOME,body:(0,u.jsx)(ne.Z,{content:e,openLinksInNewWindow:!0}),id:de.B.introduction}),ve=(e,t)=>({label:"Remote Execution",iconName:i.d.SATELLITE,body:(0,u.jsx)(K,{workspace:"playground",secretParams:e||void 0,callbackFunction:t}),id:de.B.remoteExecution}),ge=e=>({label:"Stepper",iconName:i.d.FLOW_REVIEW,body:(0,u.jsx)(ae,{content:(e=>{const t=e[0];return t&&"result"===t.type&&t.value instanceof Array&&t.value[0]===Object(t.value[0])&&(0,a.isStepperOutput)(t.value[0])?t.value:[]})(e)}),id:de.B.substVisualizer})}}]);
//# sourceMappingURL=591.52d199ca.chunk.js.map