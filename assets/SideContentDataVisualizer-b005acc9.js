import{b2 as M,dv as I,cF as B,du as V,cG as U,r as h,co as m,c as P,ff as $,a9 as fe,fg as Z,cr as J,b5 as w,cs as N,fh as ve,fi as Q,fj as F,ck as me,fk as ge,fl as be,fm as ye,fn as Ee,fo as Se,fp as Pe,fq as xe,fr as Ce,fs as ee,ft as Te,cB as Re,fu as we,cj as _e,fv as ke,fw as Oe,fx as je,ar as O,ct as De,j as s,y as x,d as y,z as He,eh as Le,x as ze,fy as Me,d9 as Ne,aj as Ae,bR as k,D as te,B as Ie,e as E,Y as ne,m as re,bB as Be,C as Ve,da as Ue,aB as Fe,bS as We,fz as Ke}from"./index-6556bce7.js";import{d as Xe,i as j}from"./Workspace-1e8fa32a.js";import{C as Ge}from"./card-6826540c.js";function qe(i,n){for(var e=0;e<n.length;e++){const t=n[e];if(typeof t!="string"&&!Array.isArray(t)){for(const r in t)if(r!=="default"&&!(r in i)){const a=Object.getOwnPropertyDescriptor(t,r);a&&Object.defineProperty(i,r,a.get?a:{enumerable:!0,get:()=>t[r]})}}}return Object.freeze(Object.defineProperty(i,Symbol.toStringTag,{value:"Module"}))}var W={FULL:"full",START:"start",END:"end"},ie={LOCK:"lock",PUSH:"push",NONE:"none"};function T(i){return"".concat((i*100).toFixed(2),"%")}function K(i,n,e,t){for(var r=n<e?1:-1,a=n;a!==e+r;a+=r)i[a]=t}function Ye(i,n){if(i.length!==0){for(var e=i[0],t=n(e),r=1;r<i.length;r++){var a=i[r],o=n(a);o<t&&(e=a,t=o)}return e}}var $e=["max","min","stepSize","tickSize","value"],Ze=function(i){M(n,i);function n(){var e=i!==null&&i.apply(this,arguments)||this;return e.state={isMoving:!1},e.handleElement=null,e.refHandlers={handle:function(t){return e.handleElement=t}},e.beginHandleMovement=function(t){document.addEventListener("mousemove",e.handleHandleMovement),document.addEventListener("mouseup",e.endHandleMovement),e.setState({isMoving:!0}),e.changeValue(e.clientToValue(e.mouseEventClientOffset(t)))},e.beginHandleTouchMovement=function(t){document.addEventListener("touchmove",e.handleHandleTouchMovement),document.addEventListener("touchend",e.endHandleTouchMovement),document.addEventListener("touchcancel",e.endHandleTouchMovement),e.setState({isMoving:!0}),e.changeValue(e.clientToValue(e.touchEventClientOffset(t)))},e.getStyleProperties=function(){if(e.handleElement==null)return{};var t=e.props,r=t.min,a=r===void 0?0:r,o=t.tickSizeRatio,l=t.value,c=t.vertical,d=e.getHandleMidpointAndOffset(e.handleElement,!0).handleMidpoint,u=(l-a)*o,p="calc(".concat(T(u)," - ").concat(d,"px)");return c?{bottom:p}:{left:p}},e.endHandleMovement=function(t){e.handleMoveEndedAt(e.mouseEventClientOffset(t))},e.endHandleTouchMovement=function(t){e.handleMoveEndedAt(e.touchEventClientOffset(t))},e.handleMoveEndedAt=function(t){var r,a;e.removeDocumentEventListeners(),e.setState({isMoving:!1});var o=e.changeValue(e.clientToValue(t));(a=(r=e.props).onRelease)===null||a===void 0||a.call(r,o)},e.handleHandleMovement=function(t){e.handleMovedTo(e.mouseEventClientOffset(t))},e.handleHandleTouchMovement=function(t){e.handleMovedTo(e.touchEventClientOffset(t))},e.handleMovedTo=function(t){e.state.isMoving&&!e.props.disabled&&e.changeValue(e.clientToValue(t))},e.handleKeyDown=function(t){var r=e.props,a=r.stepSize,o=r.value,l=t.which;l===I||l===B?(e.changeValue(o-a),t.preventDefault()):(l===V||l===U)&&(e.changeValue(o+a),t.preventDefault())},e.handleKeyUp=function(t){var r,a;[V,I,B,U].indexOf(t.which)>=0&&((a=(r=e.props).onRelease)===null||a===void 0||a.call(r,e.props.value))},e}return n.prototype.componentDidMount=function(){this.forceUpdate()},n.prototype.render=function(){var e,t=this.props,r=t.className,a=t.disabled,o=t.label,l=t.min,c=t.max,d=t.value,u=t.vertical,p=t.htmlProps,f=this.state.isMoving;return h.createElement("span",m({role:"slider",tabIndex:0},p,{className:P($,(e={},e[fe]=f,e),r),onKeyDown:a?void 0:this.handleKeyDown,onKeyUp:a?void 0:this.handleKeyUp,onMouseDown:a?void 0:this.beginHandleMovement,onTouchStart:a?void 0:this.beginHandleTouchMovement,ref:this.refHandlers.handle,style:this.getStyleProperties(),"aria-valuemin":l,"aria-valuemax":c,"aria-valuenow":d,"aria-orientation":u?"vertical":"horizontal"}),o==null?null:h.createElement("span",{className:Z},o))},n.prototype.componentWillUnmount=function(){this.removeDocumentEventListeners()},n.prototype.clientToValue=function(e){var t=this.props,r=t.stepSize,a=t.tickSize,o=t.value,l=t.vertical;if(this.handleElement==null)return o;var c=l?window.innerHeight-e:e,d=this.getHandleElementCenterPixel(this.handleElement),u=c-d;return isNaN(u)?o:o+Math.round(u/(a*r))*r},n.prototype.mouseEventClientOffset=function(e){return this.props.vertical?e.clientY:e.clientX},n.prototype.touchEventClientOffset=function(e){var t=e.changedTouches[0];return this.props.vertical?t.clientY:t.clientX},n.prototype.validateProps=function(e){for(var t=0,r=$e;t<r.length;t++){var a=r[t];if(typeof e[a]!="number")throw new Error("[Blueprint] <Handle> requires number value for ".concat(a," prop"))}},n.prototype.changeValue=function(e,t){return t===void 0&&(t=this.props.onChange),e=this.clamp(e),!isNaN(e)&&this.props.value!==e&&t?.(e),e},n.prototype.clamp=function(e){return J(e,this.props.min,this.props.max)},n.prototype.getHandleElementCenterPixel=function(e){var t=this.getHandleMidpointAndOffset(e),r=t.handleMidpoint,a=t.handleOffset;return a+r},n.prototype.getHandleMidpointAndOffset=function(e,t){if(t===void 0&&(t=!1),e==null)return{handleMidpoint:0,handleOffset:0};var r=this.props.vertical,a=e.getBoundingClientRect(),o=r?t?"width":"height":t?"height":"width",l=r?window.innerHeight-(a.top+a[o]):a.left;return{handleMidpoint:a[o]/2,handleOffset:l}},n.prototype.removeDocumentEventListeners=function(){document.removeEventListener("mousemove",this.handleHandleMovement),document.removeEventListener("mouseup",this.endHandleMovement),document.removeEventListener("touchmove",this.handleHandleTouchMovement),document.removeEventListener("touchend",this.endHandleTouchMovement),document.removeEventListener("touchcancel",this.endHandleTouchMovement)},n.displayName="".concat(w,".SliderHandle"),n}(N),ae=function(){return null};ae.displayName="".concat(w,".MultiSliderHandle");var S=function(i){M(n,i);function n(){var e=i!==null&&i.apply(this,arguments)||this;return e.state={labelPrecision:Je(e.props),tickSize:0,tickSizeRatio:0},e.handleElements=[],e.trackElement=null,e.addHandleRef=function(t){t!=null&&e.handleElements.push(t)},e.maybeHandleTrackClick=function(t){if(e.canHandleTrackEvent(t)){var r=e.nearestHandleForValue(e.handleElements,function(a){return a.mouseEventClientOffset(t)});r&&r.beginHandleMovement(t)}},e.maybeHandleTrackTouch=function(t){if(e.canHandleTrackEvent(t)){var r=e.nearestHandleForValue(e.handleElements,function(a){return a.touchEventClientOffset(t)});r&&r.beginHandleTouchMovement(t)}},e.canHandleTrackEvent=function(t){var r=t.target;return!e.props.disabled&&r.closest(".".concat($))==null},e.getHandlerForIndex=function(t,r){return function(a){r?.(e.getNewHandleValues(a,t))}},e.handleChange=function(t){var r,a,o=g(e.props),l=o.map(function(c){return c.value});ve(t,l)||((a=(r=e.props).onChange)===null||a===void 0||a.call(r,t),o.forEach(function(c,d){var u;l[d]!==t[d]&&((u=c.onChange)===null||u===void 0||u.call(c,t[d]))}))},e.handleRelease=function(t){var r,a,o=g(e.props);(a=(r=e.props).onRelease)===null||a===void 0||a.call(r,t),o.forEach(function(l,c){var d;(d=l.onRelease)===null||d===void 0||d.call(l,t[c])})},e}return n.getDerivedStateFromProps=function(e){return{labelPrecision:n.getLabelPrecision(e)}},n.getLabelPrecision=function(e){var t=e.labelPrecision,r=e.stepSize;return t??Q(r)},n.prototype.getSnapshotBeforeUpdate=function(e){var t=g(e),r=g(this.props);return r.length!==t.length&&(this.handleElements=[]),null},n.prototype.render=function(){var e,t=this,r=P(F,(e={},e[me]=this.props.disabled,e["".concat(F,"-unlabeled")]=this.props.labelRenderer===!1,e[ge]=this.props.vertical,e),this.props.className);return h.createElement("div",{className:r,onMouseDown:this.maybeHandleTrackClick,onTouchStart:this.maybeHandleTrackTouch},h.createElement("div",{className:be,ref:function(a){return t.trackElement=a}},this.renderTracks()),h.createElement("div",{className:ye},this.renderLabels()),this.renderHandles())},n.prototype.componentDidMount=function(){this.updateTickSize()},n.prototype.componentDidUpdate=function(e,t){i.prototype.componentDidUpdate.call(this,e,t),this.updateTickSize()},n.prototype.validateProps=function(e){if(e.stepSize<=0)throw new Error(Ee);if(e.labelStepSize!==void 0&&e.labelValues!==void 0)throw new Error(Se);if(e.labelStepSize!==void 0&&e.labelStepSize<=0)throw new Error(Pe);if(e.min!==void 0&&!isFinite(e.min))throw new Error(xe);if(e.max!==void 0&&!isFinite(e.max))throw new Error(Ce);var t=!1;if(h.Children.forEach(e.children,function(r){r&&!ee(r,n.Handle)&&(t=!0)}),t)throw new Error(Te)},n.prototype.formatLabel=function(e,t){t===void 0&&(t=!1);var r=this.props.labelRenderer;if(r!==!1)return Re(r)?r(e,{isHandleTooltip:t}):e.toFixed(this.state.labelPrecision)},n.prototype.renderLabels=function(){var e=this;if(this.props.labelRenderer===!1)return null;var t=this.getLabelValues(),r=this.props,a=r.max,o=r.min,l=t.map(function(c,d){var u=T((c-o)/(a-o)),p=e.props.vertical?{bottom:u}:{left:u};return h.createElement("div",{className:Z,key:d,style:p},e.formatLabel(c))});return l},n.prototype.renderTracks=function(){var e=oe(this.props);e.push({value:this.props.max});for(var t={value:this.props.min},r=[],a=0;a<e.length;a++){var o=e[a];r.push(this.renderTrackFill(a,t,o)),t=o}return r},n.prototype.renderTrackFill=function(e,t,r){var a=[this.getOffsetRatio(t.value),this.getOffsetRatio(r.value)].sort(function(v,b){return v-b}),o=a[0],l=a[1],c=T(o),d=T(1-l),u=this.props.vertical?{bottom:c,top:d,left:0}:{left:c,right:d,top:0},p=m(m({},u),t.trackStyleAfter||r.trackStyleBefore||{}),f=P(we,_e(this.getTrackIntent(t,r)));return h.createElement("div",{key:"track-".concat(e),className:f,style:p})},n.prototype.renderHandles=function(){var e=this,t=this.props,r=t.disabled,a=t.max,o=t.min,l=t.stepSize,c=t.vertical,d=g(this.props);return d.length===0?null:d.map(function(u,p){var f,v=u.value,b=u.type,pe=u.className,he=u.htmlProps;return h.createElement(Ze,{htmlProps:he,className:P((f={},f[ke]=b===W.START,f[Oe]=b===W.END,f),pe),disabled:r,key:"".concat(p,"-").concat(d.length),label:e.formatLabel(v,!0),max:a,min:o,onChange:e.getHandlerForIndex(p,e.handleChange),onRelease:e.getHandlerForIndex(p,e.handleRelease),ref:e.addHandleRef,stepSize:l,tickSize:e.state.tickSize,tickSizeRatio:e.state.tickSizeRatio,value:v,vertical:c})})},n.prototype.nearestHandleForValue=function(e,t){return Ye(e,function(r){var a=t(r),o=r.clientToValue(a),l=r.props.value;return Math.abs(o-l)})},n.prototype.getNewHandleValues=function(e,t){var r=g(this.props),a=r.map(function(u){return u.value}),o=a.slice();o[t]=e,o.sort(function(u,p){return u-p});var l=o.indexOf(e),c=this.findFirstLockedHandleIndex(t,l);if(c===-1)K(o,t,l,e);else{var d=a[c];return K(a,t,c,d),a}return o},n.prototype.findFirstLockedHandleIndex=function(e,t){for(var r=e<t?1:-1,a=g(this.props),o=e+r;o!==t+r;o+=r)if(a[o].interactionKind!==ie.PUSH)return o;return-1},n.prototype.getLabelValues=function(){var e=this.props,t=e.labelStepSize,r=e.labelValues,a=e.min,o=e.max,l=[];if(r!==void 0)l=r.slice();else for(var c=a;c<o||je(c,o);c+=t??1)l.push(c);return l},n.prototype.getOffsetRatio=function(e){return J((e-this.props.min)*this.state.tickSizeRatio,0,1)},n.prototype.getTrackIntent=function(e,t){return this.props.showTrackFill?e.intentAfter!==void 0?e.intentAfter:t!==void 0&&t.intentBefore!==void 0?t.intentBefore:this.props.defaultTrackIntent:O.NONE},n.prototype.updateTickSize=function(){if(this.trackElement!=null){var e=this.props.vertical?this.trackElement.clientHeight:this.trackElement.clientWidth,t=1/(this.props.max-this.props.min),r=e*t;this.setState({tickSize:r,tickSizeRatio:t})}},n.defaultSliderProps={disabled:!1,max:10,min:0,showTrackFill:!0,stepSize:1,vertical:!1},n.defaultProps=m(m({},n.defaultSliderProps),{defaultTrackIntent:O.NONE}),n.displayName="".concat(w,".MultiSlider"),n.Handle=ae,n}(N);function Je(i){var n=i.labelPrecision,e=i.stepSize,t=e===void 0?S.defaultSliderProps.stepSize:e;return n??Q(t)}function g(i){return oe(i,function(n){return n.interactionKind!==ie.NONE})}function oe(i,n){var e=i.children;n===void 0&&(n=function(){return!0});var t=h.Children.map(e,function(a){return ee(a,S.Handle)&&n(a.props)?a.props:null}),r=t??[];return r=r.filter(function(a){return a!==null}),r.sort(function(a,o){return a.value-o.value}),r}var Qe=function(i){M(n,i);function n(){return i!==null&&i.apply(this,arguments)||this}return n.prototype.render=function(){var e=this.props,t=e.initialValue,r=e.intent,a=e.value,o=e.onChange,l=e.onRelease,c=e.handleHtmlProps,d=De(e,["initialValue","intent","value","onChange","onRelease","handleHtmlProps"]);return h.createElement(S,m({},d),h.createElement(S.Handle,{value:a,intentAfter:a<t?r:void 0,intentBefore:a>=t?r:void 0,onChange:o,onRelease:l,htmlProps:c}),h.createElement(S.Handle,{value:t,interactionKind:"none"}))},n.defaultProps=m(m({},S.defaultSliderProps),{initialValue:0,intent:O.PRIMARY,value:0}),n.displayName="".concat(w,".Slider"),n}(N);const Ht=i=>{const n=!i.isDebugging&&s.jsx(Xe,{handleEditorEval:i.handleEditorEval,isEntrypointFileDefined:i.isEntrypointFileDefined,color:i.isRunning?"#39FF14":void 0,className:i.isRunning?"WaitingCursor":void 0},"run"),e=i.isEditorAutorun&&s.jsx(x,{label:"Auto",icon:y.AUTOMATIC_UPDATES}),t=!1,r=!i.pauseDisabled&&i.isRunning&&!i.isDebugging&&s.jsx(x,{label:"Pause",icon:y.STOP,onClick:i.handleDebuggerPause}),a=!i.isRunning&&i.isDebugging&&s.jsx(x,{label:"Resume",icon:y.CHEVRON_RIGHT,onClick:i.handleDebuggerResume}),o=c=>i.isDebugging&&s.jsx(x,{label:c,icon:y.STOP,onClick:i.handleDebuggerReset}),{isMobileBreakpoint:l}=He();return l?s.jsxs(s.Fragment,{children:[t,r,a,o("Stop")]}):s.jsxs(s.Fragment,{children:[!i.autorunDisabled&&s.jsx("div",{className:"Switch",children:s.jsx(Le,{label:"",checked:i.isEditorAutorun,onChange:i.handleToggleEditorAutorun})}),e||t||n,r,a,o("Stop Debugger")]})};var _={},et=function(){var i=document.getSelection();if(!i.rangeCount)return function(){};for(var n=document.activeElement,e=[],t=0;t<i.rangeCount;t++)e.push(i.getRangeAt(t));switch(n.tagName.toUpperCase()){case"INPUT":case"TEXTAREA":n.blur();break;default:n=null;break}return i.removeAllRanges(),function(){i.type==="Caret"&&i.removeAllRanges(),i.rangeCount||e.forEach(function(r){i.addRange(r)}),n&&n.focus()}},tt=et,X={"text/plain":"Text","text/html":"Url",default:"Text"},nt="Copy to clipboard: #{key}, Enter";function rt(i){var n=(/mac os x/i.test(navigator.userAgent)?"⌘":"Ctrl")+"+C";return i.replace(/#{\s*key\s*}/g,n)}function it(i,n){var e,t,r,a,o,l,c=!1;n||(n={}),e=n.debug||!1;try{r=tt(),a=document.createRange(),o=document.getSelection(),l=document.createElement("span"),l.textContent=i,l.ariaHidden="true",l.style.all="unset",l.style.position="fixed",l.style.top=0,l.style.clip="rect(0, 0, 0, 0)",l.style.whiteSpace="pre",l.style.webkitUserSelect="text",l.style.MozUserSelect="text",l.style.msUserSelect="text",l.style.userSelect="text",l.addEventListener("copy",function(u){if(u.stopPropagation(),n.format)if(u.preventDefault(),typeof u.clipboardData>"u"){e&&console.warn("unable to use e.clipboardData"),e&&console.warn("trying IE specific stuff"),window.clipboardData.clearData();var p=X[n.format]||X.default;window.clipboardData.setData(p,i)}else u.clipboardData.clearData(),u.clipboardData.setData(n.format,i);n.onCopy&&(u.preventDefault(),n.onCopy(u.clipboardData))}),document.body.appendChild(l),a.selectNodeContents(l),o.addRange(a);var d=document.execCommand("copy");if(!d)throw new Error("copy command was unsuccessful");c=!0}catch(u){e&&console.error("unable to copy using execCommand: ",u),e&&console.warn("trying IE specific stuff");try{window.clipboardData.setData(n.format||"text",i),n.onCopy&&n.onCopy(window.clipboardData),c=!0}catch(p){e&&console.error("unable to copy using clipboardData: ",p),e&&console.error("falling back to prompt"),t=rt("message"in n?n.message:nt),window.prompt(t,i)}}finally{o&&(typeof o.removeRange=="function"?o.removeRange(a):o.removeAllRanges()),l&&document.body.removeChild(l),r()}return c}var at=it;function D(i){"@babel/helpers - typeof";return D=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},D(i)}Object.defineProperty(_,"__esModule",{value:!0});_.CopyToClipboard=void 0;var C=se(h),ot=se(at),st=["text","onCopy","options","children"];function se(i){return i&&i.__esModule?i:{default:i}}function G(i,n){var e=Object.keys(i);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(i);n&&(t=t.filter(function(r){return Object.getOwnPropertyDescriptor(i,r).enumerable})),e.push.apply(e,t)}return e}function q(i){for(var n=1;n<arguments.length;n++){var e=arguments[n]!=null?arguments[n]:{};n%2?G(Object(e),!0).forEach(function(t){A(i,t,e[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(e)):G(Object(e)).forEach(function(t){Object.defineProperty(i,t,Object.getOwnPropertyDescriptor(e,t))})}return i}function lt(i,n){if(i==null)return{};var e=ct(i,n),t,r;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(i);for(r=0;r<a.length;r++)t=a[r],!(n.indexOf(t)>=0)&&Object.prototype.propertyIsEnumerable.call(i,t)&&(e[t]=i[t])}return e}function ct(i,n){if(i==null)return{};var e={},t=Object.keys(i),r,a;for(a=0;a<t.length;a++)r=t[a],!(n.indexOf(r)>=0)&&(e[r]=i[r]);return e}function ut(i,n){if(!(i instanceof n))throw new TypeError("Cannot call a class as a function")}function Y(i,n){for(var e=0;e<n.length;e++){var t=n[e];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(i,t.key,t)}}function dt(i,n,e){return n&&Y(i.prototype,n),e&&Y(i,e),Object.defineProperty(i,"prototype",{writable:!1}),i}function pt(i,n){if(typeof n!="function"&&n!==null)throw new TypeError("Super expression must either be null or a function");i.prototype=Object.create(n&&n.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),Object.defineProperty(i,"prototype",{writable:!1}),n&&H(i,n)}function H(i,n){return H=Object.setPrototypeOf||function(t,r){return t.__proto__=r,t},H(i,n)}function ht(i){var n=vt();return function(){var t=R(i),r;if(n){var a=R(this).constructor;r=Reflect.construct(t,arguments,a)}else r=t.apply(this,arguments);return ft(this,r)}}function ft(i,n){if(n&&(D(n)==="object"||typeof n=="function"))return n;if(n!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return le(i)}function le(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function vt(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function R(i){return R=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},R(i)}function A(i,n,e){return n in i?Object.defineProperty(i,n,{value:e,enumerable:!0,configurable:!0,writable:!0}):i[n]=e,i}var ce=function(i){pt(e,i);var n=ht(e);function e(){var t;ut(this,e);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return t=n.call.apply(n,[this].concat(a)),A(le(t),"onClick",function(l){var c=t.props,d=c.text,u=c.onCopy,p=c.children,f=c.options,v=C.default.Children.only(p),b=(0,ot.default)(d,f);u&&u(d,b),v&&v.props&&typeof v.props.onClick=="function"&&v.props.onClick(l)}),t}return dt(e,[{key:"render",value:function(){var r=this.props;r.text,r.onCopy,r.options;var a=r.children,o=lt(r,st),l=C.default.Children.only(a);return C.default.cloneElement(l,q(q({},o),{},{onClick:this.onClick}))}}]),e}(C.default.PureComponent);_.CopyToClipboard=ce;A(ce,"defaultProps",{onCopy:void 0,options:void 0});var mt=_,L=mt.CopyToClipboard;L.CopyToClipboard=L;var ue=L;const gt=ze(ue),Lt=qe({__proto__:null,default:gt},[ue]),de={},bt={REACT_APP_PLAYGROUND_ONLY:"true",REACT_APP_MODULE_BACKEND_URL:"https://source-academy.github.io/modules"}.REACT_APP_CADET_LOGGER;function yt(i,n){bt&&xt({...n,questionId:de[i],sessionId:i})}function zt(i,n){const e=Me();return de[e]=i,yt(e,{...n,type:"init",time:Date.now()}),e}const Et=1,St="evtlogs",z="logs",Pt=Ct(()=>new Promise((i,n)=>{const e=indexedDB.open(St,Et);e.onsuccess=t=>{i(e.result)},e.onerror=t=>{console.error("Failed to get db",t),n(e.error)},e.onupgradeneeded=t=>{(t?.target).result.createObjectStore(z,{keyPath:"id",autoIncrement:!0})}}));function xt(i){return new Promise((n,e)=>{Pt().then(t=>{const r=t.transaction([z],"readwrite");r.oncomplete=n,r.onerror=e,r.objectStore(z).add(i)})})}function Ct(i){let n=null;return()=>n||(n=i(),n)}const Tt={FIRST_STEP:"a",NEXT_STEP:"f",PREVIOUS_STEP:"b",LAST_STEP:"e"};class Rt extends h.Component{constructor(n){super(n),this.handleResize=Ae.debounce(()=>{const e=this.calculateWidth(this.props.editorWidth),t=this.calculateHeight(this.props.sideContentHeight);(e!==this.state.width||t!==this.state.height)&&(this.setState({height:t,width:e}),k.updateDimensions(e,t))},300),this.sliderRelease=e=>{this.props.handleEditorEval(this.props.workspaceLocation)},this.sliderShift=e=>{this.props.handleEnvStepUpdate(e,this.props.workspaceLocation),this.setState(t=>({value:e}))},this.stepPrevious=()=>{this.state.value!==1&&(this.sliderShift(this.state.value-1),this.props.handleEditorEval(this.props.workspaceLocation))},this.stepNext=()=>{const e=this.props.numOfStepsTotal;this.state.value!==e&&(this.sliderShift(this.state.value+1),this.props.handleEditorEval(this.props.workspaceLocation))},this.stepFirst=()=>{this.sliderShift(1),this.props.handleEditorEval(this.props.workspaceLocation)},this.stepLast=e=>()=>{this.sliderShift(e),this.props.handleEditorEval(this.props.workspaceLocation)},this.stepNextBreakpoint=()=>{for(const e of this.props.breakpointSteps)if(e>this.state.value){this.sliderShift(e),this.props.handleEditorEval(this.props.workspaceLocation);return}this.sliderShift(this.props.numOfStepsTotal),this.props.handleEditorEval(this.props.workspaceLocation)},this.stepPrevBreakpoint=()=>{for(let e=this.props.breakpointSteps.length-1;e>=0;e--){const t=this.props.breakpointSteps[e];if(t<this.state.value){this.sliderShift(t),this.props.handleEditorEval(this.props.workspaceLocation);return}}this.sliderShift(1),this.props.handleEditorEval(this.props.workspaceLocation)},this.state={visualization:null,value:-1,width:this.calculateWidth(n.editorWidth),height:this.calculateHeight(n.sideContentHeight)},k.init(e=>this.setState({visualization:e}),this.state.width,this.state.height)}calculateWidth(n){let r;return n===void 0?r=window.innerWidth-50:r=Math.min(5e3,window.innerWidth*(100-parseFloat(n))/100-50),Math.min(r,5e3)}calculateHeight(n){let r;return window.innerWidth<Ve.mobileBreakpoint||n===void 0?r=window.innerHeight-150:r=n-150,Math.min(r,5e3)}componentDidMount(){this.handleResize(),window.addEventListener("resize",this.handleResize),k.redraw()}componentWillUnmount(){this.handleResize.cancel(),window.removeEventListener("resize",this.handleResize)}componentDidUpdate(n){(n.sideContentHeight!==this.props.sideContentHeight||n.editorWidth!==this.props.editorWidth)&&this.handleResize(),n.needEnvUpdate&&!this.props.needEnvUpdate&&this.stepFirst()}render(){const n=this.state.visualization?{FIRST_STEP:this.stepFirst,NEXT_STEP:this.stepNext,PREVIOUS_STEP:this.stepPrevious,LAST_STEP:this.stepLast(this.props.numOfStepsTotal)}:{FIRST_STEP:()=>{},NEXT_STEP:()=>{},PREVIOUS_STEP:()=>{},LAST_STEP:()=>{}};return s.jsx(j.HotKeys,{keyMap:Tt,handlers:n,children:s.jsxs("div",{className:te,children:[s.jsxs("div",{className:"sa-substituter",style:{position:"sticky",top:"0",left:"0",zIndex:"1"},children:[s.jsx(Qe,{disabled:!this.state.visualization,min:1,max:this.props.numOfStepsTotal,onChange:this.sliderShift,onRelease:this.sliderRelease,value:this.state.value<1?1:this.state.value}),s.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center"},children:s.jsxs(Ie,{children:[s.jsx(E,{disabled:!this.state.visualization,icon:"double-chevron-left",onClick:this.stepPrevBreakpoint}),s.jsx(E,{disabled:!this.state.visualization,icon:"chevron-left",onClick:this.stepPrevious}),s.jsx(E,{disabled:!this.state.visualization,icon:"chevron-right",onClick:this.stepNext}),s.jsx(E,{disabled:!this.state.visualization,icon:"double-chevron-right",onClick:this.stepNextBreakpoint})]})})]}),s.jsx("br",{}),this.state.visualization||s.jsxs("div",{id:"env-visualizer-default-text",className:ne,children:["The environment model visualizer generates environment model diagrams following a notation introduced in"," ",s.jsx("a",{href:re.textbookChapter3_2,rel:"noopener noreferrer",target:"_blank",children:s.jsx("i",{children:"Structure and Interpretation of Computer Programs, JavaScript Edition, Chapter 3, Section 2"})}),".",s.jsx("br",{}),s.jsx("br",{})," On this tab, the REPL will be hidden from view, so do check that your code has no errors before running the stepper. You may use this tool by running your program and then dragging the slider above to see the state of the environment at different stages in the evaluation of your program. Clicking on the fast-forward button (double chevron) will take you to the next breakpoint in your program.",s.jsx("br",{}),s.jsx("br",{}),s.jsx(Be,{}),"Some useful keyboard shortcuts:",s.jsx("br",{}),s.jsx("br",{}),"a: Move to the first step",s.jsx("br",{}),"e: Move to the last step",s.jsx("br",{}),"f: Move to the next step",s.jsx("br",{}),"b: Move to the previous step",s.jsx("br",{}),s.jsx("br",{}),"Note that these shortcuts are only active when the browser focus is on this tab."]})]})})}}const wt=(i,n)=>{let e;return n.workspaceLocation==="playground"||n.workspaceLocation==="sicp"?e=n.workspaceLocation:e="playground",{...n,numOfStepsTotal:i.workspaces[e].envStepsTotal,numOfSteps:i.workspaces[e].envSteps,breakpointSteps:i.workspaces[e].breakpointSteps,needEnvUpdate:i.workspaces[e].updateEnv}},_t=i=>Ue({handleEditorEval:n=>Fe(n),handleEnvStepUpdate:(n,e)=>We(n,e)},i),Mt=Ne(wt,_t)(Rt),kt={PREVIOUS_STEP:"left",NEXT_STEP:"right"};class Nt extends h.Component{constructor(n){super(n),this.onPrevButtonClick=()=>{this.setState(e=>({currentStep:e.currentStep-1}))},this.onNextButtonClick=()=>{this.setState(e=>({currentStep:e.currentStep+1}))},this.state={steps:[],currentStep:0},Ke.init(e=>{this.state.steps.length>0&&document.getElementById("data_visualizer-icon")?.classList.add("side-content-tab-alert"),this.setState({steps:e,currentStep:0})})}render(){const n=()=>this.state.currentStep===0,e=()=>!this.state.steps||this.state.currentStep===this.state.steps.length-1,t={PREVIOUS_STEP:this.onPrevButtonClick,NEXT_STEP:this.onNextButtonClick};j.configure({ignoreEventsCondition:a=>a.key==="ArrowLeft"&&n()||a.key==="ArrowRight"&&e(),ignoreRepeatedEventsWhenKeyHeldDown:!1,stopEventPropagationAfterIgnoring:!1});const r=this.state.steps[this.state.currentStep];return s.jsx(j.GlobalHotKeys,{keyMap:kt,handlers:t,children:s.jsxs("div",{className:P("sa-data-visualizer",te),children:[this.state.steps.length>1?s.jsxs("div",{style:{position:"relative",display:"flex",justifyContent:"center",alignItems:"center",marginBottom:10},children:[s.jsx(E,{style:{position:"absolute",left:0},large:!0,outlined:!0,icon:y.ARROW_LEFT,onClick:this.onPrevButtonClick,disabled:n(),children:"Previous"}),s.jsxs("h3",{className:"bp4-text-large",children:["Call ",this.state.currentStep+1,"/",this.state.steps.length]}),s.jsx(E,{style:{position:"absolute",right:0},large:!0,outlined:!0,icon:y.ARROW_RIGHT,onClick:this.onNextButtonClick,disabled:e(),children:"Next"})]}):null,this.state.steps.length>0?s.jsx("div",{style:{display:"flex",flexDirection:"row",overflowX:"auto"},children:r?.map((a,o)=>s.jsxs("div",{style:{margin:r.length>1?0:"0 auto"},children:[" ",s.jsxs(Ge,{style:{background:"#1a2530",padding:10},children:[r.length>1&&s.jsxs("h5",{className:"bp4-heading bp4-monospace-text",style:{marginTop:0,marginBottom:20,whiteSpace:"nowrap"},children:["Structure ",o+1]}),a]})]},o))},r.length):s.jsxs("p",{id:"data-visualizer-default-text",className:ne,children:["The data visualizer helps you to visualize data structures.",this.state.steps,s.jsx("br",{}),s.jsx("br",{}),"It is activated by calling the function"," ",s.jsxs("code",{children:["draw_data(x",s.jsx("sub",{children:"1"}),", x",s.jsx("sub",{children:"2"}),", ... x",s.jsx("sub",{children:"n"}),")"]}),", where"," ",s.jsxs("code",{children:["x",s.jsx("sub",{children:"k"})]})," ","would be the"," ",s.jsxs("code",{children:["k",s.jsx("sup",{children:"th"})]})," ","data structure that you want to visualize and ",s.jsx("code",{children:"n"})," is the number of structures.",s.jsx("br",{}),s.jsx("br",{}),"The data visualizer uses box-and-pointer diagrams, as introduced in"," ",s.jsx("a",{href:re.textbookChapter2_2,rel:"noopener noreferrer",target:"_blank",children:s.jsx("i",{children:"Structure and Interpretation of Computer Programs, JavaScript Edition, Chapter 2, Section 2"})}),"."]})]})})}}export{Lt as C,Qe as S,Nt as a,Mt as b,Ht as c,zt as i,yt as l};
