"use strict";(globalThis.webpackChunkfrontend=globalThis.webpackChunkfrontend||[]).push([[34],{42693:(e,t,s)=>{s.d(t,{Z:()=>r});var n=s(51411),a=s(92379),o=s(72791),i=s(80184);const r=e=>((0,o.useEffect)((()=>{var t;null===(t=e.loadContentDispatch)||void 0===t||t.call(e)}),[]),(0,i.jsx)("div",{className:"ContentDisplay row center-xs",children:(0,i.jsx)("div",{className:(e.fullWidth?"col-md-12":"col-md-10 col-xs-11")+" contentdisplay-content-parent",children:(0,i.jsx)(n.Zb,{className:"contentdisplay-content",elevation:a.u.THREE,children:e.display})})}))},60054:(e,t,s)=>{s.d(t,{b:()=>b});var n=s(51411),a=s(37305),o=s(59118),i=s(95785),r=s(28644),l=s(42543),c=(s(72791),s(95134)),d=s(9631),u=s(90362),m=s(80184);const h=e=>{let{itemsParentRef:t,renderItem:s,items:a}=e;const o=a.filter((e=>{let{variant:t}=e;return t===l.Variant.DEFAULT})),i=a.filter((e=>{let{variant:t}=e;return t!==l.Variant.DEFAULT}));return(0,m.jsxs)(n.v2,{ulRef:t,style:{display:"flex",flexDirection:"column"},children:[o.map(s),i.length>0&&(0,m.jsx)(n.sN,{text:"Variants",icon:"cog",children:i.map(s)},"variant-menu")]})},p=e=>(t,s)=>{let{handleClick:a}=s;const o=e&&t.chapter===l.Chapter.SOURCE_1,r=o?"Folder mode makes use of lists which are not available in Source 1. To switch to Source 1, disable Folder mode.":void 0;return(0,m.jsx)(i.u,{content:r,disabled:void 0===r,children:(0,m.jsx)(n.sN,{onClick:a,text:t.displayName,disabled:o})},t.displayName)},g=r.P.ofType(),b=e=>{let{isFolderModeEnabled:t,sourceChapter:s,sourceVariant:i,handleChapterSelect:r=(()=>{}),disabled:l=!1}=e;const b=(0,u.ix)((e=>e.playground.languageConfig.mainLanguage)),v=[...c.Vf,...d.Z.playgroundOnly?[c.qP,c.uQ,c.s6]:[],...c.ik,...c.YB];return(0,m.jsx)(g,{items:v.filter((e=>{let{mainLanguage:t}=e;return t===b})),onItemSelect:r,itemRenderer:p(t),itemListRenderer:h,filterable:!1,disabled:l,children:(0,m.jsx)(n.zx,{className:a.IRm,text:(0,c.w$)(s,i),rightIcon:l?null:o.d.DOUBLE_CARET_VERTICAL,disabled:l})})}},34165:(e,t,s)=>{s.d(t,{g:()=>r});var n=s(59118),a=(s(72791),s(17862)),o=s(80184);const i=e=>{let{onClick:t}=e;return(0,o.jsx)(a.Z,{label:"Return to Academy",icon:n.d.ARROW_RIGHT,onClick:t,options:{iconOnRight:!0}})},r=e=>e.questionProgress[0]===e.questionProgress[1]?(0,o.jsx)(i,{onClick:e.onClickReturn},"return_to_academy"):(0,o.jsx)(a.Z,{label:"Next",icon:n.d.ARROW_RIGHT,onClick:e.onClickNext,options:{iconOnRight:!0}})},68206:(e,t,s)=>{s.d(t,{f:()=>i});var n=s(59118),a=(s(72791),s(17862)),o=s(80184);const i=e=>e.questionProgress[0]<=1?null:(0,o.jsx)(a.Z,{label:"Previous",icon:n.d.ARROW_LEFT,onClick:e.onClick})},63309:(e,t,s)=>{s.d(t,{M:()=>o});s(72791);var n=s(17862),a=s(80184);const o=e=>{let{questionProgress:t}=e;return(0,a.jsx)(n.Z,{label:`Question ${t[0]} of ${t[1]}  `,isDisabled:!0})}},71697:(e,t,s)=>{s.d(t,{A:()=>i});var n=s(59118),a=(s(72791),s(17862)),o=s(80184);const i=e=>{let{onClick:t}=e;return(0,o.jsx)(a.Z,{label:"Reset",icon:n.d.REPEAT,onClick:t})}},1799:(e,t,s)=>{s.d(t,{t:()=>r});var n=s(50698),a=s(59118),o=(s(72791),s(17862)),i=s(80184);const r=e=>{const t=e.hasUnsavedChanges?{intent:n.S.WARNING,minimal:!1}:{};return(0,i.jsx)(o.Z,{label:"Save",icon:a.d.FLOPPY_DISK,onClick:e.onClickSave,options:t})}},45686:(e,t,s)=>{s.d(t,{Z:()=>O});var n=s(55048),a=s(59118),o=s(72791),i=s(24805),r=s(14635),l=s(29860),c=s(55360),d=s(70152),u=s(39215),m=s(59962),h=s.n(m),p=s(1324),g=s(80184);const b=e=>(0,g.jsx)(h(),{axis:"y",handle:"#dragHandle",position:e.position,bounds:{top:-500,left:0,right:0,bottom:0},onDrag:e.onDrag,disabled:e.disabled,children:(0,g.jsxs)("div",{className:"mobile-draggable",children:[e.disabled?(0,g.jsx)("div",{className:"handle disabled",id:"draghandle",children:["1","2","3"].map((e=>(0,g.jsx)("div",{className:"circle"},e)))}):(0,g.jsx)("div",{className:"handle enabled",id:"dragHandle",children:["1","2","3"].map((e=>(0,g.jsx)("div",{className:"circle"},e)))}),(0,g.jsx)("div",{className:"REPL-content",children:(0,g.jsx)(p.Z,{...e.replProps})})]})});var v=s(81495),x=s.n(v);const f=e=>{const[t,s]=o.useState(!1),[n,a]=o.useState("\u1438"),[i,r]=o.useState({x:0,y:0}),[l,c]=o.useState(1),d=e=>{e.preventDefault()},u={onKeyPress:t=>{if(!e.targetKeyboardInput)return;const s=e.targetKeyboardInput;"{arrowleft}"===t?s.navigateLeft():"{arrowright}"===t?s.navigateRight():"{bksp}"===t?s.remove("left"):"{tab}"===t?s.insert("\t"):["+","-","*","/","%","=>","===","&&","||"].includes(t)?s.insert(" "+t+" "):s.insert(t)},baseClass:"simple-keyboard-shortcut",layout:{default:["{ } ( ) \" ' _ => ;","{tab} && || ! < > = ===","+ - * / % // {arrowleft} {arrowright}"]},buttonTheme:[{class:"mobile-navigation",buttons:"{arrowleft} {arrowright}"},{class:"big-buttons",buttons:"=== &&"}],theme:"hg-theme-default",preventMouseDownDefault:!0,disableCaretPositioning:!1};return(0,g.jsx)(h(),{axis:"y",handle:"#floating-dragHandle",position:i,bounds:{top:-200,left:0,right:0,bottom:200},onDrag:(e,t)=>{r(t)},children:(0,g.jsxs)("div",{className:"mobile-floating-keyboard",id:"mobile-floating-toggle",children:[(0,g.jsx)("button",{className:"mobile-floating-toggle",onClick:e=>{t?(document.getElementById("mobile-keyboard-toggle").style.setProperty("display","none"),document.getElementById("mobile-floating-toggle").style.setProperty("width","42px"),document.getElementById("mobile-floating-toggle").style.setProperty("opacity","0.6"),a("\u1438"),s(!1)):(document.getElementById("mobile-keyboard-toggle").style.setProperty("display","flex"),document.getElementById("mobile-floating-toggle").style.setProperty("width","99%"),document.getElementById("mobile-floating-toggle").style.setProperty("opacity","1"),a("\u1433"),s(!0))},onMouseDown:d,children:n}),(0,g.jsxs)("div",{className:"mobile-keyboard-toggle-container",id:"mobile-keyboard-toggle",children:[(0,g.jsx)("div",{className:"mobile-keyboard-container",children:(0,g.jsx)(x(),{...u})}),(0,g.jsx)("button",{className:"mobile-keyboard-row-toggle",onClick:e=>{c((l+1)%3);const t=document.getElementsByClassName("simple-keyboard-shortcut");Array.from(t)[0].style.top=45*-l+"px"},onMouseDown:d,children:"\u2938"})]}),(0,g.jsx)("div",{id:"floating-dragHandle",children:":"})]})})};var C=s(51411),y=s(37305),j=s(95785),w=s(81694),k=s.n(w),N=s(80757),E=s(60879),T=s(65047);const S=e=>{const t=(0,g.jsxs)("div",{className:"mobile-control-bar",children:[e.editorButtons,e.flowButtons,e.editingWorkspaceButtons]});return(0,g.jsx)(T.p,{content:t,autoFocus:!1,children:(0,g.jsx)(C.zx,{icon:a.d.COG,className:k()(y.IRm,"mobile-control-bar-button")})})},P=e=>{let{selectedTabId:t,renderActiveTabPanelOnly:s,mobileControlBarProps:n,...a}=e;const o=/iPhone|iPod/.test(navigator.platform),i=e=>e.map((e=>((e,s)=>{if(!e.body)return;const n=s?{...e.body,props:{...e.body.props,workspaceLocation:s}}:e.body;return(0,g.jsx)("div",{className:e.id===t?"mobile-selected-panel":"mobile-unselected-panel",children:n},e.id)})(e,a.workspaceLocation)));return(0,g.jsx)(N.Z,{...a,renderFunction:(e,r)=>(0,g.jsxs)(g.Fragment,{children:[i(e),(0,g.jsx)("div",{className:"mobile-tabs-container",children:(0,g.jsxs)(C.mQ,{id:"mobile-side-content",onChange:r,renderActiveTabPanelOnly:s,selectedTabId:t,className:k()(y.Pyr,"mobile-side-content"),children:[e.map((e=>((e,t,s)=>{const n=void 0===e.id?e.label:e.id,a=(0,g.jsx)(j.u,{content:e.label,onOpening:()=>{var e;t&&(null===(e=document.getElementById((0,N.Y)(n)))||void 0===e||e.click())},children:(0,g.jsx)("div",{className:"side-content-tooltip",id:(0,N.Y)(n),children:(0,g.jsx)(C.JO,{icon:e.iconName,iconSize:20})})});return(0,g.jsx)(C.OK,{id:n,title:a,disabled:e.disabled,className:"side-content-tab"},n)})(e,o,a.workspaceLocation))),("playground"===a.workspaceLocation||"sicp"===a.workspaceLocation)&&(0,g.jsx)(S,{...n})]})})]})})},A=o.memo(P,E.t),O=e=>{var t;const s=/Android/.test(navigator.userAgent),m=(0,i.useMediaQuery)({orientation:"portrait"}),[h,p]=o.useState({x:0,y:0}),[v,x]=o.useState(!1);n.$.onlyShowFocusOnTabs(),o.useEffect((()=>("assessment"===e.mobileSideContentProps.workspaceLocation&&document.documentElement.style.setProperty("--mobile-panel-height","calc(100% - 100px - 1.1rem)"),()=>{document.documentElement.style.setProperty("--mobile-panel-height","calc(100% - 70px)")})),[]),o.useEffect((()=>{if(m&&s){document.documentElement.style.setProperty("overflow","auto");document.querySelector("meta[name=viewport]").setAttribute("content","height="+window.innerHeight+", width=device-width")}return()=>{if(s){document.documentElement.style.setProperty("overflow","hidden");document.querySelector("meta[name=viewport]").setAttribute("content","width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0")}N()}}),[m,s]);const[C,y]=o.useState(null),j=()=>y(null),w=e=>({...e,onFocus:(t,s)=>{e.onFocus&&e.onFocus(t,s),s&&y(s)},onBlur:(t,s)=>{e.onBlur&&e.onBlur(t,s),j()}}),k=e=>{document.documentElement.style.setProperty("--mobile-repl-height",Math.max(-e,0)+"px"),p({x:0,y:e})},N=()=>{p({x:0,y:0}),document.documentElement.style.setProperty("--mobile-repl-height","0px")},E=null===(t=e.editorContainerProps)||void 0===t?void 0:t.handleEditorEval,T=o.useCallback(((e,t)=>{e===u.B.mobileEditorRun&&E&&E(),e===u.B.mobileEditorRun&&t!==u.B.substVisualizer&&t!==u.B.autograder&&t!==u.B.testcases?k(-300):N(),e===u.B.folder||e===u.B.substVisualizer||t===u.B.substVisualizer&&e===u.B.mobileEditorRun?x(!0):x(!1)}),[E]),S=e.mobileSideContentProps.onChange,P=o.useCallback(((e,t,s)=>{S(e,t,s),T(e,t)}),[T,S]),O=e.sideBarProps.tabs.filter((e=>void 0!==e.id)),D=o.useMemo((()=>({label:"Editor",iconName:a.d.EDIT,body:null,id:u.B.mobileEditor})),[]),R=o.useMemo((()=>({label:"Run",iconName:a.d.PLAY,body:null,id:u.B.mobileEditorRun})),[]),B=o.useCallback((()=>({...e.mobileSideContentProps,onChange:P,tabs:{beforeDynamicTabs:[...O,D,...e.mobileSideContentProps.tabs.beforeDynamicTabs],afterDynamicTabs:[...e.mobileSideContentProps.tabs.afterDynamicTabs,R]}})),[P,D,R,e.mobileSideContentProps,O]),I="assessment"===e.mobileSideContentProps.workspaceLocation||"githubAssessment"===e.mobileSideContentProps.workspaceLocation;return(0,g.jsxs)("div",{className:"workspace mobile-workspace",children:[(0,g.jsx)(d.N,{when:!!e.hasUnsavedChanges,message:"You have changes that may not be saved. Are you sure you want to leave?"}),I&&(0,g.jsx)(r.Z,{...e.mobileSideContentProps.mobileControlBarProps}),(0,g.jsxs)("div",{children:[(0,g.jsx)("div",{className:"mobile-editor-panel",children:(()=>{if(e.editorContainerProps){const t={...e.editorContainerProps};return"sourcecast"===t.editorVariant&&(t.setDraggableReplPosition=()=>k(-100)),(0,g.jsx)(l.Z,{...w(e.editorContainerProps)})}return(0,g.jsx)(c.Z,{...e.mcqProps})})()}),(0,g.jsx)(A,{...B()})]}),(0,g.jsx)(b,{position:h,onDrag:(e,t)=>{document.documentElement.style.setProperty("--mobile-repl-height",Math.max(-t.y,0)+"px"),p(t)},disabled:v,replProps:(e=>({...e,onFocus:t=>{e.onFocus&&e.onFocus(t),y(t)},onBlur:()=>{e.onBlur&&e.onBlur(),j()}}))(e.replProps)},"repl"),(0,g.jsx)(f,{targetKeyboardInput:C})]})}},14748:(e,t,s)=>{s.d(t,{Z:()=>h});var n=s(51411),a=s(37305),o=s(92379),i=s(81694),r=s.n(i),l=s(61881),c=s(92469),d=s(72791),u=s(76796),m=s(80184);const h=e=>{const{index:t,testcase:s,handleTestcaseEval:i}=e,h=d.useMemo((()=>{const e=void 0!==s.result||s.errors,t=(0,c.stringify)(s.result)===s.answer;return{correct:e&&t,wrong:e&&!t,secret:s.type===u.Be.secret||s.type===u.Be.opaque}}),[s]),p=d.useCallback((()=>{i(t)}),[t,i]);return(0,m.jsx)("div",{className:r()("AutograderCard",h),"data-testid":"AutograderCard",children:(0,m.jsx)(n.Zb,{className:a.znr,elevation:o.u.ONE,onClick:p,children:s.type===u.Be.opaque&&"assessment"===e.workspaceLocation?(0,m.jsx)(n.SU,{className:"testcase-placeholder","data-testid":"testcase-placeholder",children:"Hidden testcase"}):(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(n.SU,{className:"testcase-program",children:s.program}),(0,m.jsx)(n.SU,{className:"testcase-expected",children:s.answer}),(0,m.jsx)(n.SU,{className:"testcase-actual","data-testid":"testcase-actual",children:s.errors?(0,l.parseError)(s.errors):void 0!==s.result?(0,c.stringify)(s.result):"No Answer"})]})})})}},29034:(e,t,s)=>{s.r(t),s.d(t,{Component:()=>Le,default:()=>Me});var n=s(51411),a=s(59118),o=s(72791),i=s(78687),r=s(57689),l=s(71594),c=s(90362),d=s(42693),u=s(41921),m=s(37305),h=s(65047),p=s(81694),g=s.n(p),b=s(11087),v=s(17862),x=s(80184);const f=e=>{const{isMobileBreakpoint:t}=(0,c.Fs)(),s=void 0!==(0,c.ix)((e=>e.session.githubOctokitObject)).octokit?(0,x.jsx)(v.Z,{label:"Log Out",icon:a.d.GIT_BRANCH,onClick:e.onClickLogOut}):(0,x.jsx)(v.Z,{label:"Log In",icon:a.d.GIT_BRANCH,onClick:e.onClickLogIn});return(0,x.jsx)(n.hE,{large:!t,children:s})};var C=s(90713);const y=[a.d.FLAME,a.d.LIGHTBULB,a.d.PREDICTIVE_ANALYSIS,a.d.COMPARISON,a.d.MANUAL],j=e=>{var t,s;const a=t=>{e.changeCourseHandler(t)};return(0,x.jsxs)(n.wp,{className:"NavigationBar secondary-navbar",children:[(0,x.jsx)(n.fT,{align:u.v.LEFT,children:null===(t=e.types)||void 0===t?void 0:t.map(((t,s)=>(0,x.jsxs)(b.OL,{to:`/githubassessments/${(0,C.q1)(t)}`,state:{courses:e.courses,assessmentTypeOverviews:e.assessmentTypeOverviews,selectedCourse:e.selectedCourse},className:e=>{let{isActive:t}=e;return g()("NavigationBar__link",m.q01,m.IRm,{[m.iNe]:t})},children:[(0,x.jsx)(n.JO,{icon:s<5?y[s]:y[0]}),(0,x.jsx)("div",{className:"navbar-button-text hidden-xs hidden-sm",children:t})]},t)))}),(0,x.jsxs)(n.fT,{align:u.v.RIGHT,children:[void 0!==e.octokit&&e.types&&e.types.length>0&&(0,x.jsx)(n.BZ,{disabled:!0,leftElement:(0,x.jsx)(h.p,{content:(0,x.jsx)(n.v2,{children:null===(s=e.courses)||void 0===s?void 0:s.map((e=>(0,x.jsx)(n.sN,{onClick:a,text:e},e)))}),placement:"bottom-end",children:(0,x.jsx)(n.zx,{minimal:!0,rightIcon:"caret-down","aria-label":"choose"})}),placeholder:"Select Course",onChange:e.changeCourseHandler,value:e.selectedCourse},"courseselect"),(0,x.jsx)(f,{onClickLogIn:e.handleGitHubLogIn,onClickLogOut:e.handleGitHubLogOut},"loginlogout")]})]})};var w=s(44439),k=s(92379),N=s(5602),E=s(74106);const T=e=>{const{isMobileBreakpoint:t}=(0,c.Fs)(),s=(0,r.s0)();let i;const l=(0,o.useMemo)((()=>(0,x.jsx)(n.zx,{icon:a.d.ADD,onClick:()=>s("/githubassessments/editor"),children:"Create a New Assessment!"})),[s]),u=(0,o.useMemo)((()=>(0,x.jsx)(n.zx,{icon:a.d.REFRESH,onClick:e.refreshAssessmentOverviews,children:"Refresh Assessments"})),[e.refreshAssessmentOverviews]);if(e.assessmentOverviews)if(0===e.assessmentOverviews.length)i=(0,x.jsxs)(x.Fragment,{children:[l,u,(0,x.jsx)(n.tR,{title:"There are no assessments.",icon:a.d.FLAME})]});else{const o=e.assessmentOverviews.map((e=>function(e,t,s){const o=t?5:3,i=e.missionRepoData.repoOwner+"/"+e.missionRepoData.repoName,r=e.dueDate.toDateString(),l=new Date(864e13)>e.dueDate,c=new Date>e.dueDate,d=void 0!==e.link;let u="Open",m=()=>s("/githubassessments/editor",{state:e});d?(u="Accept",m=()=>window.open(e.link)):c&&(u="Review Answers");return(0,x.jsx)("div",{children:(0,x.jsxs)(n.Zb,{className:"row listing",elevation:k.u.ONE,children:[(0,x.jsx)("div",{className:`col-xs-${String(o)} listing-picture`,children:(0,x.jsx)("img",{alt:"Assessment",className:`cover-image-${e.title}`,src:e.coverImage?e.coverImage:N})}),(0,x.jsxs)("div",{className:`col-xs-${String(12-o)} listing-text`,children:[(0,x.jsx)("div",{className:"listing-header",children:(0,x.jsxs)(n.xv,{ellipsize:!0,children:[(0,x.jsx)(n.H4,{className:"listing-title",children:e.title}),(0,x.jsx)(n.H6,{children:i})]})}),(0,x.jsx)("div",{className:"listing-description",children:(0,x.jsx)(E.Z,{content:e.webSummary})}),(0,x.jsxs)("div",{className:"listing-footer",children:[(0,x.jsxs)(n.xv,{className:"listing-due-date",children:[(0,x.jsx)(n.JO,{className:"listing-due-icon",iconSize:12,icon:a.d.TIME}),l?"Due: "+r:"No due date"]}),(0,x.jsx)("div",{className:"listing-button",children:(0,x.jsx)(n.zx,{icon:a.d.PLAY,minimal:!0,onClick:m,children:(0,x.jsx)("span",{className:"custom-hidden-xxxs",children:u})})})]})]})]})},i)}(e,t,s)));i=(0,x.jsxs)(x.Fragment,{children:[l,u,o]})}else i=(0,x.jsxs)(x.Fragment,{children:[l,(0,x.jsx)(n.tR,{description:"Fetching assessment...",icon:(0,x.jsx)(n.$j,{})})]});return(0,x.jsx)("div",{className:"Assessment",style:{overflow:"auto"},children:(0,x.jsx)(d.Z,{display:i,loadContentDispatch:()=>{}})})};var S=s(42543),P=s(763),A=s(89702),O=s(32881),D=s(60054),R=s(89360),B=s(27156),I=s(34165),L=s(68206),M=s(63309),H=s(71697),F=s(50472),U=s(1799);const _=e=>{const t=e.mcqDisplayed?"Show MCQ Text":"Hide MCQ Text",s=e.mcqDisplayed?e.displayTextInEditor:e.displayMCQInEditor;return(0,x.jsx)(v.Z,{label:t,icon:a.d.REFRESH,onClick:s})};var q=s(19778).Buffer;const V=20,Z=e=>JSON.stringify(e,null,4),G=e=>e,W={taskDescription:{fileName:"Problem.md",isDefaultValue:e=>""===e,fromStringConverter:G,toStringConverter:G},starterCode:{fileName:"StarterCode.js",isDefaultValue:e=>""===e,fromStringConverter:G,toStringConverter:G},savedCode:{fileName:"SavedCode.js",isDefaultValue:e=>""===e,fromStringConverter:G,toStringConverter:G},testPrepend:{fileName:"TestPrepend.js",isDefaultValue:e=>""===e,fromStringConverter:G,toStringConverter:G},testPostpend:{fileName:"TestPostpend.js",isDefaultValue:e=>""===e,fromStringConverter:G,toStringConverter:G},testCases:{fileName:"TestCases.json",isDefaultValue:e=>0===e.length,fromStringConverter:JSON.parse,toStringConverter:e=>{const t=e.map((e=>({answer:e.answer,program:e.program,score:e.score?e.score:0,type:e.type?e.type:"public"})));return Z(t)}}};async function z(e,t){const s=Q(e.repoOwner,e.repoName,"README.md",t),n=Q(e.repoOwner,e.repoName,".metadata",t),a=async function(e,t,s){const n=[];if(void 0===s)return n;const a=await s.repos.getContent({owner:e,repo:t,path:""}),o=a.data;if(!Array.isArray(o))return n;const i=[];for(let r=1;r<=V;r++){const a="Q"+r;if(void 0===o.find((e=>e.name===a)))break;i.push(s.repos.getContent({owner:e,repo:t,path:a}).then((o=>{if(!Array.isArray(o.data))return;const i=o.data.map((e=>e.name)),l=Object.keys(W).filter((e=>i.includes(W[e].fileName))),c=l.map((async n=>{const o=W[n].fileName,i=await Q(e,t,a+"/"+o,s);return W[n].fromStringConverter(i)}));return Promise.all(c).then((e=>{const t={questionNumber:r,taskDescription:"",starterCode:"",savedCode:"",testPrepend:"",testPostpend:"",testCases:[]};for(let s=0;s<e.length;s++)t[l[s]]=e[s];""===t.savedCode&&(t.savedCode=t.starterCode),n.push(t)}))})).catch((e=>{(0,w.N9)("Error occurred while trying to retrieve file content",1e3),console.error(e)})))}return await Promise.all(i),n.sort(((e,t)=>e.questionNumber-t.questionNumber)),n}(e.repoOwner,e.repoName,t),[o,i,r]=await Promise.all([s,n,a]),l=function(e){try{return JSON.parse(e)}catch(t){return console.error(t),{sourceVersion:S.Chapter.SOURCE_4}}}(i);return{missionRepoData:e,missionBriefing:o,missionMetadata:l,tasksData:r}}async function Q(e,t,s,n){let a="";if(void 0===n)return a;try{const o=await n.repos.getContent({owner:e,repo:t,path:s});a=q.from(o.data.content,"base64").toString()}catch(o){(0,w.N9)("Error occurred while trying to retrieve file content",1e3),console.error(o)}return a}function Y(e){return Z(e)}function $(e){let t=!1;const s={answer:0,choices:[],solution:-1,type:"mcq",content:"",grade:0,id:0,library:{chapter:S.Chapter.SOURCE_4,external:{name:"NONE",symbols:[]},globals:[]},maxGrade:0,xp:0,maxXp:0},n=e.trim();if("mcq"===n.substring(0,3).toLowerCase()&&(t=!0),t){const e=n.substring(3,n.length);try{const t=JSON.parse(e),n=t.answer,a=t.choices.map((e=>({content:e.option,hint:e.hint}))),o=t.solution;s.answer=n,s.choices=a,s.solution=o}catch(a){t=!1}}return[t,s]}const J=e=>(0,x.jsx)(v.Z,{label:"Add Task",icon:a.d.ADD,onClick:function(){e.numberOfTasks!==V?e.addNewQuestion():(0,w.N9)("Cannot have more than "+V+" Tasks in a Mission!")}});var K=s(97594);const X=e=>(0,x.jsx)(v.Z,{label:"Delete Current Task",icon:a.d.DELETE,onClick:async function(){if(e.numberOfTasks<=1)return void(0,w.N9)("Cannot delete the only remaining task!");await(0,K.pG)({contents:(0,x.jsxs)("div",{children:[(0,x.jsx)("p",{children:"Warning: you are about to delete a task."}),(0,x.jsx)("p",{children:"This action cannot be undone."}),(0,x.jsx)("p",{children:"Please click 'Confirm' to continue, or 'Cancel' to go back."})]}),negativeLabel:"Cancel",positiveIntent:"primary",positiveLabel:"Confirm"})&&e.deleteCurrentQuestion()}});var ee=s(29860),te=s(50698);const se=e=>{const[t,s]=(0,o.useState)("sa-new-mission-repository");return(0,x.jsxs)(n.Vq,{className:"missionBrowser",isOpen:!0,children:[(0,x.jsx)("div",{className:g()("githubDialogHeader",m.ntJ),children:(0,x.jsx)("h3",{children:"Please confirm your save"})}),(0,x.jsxs)("div",{className:g()("githubDialogBody",m.TmF),children:[(0,x.jsxs)("div",{children:[(0,x.jsxs)("h4",{children:["This will create a repository owned by ",e.userLogin," with the title:"]}),(0,x.jsx)(n.BZ,{onChange:function(e){s(e.target.value)},placeholder:"Enter Repository Title",value:t})]}),(0,x.jsxs)("div",{children:[(0,x.jsx)("h4",{children:"This repository will be created with following files:"}),e.filesToCreate.map((e=>(0,x.jsx)("li",{children:e},e)))]})]}),(0,x.jsx)("div",{className:g()(m.Alt),children:(0,x.jsxs)("div",{className:g()(m.e$L),children:[(0,x.jsx)(n.zx,{onClick:function(){e.resolveDialog({confirmSave:!1,repoName:""})},children:"Close"}),(0,x.jsx)(n.AN,{onClick:function(){if(""===t)return void(0,w.N9)("Cannot create repository without title!",2e3);e.resolveDialog({confirmSave:!0,repoName:t})},intent:te.S.PRIMARY,children:"Confirm"})]})})]})};var ne=s(45686);const ae=e=>{const[t,s]=o.useState(!1),a=e.allowEdits,i=o.useRef();return(0,o.useEffect)((()=>{function e(e){a&&(i.current&&!i.current.contains(e.target)&&s(!1),i.current&&i.current.contains(e.target)&&s(!0))}return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}}),[a]),(0,x.jsx)("div",{ref:i,children:t?(0,x.jsx)(n.Kx,{onChange:function(t){e.setContent(t.target.value)},fill:!0,growVertically:!0,defaultValue:e.content}):(0,x.jsx)(E.Z,{content:e.content,openLinksInNewWindow:!0})})};var oe=s(9631);const ie=e=>(0,x.jsx)("div",{className:"SideContentMissionEditor",children:(0,x.jsxs)("div",{className:"SideContentMissionEditorRow",children:[(0,x.jsx)("div",{className:"SideContentMissionEditorLabelColumn",children:(0,x.jsx)(n.__,{children:"Source Version"})}),(0,x.jsx)("div",{className:"SideContentMissionEditorOptionColumn",children:(0,x.jsx)(D.b,{isFolderModeEnabled:e.isFolderModeEnabled,sourceChapter:e.missionMetadata.sourceVersion,sourceVariant:oe.Z.defaultSourceVariant,disabled:!1,handleChapterSelect:function(t,s){!function(t,s){const n=Object.assign({},e.missionMetadata);n[t]=s,e.setMissionMetadata(n)}("sourceVersion",t.chapter)}},"chapter")})]})}),re=e=>{const t=e.currentTaskNumber-1,s=e.taskDescriptions,n=e.setTaskDescriptions,a=t<0||t>=s.length||0===s.length,i=a?"Welcome to Mission Mode! This is where the Task Briefing for each question will appear!":s[t],r=o.useCallback((e=>{if(a)return;const o=s.map((e=>e));o[t]=e,n(o)}),[n,s,t,a]);return(0,x.jsx)("div",{children:(0,x.jsx)(ae,{allowEdits:e.allowEdits,content:i,setContent:r})})};var le=s(95785),ce=s(38399),de=s(14748),ue=s(61881),me=s(92469),he=s(76796);const pe=e=>{const{index:t,testcase:s,setTestcaseProgram:i,setTestcaseExpectedResult:r,handleTestcaseEval:l,deleteTestcase:c}=e,d=o.useMemo((()=>{const e=void 0!==s.result||s.errors,t=(0,me.stringify)(s.result)===s.answer;return{correct:e&&t,wrong:e&&!t,secret:s.type===he.Be.secret||s.type===he.Be.opaque}}),[s]),u=o.useCallback((()=>{l(t)}),[t,l]),h=s.program,p=s.answer,b=(0,x.jsx)(n.zx,{className:"testcase-button",icon:a.d.PLAY,onClick:u}),v=(0,x.jsx)(n.zx,{className:"testcase-button",icon:a.d.DELETE,onClick:()=>c(t)}),f=o.useMemo((()=>{let e="No Answer";return s.errors?e=(0,ue.parseError)(s.errors):void 0!==s.result&&(e=(0,me.stringify)(s.result)),e}),[s]);return(0,x.jsx)("div",{className:g()("EditableAutograderCard",d),children:(0,x.jsxs)(n.Zb,{className:m.znr,elevation:k.u.ONE,children:[(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(n.BZ,{className:"testcase-program",value:h,onChange:e=>i(e.target.value)}),(0,x.jsx)(n.BZ,{className:"testcase-expected",value:p,onChange:e=>r(e.target.value)}),(0,x.jsx)(n.BZ,{className:"testcase-actual",value:f,readOnly:!0})]}),b,v]})})};function ge(e,t){return(0,x.jsx)(ce.ZP,{className:"react-ace",fontSize:14,highlightActiveLine:!1,mode:"javascript",onChange:t,theme:"source",value:e,width:"100%",height:"16rem"})}const be=(0,x.jsxs)("div",{className:"autograder-help-tooltip",children:[(0,x.jsx)("p",{children:"Click on each testcase below to execute it with the program in the editor."}),(0,x.jsx)("p",{children:"To execute all testcases at once, evaluate the program in the editor with this tab active."}),(0,x.jsx)("p",{children:"A green or red background indicates a passed or failed testcase respectively."}),(0,x.jsx)("p",{children:"Private testcases (only visible to staff when grading) have a grey background."})]}),ve=(e,t)=>(0,x.jsxs)("div",{className:e,children:[t,(0,x.jsx)(n.JO,{icon:a.d.CARET_DOWN})]}),xe=(0,x.jsxs)("div",{className:"testcases-header",children:[ve("header-fn","Testcase"),ve("header-expected","Expected result"),ve("header-actual","Actual result")]}),fe=(e,t,s)=>(0,x.jsx)(v.Z,{label:e,icon:t?a.d.CARET_DOWN:a.d.CARET_RIGHT,onClick:s,options:{className:"collapse-button",minimal:!0}}),Ce=e=>{const[t,s]=o.useState(!0),[i,r]=o.useState(!0),[l,c]=o.useState(!0),{testcases:d,testPrepend:u,testPostpend:m,allowEdits:h,handleTestcaseEval:p,setTaskTestcases:g,setTestPrepend:b,setTestPostpend:v}=e,f=o.useCallback((e=>t=>{const s=d.map((e=>Object.assign({},e)));s[e].program=t,delete s[e].result,g(s)}),[g,d]),C=o.useCallback((e=>t=>{const s=d.map((e=>Object.assign({},e)));s[e].answer=t,delete s[e].result,g(s)}),[g,d]),y=o.useCallback((()=>{const e=[...d];e.push({answer:"",program:"",score:0,type:"public"}),g(e)}),[d,g]),j=o.useCallback((async e=>{if(!await(0,K.pG)({title:"confirm testcase deletion",contents:"Are you sure you want to delete this testcase? This cannot be undone.",positiveLabel:"Confirm",negativeLabel:"Cancel"}))return;const t=d.slice(0,e).concat(d.slice(e+1));g(t)}),[d,g]),w=o.useCallback(((e,t)=>h?(0,x.jsx)(pe,{index:t,testcase:e,setTestcaseProgram:f(t),setTestcaseExpectedResult:C(t),deleteTestcase:j,handleTestcaseEval:p},t):(0,x.jsx)(de.Z,{index:t,testcase:e,handleTestcaseEval:p,workspaceLocation:"githubAssessment"},t)),[h,j,p,f,C]),k=o.useMemo((()=>d.length>0?(0,x.jsxs)("div",{className:"testcaseCards",children:[xe,d.map(((e,t)=>w(e,t)))]}):(0,x.jsx)("div",{className:"noResults",children:"There are no testcases provided for this question."})),[d,w]),N=o.useMemo((()=>(0,x.jsx)(n.zx,{className:"collapse-button",icon:a.d.ADD,minimal:!0,text:"Add a new testcase",onClick:y})),[y]),E=o.useCallback((()=>{s(!t)}),[t]),T=o.useCallback((()=>{r(!i)}),[i]),S=o.useCallback((()=>{c(!l)}),[l]);return(0,x.jsxs)("div",{className:"Autograder",children:[(0,x.jsxs)(n.zx,{className:"collapse-button",icon:l?a.d.CARET_DOWN:a.d.CARET_RIGHT,minimal:!0,onClick:S,children:[(0,x.jsx)("span",{children:"Testcases"}),(0,x.jsx)(le.u,{content:be,placement:n.I2.LEFT,children:(0,x.jsx)(n.JO,{icon:a.d.HELP})})]}),(0,x.jsx)(n.UO,{isOpen:l,keepChildrenMounted:!0,children:(0,x.jsxs)("div",{className:"testcaseeditor-subcomponent",children:[k,h&&N]})}),h&&fe("Testcase Prepend",t,E),h&&(0,x.jsx)(n.UO,{isOpen:t,keepChildrenMounted:!0,children:(0,x.jsx)("div",{className:"testcaseeditor-subcomponent",children:ge(u,(e=>b(e)))})}),h&&fe("Testcase Postpend",i,T),h&&(0,x.jsx)(n.UO,{isOpen:i,keepChildrenMounted:!0,children:(0,x.jsx)("div",{className:"testcaseeditor-subcomponent",children:ge(m,(e=>v(e)))})})]})};var ye=s(39215),je=s(40239),we=s(46883);const ke="### Assignment Briefing (Click to Edit!)\nWelcome to Assignment Creator! This is where the Briefing for each assignment will appear.\n\nIf you are on the SourceAcademy website, you may edit **this section** by clicking on it. You can also add or delete questions through the control bar.\n\nThe text written here will show up as the `README.md` file on the GitHub repository.\n\nPlease also refer to our instructor's guide [here](https://github.com/source-academy/general/tree/master/instructor/github) to learn more about how to use this website.\n\n### Brief Markdown Cheatsheet\nEverything here is written in Markdown.\n\nThis means that you can **bolden** or *italicize* text by adding asterisks.\n\nPrograms can be formatted through the use of triple backticks:\n```\n// This is a program example\n```\nIf you want to in-line program snippets, rather than display it as a block, you can also use single backticks like `this`.\n\nLists can be created by adding dashes to the start of a line:\n- First element\n- Second element\n- Third element\n\n\nIt is also possible to embed images, like this:\n\n![an embedded image](https://avatars.githubusercontent.com/u/35620705?s=400&u=32f72fd1d65a0d6877ad1d5870ffa327dda754f1&v=4)\n\nIf you need a more detailed cheatsheet, please click [here](https://www.markdownguide.org/cheat-sheet/)!\n",Ne="// Your program here!\n",Ee={sourceVersion:S.Chapter.SOURCE_1},Te={questionNumber:0,taskDescription:"### Problem Description (Click to Edit!)\nWelcome to the Assignment Creator! This is where the problem description specific to each problem should be written.\n\nIf you are on the SourceAcademy website, you may edit **this section** by clicking on it. You can also add or delete questions through the control bar.\n\nIf you would like to add new questions outside of the website, simply duplicate this folder, and edit the `Problem.md` and `StarterCode.js` files accordingly. Make sure that the folders are named 'Q1', 'Q2', 'Q3' and so on.\n\nPlease also refer to our instructor's guide [here](https://github.com/source-academy/general/tree/master/instructor/github).\n\n### Brief Markdown Cheatsheet\nEverything here is written in Markdown.\n\nThis means that you can **bolden** or *italicize* text by adding asterisks.\n\nPrograms can be formatted through the use of triple backticks:\n```\n// This is a program example\n```\nIf you want to in-line program snippets, rather than display it as a block, you can also use single backticks like `this`.\n\nLists can be created by adding dashes to the start of a line:\n- First element\n- Second element\n- Third element\n\n\nIt is also possible to embed images, like this:\n\n![an embedded image](https://avatars.githubusercontent.com/u/35620705?s=400&u=32f72fd1d65a0d6877ad1d5870ffa327dda754f1&v=4)\n\nIf you need a more detailed cheatsheet, please click [here](https://www.markdownguide.org/cheat-sheet/)!\n",starterCode:Ne,savedCode:Ne,testPrepend:"",testPostpend:"",testCases:[]},Se={answer:-1,choices:[],solution:-1,type:"mcq",content:"",grade:0,id:0,library:{chapter:S.Chapter.SOURCE_4,external:{name:"NONE",symbols:[]},globals:[]},maxGrade:0,xp:0,maxXp:0},Pe="githubAssessment",Ae=()=>{const e=(0,r.s0)(),t=(0,i.I0)(),s=(0,r.TH)(),l=(0,we.E3)();void 0===l&&e("/githubassessments/login");const{handleEditorEval:d,handleEditorValueChange:u,handleReplEval:h,handleReplOutputClear:p,handleUpdateHasUnsavedChanges:b,handleUpdateWorkspace:v,setActiveEditorTabIndex:f,removeEditorTabByIndex:C}=(0,o.useMemo)((()=>({handleEditorEval:()=>t((0,A.evalEditor)(Pe)),handleEditorValueChange:(e,s)=>t((0,A.updateEditorValue)(Pe,e,s)),handleReplEval:()=>t((0,A.evalRepl)(Pe)),handleReplOutputClear:()=>t((0,A.clearReplOutput)(Pe)),handleUpdateHasUnsavedChanges:e=>t((0,A.updateHasUnsavedChanges)(Pe,e)),handleUpdateWorkspace:e=>t((0,A.updateWorkspace)(Pe,e)),setActiveEditorTabIndex:e=>t((0,A.updateActiveEditorTabIndex)(Pe,e)),removeEditorTabByIndex:e=>t((0,A.removeEditorTab)(Pe,e))})),[t]),[y,j]=(0,o.useState)(Ee),[k,N]=(0,o.useState)(Ee),[T,q]=(0,o.useState)(!1),[V,G]=(0,o.useState)(ke),[Q,te]=(0,o.useState)(ke),[le,ce]=(0,o.useState)(!1),[de,ue]=(0,o.useState)([]),[me,he]=(0,o.useState)([]),[pe,ge]=(0,o.useState)(!1),[be,ve]=(0,o.useState)(""),[xe,fe]=(0,o.useState)(0),[Ne,Ae]=(0,o.useState)(!1),[Oe,De]=(0,o.useState)(!0),[Re,Be]=(0,o.useState)(!1),[Ie,Le]=(0,o.useState)(!0),[Me,He]=(0,o.useState)(Se),[Fe,Ue]=(0,o.useState)(void 0),_e=s.state,[qe,Ve]=(0,o.useState)(!1),[Ze,Ge]=(0,o.useState)(ye.B.questionOverview),{isMobileBreakpoint:We}=(0,c.Fs)(),{isFolderModeEnabled:ze,activeEditorTabIndex:Qe,editorTabs:Ye,editorTestcases:$e,hasUnsavedChanges:Je,isRunning:Ke,output:Xe,replValue:et,sideContentHeight:tt}=(0,c.ix)((e=>e.workspaces.githubAssessment)),st=(0,o.useCallback)(((e,t)=>{fe(e);const s=e-1;v({editorTabs:[{value:t[s].savedCode,highlightedLines:[],breakpoints:[]}],programPrependValue:t[s].testPrepend,programPostpendValue:t[s].testPostpend,editorTestcases:t[s].testCases}),p();const[n,a]=$(t[s].savedCode);Be(n),He(a)}),[v,p]),nt=(0,o.useCallback)((e=>{G(e),ce(e!==Q)}),[Q]),at=(0,o.useCallback)((e=>{j(e),q(!(0,P.isEqual)(e,k))}),[k]),ot=(0,o.useCallback)((e=>{he(e),ge(!(0,P.isEqual)(e,de))}),[de]),it=(0,o.useCallback)((e=>{if(e){const[e,t]=$(me[xe-1].savedCode);Be(e),He(t)}Le(e)}),[me,xe]),rt=(0,o.useMemo)((()=>T||le||pe),[T,le,pe]);(0,o.useEffect)((()=>{rt!==Je&&b(rt)}),[rt,Je,b]);const lt=(0,o.useCallback)((async()=>{if(void 0===l)return;const e=_e.missionRepoData,t=[z(e,l),l.users.getAuthenticated().then((t=>t.data.login===e.repoOwner))];Promise.all(t).then((t=>{Ue(e),ge(!1),ce(!1),q(!1),b(!1);const s=t[0];ve(s.missionBriefing),j(s.missionMetadata),N(s.missionMetadata),G(s.missionBriefing),te(s.missionBriefing),he(s.tasksData),ue(s.tasksData.map((e=>Object.assign({},e)))),st(1,s.tasksData);const n=t[1];Ae(n),De(!1)}))}),[_e,l,st,b]),ct=(0,o.useCallback)((()=>{ve(ke),j(Ee),N(Ee),G(ke),te(ke),he([Te]),ue([Te]),Le(!1),st(1,[Te]),ge(!1),ce(!1),q(!1),b(!1),Ae(!0),De(!1)}),[st,b]);(0,o.useEffect)((()=>{void 0===_e||null===_e?ct():lt()}),[_e,lt,ct]);const dt=(0,x.jsx)(n.Vq,{className:"assessment-briefing",isOpen:qe,children:(0,x.jsxs)(n.Zb,{children:[(0,x.jsx)(E.Z,{content:be}),(0,x.jsx)(n.zx,{className:"assessment-briefing-button",onClick:()=>Ve(!1),text:"Continue"})]})}),ut=(0,o.useCallback)(((e,t)=>{if(e>me.length)return;const s=me.map((e=>Object.assign({},e)));s[e-1]={...s[e-1],savedCode:t},ot(s)}),[me,ot]),mt=(0,o.useCallback)((()=>{const e=me[xe-1].starterCode;u(0,e),ut(xe,e)}),[xe,ut,u,me]),ht=(0,o.useCallback)((async(e,t,s,n,a)=>{const o=Fe,{saveType:i}=await(0,we.UG)(l,o.repoOwner,o.repoName,e);"Overwrite"===i&&await(0,we.pi)(l,o.repoOwner,o.repoName,e,s,n,a,t),"Create"===i&&await(0,we.De)(l,o.repoOwner,o.repoName,e,s,n,a,t)}),[Fe,l]),pt=(0,o.useCallback)((async(e,t,s,n)=>{const a=Fe;await(0,we.ok)(l,a.repoOwner,a.repoName,e,t,s,n)}),[Fe,l]),gt=(0,o.useCallback)((async()=>{if(void 0===l)return void(0,w.N9)("Please sign in with GitHub!",2e3);const[e,t]=function(e,t,s,n,a,o,i){const r={},l=[];e!==t&&(r[".metadata"]=Y(e)),s!==n&&(r["README.md"]=s);let c=0;for(;c<a.length;){const e=c+1,t="Q"+e;if(e>o.length){r[t+"/StarterCode.js"]=a[c].savedCode,r[t+"/Problem.md"]=a[c].taskDescription;const e=["testCases","testPrepend","testPostpend"];for(const s of e){const e=a[c][s];if(!W[s].isDefaultValue(e)){const e=t+"/"+W[s].fileName,n=W[s].toStringConverter(a[c][s]);r[e]=n}}}else{const e=Object.keys(W);for(const s of e){const e=a[c][s],n=o[c][s];if(!(0,P.isEqual)(e,n)){const e=t+"/"+W[s].fileName,n=W[s].toStringConverter(a[c][s]);r[e]=n}}if(i&&r[t+"/"+W.savedCode.fileName]){const e=r[t+"/"+W.savedCode.fileName];delete r[t+"/"+W.savedCode.fileName],r[t+"/"+W.starterCode.fileName]=e}}c++}for(;c<o.length;){const e=c+1;l.push("Q"+e),c++}return[r,l]}(y,k,V,Q,me,de,Ne),s=Object.keys(e),n=await l.users.getAuthenticated(),a=n.data.name,o=n.data.email;for(let i=0;i<t.length;i++)await pt(t[i],a,o,"");for(let i=0;i<s.length;i++){const t=s[i],n=e[t];await ht(t,n,a,o,"")}ue(me),te(V),N(y),ge(!1),ce(!1),q(!1)}),[l,Ne,V,y,me,de,Q,k,ht,pt]),bt=(0,o.useCallback)((async()=>{if(void 0===l)return void(0,w.N9)("Please sign in with GitHub!",2e3);const e=function(e,t,s){const n={};n[".metadata"]=Y(e),n["README.md"]=t;const a=["testCases","testPrepend","testPostpend"];for(let o=0;o<s.length;o++){const e="Q"+(o+1);n[e+"/"+W.starterCode.fileName]=s[o].savedCode,n[e+"/"+W.taskDescription.fileName]=s[o].taskDescription,a.forEach((t=>{const a=s[o][t];if(!W[t].isDefaultValue(a)){const a=e+"/"+W[t].fileName,i=W[t].toStringConverter(s[o][t]);n[a]=i}}))}return n}(y,V,me),t=Object.keys(e).sort(),s=await l.users.getAuthenticated(),n=await(0,K.Jt)(se,(e=>({filesToCreate:t,userLogin:s.data.login,resolveDialog:t=>e(t)})));if(!n.confirmSave)return;const a=s.data.name,o=s.data.email,i=n.repoName,r=s.data.login;try{await l.repos.createForAuthenticatedUser({name:i});for(let s=0;s<t.length;s++){const n=t[s],c=e[n];await(0,we.De)(l,r,i,n,a,o,"Repository created from Source Academy",c)}ue(me),te(V),N(y),ge(!1),ce(!1),q(!1),Ue({repoOwner:r,repoName:i,dateOfCreation:new Date})}catch(c){console.error(c),(0,w.N9)("Something went wrong while creating the repository!",2e3)}}),[V,y,l,me]),vt=(0,o.useCallback)((()=>{void 0!==_e&&new Date>_e.dueDate?(0,w.N9)("It is past the due date for this assessment!"):void 0!==Fe?gt():bt()}),[_e,Fe,gt,bt]),xt=(0,o.useCallback)((async()=>{await(0,K.pG)({contents:(0,x.jsxs)("div",{className:m.TmF,children:[(0,x.jsx)(E.Z,{content:"Are you sure you want to reset the template?"}),(0,x.jsx)(E.Z,{content:"*Note this will not affect the saved copy of your program, unless you save over it.*"})]}),negativeLabel:"Cancel",positiveIntent:"primary",positiveLabel:"Confirm"})&&mt()}),[mt]),ft=(0,o.useCallback)(((e,t,s,n)=>{if(void 0===n)return!0;const a=e-1;return!!(0,P.isEqual)(t[a],s[a])||window.confirm("You have unsaved changes to the current question. Are you sure you want to continue?")}),[]),Ct=(0,o.useCallback)((()=>{if(ft(xe,me,de,Fe)){let e=me;void 0!==Fe&&(e=de.map((e=>Object.assign({},e))),ot(e));st(xe-1,e)}}),[xe,me,de,Fe,ot,ft,st]),yt=(0,o.useCallback)((()=>{if(ft(xe,me,de,Fe)){let e=me;void 0!==Fe&&(e=de.map((e=>Object.assign({},e))),ot(e));st(xe+1,e)}}),[xe,me,de,Fe,ot,ft,st]),jt=(0,o.useCallback)((()=>{e("/githubassessments/missions")}),[e]);(0,o.useEffect)((()=>{We||Ze!==ye.B.mobileEditor&&Ze!==ye.B.mobileEditorRun||Ge(ye.B.questionOverview)}),[We,Ze]);const wt=(0,o.useCallback)(((e,t)=>{u(0,t),ut(xe,t)}),[xe,ut,u]),kt=(e,t,s)=>{e!==t&&Ge(e)},Nt=(0,o.useRef)(Ze);Nt.current=Ze;const Et=()=>{d(),Nt.current===ye.B.testcases&&t((0,A.runAllTestcases)(Pe))},Tt=(0,o.useCallback)((e=>{const t=[];for(let s=0;s<me.length;s++){const n=Object.assign({},me[s]);n.taskDescription=e[s],t.push(n)}ot(t)}),[me,ot]),St=(0,o.useCallback)((e=>{const t=me.map((e=>Object.assign({},e)));t[xe-1]={...t[xe-1],testCases:e},v({editorTestcases:t[xe-1].testCases}),ot(t)}),[xe,me,v,ot]),Pt=(0,o.useCallback)((e=>{const t=me.map((e=>Object.assign({},e)));t[xe-1]={...t[xe-1],testPrepend:e},ot(t)}),[xe,me,ot]),At=(0,o.useCallback)((e=>{const t=me.map((e=>Object.assign({},e)));t[xe-1]={...t[xe-1],testPostpend:e},ot(t)}),[xe,me,ot]),Ot=()=>{const e=[{label:"Task",iconName:a.d.NINJA,body:(0,x.jsx)(re,{allowEdits:Ne,currentTaskNumber:xe,taskDescriptions:me.map((e=>e.taskDescription)),setTaskDescriptions:Tt}),id:ye.B.questionOverview},{label:"Briefing",iconName:a.d.BRIEFCASE,body:(0,x.jsx)(ae,{allowEdits:Ne,content:V,setContent:nt}),id:ye.B.briefing}],s=xe-1,n=me[s]?me[s].testPrepend:"",o=me[s]?me[s].testPostpend:"";return e.push({label:"Testcases",iconName:a.d.AIRPLANE,body:(0,x.jsx)(Ce,{allowEdits:Ne,testcases:$e,testPrepend:n,testPostpend:o,setTaskTestcases:St,setTestPrepend:Pt,setTestPostpend:At,handleTestcaseEval:e=>t((0,A.evalTestcase)(Pe,e))}),id:ye.B.testcases}),Ne&&e.push({label:"Mission Metadata",iconName:a.d.BUILD,body:(0,x.jsx)(ie,{isFolderModeEnabled:ze,missionMetadata:y,setMissionMetadata:at}),id:ye.B.missionMetadata}),{selectedTabId:Ze,tabs:{beforeDynamicTabs:e,afterDynamicTabs:[]},onChange:kt,workspaceLocation:Pe}},Dt=()=>{const e=me.slice(0,xe).concat([Te]).concat(me.slice(xe,me.length));ot(e);st(xe+1,e)},Rt=()=>{const e=xe-1,t=me.slice(0,e).concat(me.slice(xe,me.length));ot(t);st(1===xe?xe:xe-1,t)},Bt=()=>{const e=(0,x.jsx)(F.h,{isEntrypointFileDefined:null!==Qe,handleEditorEval:Et},"run"),t=(0,x.jsx)(U.t,{hasUnsavedChanges:Je,onClickSave:vt},"save"),s=(0,x.jsx)(H.A,{onClick:xt},"reset"),n=(0,x.jsx)(D.b,{handleChapterSelect:()=>{},isFolderModeEnabled:ze,sourceChapter:y.sourceVersion,sourceVariant:oe.Z.defaultSourceVariant,disabled:!0},"chapter"),a=(0,x.jsx)(I.g,{onClickNext:yt,onClickReturn:jt,questionProgress:[xe,me.length]},"next_question"),o=(0,x.jsx)(L.f,{onClick:Ct,questionProgress:[xe,me.length]},"previous_question"),i=(0,x.jsx)(M.M,{questionProgress:[xe,me.length]},"task_view"),r=We?[t,s]:[e,t,s,n];if(Ne){const e=(0,x.jsx)(J,{addNewQuestion:Dt,numberOfTasks:me.length},"add_task"),t=(0,x.jsx)(X,{deleteCurrentQuestion:Rt,numberOfTasks:me.length},"delete_task"),s=(0,x.jsx)(_,{displayMCQInEditor:()=>it(!0),displayTextInEditor:()=>it(!1),mcqDisplayed:Ie},"display MCQ");r.push(e,t,s)}return{editorButtons:r,flowButtons:[o,i,a]}},It=(0,o.useCallback)((e=>{if(!Re)return;const t=Object.assign({},Me);t.answer=e,He(t),ut(xe,function(e){const t=e.answer,s=e.choices.map((e=>({option:e.content,hint:e.hint}))),n=e.solution;return"MCQ\n"+Z({choices:s,answer:t,solution:n})}(t))}),[Re,xe,ut,Me]),Lt=(0,o.useMemo)((()=>Re&&Ie?{mcq:Me,handleMCQSubmit:It}:void 0),[Re,Ie,Me,It]),Mt={editorVariant:"normal",isFolderModeEnabled:ze,activeEditorTabIndex:Qe,setActiveEditorTabIndex:f,removeEditorTabByIndex:C,editorTabs:Ye.map(ee.F),editorSessionId:"",handleDeclarationNavigate:e=>t((0,A.navigateToDeclaration)(Pe,e)),handleEditorEval:Et,handleEditorValueChange:wt,handleUpdateHasUnsavedChanges:b,handleEditorUpdateBreakpoints:(e,s)=>t((0,A.setEditorBreakpoint)(Pe,e,s)),handlePromptAutocomplete:(e,s,n)=>t((0,A.promptAutocomplete)(Pe,e,s,n)),isEditorAutorun:!1},Ht={handleBrowseHistoryDown:()=>t((0,A.browseReplHistoryDown)(Pe)),handleBrowseHistoryUp:()=>t((0,A.browseReplHistoryUp)(Pe)),handleReplEval:h,handleReplValueChange:e=>t((0,A.updateReplValue)(e,Pe)),output:Xe,replValue:et,sourceChapter:y.sourceVersion||S.Chapter.SOURCE_4,sourceVariant:S.Variant.DEFAULT,externalLibrary:O.L.NONE,replButtons:(()=>{const e=(0,x.jsx)(R._,{handleReplOutputClear:p},"clear_repl");return[(0,x.jsx)(B.e,{handleReplEval:h,isRunning:Ke},"eval_repl"),e]})()},Ft={tabs:[]},Ut={controlBarProps:Bt(),editorContainerProps:Re&&Ie?void 0:Mt,handleSideContentHeightChange:e=>t((0,A.changeSideContentHeight)(e,Pe)),hasUnsavedChanges:Je,mcqProps:Lt,sideBarProps:Ft,sideContentHeight:tt,sideContentProps:Ot(),replProps:Ht},_t={editorContainerProps:Re&&Ie?void 0:Mt,replProps:Ht,sideBarProps:Ft,hasUnsavedChanges:Je,mcqProps:Lt,mobileSideContentProps:(()=>{const e=Ot();return{mobileControlBarProps:{...Bt()},...e,onChange:(e,t,s)=>{e!==t&&(t===ye.B.testcases&&e===ye.B.mobileEditorRun||Ge(e))},selectedTabId:Ze,handleEditorEval:Et}})()};return Oe?(0,x.jsx)("div",{className:g()("missionLoading",m.Pyr),children:(0,x.jsx)(n.tR,{description:"Loading",icon:(0,x.jsx)(n.$j,{size:n.Ey.LARGE})})}):(0,x.jsxs)("div",{className:g()("WorkspaceParent",m.Pyr),children:[dt,We?(0,x.jsx)(ne.Z,{..._t}):(0,x.jsx)(je.Z,{...Ut})]})},Oe=()=>(0,x.jsx)("div",{className:"github-welcome",children:(0,x.jsx)(n.Zb,{className:"github-welcome-content",children:(0,x.jsx)("div",{style:{marginTop:"20px",display:"flex",justifyContent:"center"},children:(0,x.jsxs)("div",{children:[(0,x.jsx)(n.H2,{children:"Welcome to Source Academy with GitHub Classroom!"}),(0,x.jsx)("br",{}),(0,x.jsx)(n.H4,{children:"Source Academy does not find any course information for this account."}),(0,x.jsx)("div",{style:{display:"flex",justifyContent:"center"},children:(0,x.jsxs)(n.UL,{style:{textAlign:"justify"},children:[(0,x.jsx)("li",{children:"If you are enrolled in a Source Academy course that uses GitHub Classroom, check with the course staff to make sure your account is added to the course."}),(0,x.jsxs)("li",{children:["If you are looking for a course to join, check"," ",(0,x.jsx)("a",{href:"https://about.sourceacademy.org/learner/README.html",children:"here"})," to find a course that suits your needs."]})]})})]})})})});var De=s(19778).Buffer;const Re={GITHUB_LOGIN:"login",GITHUB_WELCOME:"welcome",GITHUB_EDITOR:"editor",getAssessmentTypeLink:C.q1},Be=()=>{const e=(0,r.TH)().state,t=(0,c.ix)((e=>e.session.githubOctokitObject)).octokit,s=(0,i.I0)(),[u,m]=(0,o.useState)(null===e||void 0===e?void 0:e.courses),[h,p]=(0,o.useState)((null===e||void 0===e?void 0:e.selectedCourse)||""),[g,b]=(0,o.useState)(null===e||void 0===e?void 0:e.assessmentTypeOverviews),v=null===g||void 0===g?void 0:g.map((e=>e.typeName));(0,o.useEffect)((()=>{void 0!==t&&(u||async function(e,t,s,n){const a=[],o=(await e.orgs.listForAuthenticatedUser({per_page:100})).data;o.filter((e=>e.login.includes("source-academy-course"))).forEach((e=>{a.push(e.login.replace("source-academy-course-",""))})),t(a),a.length>0&&(s(a[0]),Ie(e,a[0],n))}(t,m,p,b))}),[u,t]);const f=o.useCallback((e=>{void 0!==t&&(Ie(t,e.target.innerText,b),p(e.target.innerText))}),[t,p,b]),C=()=>{void 0!==t&&Ie(t,h,b)},y=(0,x.jsx)(r.Fg,{to:Re.GITHUB_LOGIN,replace:!0}),w=(0,x.jsx)(r.Fg,{to:`${Re.getAssessmentTypeLink(v?v[0]:Re.GITHUB_WELCOME)}`,state:{courses:u,assessmentTypeOverviews:g,selectedCourse:h},replace:!0});return(0,x.jsxs)("div",{className:"Academy",style:{overflow:"hidden"},children:[(0,x.jsx)(j,{changeCourseHandler:f,handleGitHubLogIn:()=>s((0,l.loginGitHub)()),handleGitHubLogOut:()=>{s((0,l.logoutGitHub)()),m(void 0),b(void 0),p("")},octokit:t,courses:u,selectedCourse:h,types:v,assessmentTypeOverviews:g}),(0,x.jsxs)(r.Z5,{children:[(0,x.jsx)(r.AW,{path:Re.GITHUB_LOGIN,element:t&&(!u||u.length>0&&!g)?(0,x.jsx)(d.Z,{display:(0,x.jsx)(n.tR,{description:"Loading...",icon:(0,x.jsx)(n.$j,{})}),loadContentDispatch:()=>{}}):t&&u&&0===u.length?(0,x.jsx)(r.Fg,{to:Re.GITHUB_WELCOME,replace:!0}):t?w:(0,x.jsx)(d.Z,{display:(0,x.jsx)(n.tR,{description:"Please sign in to GitHub.",icon:a.d.WARNING_SIGN}),loadContentDispatch:()=>{}})}),(0,x.jsx)(r.AW,{path:Re.GITHUB_WELCOME,element:t?(0,x.jsx)(Oe,{}):y}),(0,x.jsx)(r.AW,{path:Re.GITHUB_EDITOR,element:(0,x.jsx)(Ae,{})}),t?null===v||void 0===v?void 0:v.map(((e,t)=>{const s=g?g[t].assessments:void 0;return(0,x.jsx)(r.AW,{path:`${Re.getAssessmentTypeLink(e)}`,element:(0,x.jsx)(T,{assessmentOverviews:s,refreshAssessmentOverviews:C})},t)})):null,(0,x.jsx)(r.AW,{path:"*",element:t&&u&&u.length>0?w:y})]})]})};async function Ie(e,t,s){const n=(await e.users.getAuthenticated()).data.login,a="source-academy-course-".concat(t),o=(await e.repos.listForAuthenticatedUser({per_page:100})).data,i=o.filter((e=>e.owner.login===a)).find((e=>e.name.includes("course-info")));if(void 0===i)return void(0,w.N9)("The course-info repository cannot be located.",2e3);const r=(await e.repos.getContent({owner:i.owner.login,repo:i.name,path:""})).data;if(Array.isArray(r)){if(!r.find((e=>"course-info.json"===e.name)))return void(0,w.N9)("The course-info.json file cannot be located.",2e3);{const t=await e.repos.getContent({owner:i.owner.login,repo:i.name,path:"course-info.json"}),a=JSON.parse(De.from(t.data.content,"base64").toString());a.types.forEach((e=>{const t=[];e.assessments.forEach((e=>{if(!e.published)return;const s=e.repoPrefix+"-"+n,a=o.find((e=>e.name===s));let r,l=new Date;void 0===a?r=e.acceptLink:null!==a.created_at&&(l=new Date(a.created_at)),t.push({title:e.title,coverImage:e.coverImage,webSummary:e.shortSummary,missionRepoData:{repoOwner:i.owner.login,repoName:s,dateOfCreation:l},dueDate:new Date(e.closeAt),link:r}),t.sort(((e,t)=>e.dueDate<=t.dueDate?-1:1))})),e.assessments=t})),s(a.types)}}}const Le=Be;Le.displayName="GitHubClassroom";const Me=Be},5602:(e,t,s)=>{e.exports=s.p+"static/media/default_cover_image.e2be07249bb127696687.jpg"}}]);
//# sourceMappingURL=34.204a198e.chunk.js.map