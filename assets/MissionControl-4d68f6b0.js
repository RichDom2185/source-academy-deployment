import{r as U,w as R,g5 as br,g6 as vr,g7 as Nr,dx as Qn,g8 as $n,av as xr,dI as Pt,j as w,h as Kn,af as Ct,ag as vt,ae as Ge,I as Dr,d as j,e as Et,a5 as Ir,C as Jn,y as W,H as Or,ar as xe,al as De,an as Ie,i as Dt,a8 as mt,ad as Mt,ay as Cr,g9 as Ar,ga as Zn,eC as Lr,R as bt,bB as Tt,f4 as Sr,bn as Pr,ai as Lt,V as tr,ao as er,B as nr,gb as Mr,gc as _r,u as Rr,a1 as rr,aN as jr,aO as Fr,N as Xr,c as We,D as He,S as Br,b as qr,dm as ze,aH as st,ds as ir,dt as sr,aS as kr,aT as Ur,bP as Vr,dq as Gr,aP as Wr,aB as Hr,aC as zr,aQ as Yr,bX as Qr,aD as $r,aE as Kr,aU as Jr,$ as Zr,aG as ti,du as ei,aW as ni,aY as ri,aF as ii,dn as si,bZ as oi,b$ as ai,b_ as ui,aR as ci,gd as Ye,ge as Qe,gf as li,T as hi,dw as $e,aZ as fi,bC as Ke}from"./index-83d3858e.js";import{d as pi,a as di,b as mi,c as yi,f as gi,e as Ti,C as Ei}from"./ControlBarSaveButton-d5f1c8c7.js";import{g as Je,S as wi,F as bi}from"./DateHelper-6324b7a0.js";import{C as _t}from"./card-334db090.js";import{_ as vi,c as Ni,W as xi,d as Di,a as Ii,b as Oi}from"./Workspace-b8b5acb3.js";function ve(){return ve=Object.assign?Object.assign.bind():function(t){for(var r=1;r<arguments.length;r++){var h=arguments[r];for(var a in h)Object.prototype.hasOwnProperty.call(h,a)&&(t[a]=h[a])}return t},ve.apply(this,arguments)}function Ci(t,r){if(t==null)return{};var h={},a=Object.keys(t),l,n;for(n=0;n<a.length;n++)l=a[n],!(r.indexOf(l)>=0)&&(h[l]=t[l]);return h}var Ai=U.useLayoutEffect,Li=function(r){var h=U.useRef(r);return Ai(function(){h.current=r}),h},Ze=function(r,h){if(typeof r=="function"){r(h);return}r.current=h},Si=function(r,h){var a=U.useRef();return U.useCallback(function(l){r.current=l,a.current&&Ze(a.current,null),a.current=h,h&&Ze(h,l)},[h])},tn={"min-height":"0","max-height":"none",height:"0",visibility:"hidden",overflow:"hidden",position:"absolute","z-index":"-1000",top:"0",right:"0"},en=function(r){Object.keys(tn).forEach(function(h){r.style.setProperty(h,tn[h],"important")})},et=null,nn=function(r,h){var a=r.scrollHeight;return h.sizingStyle.boxSizing==="border-box"?a+h.borderSize:a-h.paddingSize};function Pi(t,r,h,a){h===void 0&&(h=1),a===void 0&&(a=1/0),et||(et=document.createElement("textarea"),et.setAttribute("tabindex","-1"),et.setAttribute("aria-hidden","true"),en(et)),et.parentNode===null&&document.body.appendChild(et);var l=t.paddingSize,n=t.borderSize,e=t.sizingStyle,o=e.boxSizing;Object.keys(e).forEach(function(p){var d=p;et.style[d]=e[d]}),en(et),et.value=r;var c=nn(et,t);et.value=r,c=nn(et,t),et.value="x";var E=et.scrollHeight-l,y=E*h;o==="border-box"&&(y=y+l+n),c=Math.max(y,c);var T=E*a;return o==="border-box"&&(T=T+l+n),c=Math.min(T,c),[c,E]}var rn=function(){},Mi=function(r,h){return r.reduce(function(a,l){return a[l]=h[l],a},{})},_i=["borderBottomWidth","borderLeftWidth","borderRightWidth","borderTopWidth","boxSizing","fontFamily","fontSize","fontStyle","fontWeight","letterSpacing","lineHeight","paddingBottom","paddingLeft","paddingRight","paddingTop","tabSize","textIndent","textRendering","textTransform","width","wordBreak"],Ri=!!document.documentElement.currentStyle,ji=function(r){var h=window.getComputedStyle(r);if(h===null)return null;var a=Mi(_i,h),l=a.boxSizing;if(l==="")return null;Ri&&l==="border-box"&&(a.width=parseFloat(a.width)+parseFloat(a.borderRightWidth)+parseFloat(a.borderLeftWidth)+parseFloat(a.paddingRight)+parseFloat(a.paddingLeft)+"px");var n=parseFloat(a.paddingBottom)+parseFloat(a.paddingTop),e=parseFloat(a.borderBottomWidth)+parseFloat(a.borderTopWidth);return{sizingStyle:a,paddingSize:n,borderSize:e}};function or(t,r,h){var a=Li(h);U.useLayoutEffect(function(){var l=function(e){return a.current(e)};return t.addEventListener(r,l),function(){return t.removeEventListener(r,l)}},[])}var Fi=function(r){or(window,"resize",r)},Xi=function(r){or(document.fonts,"loadingdone",r)},Bi=["cacheMeasurements","maxRows","minRows","onChange","onHeightChange"],qi=function(r,h){var a=r.cacheMeasurements,l=r.maxRows,n=r.minRows,e=r.onChange,o=e===void 0?rn:e,c=r.onHeightChange,E=c===void 0?rn:c,y=Ci(r,Bi),T=y.value!==void 0,p=U.useRef(null),d=Si(p,h),g=U.useRef(0),x=U.useRef(),D=function(){var s=p.current,m=a&&x.current?x.current:ji(s);if(m){x.current=m;var N=Pi(m,s.value||s.placeholder||"x",n,l),L=N[0],P=N[1];g.current!==L&&(g.current=L,s.style.setProperty("height",L+"px","important"),E(L,{rowHeight:P}))}},O=function(s){T||D(),o(s)};return U.useLayoutEffect(D),Fi(D),Xi(D),U.createElement("textarea",ve({},y,{onChange:O,ref:d}))},ki=U.forwardRef(qi);const ar=ki;var Bt={},sn;function Oe(){return sn||(sn=1,function(){Bt.defaults={"0.1":{explicitCharkey:!1,trim:!0,normalize:!0,normalizeTags:!1,attrkey:"@",charkey:"#",explicitArray:!1,ignoreAttrs:!1,mergeAttrs:!1,explicitRoot:!1,validator:null,xmlns:!1,explicitChildren:!1,childkey:"@@",charsAsChildren:!1,includeWhiteChars:!1,async:!1,strict:!0,attrNameProcessors:null,attrValueProcessors:null,tagNameProcessors:null,valueProcessors:null,emptyTag:""},"0.2":{explicitCharkey:!1,trim:!1,normalize:!1,normalizeTags:!1,attrkey:"$",charkey:"_",explicitArray:!0,ignoreAttrs:!1,mergeAttrs:!1,explicitRoot:!0,validator:null,xmlns:!1,explicitChildren:!1,preserveChildrenOrder:!1,childkey:"$$",charsAsChildren:!1,includeWhiteChars:!1,async:!1,strict:!0,attrNameProcessors:null,attrValueProcessors:null,tagNameProcessors:null,valueProcessors:null,rootName:"root",xmldec:{version:"1.0",encoding:"UTF-8",standalone:!0},doctype:null,renderOpts:{pretty:!0,indent:"  ",newline:`
`},headless:!1,chunkSize:1e4,emptyTag:"",cdata:!1}}}.call(R)),Bt}var qt={},lt={},ht={},on;function ft(){return on||(on=1,function(){var t,r,h,a,l,n,e,o=[].slice,c={}.hasOwnProperty;t=function(){var E,y,T,p,d,g;if(g=arguments[0],d=2<=arguments.length?o.call(arguments,1):[],l(Object.assign))Object.assign.apply(null,arguments);else for(E=0,T=d.length;E<T;E++)if(p=d[E],p!=null)for(y in p)c.call(p,y)&&(g[y]=p[y]);return g},l=function(E){return!!E&&Object.prototype.toString.call(E)==="[object Function]"},n=function(E){var y;return!!E&&((y=typeof E)=="function"||y==="object")},h=function(E){return l(Array.isArray)?Array.isArray(E):Object.prototype.toString.call(E)==="[object Array]"},a=function(E){var y;if(h(E))return!E.length;for(y in E)if(c.call(E,y))return!1;return!0},e=function(E){var y,T;return n(E)&&(T=Object.getPrototypeOf(E))&&(y=T.constructor)&&typeof y=="function"&&y instanceof y&&Function.prototype.toString.call(y)===Function.prototype.toString.call(Object)},r=function(E){return l(E.valueOf)?E.valueOf():E},ht.assign=t,ht.isFunction=l,ht.isObject=n,ht.isArray=h,ht.isEmpty=a,ht.isPlainObject=e,ht.getValue=r}.call(R)),ht}var kt={exports:{}},an;function ur(){return an||(an=1,function(){kt.exports=function(){function t(){}return t.prototype.hasFeature=function(r,h){return!0},t.prototype.createDocumentType=function(r,h,a){throw new Error("This DOM method is not implemented.")},t.prototype.createDocument=function(r,h,a){throw new Error("This DOM method is not implemented.")},t.prototype.createHTMLDocument=function(r){throw new Error("This DOM method is not implemented.")},t.prototype.getFeature=function(r,h){throw new Error("This DOM method is not implemented.")},t}()}.call(R)),kt.exports}var Ut={exports:{}},Vt={exports:{}},Gt={exports:{}},un;function Ui(){return un||(un=1,function(){Gt.exports=function(){function t(){}return t.prototype.handleError=function(r){throw new Error(r)},t}()}.call(R)),Gt.exports}var Wt={exports:{}},cn;function Vi(){return cn||(cn=1,function(){Wt.exports=function(){function t(r){this.arr=r||[]}return Object.defineProperty(t.prototype,"length",{get:function(){return this.arr.length}}),t.prototype.item=function(r){return this.arr[r]||null},t.prototype.contains=function(r){return this.arr.indexOf(r)!==-1},t}()}.call(R)),Wt.exports}var ln;function Gi(){return ln||(ln=1,function(){var t,r;t=Ui(),r=Vi(),Vt.exports=function(){function h(){this.defaultParams={"canonical-form":!1,"cdata-sections":!1,comments:!1,"datatype-normalization":!1,"element-content-whitespace":!0,entities:!0,"error-handler":new t,infoset:!0,"validate-if-schema":!1,namespaces:!0,"namespace-declarations":!0,"normalize-characters":!1,"schema-location":"","schema-type":"","split-cdata-sections":!0,validate:!1,"well-formed":!0},this.params=Object.create(this.defaultParams)}return Object.defineProperty(h.prototype,"parameterNames",{get:function(){return new r(Object.keys(this.defaultParams))}}),h.prototype.getParameter=function(a){return this.params.hasOwnProperty(a)?this.params[a]:null},h.prototype.canSetParameter=function(a,l){return!0},h.prototype.setParameter=function(a,l){return l!=null?this.params[a]=l:delete this.params[a]},h}()}.call(R)),Vt.exports}var Ht={exports:{}},zt={exports:{}},Yt={exports:{}},hn;function $(){return hn||(hn=1,function(){Yt.exports={Element:1,Attribute:2,Text:3,CData:4,EntityReference:5,EntityDeclaration:6,ProcessingInstruction:7,Comment:8,Document:9,DocType:10,DocumentFragment:11,NotationDeclaration:12,Declaration:201,Raw:202,AttributeDeclaration:203,ElementDeclaration:204,Dummy:205}}.call(R)),Yt.exports}var Qt={exports:{}},fn;function cr(){return fn||(fn=1,function(){var t;t=$(),rt(),Qt.exports=function(){function r(h,a,l){if(this.parent=h,this.parent&&(this.options=this.parent.options,this.stringify=this.parent.stringify),a==null)throw new Error("Missing attribute name. "+this.debugInfo(a));this.name=this.stringify.name(a),this.value=this.stringify.attValue(l),this.type=t.Attribute,this.isId=!1,this.schemaTypeInfo=null}return Object.defineProperty(r.prototype,"nodeType",{get:function(){return this.type}}),Object.defineProperty(r.prototype,"ownerElement",{get:function(){return this.parent}}),Object.defineProperty(r.prototype,"textContent",{get:function(){return this.value},set:function(h){return this.value=h||""}}),Object.defineProperty(r.prototype,"namespaceURI",{get:function(){return""}}),Object.defineProperty(r.prototype,"prefix",{get:function(){return""}}),Object.defineProperty(r.prototype,"localName",{get:function(){return this.name}}),Object.defineProperty(r.prototype,"specified",{get:function(){return!0}}),r.prototype.clone=function(){return Object.create(this)},r.prototype.toString=function(h){return this.options.writer.attribute(this,this.options.writer.filterOptions(h))},r.prototype.debugInfo=function(h){return h=h||this.name,h==null?"parent: <"+this.parent.name+">":"attribute: {"+h+"}, parent: <"+this.parent.name+">"},r.prototype.isEqualNode=function(h){return!(h.namespaceURI!==this.namespaceURI||h.prefix!==this.prefix||h.localName!==this.localName||h.value!==this.value)},r}()}.call(R)),Qt.exports}var $t={exports:{}},pn;function Ce(){return pn||(pn=1,function(){$t.exports=function(){function t(r){this.nodes=r}return Object.defineProperty(t.prototype,"length",{get:function(){return Object.keys(this.nodes).length||0}}),t.prototype.clone=function(){return this.nodes=null},t.prototype.getNamedItem=function(r){return this.nodes[r]},t.prototype.setNamedItem=function(r){var h;return h=this.nodes[r.nodeName],this.nodes[r.nodeName]=r,h||null},t.prototype.removeNamedItem=function(r){var h;return h=this.nodes[r],delete this.nodes[r],h||null},t.prototype.item=function(r){return this.nodes[Object.keys(this.nodes)[r]]||null},t.prototype.getNamedItemNS=function(r,h){throw new Error("This DOM method is not implemented.")},t.prototype.setNamedItemNS=function(r){throw new Error("This DOM method is not implemented.")},t.prototype.removeNamedItemNS=function(r,h){throw new Error("This DOM method is not implemented.")},t}()}.call(R)),$t.exports}var dn;function Ae(){return dn||(dn=1,function(){var t,r,h,a,l,n,e,o,c=function(y,T){for(var p in T)E.call(T,p)&&(y[p]=T[p]);function d(){this.constructor=y}return d.prototype=T.prototype,y.prototype=new d,y.__super__=T.prototype,y},E={}.hasOwnProperty;o=ft(),e=o.isObject,n=o.isFunction,l=o.getValue,a=rt(),t=$(),r=cr(),h=Ce(),zt.exports=function(y){c(T,y);function T(p,d,g){var x,D,O,b;if(T.__super__.constructor.call(this,p),d==null)throw new Error("Missing element name. "+this.debugInfo());if(this.name=this.stringify.name(d),this.type=t.Element,this.attribs={},this.schemaTypeInfo=null,g!=null&&this.attribute(g),p.type===t.Document&&(this.isRoot=!0,this.documentObject=p,p.rootObject=this,p.children)){for(b=p.children,D=0,O=b.length;D<O;D++)if(x=b[D],x.type===t.DocType){x.name=this.name;break}}}return Object.defineProperty(T.prototype,"tagName",{get:function(){return this.name}}),Object.defineProperty(T.prototype,"namespaceURI",{get:function(){return""}}),Object.defineProperty(T.prototype,"prefix",{get:function(){return""}}),Object.defineProperty(T.prototype,"localName",{get:function(){return this.name}}),Object.defineProperty(T.prototype,"id",{get:function(){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),Object.defineProperty(T.prototype,"className",{get:function(){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),Object.defineProperty(T.prototype,"classList",{get:function(){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),Object.defineProperty(T.prototype,"attributes",{get:function(){return(!this.attributeMap||!this.attributeMap.nodes)&&(this.attributeMap=new h(this.attribs)),this.attributeMap}}),T.prototype.clone=function(){var p,d,g,x;g=Object.create(this),g.isRoot&&(g.documentObject=null),g.attribs={},x=this.attribs;for(d in x)E.call(x,d)&&(p=x[d],g.attribs[d]=p.clone());return g.children=[],this.children.forEach(function(D){var O;return O=D.clone(),O.parent=g,g.children.push(O)}),g},T.prototype.attribute=function(p,d){var g,x;if(p!=null&&(p=l(p)),e(p))for(g in p)E.call(p,g)&&(x=p[g],this.attribute(g,x));else n(d)&&(d=d.apply()),this.options.keepNullAttributes&&d==null?this.attribs[p]=new r(this,p,""):d!=null&&(this.attribs[p]=new r(this,p,d));return this},T.prototype.removeAttribute=function(p){var d,g,x;if(p==null)throw new Error("Missing attribute name. "+this.debugInfo());if(p=l(p),Array.isArray(p))for(g=0,x=p.length;g<x;g++)d=p[g],delete this.attribs[d];else delete this.attribs[p];return this},T.prototype.toString=function(p){return this.options.writer.element(this,this.options.writer.filterOptions(p))},T.prototype.att=function(p,d){return this.attribute(p,d)},T.prototype.a=function(p,d){return this.attribute(p,d)},T.prototype.getAttribute=function(p){return this.attribs.hasOwnProperty(p)?this.attribs[p].value:null},T.prototype.setAttribute=function(p,d){throw new Error("This DOM method is not implemented."+this.debugInfo())},T.prototype.getAttributeNode=function(p){return this.attribs.hasOwnProperty(p)?this.attribs[p]:null},T.prototype.setAttributeNode=function(p){throw new Error("This DOM method is not implemented."+this.debugInfo())},T.prototype.removeAttributeNode=function(p){throw new Error("This DOM method is not implemented."+this.debugInfo())},T.prototype.getElementsByTagName=function(p){throw new Error("This DOM method is not implemented."+this.debugInfo())},T.prototype.getAttributeNS=function(p,d){throw new Error("This DOM method is not implemented."+this.debugInfo())},T.prototype.setAttributeNS=function(p,d,g){throw new Error("This DOM method is not implemented."+this.debugInfo())},T.prototype.removeAttributeNS=function(p,d){throw new Error("This DOM method is not implemented."+this.debugInfo())},T.prototype.getAttributeNodeNS=function(p,d){throw new Error("This DOM method is not implemented."+this.debugInfo())},T.prototype.setAttributeNodeNS=function(p){throw new Error("This DOM method is not implemented."+this.debugInfo())},T.prototype.getElementsByTagNameNS=function(p,d){throw new Error("This DOM method is not implemented."+this.debugInfo())},T.prototype.hasAttribute=function(p){return this.attribs.hasOwnProperty(p)},T.prototype.hasAttributeNS=function(p,d){throw new Error("This DOM method is not implemented."+this.debugInfo())},T.prototype.setIdAttribute=function(p,d){return this.attribs.hasOwnProperty(p)?this.attribs[p].isId:d},T.prototype.setIdAttributeNS=function(p,d,g){throw new Error("This DOM method is not implemented."+this.debugInfo())},T.prototype.setIdAttributeNode=function(p,d){throw new Error("This DOM method is not implemented."+this.debugInfo())},T.prototype.getElementsByTagName=function(p){throw new Error("This DOM method is not implemented."+this.debugInfo())},T.prototype.getElementsByTagNameNS=function(p,d){throw new Error("This DOM method is not implemented."+this.debugInfo())},T.prototype.getElementsByClassName=function(p){throw new Error("This DOM method is not implemented."+this.debugInfo())},T.prototype.isEqualNode=function(p){var d,g,x;if(!T.__super__.isEqualNode.apply(this,arguments).isEqualNode(p)||p.namespaceURI!==this.namespaceURI||p.prefix!==this.prefix||p.localName!==this.localName||p.attribs.length!==this.attribs.length)return!1;for(d=g=0,x=this.attribs.length-1;0<=x?g<=x:g>=x;d=0<=x?++g:--g)if(!this.attribs[d].isEqualNode(p.attribs[d]))return!1;return!0},T}(a)}.call(R)),zt.exports}var Kt={exports:{}},Jt={exports:{}},mn;function Rt(){return mn||(mn=1,function(){var t,r=function(a,l){for(var n in l)h.call(l,n)&&(a[n]=l[n]);function e(){this.constructor=a}return e.prototype=l.prototype,a.prototype=new e,a.__super__=l.prototype,a},h={}.hasOwnProperty;t=rt(),Jt.exports=function(a){r(l,a);function l(n){l.__super__.constructor.call(this,n),this.value=""}return Object.defineProperty(l.prototype,"data",{get:function(){return this.value},set:function(n){return this.value=n||""}}),Object.defineProperty(l.prototype,"length",{get:function(){return this.value.length}}),Object.defineProperty(l.prototype,"textContent",{get:function(){return this.value},set:function(n){return this.value=n||""}}),l.prototype.clone=function(){return Object.create(this)},l.prototype.substringData=function(n,e){throw new Error("This DOM method is not implemented."+this.debugInfo())},l.prototype.appendData=function(n){throw new Error("This DOM method is not implemented."+this.debugInfo())},l.prototype.insertData=function(n,e){throw new Error("This DOM method is not implemented."+this.debugInfo())},l.prototype.deleteData=function(n,e){throw new Error("This DOM method is not implemented."+this.debugInfo())},l.prototype.replaceData=function(n,e,o){throw new Error("This DOM method is not implemented."+this.debugInfo())},l.prototype.isEqualNode=function(n){return!(!l.__super__.isEqualNode.apply(this,arguments).isEqualNode(n)||n.data!==this.data)},l}(t)}.call(R)),Jt.exports}var yn;function Le(){return yn||(yn=1,function(){var t,r,h=function(l,n){for(var e in n)a.call(n,e)&&(l[e]=n[e]);function o(){this.constructor=l}return o.prototype=n.prototype,l.prototype=new o,l.__super__=n.prototype,l},a={}.hasOwnProperty;t=$(),r=Rt(),Kt.exports=function(l){h(n,l);function n(e,o){if(n.__super__.constructor.call(this,e),o==null)throw new Error("Missing CDATA text. "+this.debugInfo());this.name="#cdata-section",this.type=t.CData,this.value=this.stringify.cdata(o)}return n.prototype.clone=function(){return Object.create(this)},n.prototype.toString=function(e){return this.options.writer.cdata(this,this.options.writer.filterOptions(e))},n}(r)}.call(R)),Kt.exports}var Zt={exports:{}},gn;function Se(){return gn||(gn=1,function(){var t,r,h=function(l,n){for(var e in n)a.call(n,e)&&(l[e]=n[e]);function o(){this.constructor=l}return o.prototype=n.prototype,l.prototype=new o,l.__super__=n.prototype,l},a={}.hasOwnProperty;t=$(),r=Rt(),Zt.exports=function(l){h(n,l);function n(e,o){if(n.__super__.constructor.call(this,e),o==null)throw new Error("Missing comment text. "+this.debugInfo());this.name="#comment",this.type=t.Comment,this.value=this.stringify.comment(o)}return n.prototype.clone=function(){return Object.create(this)},n.prototype.toString=function(e){return this.options.writer.comment(this,this.options.writer.filterOptions(e))},n}(r)}.call(R)),Zt.exports}var te={exports:{}},Tn;function Pe(){return Tn||(Tn=1,function(){var t,r,h,a=function(n,e){for(var o in e)l.call(e,o)&&(n[o]=e[o]);function c(){this.constructor=n}return c.prototype=e.prototype,n.prototype=new c,n.__super__=e.prototype,n},l={}.hasOwnProperty;h=ft().isObject,r=rt(),t=$(),te.exports=function(n){a(e,n);function e(o,c,E,y){var T;e.__super__.constructor.call(this,o),h(c)&&(T=c,c=T.version,E=T.encoding,y=T.standalone),c||(c="1.0"),this.type=t.Declaration,this.version=this.stringify.xmlVersion(c),E!=null&&(this.encoding=this.stringify.xmlEncoding(E)),y!=null&&(this.standalone=this.stringify.xmlStandalone(y))}return e.prototype.toString=function(o){return this.options.writer.declaration(this,this.options.writer.filterOptions(o))},e}(r)}.call(R)),te.exports}var ee={exports:{}},ne={exports:{}},En;function Me(){return En||(En=1,function(){var t,r,h=function(l,n){for(var e in n)a.call(n,e)&&(l[e]=n[e]);function o(){this.constructor=l}return o.prototype=n.prototype,l.prototype=new o,l.__super__=n.prototype,l},a={}.hasOwnProperty;r=rt(),t=$(),ne.exports=function(l){h(n,l);function n(e,o,c,E,y,T){if(n.__super__.constructor.call(this,e),o==null)throw new Error("Missing DTD element name. "+this.debugInfo());if(c==null)throw new Error("Missing DTD attribute name. "+this.debugInfo(o));if(!E)throw new Error("Missing DTD attribute type. "+this.debugInfo(o));if(!y)throw new Error("Missing DTD attribute default. "+this.debugInfo(o));if(y.indexOf("#")!==0&&(y="#"+y),!y.match(/^(#REQUIRED|#IMPLIED|#FIXED|#DEFAULT)$/))throw new Error("Invalid default value type; expected: #REQUIRED, #IMPLIED, #FIXED or #DEFAULT. "+this.debugInfo(o));if(T&&!y.match(/^(#FIXED|#DEFAULT)$/))throw new Error("Default value only applies to #FIXED or #DEFAULT. "+this.debugInfo(o));this.elementName=this.stringify.name(o),this.type=t.AttributeDeclaration,this.attributeName=this.stringify.name(c),this.attributeType=this.stringify.dtdAttType(E),T&&(this.defaultValue=this.stringify.dtdAttDefault(T)),this.defaultValueType=y}return n.prototype.toString=function(e){return this.options.writer.dtdAttList(this,this.options.writer.filterOptions(e))},n}(r)}.call(R)),ne.exports}var re={exports:{}},wn;function _e(){return wn||(wn=1,function(){var t,r,h,a=function(n,e){for(var o in e)l.call(e,o)&&(n[o]=e[o]);function c(){this.constructor=n}return c.prototype=e.prototype,n.prototype=new c,n.__super__=e.prototype,n},l={}.hasOwnProperty;h=ft().isObject,r=rt(),t=$(),re.exports=function(n){a(e,n);function e(o,c,E,y){if(e.__super__.constructor.call(this,o),E==null)throw new Error("Missing DTD entity name. "+this.debugInfo(E));if(y==null)throw new Error("Missing DTD entity value. "+this.debugInfo(E));if(this.pe=!!c,this.name=this.stringify.name(E),this.type=t.EntityDeclaration,!h(y))this.value=this.stringify.dtdEntityValue(y),this.internal=!0;else{if(!y.pubID&&!y.sysID)throw new Error("Public and/or system identifiers are required for an external entity. "+this.debugInfo(E));if(y.pubID&&!y.sysID)throw new Error("System identifier is required for a public external entity. "+this.debugInfo(E));if(this.internal=!1,y.pubID!=null&&(this.pubID=this.stringify.dtdPubID(y.pubID)),y.sysID!=null&&(this.sysID=this.stringify.dtdSysID(y.sysID)),y.nData!=null&&(this.nData=this.stringify.dtdNData(y.nData)),this.pe&&this.nData)throw new Error("Notation declaration is not allowed in a parameter entity. "+this.debugInfo(E))}}return Object.defineProperty(e.prototype,"publicId",{get:function(){return this.pubID}}),Object.defineProperty(e.prototype,"systemId",{get:function(){return this.sysID}}),Object.defineProperty(e.prototype,"notationName",{get:function(){return this.nData||null}}),Object.defineProperty(e.prototype,"inputEncoding",{get:function(){return null}}),Object.defineProperty(e.prototype,"xmlEncoding",{get:function(){return null}}),Object.defineProperty(e.prototype,"xmlVersion",{get:function(){return null}}),e.prototype.toString=function(o){return this.options.writer.dtdEntity(this,this.options.writer.filterOptions(o))},e}(r)}.call(R)),re.exports}var ie={exports:{}},bn;function Re(){return bn||(bn=1,function(){var t,r,h=function(l,n){for(var e in n)a.call(n,e)&&(l[e]=n[e]);function o(){this.constructor=l}return o.prototype=n.prototype,l.prototype=new o,l.__super__=n.prototype,l},a={}.hasOwnProperty;r=rt(),t=$(),ie.exports=function(l){h(n,l);function n(e,o,c){if(n.__super__.constructor.call(this,e),o==null)throw new Error("Missing DTD element name. "+this.debugInfo());c||(c="(#PCDATA)"),Array.isArray(c)&&(c="("+c.join(",")+")"),this.name=this.stringify.name(o),this.type=t.ElementDeclaration,this.value=this.stringify.dtdElementValue(c)}return n.prototype.toString=function(e){return this.options.writer.dtdElement(this,this.options.writer.filterOptions(e))},n}(r)}.call(R)),ie.exports}var se={exports:{}},vn;function je(){return vn||(vn=1,function(){var t,r,h=function(l,n){for(var e in n)a.call(n,e)&&(l[e]=n[e]);function o(){this.constructor=l}return o.prototype=n.prototype,l.prototype=new o,l.__super__=n.prototype,l},a={}.hasOwnProperty;r=rt(),t=$(),se.exports=function(l){h(n,l);function n(e,o,c){if(n.__super__.constructor.call(this,e),o==null)throw new Error("Missing DTD notation name. "+this.debugInfo(o));if(!c.pubID&&!c.sysID)throw new Error("Public or system identifiers are required for an external entity. "+this.debugInfo(o));this.name=this.stringify.name(o),this.type=t.NotationDeclaration,c.pubID!=null&&(this.pubID=this.stringify.dtdPubID(c.pubID)),c.sysID!=null&&(this.sysID=this.stringify.dtdSysID(c.sysID))}return Object.defineProperty(n.prototype,"publicId",{get:function(){return this.pubID}}),Object.defineProperty(n.prototype,"systemId",{get:function(){return this.sysID}}),n.prototype.toString=function(e){return this.options.writer.dtdNotation(this,this.options.writer.filterOptions(e))},n}(r)}.call(R)),se.exports}var Nn;function Fe(){return Nn||(Nn=1,function(){var t,r,h,a,l,n,e,o,c=function(y,T){for(var p in T)E.call(T,p)&&(y[p]=T[p]);function d(){this.constructor=y}return d.prototype=T.prototype,y.prototype=new d,y.__super__=T.prototype,y},E={}.hasOwnProperty;o=ft().isObject,e=rt(),t=$(),r=Me(),a=_e(),h=Re(),l=je(),n=Ce(),ee.exports=function(y){c(T,y);function T(p,d,g){var x,D,O,b,s,m;if(T.__super__.constructor.call(this,p),this.type=t.DocType,p.children){for(b=p.children,D=0,O=b.length;D<O;D++)if(x=b[D],x.type===t.Element){this.name=x.name;break}}this.documentObject=p,o(d)&&(s=d,d=s.pubID,g=s.sysID),g==null&&(m=[d,g],g=m[0],d=m[1]),d!=null&&(this.pubID=this.stringify.dtdPubID(d)),g!=null&&(this.sysID=this.stringify.dtdSysID(g))}return Object.defineProperty(T.prototype,"entities",{get:function(){var p,d,g,x,D;for(x={},D=this.children,d=0,g=D.length;d<g;d++)p=D[d],p.type===t.EntityDeclaration&&!p.pe&&(x[p.name]=p);return new n(x)}}),Object.defineProperty(T.prototype,"notations",{get:function(){var p,d,g,x,D;for(x={},D=this.children,d=0,g=D.length;d<g;d++)p=D[d],p.type===t.NotationDeclaration&&(x[p.name]=p);return new n(x)}}),Object.defineProperty(T.prototype,"publicId",{get:function(){return this.pubID}}),Object.defineProperty(T.prototype,"systemId",{get:function(){return this.sysID}}),Object.defineProperty(T.prototype,"internalSubset",{get:function(){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),T.prototype.element=function(p,d){var g;return g=new h(this,p,d),this.children.push(g),this},T.prototype.attList=function(p,d,g,x,D){var O;return O=new r(this,p,d,g,x,D),this.children.push(O),this},T.prototype.entity=function(p,d){var g;return g=new a(this,!1,p,d),this.children.push(g),this},T.prototype.pEntity=function(p,d){var g;return g=new a(this,!0,p,d),this.children.push(g),this},T.prototype.notation=function(p,d){var g;return g=new l(this,p,d),this.children.push(g),this},T.prototype.toString=function(p){return this.options.writer.docType(this,this.options.writer.filterOptions(p))},T.prototype.ele=function(p,d){return this.element(p,d)},T.prototype.att=function(p,d,g,x,D){return this.attList(p,d,g,x,D)},T.prototype.ent=function(p,d){return this.entity(p,d)},T.prototype.pent=function(p,d){return this.pEntity(p,d)},T.prototype.not=function(p,d){return this.notation(p,d)},T.prototype.up=function(){return this.root()||this.documentObject},T.prototype.isEqualNode=function(p){return!(!T.__super__.isEqualNode.apply(this,arguments).isEqualNode(p)||p.name!==this.name||p.publicId!==this.publicId||p.systemId!==this.systemId)},T}(e)}.call(R)),ee.exports}var oe={exports:{}},xn;function Xe(){return xn||(xn=1,function(){var t,r,h=function(l,n){for(var e in n)a.call(n,e)&&(l[e]=n[e]);function o(){this.constructor=l}return o.prototype=n.prototype,l.prototype=new o,l.__super__=n.prototype,l},a={}.hasOwnProperty;t=$(),r=rt(),oe.exports=function(l){h(n,l);function n(e,o){if(n.__super__.constructor.call(this,e),o==null)throw new Error("Missing raw text. "+this.debugInfo());this.type=t.Raw,this.value=this.stringify.raw(o)}return n.prototype.clone=function(){return Object.create(this)},n.prototype.toString=function(e){return this.options.writer.raw(this,this.options.writer.filterOptions(e))},n}(r)}.call(R)),oe.exports}var ae={exports:{}},Dn;function Be(){return Dn||(Dn=1,function(){var t,r,h=function(l,n){for(var e in n)a.call(n,e)&&(l[e]=n[e]);function o(){this.constructor=l}return o.prototype=n.prototype,l.prototype=new o,l.__super__=n.prototype,l},a={}.hasOwnProperty;t=$(),r=Rt(),ae.exports=function(l){h(n,l);function n(e,o){if(n.__super__.constructor.call(this,e),o==null)throw new Error("Missing element text. "+this.debugInfo());this.name="#text",this.type=t.Text,this.value=this.stringify.text(o)}return Object.defineProperty(n.prototype,"isElementContentWhitespace",{get:function(){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),Object.defineProperty(n.prototype,"wholeText",{get:function(){var e,o,c;for(c="",o=this.previousSibling;o;)c=o.data+c,o=o.previousSibling;for(c+=this.data,e=this.nextSibling;e;)c=c+e.data,e=e.nextSibling;return c}}),n.prototype.clone=function(){return Object.create(this)},n.prototype.toString=function(e){return this.options.writer.text(this,this.options.writer.filterOptions(e))},n.prototype.splitText=function(e){throw new Error("This DOM method is not implemented."+this.debugInfo())},n.prototype.replaceWholeText=function(e){throw new Error("This DOM method is not implemented."+this.debugInfo())},n}(r)}.call(R)),ae.exports}var ue={exports:{}},In;function qe(){return In||(In=1,function(){var t,r,h=function(l,n){for(var e in n)a.call(n,e)&&(l[e]=n[e]);function o(){this.constructor=l}return o.prototype=n.prototype,l.prototype=new o,l.__super__=n.prototype,l},a={}.hasOwnProperty;t=$(),r=Rt(),ue.exports=function(l){h(n,l);function n(e,o,c){if(n.__super__.constructor.call(this,e),o==null)throw new Error("Missing instruction target. "+this.debugInfo());this.type=t.ProcessingInstruction,this.target=this.stringify.insTarget(o),this.name=this.target,c&&(this.value=this.stringify.insValue(c))}return n.prototype.clone=function(){return Object.create(this)},n.prototype.toString=function(e){return this.options.writer.processingInstruction(this,this.options.writer.filterOptions(e))},n.prototype.isEqualNode=function(e){return!(!n.__super__.isEqualNode.apply(this,arguments).isEqualNode(e)||e.target!==this.target)},n}(r)}.call(R)),ue.exports}var ce={exports:{}},On;function lr(){return On||(On=1,function(){var t,r,h=function(l,n){for(var e in n)a.call(n,e)&&(l[e]=n[e]);function o(){this.constructor=l}return o.prototype=n.prototype,l.prototype=new o,l.__super__=n.prototype,l},a={}.hasOwnProperty;r=rt(),t=$(),ce.exports=function(l){h(n,l);function n(e){n.__super__.constructor.call(this,e),this.type=t.Dummy}return n.prototype.clone=function(){return Object.create(this)},n.prototype.toString=function(e){return""},n}(r)}.call(R)),ce.exports}var le={exports:{}},Cn;function Wi(){return Cn||(Cn=1,function(){le.exports=function(){function t(r){this.nodes=r}return Object.defineProperty(t.prototype,"length",{get:function(){return this.nodes.length||0}}),t.prototype.clone=function(){return this.nodes=null},t.prototype.item=function(r){return this.nodes[r]||null},t}()}.call(R)),le.exports}var he={exports:{}},An;function Hi(){return An||(An=1,function(){he.exports={Disconnected:1,Preceding:2,Following:4,Contains:8,ContainedBy:16,ImplementationSpecific:32}}.call(R)),he.exports}var Ln;function rt(){return Ln||(Ln=1,function(){var t,r,h,a,l,n,e,o,c,E,y,T,p,d,g,x,D,O={}.hasOwnProperty;D=ft(),x=D.isObject,g=D.isFunction,d=D.isEmpty,p=D.getValue,o=null,h=null,a=null,l=null,n=null,y=null,T=null,E=null,e=null,r=null,c=null,t=null,Ht.exports=function(){function b(s){this.parent=s,this.parent&&(this.options=this.parent.options,this.stringify=this.parent.stringify),this.value=null,this.children=[],this.baseURI=null,o||(o=Ae(),h=Le(),a=Se(),l=Pe(),n=Fe(),y=Xe(),T=Be(),E=qe(),e=lr(),r=$(),c=Wi(),Ce(),t=Hi())}return Object.defineProperty(b.prototype,"nodeName",{get:function(){return this.name}}),Object.defineProperty(b.prototype,"nodeType",{get:function(){return this.type}}),Object.defineProperty(b.prototype,"nodeValue",{get:function(){return this.value}}),Object.defineProperty(b.prototype,"parentNode",{get:function(){return this.parent}}),Object.defineProperty(b.prototype,"childNodes",{get:function(){return(!this.childNodeList||!this.childNodeList.nodes)&&(this.childNodeList=new c(this.children)),this.childNodeList}}),Object.defineProperty(b.prototype,"firstChild",{get:function(){return this.children[0]||null}}),Object.defineProperty(b.prototype,"lastChild",{get:function(){return this.children[this.children.length-1]||null}}),Object.defineProperty(b.prototype,"previousSibling",{get:function(){var s;return s=this.parent.children.indexOf(this),this.parent.children[s-1]||null}}),Object.defineProperty(b.prototype,"nextSibling",{get:function(){var s;return s=this.parent.children.indexOf(this),this.parent.children[s+1]||null}}),Object.defineProperty(b.prototype,"ownerDocument",{get:function(){return this.document()||null}}),Object.defineProperty(b.prototype,"textContent",{get:function(){var s,m,N,L,P;if(this.nodeType===r.Element||this.nodeType===r.DocumentFragment){for(P="",L=this.children,m=0,N=L.length;m<N;m++)s=L[m],s.textContent&&(P+=s.textContent);return P}else return null},set:function(s){throw new Error("This DOM method is not implemented."+this.debugInfo())}}),b.prototype.setParent=function(s){var m,N,L,P,A;for(this.parent=s,s&&(this.options=s.options,this.stringify=s.stringify),P=this.children,A=[],N=0,L=P.length;N<L;N++)m=P[N],A.push(m.setParent(this));return A},b.prototype.element=function(s,m,N){var L,P,A,i,I,S,M,F,k,H,q;if(S=null,m===null&&N==null&&(k=[{},null],m=k[0],N=k[1]),m==null&&(m={}),m=p(m),x(m)||(H=[m,N],N=H[0],m=H[1]),s!=null&&(s=p(s)),Array.isArray(s))for(A=0,M=s.length;A<M;A++)P=s[A],S=this.element(P);else if(g(s))S=this.element(s.apply());else if(x(s)){for(I in s)if(O.call(s,I))if(q=s[I],g(q)&&(q=q.apply()),!this.options.ignoreDecorators&&this.stringify.convertAttKey&&I.indexOf(this.stringify.convertAttKey)===0)S=this.attribute(I.substr(this.stringify.convertAttKey.length),q);else if(!this.options.separateArrayItems&&Array.isArray(q)&&d(q))S=this.dummy();else if(x(q)&&d(q))S=this.element(I);else if(!this.options.keepNullNodes&&q==null)S=this.dummy();else if(!this.options.separateArrayItems&&Array.isArray(q))for(i=0,F=q.length;i<F;i++)P=q[i],L={},L[I]=P,S=this.element(L);else x(q)?!this.options.ignoreDecorators&&this.stringify.convertTextKey&&I.indexOf(this.stringify.convertTextKey)===0?S=this.element(q):(S=this.element(I),S.element(q)):S=this.element(I,q)}else!this.options.keepNullNodes&&N===null?S=this.dummy():!this.options.ignoreDecorators&&this.stringify.convertTextKey&&s.indexOf(this.stringify.convertTextKey)===0?S=this.text(N):!this.options.ignoreDecorators&&this.stringify.convertCDataKey&&s.indexOf(this.stringify.convertCDataKey)===0?S=this.cdata(N):!this.options.ignoreDecorators&&this.stringify.convertCommentKey&&s.indexOf(this.stringify.convertCommentKey)===0?S=this.comment(N):!this.options.ignoreDecorators&&this.stringify.convertRawKey&&s.indexOf(this.stringify.convertRawKey)===0?S=this.raw(N):!this.options.ignoreDecorators&&this.stringify.convertPIKey&&s.indexOf(this.stringify.convertPIKey)===0?S=this.instruction(s.substr(this.stringify.convertPIKey.length),N):S=this.node(s,m,N);if(S==null)throw new Error("Could not create any elements with: "+s+". "+this.debugInfo());return S},b.prototype.insertBefore=function(s,m,N){var L,P,A,i,I;if(s?.type)return A=s,i=m,A.setParent(this),i?(P=children.indexOf(i),I=children.splice(P),children.push(A),Array.prototype.push.apply(children,I)):children.push(A),A;if(this.isRoot)throw new Error("Cannot insert elements at root level. "+this.debugInfo(s));return P=this.parent.children.indexOf(this),I=this.parent.children.splice(P),L=this.parent.element(s,m,N),Array.prototype.push.apply(this.parent.children,I),L},b.prototype.insertAfter=function(s,m,N){var L,P,A;if(this.isRoot)throw new Error("Cannot insert elements at root level. "+this.debugInfo(s));return P=this.parent.children.indexOf(this),A=this.parent.children.splice(P+1),L=this.parent.element(s,m,N),Array.prototype.push.apply(this.parent.children,A),L},b.prototype.remove=function(){var s;if(this.isRoot)throw new Error("Cannot remove the root element. "+this.debugInfo());return s=this.parent.children.indexOf(this),[].splice.apply(this.parent.children,[s,s-s+1].concat([])),this.parent},b.prototype.node=function(s,m,N){var L,P;return s!=null&&(s=p(s)),m||(m={}),m=p(m),x(m)||(P=[m,N],N=P[0],m=P[1]),L=new o(this,s,m),N!=null&&L.text(N),this.children.push(L),L},b.prototype.text=function(s){var m;return x(s)&&this.element(s),m=new T(this,s),this.children.push(m),this},b.prototype.cdata=function(s){var m;return m=new h(this,s),this.children.push(m),this},b.prototype.comment=function(s){var m;return m=new a(this,s),this.children.push(m),this},b.prototype.commentBefore=function(s){var m,N;return m=this.parent.children.indexOf(this),N=this.parent.children.splice(m),this.parent.comment(s),Array.prototype.push.apply(this.parent.children,N),this},b.prototype.commentAfter=function(s){var m,N;return m=this.parent.children.indexOf(this),N=this.parent.children.splice(m+1),this.parent.comment(s),Array.prototype.push.apply(this.parent.children,N),this},b.prototype.raw=function(s){var m;return m=new y(this,s),this.children.push(m),this},b.prototype.dummy=function(){var s;return s=new e(this),s},b.prototype.instruction=function(s,m){var N,L,P,A,i;if(s!=null&&(s=p(s)),m!=null&&(m=p(m)),Array.isArray(s))for(A=0,i=s.length;A<i;A++)N=s[A],this.instruction(N);else if(x(s))for(N in s)O.call(s,N)&&(L=s[N],this.instruction(N,L));else g(m)&&(m=m.apply()),P=new E(this,s,m),this.children.push(P);return this},b.prototype.instructionBefore=function(s,m){var N,L;return N=this.parent.children.indexOf(this),L=this.parent.children.splice(N),this.parent.instruction(s,m),Array.prototype.push.apply(this.parent.children,L),this},b.prototype.instructionAfter=function(s,m){var N,L;return N=this.parent.children.indexOf(this),L=this.parent.children.splice(N+1),this.parent.instruction(s,m),Array.prototype.push.apply(this.parent.children,L),this},b.prototype.declaration=function(s,m,N){var L,P;return L=this.document(),P=new l(L,s,m,N),L.children.length===0?L.children.unshift(P):L.children[0].type===r.Declaration?L.children[0]=P:L.children.unshift(P),L.root()||L},b.prototype.dtd=function(s,m){var N,L,P,A,i,I,S,M,F,k;for(L=this.document(),P=new n(L,s,m),F=L.children,A=i=0,S=F.length;i<S;A=++i)if(N=F[A],N.type===r.DocType)return L.children[A]=P,P;for(k=L.children,A=I=0,M=k.length;I<M;A=++I)if(N=k[A],N.isRoot)return L.children.splice(A,0,P),P;return L.children.push(P),P},b.prototype.up=function(){if(this.isRoot)throw new Error("The root node has no parent. Use doc() if you need to get the document object.");return this.parent},b.prototype.root=function(){var s;for(s=this;s;){if(s.type===r.Document)return s.rootObject;if(s.isRoot)return s;s=s.parent}},b.prototype.document=function(){var s;for(s=this;s;){if(s.type===r.Document)return s;s=s.parent}},b.prototype.end=function(s){return this.document().end(s)},b.prototype.prev=function(){var s;if(s=this.parent.children.indexOf(this),s<1)throw new Error("Already at the first node. "+this.debugInfo());return this.parent.children[s-1]},b.prototype.next=function(){var s;if(s=this.parent.children.indexOf(this),s===-1||s===this.parent.children.length-1)throw new Error("Already at the last node. "+this.debugInfo());return this.parent.children[s+1]},b.prototype.importDocument=function(s){var m;return m=s.root().clone(),m.parent=this,m.isRoot=!1,this.children.push(m),this},b.prototype.debugInfo=function(s){var m,N;return s=s||this.name,s==null&&!((m=this.parent)!=null&&m.name)?"":s==null?"parent: <"+this.parent.name+">":(N=this.parent)!=null&&N.name?"node: <"+s+">, parent: <"+this.parent.name+">":"node: <"+s+">"},b.prototype.ele=function(s,m,N){return this.element(s,m,N)},b.prototype.nod=function(s,m,N){return this.node(s,m,N)},b.prototype.txt=function(s){return this.text(s)},b.prototype.dat=function(s){return this.cdata(s)},b.prototype.com=function(s){return this.comment(s)},b.prototype.ins=function(s,m){return this.instruction(s,m)},b.prototype.doc=function(){return this.document()},b.prototype.dec=function(s,m,N){return this.declaration(s,m,N)},b.prototype.e=function(s,m,N){return this.element(s,m,N)},b.prototype.n=function(s,m,N){return this.node(s,m,N)},b.prototype.t=function(s){return this.text(s)},b.prototype.d=function(s){return this.cdata(s)},b.prototype.c=function(s){return this.comment(s)},b.prototype.r=function(s){return this.raw(s)},b.prototype.i=function(s,m){return this.instruction(s,m)},b.prototype.u=function(){return this.up()},b.prototype.importXMLBuilder=function(s){return this.importDocument(s)},b.prototype.replaceChild=function(s,m){throw new Error("This DOM method is not implemented."+this.debugInfo())},b.prototype.removeChild=function(s){throw new Error("This DOM method is not implemented."+this.debugInfo())},b.prototype.appendChild=function(s){throw new Error("This DOM method is not implemented."+this.debugInfo())},b.prototype.hasChildNodes=function(){return this.children.length!==0},b.prototype.cloneNode=function(s){throw new Error("This DOM method is not implemented."+this.debugInfo())},b.prototype.normalize=function(){throw new Error("This DOM method is not implemented."+this.debugInfo())},b.prototype.isSupported=function(s,m){return!0},b.prototype.hasAttributes=function(){return this.attribs.length!==0},b.prototype.compareDocumentPosition=function(s){var m,N;return m=this,m===s?0:this.document()!==s.document()?(N=t.Disconnected|t.ImplementationSpecific,Math.random()<.5?N|=t.Preceding:N|=t.Following,N):m.isAncestor(s)?t.Contains|t.Preceding:m.isDescendant(s)?t.Contains|t.Following:m.isPreceding(s)?t.Preceding:t.Following},b.prototype.isSameNode=function(s){throw new Error("This DOM method is not implemented."+this.debugInfo())},b.prototype.lookupPrefix=function(s){throw new Error("This DOM method is not implemented."+this.debugInfo())},b.prototype.isDefaultNamespace=function(s){throw new Error("This DOM method is not implemented."+this.debugInfo())},b.prototype.lookupNamespaceURI=function(s){throw new Error("This DOM method is not implemented."+this.debugInfo())},b.prototype.isEqualNode=function(s){var m,N,L;if(s.nodeType!==this.nodeType||s.children.length!==this.children.length)return!1;for(m=N=0,L=this.children.length-1;0<=L?N<=L:N>=L;m=0<=L?++N:--N)if(!this.children[m].isEqualNode(s.children[m]))return!1;return!0},b.prototype.getFeature=function(s,m){throw new Error("This DOM method is not implemented."+this.debugInfo())},b.prototype.setUserData=function(s,m,N){throw new Error("This DOM method is not implemented."+this.debugInfo())},b.prototype.getUserData=function(s){throw new Error("This DOM method is not implemented."+this.debugInfo())},b.prototype.contains=function(s){return s?s===this||this.isDescendant(s):!1},b.prototype.isDescendant=function(s){var m,N,L,P,A;for(A=this.children,L=0,P=A.length;L<P;L++)if(m=A[L],s===m||(N=m.isDescendant(s),N))return!0;return!1},b.prototype.isAncestor=function(s){return s.isDescendant(this)},b.prototype.isPreceding=function(s){var m,N;return m=this.treePosition(s),N=this.treePosition(this),m===-1||N===-1?!1:m<N},b.prototype.isFollowing=function(s){var m,N;return m=this.treePosition(s),N=this.treePosition(this),m===-1||N===-1?!1:m>N},b.prototype.treePosition=function(s){var m,N;return N=0,m=!1,this.foreachTreeNode(this.document(),function(L){if(N++,!m&&L===s)return m=!0}),m?N:-1},b.prototype.foreachTreeNode=function(s,m){var N,L,P,A,i;for(s||(s=this.document()),A=s.children,L=0,P=A.length;L<P;L++){if(N=A[L],i=m(N))return i;if(i=this.foreachTreeNode(N,m),i)return i}},b}()}.call(R)),Ht.exports}var fe={exports:{}},Sn;function hr(){return Sn||(Sn=1,function(){var t=function(h,a){return function(){return h.apply(a,arguments)}},r={}.hasOwnProperty;fe.exports=function(){function h(a){this.assertLegalName=t(this.assertLegalName,this),this.assertLegalChar=t(this.assertLegalChar,this);var l,n,e;a||(a={}),this.options=a,this.options.version||(this.options.version="1.0"),n=a.stringify||{};for(l in n)r.call(n,l)&&(e=n[l],this[l]=e)}return h.prototype.name=function(a){return this.options.noValidation?a:this.assertLegalName(""+a||"")},h.prototype.text=function(a){return this.options.noValidation?a:this.assertLegalChar(this.textEscape(""+a||""))},h.prototype.cdata=function(a){return this.options.noValidation?a:(a=""+a||"",a=a.replace("]]>","]]]]><![CDATA[>"),this.assertLegalChar(a))},h.prototype.comment=function(a){if(this.options.noValidation)return a;if(a=""+a||"",a.match(/--/))throw new Error("Comment text cannot contain double-hypen: "+a);return this.assertLegalChar(a)},h.prototype.raw=function(a){return this.options.noValidation?a:""+a||""},h.prototype.attValue=function(a){return this.options.noValidation?a:this.assertLegalChar(this.attEscape(a=""+a||""))},h.prototype.insTarget=function(a){return this.options.noValidation?a:this.assertLegalChar(""+a||"")},h.prototype.insValue=function(a){if(this.options.noValidation)return a;if(a=""+a||"",a.match(/\?>/))throw new Error("Invalid processing instruction value: "+a);return this.assertLegalChar(a)},h.prototype.xmlVersion=function(a){if(this.options.noValidation)return a;if(a=""+a||"",!a.match(/1\.[0-9]+/))throw new Error("Invalid version number: "+a);return a},h.prototype.xmlEncoding=function(a){if(this.options.noValidation)return a;if(a=""+a||"",!a.match(/^[A-Za-z](?:[A-Za-z0-9._-])*$/))throw new Error("Invalid encoding: "+a);return this.assertLegalChar(a)},h.prototype.xmlStandalone=function(a){return this.options.noValidation?a:a?"yes":"no"},h.prototype.dtdPubID=function(a){return this.options.noValidation?a:this.assertLegalChar(""+a||"")},h.prototype.dtdSysID=function(a){return this.options.noValidation?a:this.assertLegalChar(""+a||"")},h.prototype.dtdElementValue=function(a){return this.options.noValidation?a:this.assertLegalChar(""+a||"")},h.prototype.dtdAttType=function(a){return this.options.noValidation?a:this.assertLegalChar(""+a||"")},h.prototype.dtdAttDefault=function(a){return this.options.noValidation?a:this.assertLegalChar(""+a||"")},h.prototype.dtdEntityValue=function(a){return this.options.noValidation?a:this.assertLegalChar(""+a||"")},h.prototype.dtdNData=function(a){return this.options.noValidation?a:this.assertLegalChar(""+a||"")},h.prototype.convertAttKey="@",h.prototype.convertPIKey="?",h.prototype.convertTextKey="#text",h.prototype.convertCDataKey="#cdata",h.prototype.convertCommentKey="#comment",h.prototype.convertRawKey="#raw",h.prototype.assertLegalChar=function(a){var l,n;if(this.options.noValidation)return a;if(l="",this.options.version==="1.0"){if(l=/[\0-\x08\x0B\f\x0E-\x1F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,n=a.match(l))throw new Error("Invalid character in string: "+a+" at index "+n.index)}else if(this.options.version==="1.1"&&(l=/[\0\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,n=a.match(l)))throw new Error("Invalid character in string: "+a+" at index "+n.index);return a},h.prototype.assertLegalName=function(a){var l;if(this.options.noValidation)return a;if(this.assertLegalChar(a),l=/^([:A-Z_a-z\xC0-\xD6\xD8-\xF6\xF8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])([\x2D\.0-:A-Z_a-z\xB7\xC0-\xD6\xD8-\xF6\xF8-\u037D\u037F-\u1FFF\u200C\u200D\u203F\u2040\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])*$/,!a.match(l))throw new Error("Invalid character in name");return a},h.prototype.textEscape=function(a){var l;return this.options.noValidation?a:(l=this.options.noDoubleEncoding?/(?!&\S+;)&/g:/&/g,a.replace(l,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\r/g,"&#xD;"))},h.prototype.attEscape=function(a){var l;return this.options.noValidation?a:(l=this.options.noDoubleEncoding?/(?!&\S+;)&/g:/&/g,a.replace(l,"&amp;").replace(/</g,"&lt;").replace(/"/g,"&quot;").replace(/\t/g,"&#x9;").replace(/\n/g,"&#xA;").replace(/\r/g,"&#xD;"))},h}()}.call(R)),fe.exports}var pe={exports:{}},de={exports:{}},me={exports:{}},Pn;function jt(){return Pn||(Pn=1,function(){me.exports={None:0,OpenTag:1,InsideTag:2,CloseTag:3}}.call(R)),me.exports}var Mn;function fr(){return Mn||(Mn=1,function(){var t,r,h,a={}.hasOwnProperty;h=ft().assign,t=$(),Pe(),Fe(),Le(),Se(),Ae(),Xe(),Be(),qe(),lr(),Me(),Re(),_e(),je(),r=jt(),de.exports=function(){function l(n){var e,o,c;n||(n={}),this.options=n,o=n.writer||{};for(e in o)a.call(o,e)&&(c=o[e],this["_"+e]=this[e],this[e]=c)}return l.prototype.filterOptions=function(n){var e,o,c,E,y,T,p,d;return n||(n={}),n=h({},this.options,n),e={writer:this},e.pretty=n.pretty||!1,e.allowEmpty=n.allowEmpty||!1,e.indent=(o=n.indent)!=null?o:"  ",e.newline=(c=n.newline)!=null?c:`
`,e.offset=(E=n.offset)!=null?E:0,e.dontPrettyTextNodes=(y=(T=n.dontPrettyTextNodes)!=null?T:n.dontprettytextnodes)!=null?y:0,e.spaceBeforeSlash=(p=(d=n.spaceBeforeSlash)!=null?d:n.spacebeforeslash)!=null?p:"",e.spaceBeforeSlash===!0&&(e.spaceBeforeSlash=" "),e.suppressPrettyCount=0,e.user={},e.state=r.None,e},l.prototype.indent=function(n,e,o){var c;return!e.pretty||e.suppressPrettyCount?"":e.pretty&&(c=(o||0)+e.offset+1,c>0)?new Array(c).join(e.indent):""},l.prototype.endline=function(n,e,o){return!e.pretty||e.suppressPrettyCount?"":e.newline},l.prototype.attribute=function(n,e,o){var c;return this.openAttribute(n,e,o),c=" "+n.name+'="'+n.value+'"',this.closeAttribute(n,e,o),c},l.prototype.cdata=function(n,e,o){var c;return this.openNode(n,e,o),e.state=r.OpenTag,c=this.indent(n,e,o)+"<![CDATA[",e.state=r.InsideTag,c+=n.value,e.state=r.CloseTag,c+="]]>"+this.endline(n,e,o),e.state=r.None,this.closeNode(n,e,o),c},l.prototype.comment=function(n,e,o){var c;return this.openNode(n,e,o),e.state=r.OpenTag,c=this.indent(n,e,o)+"<!-- ",e.state=r.InsideTag,c+=n.value,e.state=r.CloseTag,c+=" -->"+this.endline(n,e,o),e.state=r.None,this.closeNode(n,e,o),c},l.prototype.declaration=function(n,e,o){var c;return this.openNode(n,e,o),e.state=r.OpenTag,c=this.indent(n,e,o)+"<?xml",e.state=r.InsideTag,c+=' version="'+n.version+'"',n.encoding!=null&&(c+=' encoding="'+n.encoding+'"'),n.standalone!=null&&(c+=' standalone="'+n.standalone+'"'),e.state=r.CloseTag,c+=e.spaceBeforeSlash+"?>",c+=this.endline(n,e,o),e.state=r.None,this.closeNode(n,e,o),c},l.prototype.docType=function(n,e,o){var c,E,y,T,p;if(o||(o=0),this.openNode(n,e,o),e.state=r.OpenTag,T=this.indent(n,e,o),T+="<!DOCTYPE "+n.root().name,n.pubID&&n.sysID?T+=' PUBLIC "'+n.pubID+'" "'+n.sysID+'"':n.sysID&&(T+=' SYSTEM "'+n.sysID+'"'),n.children.length>0){for(T+=" [",T+=this.endline(n,e,o),e.state=r.InsideTag,p=n.children,E=0,y=p.length;E<y;E++)c=p[E],T+=this.writeChildNode(c,e,o+1);e.state=r.CloseTag,T+="]"}return e.state=r.CloseTag,T+=e.spaceBeforeSlash+">",T+=this.endline(n,e,o),e.state=r.None,this.closeNode(n,e,o),T},l.prototype.element=function(n,e,o){var c,E,y,T,p,d,g,x,D,O,b,s,m,N;o||(o=0),O=!1,b="",this.openNode(n,e,o),e.state=r.OpenTag,b+=this.indent(n,e,o)+"<"+n.name,s=n.attribs;for(D in s)a.call(s,D)&&(c=s[D],b+=this.attribute(c,e,o));if(y=n.children.length,T=y===0?null:n.children[0],y===0||n.children.every(function(L){return(L.type===t.Text||L.type===t.Raw)&&L.value===""}))e.allowEmpty?(b+=">",e.state=r.CloseTag,b+="</"+n.name+">"+this.endline(n,e,o)):(e.state=r.CloseTag,b+=e.spaceBeforeSlash+"/>"+this.endline(n,e,o));else if(e.pretty&&y===1&&(T.type===t.Text||T.type===t.Raw)&&T.value!=null)b+=">",e.state=r.InsideTag,e.suppressPrettyCount++,O=!0,b+=this.writeChildNode(T,e,o+1),e.suppressPrettyCount--,O=!1,e.state=r.CloseTag,b+="</"+n.name+">"+this.endline(n,e,o);else{if(e.dontPrettyTextNodes){for(m=n.children,p=0,g=m.length;p<g;p++)if(E=m[p],(E.type===t.Text||E.type===t.Raw)&&E.value!=null){e.suppressPrettyCount++,O=!0;break}}for(b+=">"+this.endline(n,e,o),e.state=r.InsideTag,N=n.children,d=0,x=N.length;d<x;d++)E=N[d],b+=this.writeChildNode(E,e,o+1);e.state=r.CloseTag,b+=this.indent(n,e,o)+"</"+n.name+">",O&&e.suppressPrettyCount--,b+=this.endline(n,e,o),e.state=r.None}return this.closeNode(n,e,o),b},l.prototype.writeChildNode=function(n,e,o){switch(n.type){case t.CData:return this.cdata(n,e,o);case t.Comment:return this.comment(n,e,o);case t.Element:return this.element(n,e,o);case t.Raw:return this.raw(n,e,o);case t.Text:return this.text(n,e,o);case t.ProcessingInstruction:return this.processingInstruction(n,e,o);case t.Dummy:return"";case t.Declaration:return this.declaration(n,e,o);case t.DocType:return this.docType(n,e,o);case t.AttributeDeclaration:return this.dtdAttList(n,e,o);case t.ElementDeclaration:return this.dtdElement(n,e,o);case t.EntityDeclaration:return this.dtdEntity(n,e,o);case t.NotationDeclaration:return this.dtdNotation(n,e,o);default:throw new Error("Unknown XML node type: "+n.constructor.name)}},l.prototype.processingInstruction=function(n,e,o){var c;return this.openNode(n,e,o),e.state=r.OpenTag,c=this.indent(n,e,o)+"<?",e.state=r.InsideTag,c+=n.target,n.value&&(c+=" "+n.value),e.state=r.CloseTag,c+=e.spaceBeforeSlash+"?>",c+=this.endline(n,e,o),e.state=r.None,this.closeNode(n,e,o),c},l.prototype.raw=function(n,e,o){var c;return this.openNode(n,e,o),e.state=r.OpenTag,c=this.indent(n,e,o),e.state=r.InsideTag,c+=n.value,e.state=r.CloseTag,c+=this.endline(n,e,o),e.state=r.None,this.closeNode(n,e,o),c},l.prototype.text=function(n,e,o){var c;return this.openNode(n,e,o),e.state=r.OpenTag,c=this.indent(n,e,o),e.state=r.InsideTag,c+=n.value,e.state=r.CloseTag,c+=this.endline(n,e,o),e.state=r.None,this.closeNode(n,e,o),c},l.prototype.dtdAttList=function(n,e,o){var c;return this.openNode(n,e,o),e.state=r.OpenTag,c=this.indent(n,e,o)+"<!ATTLIST",e.state=r.InsideTag,c+=" "+n.elementName+" "+n.attributeName+" "+n.attributeType,n.defaultValueType!=="#DEFAULT"&&(c+=" "+n.defaultValueType),n.defaultValue&&(c+=' "'+n.defaultValue+'"'),e.state=r.CloseTag,c+=e.spaceBeforeSlash+">"+this.endline(n,e,o),e.state=r.None,this.closeNode(n,e,o),c},l.prototype.dtdElement=function(n,e,o){var c;return this.openNode(n,e,o),e.state=r.OpenTag,c=this.indent(n,e,o)+"<!ELEMENT",e.state=r.InsideTag,c+=" "+n.name+" "+n.value,e.state=r.CloseTag,c+=e.spaceBeforeSlash+">"+this.endline(n,e,o),e.state=r.None,this.closeNode(n,e,o),c},l.prototype.dtdEntity=function(n,e,o){var c;return this.openNode(n,e,o),e.state=r.OpenTag,c=this.indent(n,e,o)+"<!ENTITY",e.state=r.InsideTag,n.pe&&(c+=" %"),c+=" "+n.name,n.value?c+=' "'+n.value+'"':(n.pubID&&n.sysID?c+=' PUBLIC "'+n.pubID+'" "'+n.sysID+'"':n.sysID&&(c+=' SYSTEM "'+n.sysID+'"'),n.nData&&(c+=" NDATA "+n.nData)),e.state=r.CloseTag,c+=e.spaceBeforeSlash+">"+this.endline(n,e,o),e.state=r.None,this.closeNode(n,e,o),c},l.prototype.dtdNotation=function(n,e,o){var c;return this.openNode(n,e,o),e.state=r.OpenTag,c=this.indent(n,e,o)+"<!NOTATION",e.state=r.InsideTag,c+=" "+n.name,n.pubID&&n.sysID?c+=' PUBLIC "'+n.pubID+'" "'+n.sysID+'"':n.pubID?c+=' PUBLIC "'+n.pubID+'"':n.sysID&&(c+=' SYSTEM "'+n.sysID+'"'),e.state=r.CloseTag,c+=e.spaceBeforeSlash+">"+this.endline(n,e,o),e.state=r.None,this.closeNode(n,e,o),c},l.prototype.openNode=function(n,e,o){},l.prototype.closeNode=function(n,e,o){},l.prototype.openAttribute=function(n,e,o){},l.prototype.closeAttribute=function(n,e,o){},l}()}.call(R)),de.exports}var _n;function ke(){return _n||(_n=1,function(){var t,r=function(a,l){for(var n in l)h.call(l,n)&&(a[n]=l[n]);function e(){this.constructor=a}return e.prototype=l.prototype,a.prototype=new e,a.__super__=l.prototype,a},h={}.hasOwnProperty;t=fr(),pe.exports=function(a){r(l,a);function l(n){l.__super__.constructor.call(this,n)}return l.prototype.document=function(n,e){var o,c,E,y,T;for(e=this.filterOptions(e),y="",T=n.children,c=0,E=T.length;c<E;c++)o=T[c],y+=this.writeChildNode(o,e,0);return e.pretty&&y.slice(-e.newline.length)===e.newline&&(y=y.slice(0,-e.newline.length)),y},l}(t)}.call(R)),pe.exports}var Rn;function pr(){return Rn||(Rn=1,function(){var t,r,h,a,l,n,e,o=function(E,y){for(var T in y)c.call(y,T)&&(E[T]=y[T]);function p(){this.constructor=E}return p.prototype=y.prototype,E.prototype=new p,E.__super__=y.prototype,E},c={}.hasOwnProperty;e=ft().isPlainObject,h=ur(),r=Gi(),a=rt(),t=$(),n=hr(),l=ke(),Ut.exports=function(E){o(y,E);function y(T){y.__super__.constructor.call(this,null),this.name="#document",this.type=t.Document,this.documentURI=null,this.domConfig=new r,T||(T={}),T.writer||(T.writer=new l),this.options=T,this.stringify=new n(T)}return Object.defineProperty(y.prototype,"implementation",{value:new h}),Object.defineProperty(y.prototype,"doctype",{get:function(){var T,p,d,g;for(g=this.children,p=0,d=g.length;p<d;p++)if(T=g[p],T.type===t.DocType)return T;return null}}),Object.defineProperty(y.prototype,"documentElement",{get:function(){return this.rootObject||null}}),Object.defineProperty(y.prototype,"inputEncoding",{get:function(){return null}}),Object.defineProperty(y.prototype,"strictErrorChecking",{get:function(){return!1}}),Object.defineProperty(y.prototype,"xmlEncoding",{get:function(){return this.children.length!==0&&this.children[0].type===t.Declaration?this.children[0].encoding:null}}),Object.defineProperty(y.prototype,"xmlStandalone",{get:function(){return this.children.length!==0&&this.children[0].type===t.Declaration?this.children[0].standalone==="yes":!1}}),Object.defineProperty(y.prototype,"xmlVersion",{get:function(){return this.children.length!==0&&this.children[0].type===t.Declaration?this.children[0].version:"1.0"}}),Object.defineProperty(y.prototype,"URL",{get:function(){return this.documentURI}}),Object.defineProperty(y.prototype,"origin",{get:function(){return null}}),Object.defineProperty(y.prototype,"compatMode",{get:function(){return null}}),Object.defineProperty(y.prototype,"characterSet",{get:function(){return null}}),Object.defineProperty(y.prototype,"contentType",{get:function(){return null}}),y.prototype.end=function(T){var p;return p={},T?e(T)&&(p=T,T=this.options.writer):T=this.options.writer,T.document(this,T.filterOptions(p))},y.prototype.toString=function(T){return this.options.writer.document(this,this.options.writer.filterOptions(T))},y.prototype.createElement=function(T){throw new Error("This DOM method is not implemented."+this.debugInfo())},y.prototype.createDocumentFragment=function(){throw new Error("This DOM method is not implemented."+this.debugInfo())},y.prototype.createTextNode=function(T){throw new Error("This DOM method is not implemented."+this.debugInfo())},y.prototype.createComment=function(T){throw new Error("This DOM method is not implemented."+this.debugInfo())},y.prototype.createCDATASection=function(T){throw new Error("This DOM method is not implemented."+this.debugInfo())},y.prototype.createProcessingInstruction=function(T,p){throw new Error("This DOM method is not implemented."+this.debugInfo())},y.prototype.createAttribute=function(T){throw new Error("This DOM method is not implemented."+this.debugInfo())},y.prototype.createEntityReference=function(T){throw new Error("This DOM method is not implemented."+this.debugInfo())},y.prototype.getElementsByTagName=function(T){throw new Error("This DOM method is not implemented."+this.debugInfo())},y.prototype.importNode=function(T,p){throw new Error("This DOM method is not implemented."+this.debugInfo())},y.prototype.createElementNS=function(T,p){throw new Error("This DOM method is not implemented."+this.debugInfo())},y.prototype.createAttributeNS=function(T,p){throw new Error("This DOM method is not implemented."+this.debugInfo())},y.prototype.getElementsByTagNameNS=function(T,p){throw new Error("This DOM method is not implemented."+this.debugInfo())},y.prototype.getElementById=function(T){throw new Error("This DOM method is not implemented."+this.debugInfo())},y.prototype.adoptNode=function(T){throw new Error("This DOM method is not implemented."+this.debugInfo())},y.prototype.normalizeDocument=function(){throw new Error("This DOM method is not implemented."+this.debugInfo())},y.prototype.renameNode=function(T,p,d){throw new Error("This DOM method is not implemented."+this.debugInfo())},y.prototype.getElementsByClassName=function(T){throw new Error("This DOM method is not implemented."+this.debugInfo())},y.prototype.createEvent=function(T){throw new Error("This DOM method is not implemented."+this.debugInfo())},y.prototype.createRange=function(){throw new Error("This DOM method is not implemented."+this.debugInfo())},y.prototype.createNodeIterator=function(T,p,d){throw new Error("This DOM method is not implemented."+this.debugInfo())},y.prototype.createTreeWalker=function(T,p,d){throw new Error("This DOM method is not implemented."+this.debugInfo())},y}(a)}.call(R)),Ut.exports}var ye={exports:{}},jn;function zi(){return jn||(jn=1,function(){var t,r,h,a,l,n,e,o,c,E,y,T,p,d,g,x,D,O,b,s,m,N,L,P={}.hasOwnProperty;L=ft(),m=L.isObject,s=L.isFunction,N=L.isPlainObject,b=L.getValue,t=$(),T=pr(),p=Ae(),a=Le(),l=Se(),g=Xe(),O=Be(),d=qe(),E=Pe(),y=Fe(),n=Me(),o=_e(),e=Re(),c=je(),h=cr(),D=hr(),x=ke(),r=jt(),ye.exports=function(){function A(i,I,S){var M;this.name="?xml",this.type=t.Document,i||(i={}),M={},i.writer?N(i.writer)&&(M=i.writer,i.writer=new x):i.writer=new x,this.options=i,this.writer=i.writer,this.writerOptions=this.writer.filterOptions(M),this.stringify=new D(i),this.onDataCallback=I||function(){},this.onEndCallback=S||function(){},this.currentNode=null,this.currentLevel=-1,this.openTags={},this.documentStarted=!1,this.documentCompleted=!1,this.root=null}return A.prototype.createChildNode=function(i){var I,S,M,F,k,H,q,X;switch(i.type){case t.CData:this.cdata(i.value);break;case t.Comment:this.comment(i.value);break;case t.Element:M={},q=i.attribs;for(S in q)P.call(q,S)&&(I=q[S],M[S]=I.value);this.node(i.name,M);break;case t.Dummy:this.dummy();break;case t.Raw:this.raw(i.value);break;case t.Text:this.text(i.value);break;case t.ProcessingInstruction:this.instruction(i.target,i.value);break;default:throw new Error("This XML node type is not supported in a JS object: "+i.constructor.name)}for(X=i.children,k=0,H=X.length;k<H;k++)F=X[k],this.createChildNode(F),F.type===t.Element&&this.up();return this},A.prototype.dummy=function(){return this},A.prototype.node=function(i,I,S){var M;if(i==null)throw new Error("Missing node name.");if(this.root&&this.currentLevel===-1)throw new Error("Document can only have one root node. "+this.debugInfo(i));return this.openCurrent(),i=b(i),I==null&&(I={}),I=b(I),m(I)||(M=[I,S],S=M[0],I=M[1]),this.currentNode=new p(this,i,I),this.currentNode.children=!1,this.currentLevel++,this.openTags[this.currentLevel]=this.currentNode,S!=null&&this.text(S),this},A.prototype.element=function(i,I,S){var M,F,k,H,q,X;if(this.currentNode&&this.currentNode.type===t.DocType)this.dtdElement.apply(this,arguments);else if(Array.isArray(i)||m(i)||s(i))for(H=this.options.noValidation,this.options.noValidation=!0,X=new T(this.options).element("TEMP_ROOT"),X.element(i),this.options.noValidation=H,q=X.children,F=0,k=q.length;F<k;F++)M=q[F],this.createChildNode(M),M.type===t.Element&&this.up();else this.node(i,I,S);return this},A.prototype.attribute=function(i,I){var S,M;if(!this.currentNode||this.currentNode.children)throw new Error("att() can only be used immediately after an ele() call in callback mode. "+this.debugInfo(i));if(i!=null&&(i=b(i)),m(i))for(S in i)P.call(i,S)&&(M=i[S],this.attribute(S,M));else s(I)&&(I=I.apply()),this.options.keepNullAttributes&&I==null?this.currentNode.attribs[i]=new h(this,i,""):I!=null&&(this.currentNode.attribs[i]=new h(this,i,I));return this},A.prototype.text=function(i){var I;return this.openCurrent(),I=new O(this,i),this.onData(this.writer.text(I,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},A.prototype.cdata=function(i){var I;return this.openCurrent(),I=new a(this,i),this.onData(this.writer.cdata(I,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},A.prototype.comment=function(i){var I;return this.openCurrent(),I=new l(this,i),this.onData(this.writer.comment(I,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},A.prototype.raw=function(i){var I;return this.openCurrent(),I=new g(this,i),this.onData(this.writer.raw(I,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},A.prototype.instruction=function(i,I){var S,M,F,k,H;if(this.openCurrent(),i!=null&&(i=b(i)),I!=null&&(I=b(I)),Array.isArray(i))for(S=0,k=i.length;S<k;S++)M=i[S],this.instruction(M);else if(m(i))for(M in i)P.call(i,M)&&(F=i[M],this.instruction(M,F));else s(I)&&(I=I.apply()),H=new d(this,i,I),this.onData(this.writer.processingInstruction(H,this.writerOptions,this.currentLevel+1),this.currentLevel+1);return this},A.prototype.declaration=function(i,I,S){var M;if(this.openCurrent(),this.documentStarted)throw new Error("declaration() must be the first node.");return M=new E(this,i,I,S),this.onData(this.writer.declaration(M,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},A.prototype.doctype=function(i,I,S){if(this.openCurrent(),i==null)throw new Error("Missing root node name.");if(this.root)throw new Error("dtd() must come before the root node.");return this.currentNode=new y(this,I,S),this.currentNode.rootNodeName=i,this.currentNode.children=!1,this.currentLevel++,this.openTags[this.currentLevel]=this.currentNode,this},A.prototype.dtdElement=function(i,I){var S;return this.openCurrent(),S=new e(this,i,I),this.onData(this.writer.dtdElement(S,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},A.prototype.attList=function(i,I,S,M,F){var k;return this.openCurrent(),k=new n(this,i,I,S,M,F),this.onData(this.writer.dtdAttList(k,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},A.prototype.entity=function(i,I){var S;return this.openCurrent(),S=new o(this,!1,i,I),this.onData(this.writer.dtdEntity(S,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},A.prototype.pEntity=function(i,I){var S;return this.openCurrent(),S=new o(this,!0,i,I),this.onData(this.writer.dtdEntity(S,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},A.prototype.notation=function(i,I){var S;return this.openCurrent(),S=new c(this,i,I),this.onData(this.writer.dtdNotation(S,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},A.prototype.up=function(){if(this.currentLevel<0)throw new Error("The document node has no parent.");return this.currentNode?(this.currentNode.children?this.closeNode(this.currentNode):this.openNode(this.currentNode),this.currentNode=null):this.closeNode(this.openTags[this.currentLevel]),delete this.openTags[this.currentLevel],this.currentLevel--,this},A.prototype.end=function(){for(;this.currentLevel>=0;)this.up();return this.onEnd()},A.prototype.openCurrent=function(){if(this.currentNode)return this.currentNode.children=!0,this.openNode(this.currentNode)},A.prototype.openNode=function(i){var I,S,M,F;if(!i.isOpen){if(!this.root&&this.currentLevel===0&&i.type===t.Element&&(this.root=i),S="",i.type===t.Element){this.writerOptions.state=r.OpenTag,S=this.writer.indent(i,this.writerOptions,this.currentLevel)+"<"+i.name,F=i.attribs;for(M in F)P.call(F,M)&&(I=F[M],S+=this.writer.attribute(I,this.writerOptions,this.currentLevel));S+=(i.children?">":"/>")+this.writer.endline(i,this.writerOptions,this.currentLevel),this.writerOptions.state=r.InsideTag}else this.writerOptions.state=r.OpenTag,S=this.writer.indent(i,this.writerOptions,this.currentLevel)+"<!DOCTYPE "+i.rootNodeName,i.pubID&&i.sysID?S+=' PUBLIC "'+i.pubID+'" "'+i.sysID+'"':i.sysID&&(S+=' SYSTEM "'+i.sysID+'"'),i.children?(S+=" [",this.writerOptions.state=r.InsideTag):(this.writerOptions.state=r.CloseTag,S+=">"),S+=this.writer.endline(i,this.writerOptions,this.currentLevel);return this.onData(S,this.currentLevel),i.isOpen=!0}},A.prototype.closeNode=function(i){var I;if(!i.isClosed)return I="",this.writerOptions.state=r.CloseTag,i.type===t.Element?I=this.writer.indent(i,this.writerOptions,this.currentLevel)+"</"+i.name+">"+this.writer.endline(i,this.writerOptions,this.currentLevel):I=this.writer.indent(i,this.writerOptions,this.currentLevel)+"]>"+this.writer.endline(i,this.writerOptions,this.currentLevel),this.writerOptions.state=r.None,this.onData(I,this.currentLevel),i.isClosed=!0},A.prototype.onData=function(i,I){return this.documentStarted=!0,this.onDataCallback(i,I+1)},A.prototype.onEnd=function(){return this.documentCompleted=!0,this.onEndCallback()},A.prototype.debugInfo=function(i){return i==null?"":"node: <"+i+">"},A.prototype.ele=function(){return this.element.apply(this,arguments)},A.prototype.nod=function(i,I,S){return this.node(i,I,S)},A.prototype.txt=function(i){return this.text(i)},A.prototype.dat=function(i){return this.cdata(i)},A.prototype.com=function(i){return this.comment(i)},A.prototype.ins=function(i,I){return this.instruction(i,I)},A.prototype.dec=function(i,I,S){return this.declaration(i,I,S)},A.prototype.dtd=function(i,I,S){return this.doctype(i,I,S)},A.prototype.e=function(i,I,S){return this.element(i,I,S)},A.prototype.n=function(i,I,S){return this.node(i,I,S)},A.prototype.t=function(i){return this.text(i)},A.prototype.d=function(i){return this.cdata(i)},A.prototype.c=function(i){return this.comment(i)},A.prototype.r=function(i){return this.raw(i)},A.prototype.i=function(i,I){return this.instruction(i,I)},A.prototype.att=function(){return this.currentNode&&this.currentNode.type===t.DocType?this.attList.apply(this,arguments):this.attribute.apply(this,arguments)},A.prototype.a=function(){return this.currentNode&&this.currentNode.type===t.DocType?this.attList.apply(this,arguments):this.attribute.apply(this,arguments)},A.prototype.ent=function(i,I){return this.entity(i,I)},A.prototype.pent=function(i,I){return this.pEntity(i,I)},A.prototype.not=function(i,I){return this.notation(i,I)},A}()}.call(R)),ye.exports}var ge={exports:{}},Fn;function Yi(){return Fn||(Fn=1,function(){var t,r,h,a=function(n,e){for(var o in e)l.call(e,o)&&(n[o]=e[o]);function c(){this.constructor=n}return c.prototype=e.prototype,n.prototype=new c,n.__super__=e.prototype,n},l={}.hasOwnProperty;t=$(),h=fr(),r=jt(),ge.exports=function(n){a(e,n);function e(o,c){this.stream=o,e.__super__.constructor.call(this,c)}return e.prototype.endline=function(o,c,E){return o.isLastRootNode&&c.state===r.CloseTag?"":e.__super__.endline.call(this,o,c,E)},e.prototype.document=function(o,c){var E,y,T,p,d,g,x,D,O;for(x=o.children,y=T=0,d=x.length;T<d;y=++T)E=x[y],E.isLastRootNode=y===o.children.length-1;for(c=this.filterOptions(c),D=o.children,O=[],p=0,g=D.length;p<g;p++)E=D[p],O.push(this.writeChildNode(E,c,0));return O},e.prototype.attribute=function(o,c,E){return this.stream.write(e.__super__.attribute.call(this,o,c,E))},e.prototype.cdata=function(o,c,E){return this.stream.write(e.__super__.cdata.call(this,o,c,E))},e.prototype.comment=function(o,c,E){return this.stream.write(e.__super__.comment.call(this,o,c,E))},e.prototype.declaration=function(o,c,E){return this.stream.write(e.__super__.declaration.call(this,o,c,E))},e.prototype.docType=function(o,c,E){var y,T,p,d;if(E||(E=0),this.openNode(o,c,E),c.state=r.OpenTag,this.stream.write(this.indent(o,c,E)),this.stream.write("<!DOCTYPE "+o.root().name),o.pubID&&o.sysID?this.stream.write(' PUBLIC "'+o.pubID+'" "'+o.sysID+'"'):o.sysID&&this.stream.write(' SYSTEM "'+o.sysID+'"'),o.children.length>0){for(this.stream.write(" ["),this.stream.write(this.endline(o,c,E)),c.state=r.InsideTag,d=o.children,T=0,p=d.length;T<p;T++)y=d[T],this.writeChildNode(y,c,E+1);c.state=r.CloseTag,this.stream.write("]")}return c.state=r.CloseTag,this.stream.write(c.spaceBeforeSlash+">"),this.stream.write(this.endline(o,c,E)),c.state=r.None,this.closeNode(o,c,E)},e.prototype.element=function(o,c,E){var y,T,p,d,g,x,D,O,b;E||(E=0),this.openNode(o,c,E),c.state=r.OpenTag,this.stream.write(this.indent(o,c,E)+"<"+o.name),O=o.attribs;for(D in O)l.call(O,D)&&(y=O[D],this.attribute(y,c,E));if(p=o.children.length,d=p===0?null:o.children[0],p===0||o.children.every(function(s){return(s.type===t.Text||s.type===t.Raw)&&s.value===""}))c.allowEmpty?(this.stream.write(">"),c.state=r.CloseTag,this.stream.write("</"+o.name+">")):(c.state=r.CloseTag,this.stream.write(c.spaceBeforeSlash+"/>"));else if(c.pretty&&p===1&&(d.type===t.Text||d.type===t.Raw)&&d.value!=null)this.stream.write(">"),c.state=r.InsideTag,c.suppressPrettyCount++,this.writeChildNode(d,c,E+1),c.suppressPrettyCount--,c.state=r.CloseTag,this.stream.write("</"+o.name+">");else{for(this.stream.write(">"+this.endline(o,c,E)),c.state=r.InsideTag,b=o.children,g=0,x=b.length;g<x;g++)T=b[g],this.writeChildNode(T,c,E+1);c.state=r.CloseTag,this.stream.write(this.indent(o,c,E)+"</"+o.name+">")}return this.stream.write(this.endline(o,c,E)),c.state=r.None,this.closeNode(o,c,E)},e.prototype.processingInstruction=function(o,c,E){return this.stream.write(e.__super__.processingInstruction.call(this,o,c,E))},e.prototype.raw=function(o,c,E){return this.stream.write(e.__super__.raw.call(this,o,c,E))},e.prototype.text=function(o,c,E){return this.stream.write(e.__super__.text.call(this,o,c,E))},e.prototype.dtdAttList=function(o,c,E){return this.stream.write(e.__super__.dtdAttList.call(this,o,c,E))},e.prototype.dtdElement=function(o,c,E){return this.stream.write(e.__super__.dtdElement.call(this,o,c,E))},e.prototype.dtdEntity=function(o,c,E){return this.stream.write(e.__super__.dtdEntity.call(this,o,c,E))},e.prototype.dtdNotation=function(o,c,E){return this.stream.write(e.__super__.dtdNotation.call(this,o,c,E))},e}(h)}.call(R)),ge.exports}var Xn;function Qi(){return Xn||(Xn=1,function(){var t,r,h,a,l,n,e,o,c,E;E=ft(),o=E.assign,c=E.isFunction,h=ur(),a=pr(),l=zi(),e=ke(),n=Yi(),t=$(),r=jt(),lt.create=function(y,T,p,d){var g,x;if(y==null)throw new Error("Root element needs a name.");return d=o({},T,p,d),g=new a(d),x=g.element(y),d.headless||(g.declaration(d),(d.pubID!=null||d.sysID!=null)&&g.dtd(d)),x},lt.begin=function(y,T,p){var d;return c(y)&&(d=[y,T],T=d[0],p=d[1],y={}),T?new l(y,T,p):new a(y)},lt.stringWriter=function(y){return new e(y)},lt.streamWriter=function(y,T){return new n(y,T)},lt.implementation=new h,lt.nodeType=t,lt.writerState=r}.call(R)),lt}var Bn;function $i(){return Bn||(Bn=1,function(){var t,r,h,a,l,n={}.hasOwnProperty;t=Qi(),r=Oe().defaults,a=function(e){return typeof e=="string"&&(e.indexOf("&")>=0||e.indexOf(">")>=0||e.indexOf("<")>=0)},l=function(e){return"<![CDATA["+h(e)+"]]>"},h=function(e){return e.replace("]]>","]]]]><![CDATA[>")},qt.Builder=function(){function e(o){var c,E,y;this.options={},E=r["0.2"];for(c in E)n.call(E,c)&&(y=E[c],this.options[c]=y);for(c in o)n.call(o,c)&&(y=o[c],this.options[c]=y)}return e.prototype.buildObject=function(o){var c,E,y,T,p;return c=this.options.attrkey,E=this.options.charkey,Object.keys(o).length===1&&this.options.rootName===r["0.2"].rootName?(p=Object.keys(o)[0],o=o[p]):p=this.options.rootName,y=function(d){return function(g,x){var D,O,b,s,m,N;if(typeof x!="object")d.options.cdata&&a(x)?g.raw(l(x)):g.txt(x);else if(Array.isArray(x)){for(s in x)if(n.call(x,s)){O=x[s];for(m in O)b=O[m],g=y(g.ele(m),b).up()}}else for(m in x)if(n.call(x,m))if(O=x[m],m===c){if(typeof O=="object")for(D in O)N=O[D],g=g.att(D,N)}else if(m===E)d.options.cdata&&a(O)?g=g.raw(l(O)):g=g.txt(O);else if(Array.isArray(O))for(s in O)n.call(O,s)&&(b=O[s],typeof b=="string"?d.options.cdata&&a(b)?g=g.ele(m).raw(l(b)).up():g=g.ele(m,b).up():g=y(g.ele(m),b).up());else typeof O=="object"?g=y(g.ele(m),O).up():typeof O=="string"&&d.options.cdata&&a(O)?g=g.ele(m).raw(l(O)).up():(O==null&&(O=""),g=g.ele(m,O.toString()).up());return g}}(this),T=t.create(p,this.options.xmldec,this.options.doctype,{headless:this.options.headless,allowSurrogateChars:this.options.allowSurrogateChars}),y(T,o).end(this.options.renderOpts)},e}()}.call(R)),qt}var Te={},Ee={},qn;function Ki(){return qn||(qn=1,function(t){(function(r){r.parser=function(f,u){return new a(f,u)},r.SAXParser=a,r.SAXStream=y,r.createStream=E,r.MAX_BUFFER_LENGTH=64*1024;var h=["comment","sgmlDecl","textNode","tagName","doctype","procInstName","procInstBody","entity","attribName","attribValue","cdata","script"];r.EVENTS=["text","processinginstruction","sgmldeclaration","doctype","comment","opentagstart","attribute","opentag","closetag","opencdata","cdata","closecdata","error","end","ready","script","opennamespace","closenamespace"];function a(f,u){if(!(this instanceof a))return new a(f,u);var C=this;n(C),C.q=C.c="",C.bufferCheckPosition=r.MAX_BUFFER_LENGTH,C.opt=u||{},C.opt.lowercase=C.opt.lowercase||C.opt.lowercasetags,C.looseCase=C.opt.lowercase?"toLowerCase":"toUpperCase",C.tags=[],C.closed=C.closedRoot=C.sawRoot=!1,C.tag=C.error=null,C.strict=!!f,C.noscript=!!(f||C.opt.noscript),C.state=i.BEGIN,C.strictEntities=C.opt.strictEntities,C.ENTITIES=C.strictEntities?Object.create(r.XML_ENTITIES):Object.create(r.ENTITIES),C.attribList=[],C.opt.xmlns&&(C.ns=Object.create(x)),C.trackPosition=C.opt.position!==!1,C.trackPosition&&(C.position=C.line=C.column=0),S(C,"onready")}Object.create||(Object.create=function(f){function u(){}u.prototype=f;var C=new u;return C}),Object.keys||(Object.keys=function(f){var u=[];for(var C in f)f.hasOwnProperty(C)&&u.push(C);return u});function l(f){for(var u=Math.max(r.MAX_BUFFER_LENGTH,10),C=0,v=0,G=h.length;v<G;v++){var z=f[h[v]].length;if(z>u)switch(h[v]){case"textNode":F(f);break;case"cdata":M(f,"oncdata",f.cdata),f.cdata="";break;case"script":M(f,"onscript",f.script),f.script="";break;default:H(f,"Max buffer length exceeded: "+h[v])}C=Math.max(C,z)}var Q=r.MAX_BUFFER_LENGTH-C;f.bufferCheckPosition=Q+f.position}function n(f){for(var u=0,C=h.length;u<C;u++)f[h[u]]=""}function e(f){F(f),f.cdata!==""&&(M(f,"oncdata",f.cdata),f.cdata=""),f.script!==""&&(M(f,"onscript",f.script),f.script="")}a.prototype={end:function(){q(this)},write:dt,resume:function(){return this.error=null,this},close:function(){return this.write(null)},flush:function(){e(this)}};var o;try{o=br.Stream}catch{o=function(){}}var c=r.EVENTS.filter(function(f){return f!=="error"&&f!=="end"});function E(f,u){return new y(f,u)}function y(f,u){if(!(this instanceof y))return new y(f,u);o.apply(this),this._parser=new a(f,u),this.writable=!0,this.readable=!0;var C=this;this._parser.onend=function(){C.emit("end")},this._parser.onerror=function(v){C.emit("error",v),C._parser.error=null},this._decoder=null,c.forEach(function(v){Object.defineProperty(C,"on"+v,{get:function(){return C._parser["on"+v]},set:function(G){if(!G)return C.removeAllListeners(v),C._parser["on"+v]=G,G;C.on(v,G)},enumerable:!0,configurable:!1})})}y.prototype=Object.create(o.prototype,{constructor:{value:y}}),y.prototype.write=function(f){if(typeof Buffer=="function"&&typeof Buffer.isBuffer=="function"&&Buffer.isBuffer(f)){if(!this._decoder){var u=vr().StringDecoder;this._decoder=new u("utf8")}f=this._decoder.write(f)}return this._parser.write(f.toString()),this.emit("data",f),!0},y.prototype.end=function(f){return f&&f.length&&this.write(f),this._parser.end(),!0},y.prototype.on=function(f,u){var C=this;return!C._parser["on"+f]&&c.indexOf(f)!==-1&&(C._parser["on"+f]=function(){var v=arguments.length===1?[arguments[0]]:Array.apply(null,arguments);v.splice(0,0,f),C.emit.apply(C,v)}),o.prototype.on.call(C,f,u)};var T="[CDATA[",p="DOCTYPE",d="http://www.w3.org/XML/1998/namespace",g="http://www.w3.org/2000/xmlns/",x={xml:d,xmlns:g},D=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,O=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/,b=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,s=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/;function m(f){return f===" "||f===`
`||f==="\r"||f==="	"}function N(f){return f==='"'||f==="'"}function L(f){return f===">"||m(f)}function P(f,u){return f.test(u)}function A(f,u){return!P(f,u)}var i=0;r.STATE={BEGIN:i++,BEGIN_WHITESPACE:i++,TEXT:i++,TEXT_ENTITY:i++,OPEN_WAKA:i++,SGML_DECL:i++,SGML_DECL_QUOTED:i++,DOCTYPE:i++,DOCTYPE_QUOTED:i++,DOCTYPE_DTD:i++,DOCTYPE_DTD_QUOTED:i++,COMMENT_STARTING:i++,COMMENT:i++,COMMENT_ENDING:i++,COMMENT_ENDED:i++,CDATA:i++,CDATA_ENDING:i++,CDATA_ENDING_2:i++,PROC_INST:i++,PROC_INST_BODY:i++,PROC_INST_ENDING:i++,OPEN_TAG:i++,OPEN_TAG_SLASH:i++,ATTRIB:i++,ATTRIB_NAME:i++,ATTRIB_NAME_SAW_WHITE:i++,ATTRIB_VALUE:i++,ATTRIB_VALUE_QUOTED:i++,ATTRIB_VALUE_CLOSED:i++,ATTRIB_VALUE_UNQUOTED:i++,ATTRIB_VALUE_ENTITY_Q:i++,ATTRIB_VALUE_ENTITY_U:i++,CLOSE_TAG:i++,CLOSE_TAG_SAW_WHITE:i++,SCRIPT:i++,SCRIPT_ENDING:i++},r.XML_ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'"},r.ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'",AElig:198,Aacute:193,Acirc:194,Agrave:192,Aring:197,Atilde:195,Auml:196,Ccedil:199,ETH:208,Eacute:201,Ecirc:202,Egrave:200,Euml:203,Iacute:205,Icirc:206,Igrave:204,Iuml:207,Ntilde:209,Oacute:211,Ocirc:212,Ograve:210,Oslash:216,Otilde:213,Ouml:214,THORN:222,Uacute:218,Ucirc:219,Ugrave:217,Uuml:220,Yacute:221,aacute:225,acirc:226,aelig:230,agrave:224,aring:229,atilde:227,auml:228,ccedil:231,eacute:233,ecirc:234,egrave:232,eth:240,euml:235,iacute:237,icirc:238,igrave:236,iuml:239,ntilde:241,oacute:243,ocirc:244,ograve:242,oslash:248,otilde:245,ouml:246,szlig:223,thorn:254,uacute:250,ucirc:251,ugrave:249,uuml:252,yacute:253,yuml:255,copy:169,reg:174,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,ordf:170,laquo:171,not:172,shy:173,macr:175,deg:176,plusmn:177,sup1:185,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,times:215,divide:247,OElig:338,oelig:339,Scaron:352,scaron:353,Yuml:376,fnof:402,circ:710,tilde:732,Alpha:913,Beta:914,Gamma:915,Delta:916,Epsilon:917,Zeta:918,Eta:919,Theta:920,Iota:921,Kappa:922,Lambda:923,Mu:924,Nu:925,Xi:926,Omicron:927,Pi:928,Rho:929,Sigma:931,Tau:932,Upsilon:933,Phi:934,Chi:935,Psi:936,Omega:937,alpha:945,beta:946,gamma:947,delta:948,epsilon:949,zeta:950,eta:951,theta:952,iota:953,kappa:954,lambda:955,mu:956,nu:957,xi:958,omicron:959,pi:960,rho:961,sigmaf:962,sigma:963,tau:964,upsilon:965,phi:966,chi:967,psi:968,omega:969,thetasym:977,upsih:978,piv:982,ensp:8194,emsp:8195,thinsp:8201,zwnj:8204,zwj:8205,lrm:8206,rlm:8207,ndash:8211,mdash:8212,lsquo:8216,rsquo:8217,sbquo:8218,ldquo:8220,rdquo:8221,bdquo:8222,dagger:8224,Dagger:8225,bull:8226,hellip:8230,permil:8240,prime:8242,Prime:8243,lsaquo:8249,rsaquo:8250,oline:8254,frasl:8260,euro:8364,image:8465,weierp:8472,real:8476,trade:8482,alefsym:8501,larr:8592,uarr:8593,rarr:8594,darr:8595,harr:8596,crarr:8629,lArr:8656,uArr:8657,rArr:8658,dArr:8659,hArr:8660,forall:8704,part:8706,exist:8707,empty:8709,nabla:8711,isin:8712,notin:8713,ni:8715,prod:8719,sum:8721,minus:8722,lowast:8727,radic:8730,prop:8733,infin:8734,ang:8736,and:8743,or:8744,cap:8745,cup:8746,int:8747,there4:8756,sim:8764,cong:8773,asymp:8776,ne:8800,equiv:8801,le:8804,ge:8805,sub:8834,sup:8835,nsub:8836,sube:8838,supe:8839,oplus:8853,otimes:8855,perp:8869,sdot:8901,lceil:8968,rceil:8969,lfloor:8970,rfloor:8971,lang:9001,rang:9002,loz:9674,spades:9824,clubs:9827,hearts:9829,diams:9830},Object.keys(r.ENTITIES).forEach(function(f){var u=r.ENTITIES[f],C=typeof u=="number"?String.fromCharCode(u):u;r.ENTITIES[f]=C});for(var I in r.STATE)r.STATE[r.STATE[I]]=I;i=r.STATE;function S(f,u,C){f[u]&&f[u](C)}function M(f,u,C){f.textNode&&F(f),S(f,u,C)}function F(f){f.textNode=k(f.opt,f.textNode),f.textNode&&S(f,"ontext",f.textNode),f.textNode=""}function k(f,u){return f.trim&&(u=u.trim()),f.normalize&&(u=u.replace(/\s+/g," ")),u}function H(f,u){return F(f),f.trackPosition&&(u+=`
Line: `+f.line+`
Column: `+f.column+`
Char: `+f.c),u=new Error(u),f.error=u,S(f,"onerror",u),f}function q(f){return f.sawRoot&&!f.closedRoot&&X(f,"Unclosed root tag"),f.state!==i.BEGIN&&f.state!==i.BEGIN_WHITESPACE&&f.state!==i.TEXT&&H(f,"Unexpected end"),F(f),f.c="",f.closed=!0,S(f,"onend"),a.call(f,f.strict,f.opt),f}function X(f,u){if(typeof f!="object"||!(f instanceof a))throw new Error("bad call to strictFail");f.strict&&H(f,u)}function Ft(f){f.strict||(f.tagName=f.tagName[f.looseCase]());var u=f.tags[f.tags.length-1]||f,C=f.tag={name:f.tagName,attributes:{}};f.opt.xmlns&&(C.ns=u.ns),f.attribList.length=0,M(f,"onopentagstart",C)}function pt(f,u){var C=f.indexOf(":"),v=C<0?["",f]:f.split(":"),G=v[0],z=v[1];return u&&f==="xmlns"&&(G="xmlns",z=""),{prefix:G,local:z}}function ot(f){if(f.strict||(f.attribName=f.attribName[f.looseCase]()),f.attribList.indexOf(f.attribName)!==-1||f.tag.attributes.hasOwnProperty(f.attribName)){f.attribName=f.attribValue="";return}if(f.opt.xmlns){var u=pt(f.attribName,!0),C=u.prefix,v=u.local;if(C==="xmlns")if(v==="xml"&&f.attribValue!==d)X(f,"xml: prefix must be bound to "+d+`
Actual: `+f.attribValue);else if(v==="xmlns"&&f.attribValue!==g)X(f,"xmlns: prefix must be bound to "+g+`
Actual: `+f.attribValue);else{var G=f.tag,z=f.tags[f.tags.length-1]||f;G.ns===z.ns&&(G.ns=Object.create(z.ns)),G.ns[v]=f.attribValue}f.attribList.push([f.attribName,f.attribValue])}else f.tag.attributes[f.attribName]=f.attribValue,M(f,"onattribute",{name:f.attribName,value:f.attribValue});f.attribName=f.attribValue=""}function ut(f,u){if(f.opt.xmlns){var C=f.tag,v=pt(f.tagName);C.prefix=v.prefix,C.local=v.local,C.uri=C.ns[v.prefix]||"",C.prefix&&!C.uri&&(X(f,"Unbound namespace prefix: "+JSON.stringify(f.tagName)),C.uri=v.prefix);var G=f.tags[f.tags.length-1]||f;C.ns&&G.ns!==C.ns&&Object.keys(C.ns).forEach(function(Ve){M(f,"onopennamespace",{prefix:Ve,uri:C.ns[Ve]})});for(var z=0,Q=f.attribList.length;z<Q;z++){var tt=f.attribList[z],it=tt[0],yt=tt[1],Z=pt(it,!0),ct=Z.prefix,wr=Z.local,Ue=ct===""?"":C.ns[ct]||"",Xt={name:it,value:yt,prefix:ct,local:wr,uri:Ue};ct&&ct!=="xmlns"&&!Ue&&(X(f,"Unbound namespace prefix: "+JSON.stringify(ct)),Xt.uri=ct),f.tag.attributes[it]=Xt,M(f,"onattribute",Xt)}f.attribList.length=0}f.tag.isSelfClosing=!!u,f.sawRoot=!0,f.tags.push(f.tag),M(f,"onopentag",f.tag),u||(!f.noscript&&f.tagName.toLowerCase()==="script"?f.state=i.SCRIPT:f.state=i.TEXT,f.tag=null,f.tagName=""),f.attribName=f.attribValue="",f.attribList.length=0}function _(f){if(!f.tagName){X(f,"Weird empty close tag."),f.textNode+="</>",f.state=i.TEXT;return}if(f.script){if(f.tagName!=="script"){f.script+="</"+f.tagName+">",f.tagName="",f.state=i.SCRIPT;return}M(f,"onscript",f.script),f.script=""}var u=f.tags.length,C=f.tagName;f.strict||(C=C[f.looseCase]());for(var v=C;u--;){var G=f.tags[u];if(G.name!==v)X(f,"Unexpected close tag");else break}if(u<0){X(f,"Unmatched closing tag: "+f.tagName),f.textNode+="</"+f.tagName+">",f.state=i.TEXT;return}f.tagName=C;for(var z=f.tags.length;z-- >u;){var Q=f.tag=f.tags.pop();f.tagName=f.tag.name,M(f,"onclosetag",f.tagName);var tt={};for(var it in Q.ns)tt[it]=Q.ns[it];var yt=f.tags[f.tags.length-1]||f;f.opt.xmlns&&Q.ns!==yt.ns&&Object.keys(Q.ns).forEach(function(Z){var ct=Q.ns[Z];M(f,"onclosenamespace",{prefix:Z,uri:ct})})}u===0&&(f.closedRoot=!0),f.tagName=f.attribValue=f.attribName="",f.attribList.length=0,f.state=i.TEXT}function B(f){var u=f.entity,C=u.toLowerCase(),v,G="";return f.ENTITIES[u]?f.ENTITIES[u]:f.ENTITIES[C]?f.ENTITIES[C]:(u=C,u.charAt(0)==="#"&&(u.charAt(1)==="x"?(u=u.slice(2),v=parseInt(u,16),G=v.toString(16)):(u=u.slice(1),v=parseInt(u,10),G=v.toString(10))),u=u.replace(/^0+/,""),isNaN(v)||G.toLowerCase()!==u?(X(f,"Invalid character entity"),"&"+f.entity+";"):String.fromCodePoint(v))}function V(f,u){u==="<"?(f.state=i.OPEN_WAKA,f.startTagPosition=f.position):m(u)||(X(f,"Non-whitespace before first tag."),f.textNode=u,f.state=i.TEXT)}function J(f,u){var C="";return u<f.length&&(C=f.charAt(u)),C}function dt(f){var u=this;if(this.error)throw this.error;if(u.closed)return H(u,"Cannot write after close. Assign an onready handler.");if(f===null)return q(u);typeof f=="object"&&(f=f.toString());for(var C=0,v="";v=J(f,C++),u.c=v,!!v;)switch(u.trackPosition&&(u.position++,v===`
`?(u.line++,u.column=0):u.column++),u.state){case i.BEGIN:if(u.state=i.BEGIN_WHITESPACE,v==="\uFEFF")continue;V(u,v);continue;case i.BEGIN_WHITESPACE:V(u,v);continue;case i.TEXT:if(u.sawRoot&&!u.closedRoot){for(var G=C-1;v&&v!=="<"&&v!=="&";)v=J(f,C++),v&&u.trackPosition&&(u.position++,v===`
`?(u.line++,u.column=0):u.column++);u.textNode+=f.substring(G,C-1)}v==="<"&&!(u.sawRoot&&u.closedRoot&&!u.strict)?(u.state=i.OPEN_WAKA,u.startTagPosition=u.position):(!m(v)&&(!u.sawRoot||u.closedRoot)&&X(u,"Text data outside of root node."),v==="&"?u.state=i.TEXT_ENTITY:u.textNode+=v);continue;case i.SCRIPT:v==="<"?u.state=i.SCRIPT_ENDING:u.script+=v;continue;case i.SCRIPT_ENDING:v==="/"?u.state=i.CLOSE_TAG:(u.script+="<"+v,u.state=i.SCRIPT);continue;case i.OPEN_WAKA:if(v==="!")u.state=i.SGML_DECL,u.sgmlDecl="";else if(!m(v))if(P(D,v))u.state=i.OPEN_TAG,u.tagName=v;else if(v==="/")u.state=i.CLOSE_TAG,u.tagName="";else if(v==="?")u.state=i.PROC_INST,u.procInstName=u.procInstBody="";else{if(X(u,"Unencoded <"),u.startTagPosition+1<u.position){var z=u.position-u.startTagPosition;v=new Array(z).join(" ")+v}u.textNode+="<"+v,u.state=i.TEXT}continue;case i.SGML_DECL:(u.sgmlDecl+v).toUpperCase()===T?(M(u,"onopencdata"),u.state=i.CDATA,u.sgmlDecl="",u.cdata=""):u.sgmlDecl+v==="--"?(u.state=i.COMMENT,u.comment="",u.sgmlDecl=""):(u.sgmlDecl+v).toUpperCase()===p?(u.state=i.DOCTYPE,(u.doctype||u.sawRoot)&&X(u,"Inappropriately located doctype declaration"),u.doctype="",u.sgmlDecl=""):v===">"?(M(u,"onsgmldeclaration",u.sgmlDecl),u.sgmlDecl="",u.state=i.TEXT):(N(v)&&(u.state=i.SGML_DECL_QUOTED),u.sgmlDecl+=v);continue;case i.SGML_DECL_QUOTED:v===u.q&&(u.state=i.SGML_DECL,u.q=""),u.sgmlDecl+=v;continue;case i.DOCTYPE:v===">"?(u.state=i.TEXT,M(u,"ondoctype",u.doctype),u.doctype=!0):(u.doctype+=v,v==="["?u.state=i.DOCTYPE_DTD:N(v)&&(u.state=i.DOCTYPE_QUOTED,u.q=v));continue;case i.DOCTYPE_QUOTED:u.doctype+=v,v===u.q&&(u.q="",u.state=i.DOCTYPE);continue;case i.DOCTYPE_DTD:u.doctype+=v,v==="]"?u.state=i.DOCTYPE:N(v)&&(u.state=i.DOCTYPE_DTD_QUOTED,u.q=v);continue;case i.DOCTYPE_DTD_QUOTED:u.doctype+=v,v===u.q&&(u.state=i.DOCTYPE_DTD,u.q="");continue;case i.COMMENT:v==="-"?u.state=i.COMMENT_ENDING:u.comment+=v;continue;case i.COMMENT_ENDING:v==="-"?(u.state=i.COMMENT_ENDED,u.comment=k(u.opt,u.comment),u.comment&&M(u,"oncomment",u.comment),u.comment=""):(u.comment+="-"+v,u.state=i.COMMENT);continue;case i.COMMENT_ENDED:v!==">"?(X(u,"Malformed comment"),u.comment+="--"+v,u.state=i.COMMENT):u.state=i.TEXT;continue;case i.CDATA:v==="]"?u.state=i.CDATA_ENDING:u.cdata+=v;continue;case i.CDATA_ENDING:v==="]"?u.state=i.CDATA_ENDING_2:(u.cdata+="]"+v,u.state=i.CDATA);continue;case i.CDATA_ENDING_2:v===">"?(u.cdata&&M(u,"oncdata",u.cdata),M(u,"onclosecdata"),u.cdata="",u.state=i.TEXT):v==="]"?u.cdata+="]":(u.cdata+="]]"+v,u.state=i.CDATA);continue;case i.PROC_INST:v==="?"?u.state=i.PROC_INST_ENDING:m(v)?u.state=i.PROC_INST_BODY:u.procInstName+=v;continue;case i.PROC_INST_BODY:if(!u.procInstBody&&m(v))continue;v==="?"?u.state=i.PROC_INST_ENDING:u.procInstBody+=v;continue;case i.PROC_INST_ENDING:v===">"?(M(u,"onprocessinginstruction",{name:u.procInstName,body:u.procInstBody}),u.procInstName=u.procInstBody="",u.state=i.TEXT):(u.procInstBody+="?"+v,u.state=i.PROC_INST_BODY);continue;case i.OPEN_TAG:P(O,v)?u.tagName+=v:(Ft(u),v===">"?ut(u):v==="/"?u.state=i.OPEN_TAG_SLASH:(m(v)||X(u,"Invalid character in tag name"),u.state=i.ATTRIB));continue;case i.OPEN_TAG_SLASH:v===">"?(ut(u,!0),_(u)):(X(u,"Forward-slash in opening tag not followed by >"),u.state=i.ATTRIB);continue;case i.ATTRIB:if(m(v))continue;v===">"?ut(u):v==="/"?u.state=i.OPEN_TAG_SLASH:P(D,v)?(u.attribName=v,u.attribValue="",u.state=i.ATTRIB_NAME):X(u,"Invalid attribute name");continue;case i.ATTRIB_NAME:v==="="?u.state=i.ATTRIB_VALUE:v===">"?(X(u,"Attribute without value"),u.attribValue=u.attribName,ot(u),ut(u)):m(v)?u.state=i.ATTRIB_NAME_SAW_WHITE:P(O,v)?u.attribName+=v:X(u,"Invalid attribute name");continue;case i.ATTRIB_NAME_SAW_WHITE:if(v==="=")u.state=i.ATTRIB_VALUE;else{if(m(v))continue;X(u,"Attribute without value"),u.tag.attributes[u.attribName]="",u.attribValue="",M(u,"onattribute",{name:u.attribName,value:""}),u.attribName="",v===">"?ut(u):P(D,v)?(u.attribName=v,u.state=i.ATTRIB_NAME):(X(u,"Invalid attribute name"),u.state=i.ATTRIB)}continue;case i.ATTRIB_VALUE:if(m(v))continue;N(v)?(u.q=v,u.state=i.ATTRIB_VALUE_QUOTED):(X(u,"Unquoted attribute value"),u.state=i.ATTRIB_VALUE_UNQUOTED,u.attribValue=v);continue;case i.ATTRIB_VALUE_QUOTED:if(v!==u.q){v==="&"?u.state=i.ATTRIB_VALUE_ENTITY_Q:u.attribValue+=v;continue}ot(u),u.q="",u.state=i.ATTRIB_VALUE_CLOSED;continue;case i.ATTRIB_VALUE_CLOSED:m(v)?u.state=i.ATTRIB:v===">"?ut(u):v==="/"?u.state=i.OPEN_TAG_SLASH:P(D,v)?(X(u,"No whitespace between attributes"),u.attribName=v,u.attribValue="",u.state=i.ATTRIB_NAME):X(u,"Invalid attribute name");continue;case i.ATTRIB_VALUE_UNQUOTED:if(!L(v)){v==="&"?u.state=i.ATTRIB_VALUE_ENTITY_U:u.attribValue+=v;continue}ot(u),v===">"?ut(u):u.state=i.ATTRIB;continue;case i.CLOSE_TAG:if(u.tagName)v===">"?_(u):P(O,v)?u.tagName+=v:u.script?(u.script+="</"+u.tagName,u.tagName="",u.state=i.SCRIPT):(m(v)||X(u,"Invalid tagname in closing tag"),u.state=i.CLOSE_TAG_SAW_WHITE);else{if(m(v))continue;A(D,v)?u.script?(u.script+="</"+v,u.state=i.SCRIPT):X(u,"Invalid tagname in closing tag."):u.tagName=v}continue;case i.CLOSE_TAG_SAW_WHITE:if(m(v))continue;v===">"?_(u):X(u,"Invalid characters in closing tag");continue;case i.TEXT_ENTITY:case i.ATTRIB_VALUE_ENTITY_Q:case i.ATTRIB_VALUE_ENTITY_U:var Q,tt;switch(u.state){case i.TEXT_ENTITY:Q=i.TEXT,tt="textNode";break;case i.ATTRIB_VALUE_ENTITY_Q:Q=i.ATTRIB_VALUE_QUOTED,tt="attribValue";break;case i.ATTRIB_VALUE_ENTITY_U:Q=i.ATTRIB_VALUE_UNQUOTED,tt="attribValue";break}v===";"?(u[tt]+=B(u),u.entity="",u.state=Q):P(u.entity.length?s:b,v)?u.entity+=v:(X(u,"Invalid character in entity name"),u[tt]+="&"+u.entity+v,u.entity="",u.state=Q);continue;default:throw new Error(u,"Unknown state: "+u.state)}return u.position>=u.bufferCheckPosition&&l(u),u}/*! http://mths.be/fromcodepoint v0.1.0 by @mathias */String.fromCodePoint||function(){var f=String.fromCharCode,u=Math.floor,C=function(){var v=16384,G=[],z,Q,tt=-1,it=arguments.length;if(!it)return"";for(var yt="";++tt<it;){var Z=Number(arguments[tt]);if(!isFinite(Z)||Z<0||Z>1114111||u(Z)!==Z)throw RangeError("Invalid code point: "+Z);Z<=65535?G.push(Z):(Z-=65536,z=(Z>>10)+55296,Q=Z%1024+56320,G.push(z,Q)),(tt+1===it||G.length>v)&&(yt+=f.apply(null,G),G.length=0)}return yt};Object.defineProperty?Object.defineProperty(String,"fromCodePoint",{value:C,configurable:!0,writable:!0}):String.fromCodePoint=C}()})(t)}(Ee)),Ee}var we={},kn;function Ji(){return kn||(kn=1,function(){we.stripBOM=function(t){return t[0]==="\uFEFF"?t.substring(1):t}}.call(R)),we}var gt={},Un;function dr(){return Un||(Un=1,function(){var t;t=new RegExp(/(?!xmlns)^.*:/),gt.normalize=function(r){return r.toLowerCase()},gt.firstCharLowerCase=function(r){return r.charAt(0).toLowerCase()+r.slice(1)},gt.stripPrefix=function(r){return r.replace(t,"")},gt.parseNumbers=function(r){return isNaN(r)||(r=r%1===0?parseInt(r,10):parseFloat(r)),r},gt.parseBooleans=function(r){return/^(?:true|false)$/i.test(r)&&(r=r.toLowerCase()==="true"),r}}.call(R)),gt}var nt={},Vn={},Gn;function Zi(){return Gn||(Gn=1,function(t,r){if(t.setImmediate)return;var h=1,a={},l=!1,n=t.document,e;function o(b){typeof b!="function"&&(b=new Function(""+b));for(var s=new Array(arguments.length-1),m=0;m<s.length;m++)s[m]=arguments[m+1];var N={callback:b,args:s};return a[h]=N,e(h),h++}function c(b){delete a[b]}function E(b){var s=b.callback,m=b.args;switch(m.length){case 0:s();break;case 1:s(m[0]);break;case 2:s(m[0],m[1]);break;case 3:s(m[0],m[1],m[2]);break;default:s.apply(r,m);break}}function y(b){if(l)setTimeout(y,0,b);else{var s=a[b];if(s){l=!0;try{E(s)}finally{c(b),l=!1}}}}function T(){e=function(b){process.nextTick(function(){y(b)})}}function p(){if(t.postMessage&&!t.importScripts){var b=!0,s=t.onmessage;return t.onmessage=function(){b=!1},t.postMessage("","*"),t.onmessage=s,b}}function d(){var b="setImmediate$"+Math.random()+"$",s=function(m){m.source===t&&typeof m.data=="string"&&m.data.indexOf(b)===0&&y(+m.data.slice(b.length))};t.addEventListener?t.addEventListener("message",s,!1):t.attachEvent("onmessage",s),e=function(m){t.postMessage(b+m,"*")}}function g(){var b=new MessageChannel;b.port1.onmessage=function(s){var m=s.data;y(m)},e=function(s){b.port2.postMessage(s)}}function x(){var b=n.documentElement;e=function(s){var m=n.createElement("script");m.onreadystatechange=function(){y(s),m.onreadystatechange=null,b.removeChild(m),m=null},b.appendChild(m)}}function D(){e=function(b){setTimeout(y,0,b)}}var O=Object.getPrototypeOf&&Object.getPrototypeOf(t);O=O&&O.setTimeout?O:t,{}.toString.call(t.process)==="[object process]"?T():p()?d():t.MessageChannel?g():n&&"onreadystatechange"in n.createElement("script")?x():D(),O.setImmediate=o,O.clearImmediate=c}(typeof self>"u"?typeof R>"u"?R:R:self)),Vn}var Wn;function ts(){if(Wn)return nt;Wn=1;var t=typeof R<"u"&&R||typeof self<"u"&&self||window,r=Function.prototype.apply;nt.setTimeout=function(){return new h(r.call(setTimeout,t,arguments),clearTimeout)},nt.setInterval=function(){return new h(r.call(setInterval,t,arguments),clearInterval)},nt.clearTimeout=nt.clearInterval=function(a){a&&a.close()};function h(a,l){this._id=a,this._clearFn=l}return h.prototype.unref=h.prototype.ref=function(){},h.prototype.close=function(){this._clearFn.call(t,this._id)},nt.enroll=function(a,l){clearTimeout(a._idleTimeoutId),a._idleTimeout=l},nt.unenroll=function(a){clearTimeout(a._idleTimeoutId),a._idleTimeout=-1},nt._unrefActive=nt.active=function(a){clearTimeout(a._idleTimeoutId);var l=a._idleTimeout;l>=0&&(a._idleTimeoutId=setTimeout(function(){a._onTimeout&&a._onTimeout()},l))},Zi(),nt.setImmediate=typeof self<"u"&&self.setImmediate||typeof R<"u"&&R.setImmediate||R&&R.setImmediate,nt.clearImmediate=typeof self<"u"&&self.clearImmediate||typeof R<"u"&&R.clearImmediate||R&&R.clearImmediate,nt}var Hn;function es(){return Hn||(Hn=1,function(t){(function(){var r,h,a,l,n,e,o,c,E,y=function(d,g){return function(){return d.apply(g,arguments)}},T=function(d,g){for(var x in g)p.call(g,x)&&(d[x]=g[x]);function D(){this.constructor=d}return D.prototype=g.prototype,d.prototype=new D,d.__super__=g.prototype,d},p={}.hasOwnProperty;c=Ki(),a=Nr,r=Ji(),o=dr(),E=ts().setImmediate,h=Oe().defaults,l=function(d){return typeof d=="object"&&d!=null&&Object.keys(d).length===0},n=function(d){return d!=="__proto__"&&d!=="constructor"&&d!=="prototype"},e=function(d,g,x){var D,O,b;for(D=0,O=d.length;D<O;D++)b=d[D],g=b(g,x);return g},t.Parser=function(d){T(g,d);function g(x){this.parseStringPromise=y(this.parseStringPromise,this),this.parseString=y(this.parseString,this),this.reset=y(this.reset,this),this.assignOrPush=y(this.assignOrPush,this),this.processAsync=y(this.processAsync,this);var D,O,b;if(!(this instanceof t.Parser))return new t.Parser(x);this.options={},O=h["0.2"];for(D in O)p.call(O,D)&&(b=O[D],this.options[D]=b);for(D in x)p.call(x,D)&&(b=x[D],this.options[D]=b);this.options.xmlns&&(this.options.xmlnskey=this.options.attrkey+"ns"),this.options.normalizeTags&&(this.options.tagNameProcessors||(this.options.tagNameProcessors=[]),this.options.tagNameProcessors.unshift(o.normalize)),this.reset()}return g.prototype.processAsync=function(){var x,D;try{return this.remaining.length<=this.options.chunkSize?(x=this.remaining,this.remaining="",this.saxParser=this.saxParser.write(x),this.saxParser.close()):(x=this.remaining.substr(0,this.options.chunkSize),this.remaining=this.remaining.substr(this.options.chunkSize,this.remaining.length),this.saxParser=this.saxParser.write(x),E(this.processAsync))}catch(O){if(D=O,!this.saxParser.errThrown)return this.saxParser.errThrown=!0,this.emit(D)}},g.prototype.assignOrPush=function(x,D,O){if(n(D))return D in x?(x[D]instanceof Array||(x[D]=[x[D]]),x[D].push(O)):this.options.explicitArray?x[D]=[O]:x[D]=O},g.prototype.reset=function(){var x,D,O,b;return this.removeAllListeners(),this.saxParser=c.parser(this.options.strict,{trim:!1,normalize:!1,xmlns:this.options.xmlns}),this.saxParser.errThrown=!1,this.saxParser.onerror=function(s){return function(m){if(s.saxParser.resume(),!s.saxParser.errThrown)return s.saxParser.errThrown=!0,s.emit("error",m)}}(this),this.saxParser.onend=function(s){return function(){if(!s.saxParser.ended)return s.saxParser.ended=!0,s.emit("end",s.resultObject)}}(this),this.saxParser.ended=!1,this.EXPLICIT_CHARKEY=this.options.explicitCharkey,this.resultObject=null,b=[],x=this.options.attrkey,D=this.options.charkey,this.saxParser.onopentag=function(s){return function(m){var N,L,P,A,i;if(P={},P[D]="",!s.options.ignoreAttrs){i=m.attributes;for(N in i)p.call(i,N)&&(!(x in P)&&!s.options.mergeAttrs&&(P[x]={}),L=s.options.attrValueProcessors?e(s.options.attrValueProcessors,m.attributes[N],N):m.attributes[N],A=s.options.attrNameProcessors?e(s.options.attrNameProcessors,N):N,n(A)&&(s.options.mergeAttrs?s.assignOrPush(P,A,L):P[x][A]=L))}return P["#name"]=s.options.tagNameProcessors?e(s.options.tagNameProcessors,m.name):m.name,s.options.xmlns&&(P[s.options.xmlnskey]={uri:m.uri,local:m.local}),b.push(P)}}(this),this.saxParser.onclosetag=function(s){return function(){var m,N,L,P,A,i,I,S,M,F;if(i=b.pop(),A=i["#name"],(!s.options.explicitChildren||!s.options.preserveChildrenOrder)&&delete i["#name"],i.cdata===!0&&(m=i.cdata,delete i.cdata),M=b[b.length-1],i[D].match(/^\s*$/)&&!m?(N=i[D],delete i[D]):(s.options.trim&&(i[D]=i[D].trim()),s.options.normalize&&(i[D]=i[D].replace(/\s{2,}/g," ").trim()),i[D]=s.options.valueProcessors?e(s.options.valueProcessors,i[D],A):i[D],Object.keys(i).length===1&&D in i&&!s.EXPLICIT_CHARKEY&&(i=i[D])),l(i)&&(typeof s.options.emptyTag=="function"?i=s.options.emptyTag():i=s.options.emptyTag!==""?s.options.emptyTag:N),s.options.validator!=null&&(F="/"+function(){var k,H,q;for(q=[],k=0,H=b.length;k<H;k++)P=b[k],q.push(P["#name"]);return q}().concat(A).join("/"),function(){var k;try{return i=s.options.validator(F,M&&M[A],i)}catch(H){return k=H,s.emit("error",k)}}()),s.options.explicitChildren&&!s.options.mergeAttrs&&typeof i=="object"){if(!s.options.preserveChildrenOrder)P={},s.options.attrkey in i&&(P[s.options.attrkey]=i[s.options.attrkey],delete i[s.options.attrkey]),!s.options.charsAsChildren&&s.options.charkey in i&&(P[s.options.charkey]=i[s.options.charkey],delete i[s.options.charkey]),Object.getOwnPropertyNames(i).length>0&&(P[s.options.childkey]=i),i=P;else if(M){M[s.options.childkey]=M[s.options.childkey]||[],I={};for(L in i)p.call(i,L)&&n(L)&&(I[L]=i[L]);M[s.options.childkey].push(I),delete i["#name"],Object.keys(i).length===1&&D in i&&!s.EXPLICIT_CHARKEY&&(i=i[D])}}return b.length>0?s.assignOrPush(M,A,i):(s.options.explicitRoot&&(S=i,i={},i[A]=S),s.resultObject=i,s.saxParser.ended=!0,s.emit("end",s.resultObject))}}(this),O=function(s){return function(m){var N,L;if(L=b[b.length-1],L)return L[D]+=m,s.options.explicitChildren&&s.options.preserveChildrenOrder&&s.options.charsAsChildren&&(s.options.includeWhiteChars||m.replace(/\\n/g,"").trim()!=="")&&(L[s.options.childkey]=L[s.options.childkey]||[],N={"#name":"__text__"},N[D]=m,s.options.normalize&&(N[D]=N[D].replace(/\s{2,}/g," ").trim()),L[s.options.childkey].push(N)),L}}(this),this.saxParser.ontext=O,this.saxParser.oncdata=function(s){return function(m){var N;if(N=O(m),N)return N.cdata=!0}}()},g.prototype.parseString=function(x,D){var O;D!=null&&typeof D=="function"&&(this.on("end",function(b){return this.reset(),D(null,b)}),this.on("error",function(b){return this.reset(),D(b)}));try{return x=x.toString(),x.trim()===""?(this.emit("end",null),!0):(x=r.stripBOM(x),this.options.async?(this.remaining=x,E(this.processAsync),this.saxParser):this.saxParser.write(x).close())}catch(b){if(O=b,this.saxParser.errThrown||this.saxParser.ended){if(this.saxParser.ended)throw O}else return this.emit("error",O),this.saxParser.errThrown=!0}},g.prototype.parseStringPromise=function(x){return new Promise(function(D){return function(O,b){return D.parseString(x,function(s,m){return s?b(s):O(m)})}}(this))},g}(a),t.parseString=function(d,g,x){var D,O,b;return x!=null?(typeof x=="function"&&(D=x),typeof g=="object"&&(O=g)):(typeof g=="function"&&(D=g),O={}),b=new t.Parser(O),b.parseString(d,D)},t.parseStringPromise=function(d,g){var x,D;return typeof g=="object"&&(x=g),D=new t.Parser(x),D.parseStringPromise(d)}}).call(R)}(Te)),Te}var mr,yr;(function(){var t,r,h,a=function(n,e){for(var o in e)l.call(e,o)&&(n[o]=e[o]);function c(){this.constructor=n}return c.prototype=e.prototype,n.prototype=new c,n.__super__=e.prototype,n},l={}.hasOwnProperty;r=Oe(),t=$i(),h=es(),dr(),r.defaults,function(n){a(e,n);function e(o){this.message=o}return e}(Error),yr=t.Builder,h.Parser,mr=h.parseString,h.parseStringPromise}).call(R);const gr=-1,Tr=t=>t.charAt(0).toUpperCase()+t.slice(1),At=()=>{const t=localStorage.getItem("MissionEditingAssessmentSA");return t?JSON.parse(t):null},ns=()=>{const t=localStorage.getItem("MissionEditingOverviewSA");return t?JSON.parse(t):null},Ne=t=>{localStorage.setItem("MissionEditingAssessmentSA",JSON.stringify(t))},Nt=t=>{localStorage.setItem("MissionEditingOverviewSA",JSON.stringify(t))},rs=t=>{const r=ss(t);return[is(t,r[1]),r[0]]},is=(t,r)=>{const h=t.CONTENT.TASK[0],a=h.$;return{type:Tr(a.kind),isManuallyGraded:!0,closeAt:a.duedate,coverImage:a.coverimage,id:gr,maxXp:r,number:a.number||"",openAt:a.startdate,title:a.title,reading:h.READING?h.READING[0]:"",shortSummary:h.WEBSUMMARY?h.WEBSUMMARY[0]:"",status:Qn.attempting,story:a.story,xp:0,gradingStatus:"none"}},ss=t=>{const r=t.CONTENT.TASK[0],h=r.$,a=as(r);return[{type:Tr(h.kind),id:gr,globalDeployment:St(r.DEPLOYMENT),graderDeployment:St(r.GRADERDEPLOYMENT),longSummary:r.TEXT[0],missionPDF:"google.com",questions:a[0],title:h.title},a[1]]},os=t=>Function('"use strict";return ('+t+")")(),St=t=>{if(t===void 0)return $n();{const r=t[0],h=r.IMPORT||r.EXTERNAL,a=h?h[0].$.name:"NONE",l=h?h[0].SYMBOL||[]:[],n=r.GLOBAL?r.GLOBAL.map(e=>[e.IDENTIFIER[0],os(e.VALUE[0]),e.VALUE[0]]):[];return{chapter:parseInt(r.$.interpreter,10),external:{name:a,symbols:l},globals:n}}},as=t=>{let r=0;const h=[];return t.PROBLEMS[0].PROBLEM.forEach((a,l)=>{const n=a.$.maxxp?parseInt(a.$.maxxp,10):0,e={answer:null,content:a.TEXT[0],id:l,library:St(a.DEPLOYMENT),graderLibrary:St(a.GRADERDEPLOYMENT),type:a.$.type,xp:0,maxXp:n};r+=n,e.type==="programming"&&h.push(cs(a,e)),e.type==="mcq"&&h.push(us(a,e))}),[h,r]},us=(t,r)=>{const h=[],a=t.SNIPPET?t.SNIPPET[0].SOLUTION:void 0;let l=0;return t.CHOICE.forEach((n,e)=>{h.push({content:n.TEXT[0],hint:null}),l=n.$.correct==="true"?e:l}),{...r,type:"mcq",answer:a?parseInt(a[0],10):0,choices:h,solution:l}},cs=(t,r)=>{const h=t.SNIPPET[0].TESTCASES,a=h?h[0].PUBLIC||[]:[],l=h?h[0].PRIVATE||[]:[],n=t.SNIPPET[0].PREPEND,e=t.SNIPPET[0].POSTPEND,o=t.SNIPPET[0].SOLUTION,c={...r,autogradingResults:[],prepend:n?n[0].trim():"",solutionTemplate:t.SNIPPET[0].TEMPLATE[0].trim(),postpend:e?e[0].trim():"",testcases:a.map(E=>zn(E)),testcasesPrivate:l.map(E=>zn(E)),answer:o?o[0].trim():"",type:"programming"};return t.SNIPPET[0].GRADER&&(c.graderTemplate=t.SNIPPET[0].GRADER[0]),c},zn=t=>({type:xr.public,answer:t.$.answer,score:parseInt(t.$.score,10),program:t._}),ls=()=>{const t=localStorage.getItem("MissionEditingAssessmentSA"),r=localStorage.getItem("MissionEditingOverviewSA");if(t&&r){const h=JSON.parse(t),a=JSON.parse(r),l=a.fileName||a.title,n=new yr,e=fs(h,a),o={CONTENT:{$:{"xmlns:xsi":"http://www.w3.org/2001/XMLSchema-instance"},TASK:e}};let c=n.buildObject(o);c=c.replace(/(&#xD;)+/g,""),hs(l+".xml",c)}},hs=(t,r)=>{const h=document.createElement("a");h.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(r)),h.setAttribute("download",t),h.style.display="none",document.body.appendChild(h),h.click(),document.body.removeChild(h)},It=t=>{const r={$:{interpreter:t.chapter.toString()},EXTERNAL:{$:{name:t.external.name}}};return t.external.symbols.length!==0&&(r.EXTERNAL.SYMBOL=t.external.symbols),t.globals.length!==0&&(r.GLOBAL=t.globals.map(h=>({IDENTIFIER:h[0],VALUE:h[2]}))),r},fs=(t,r)=>{const h={},a={coverimage:r.coverImage,duedate:r.closeAt,kind:r.type.toLowerCase(),number:r.number||"",startdate:r.openAt,story:r.story,title:r.title};return h.$=a,r.reading&&r.reading!==""&&(h.READING=r.reading),h.WEBSUMMARY=r.shortSummary,h.TEXT=t.longSummary,h.PROBLEMS={PROBLEM:[]},h.DEPLOYMENT=It(t.globalDeployment),t.graderDeployment.chapter!==-1&&(h.GRADERDEPLOYMENT=It(t.graderDeployment)),t.questions.forEach(l=>{const n={$:{type:l.type},SNIPPET:{SOLUTION:l.answer},TEXT:l.content,CHOICE:[]};if(l.library.chapter!==-1&&(n.$.DEPLOYMENT=It(l.library)),l.graderLibrary.chapter!==-1&&(n.$.GRADERDEPLOYMENT=It(l.graderLibrary)),l.maxXp&&(n.$.maxxp=l.maxXp),l.type==="programming"){l.graderTemplate&&(n.SNIPPET.GRADER=l.graderTemplate);const e={...n.SNIPPET,TEMPLATE:l.solutionTemplate,PREPEND:l.prepend,POSTPEND:l.postpend,TESTCASES:""};if(l.testcases.length||l.testcasesPrivate.length){if(e.TESTCASES={},l.testcases.length){const o=l.testcases.map(c=>({$:{answer:c.answer,score:c.score},_:c.program}));e.TESTCASES.PUBLIC=o}if(l.testcasesPrivate&&l.testcasesPrivate.length){const o=l.testcasesPrivate.map(c=>({$:{answer:c.answer,score:c.score},_:c.program}));e.TESTCASES.PRIVATE=o}}n.SNIPPET=e}l.type==="mcq"&&l.choices.forEach((e,o)=>{n.CHOICE.push({$:{correct:l.solution===o?"true":"false"},TEXT:e.content})}),h.PROBLEMS.PROBLEM.push(n)}),h},ps=t=>{const[r,h]=U.useState(""),[a,l]=U.useState(""),[n,e]=U.useState(!1),o=s=>m=>{const N={...t.overview,[s]:a};h(""),l(""),Nt(N),t.updateEditingOverview(N)},c=s=>{l(s.target.value)},E=s=>m=>{r!==s&&(h(s),l(t.overview[s]))},y=()=>{e(!n)},T=s=>{ls()},p=s=>w.jsx(ar,{autoFocus:!0,className:"editing-textarea",onChange:c,onBlur:o(s),value:a}),d=s=>w.jsx("div",{children:w.jsxs(_t,{className:"row listing",elevation:Kn.ONE,children:[w.jsx("div",{className:"col-xs-3 listing-picture",onClick:E("coverImage"),children:r==="coverImage"?p("coverImage"):w.jsx("img",{alt:"Assessment cover",className:`cover-image-${s.status}`,src:s.coverImage?s.coverImage:pi})}),w.jsxs("div",{className:"col-xs-9 listing-text",children:[g(s,s.title),w.jsx("div",{className:"row listing-xp",children:w.jsxs(Ct,{children:[" ",`Max XP: ${s.maxXp}`," "]})}),w.jsx("div",{className:"row listing-description",onClick:E("shortSummary"),children:r==="shortSummary"?p("shortSummary"):w.jsx(vt,{content:wt(s.shortSummary)})}),w.jsxs("div",{className:"listing-controls",children:[w.jsxs(Ge,{className:"listing-due-date",children:[w.jsx(Dr,{className:"listing-due-icon",iconSize:12,icon:j.TIME}),w.jsx("div",{className:"date-container",children:"Opens at:"}),w.jsx("div",{className:"date-container",onClick:E("openAt"),children:r==="openAt"?p("openAt"):`${Je(s.openAt)}`}),w.jsx("div",{className:"date-container",children:"Due:"}),w.jsx("div",{className:"date-container",onClick:E("closeAt"),children:r==="closeAt"?p("closeAt"):`${Je(s.closeAt)}`})]}),w.jsx(Et,{icon:j.WRENCH,minimal:!0,onClick:y,children:"Other Options"}),w.jsx(Ir,{to:`${t.listingPath}/${s.id.toString()}/${Jn.defaultQuestionId}`,children:w.jsx(W,{label:"Edit mission",icon:j.EDIT})})]})]})]})}),g=(s,m)=>w.jsxs("div",{className:"row listing-title",children:[w.jsx(Ge,{ellipsize:!0,className:"col-xs-10",children:w.jsx(Or,{onClick:E("title"),children:r==="title"?p("title"):wt(m)})}),w.jsx("div",{className:"col-xs-2",children:x()})]}),x=s=>w.jsx(Et,{icon:j.EXPORT,intent:xe.DANGER,minimal:!0,onClick:T,children:"Save as XML"}),D=(s,m)=>{const N={...t.overview,category:s};Nt(N),t.updateEditingOverview(N)},O=()=>w.jsx(De,{canOutsideClickClose:!1,className:"assessment-reset",icon:j.WRENCH,isCloseButtonShown:!0,isOpen:n,onClose:y,title:"Other options",children:w.jsxs("div",{className:Ie,children:[w.jsx(Dt,{children:"Assessment Type"}),b(t.overview.type,D),w.jsx(Dt,{children:"Number"}),w.jsx("div",{onClick:E("number"),children:r==="number"?p("number"):wt(t.overview.number||"")}),w.jsx(Dt,{children:"Story"}),w.jsx("div",{onClick:E("story"),children:r==="story"?p("story"):wt(t.overview.story||"")}),w.jsx("br",{}),w.jsx(Dt,{children:"Filename"}),w.jsx("div",{onClick:E("fileName"),children:r==="fileName"?p("fileName"):wt(t.overview.fileName||"")})]})}),b=(s,m=(N,L)=>{})=>w.jsx(ds,{className:mt,items:t.assessmentTypes,onItemSelect:m,itemRenderer:ms,filterable:!1,children:w.jsx(Et,{className:mt,text:s,rightIcon:j.DOUBLE_CARET_VERTICAL})});return w.jsxs("div",{children:[O(),d(t.overview)]})},wt=t=>t.match(`^(
| )*$`)?"Enter Value Here (If Applicable)":t,ds=Pt.ofType(),ms=(t,{handleClick:r,modifiers:h,query:a})=>w.jsx(Mt,{active:!1,onClick:r,text:t},t),ys=({toggleEditMode:t,editingMode:r})=>{const h=r==="question"?"Global":"Question Specific";return w.jsx(Cr,{content:"Switch to "+h+" Editing Mode",children:w.jsx(W,{label:h+" Editing Mode",icon:j.REFRESH,onClick:t})})},K=(t,r)=>{for(const h of t)r=r[h];return r},xt=(t,r,h)=>{let a=0;for(a=0;a<t.length-1;a++)h=h[t[a]];h[t[a]]=r},Er=(t=0,r=null)=>h=>{h=typeof h=="string"?parseInt(h,10):h;let a;return t!==null&&h<t?a=t:r!==null&&h>r?a=r:a=h,a},at=t=>{const r=t.isNumber||!1,[h,a]=U.useState(!1),[l]=U.useState(r),[n,e]=U.useState(""),[o]=U.useState(t.useRawValue||r),c=d=>{let g;l?(g=parseInt(n,10),isNaN(g)&&(g=K(t.path,t.assessment))):g=n;const x=K(t.path,t.assessment);if(t.processResults&&(g=t.processResults(g)),g!==x){const D=t.assessment;xt(t.path,g,D),t.updateAssessment(D)}a(!1)},E=d=>{e(d.target.value)},y=()=>w.jsx(ar,{autoFocus:!0,className:"editing-textarea",onChange:E,onBlur:c,value:n}),T=()=>d=>{if(!h){const g=K(t.path,t.assessment)||"";a(!0),e(typeof g=="string"?g:g.toString())}};let p;if(h)p=y();else{const d="Please enter value (if applicable)";let g=K(t.path,t.assessment);t.isNumber||(g=g||"",g=g.match(/^\s*$/)?d:g),o?p=g:p=w.jsx(vt,{content:g})}return w.jsx("div",{onClick:T(),children:p})},gs=t=>{const r=E=>()=>{E.push(Ar()),t.updateAssessment(t.assessment)},h=(E,y)=>{E.splice(y,1),t.updateAssessment(t.assessment)},a=(E,y)=>{const T=K(E,t.assessment),p=T[y];return w.jsx("div",{children:w.jsx(_t,{className:"row listing",elevation:Kn.ONE,children:w.jsxs("div",{className:"col-xs-9 listing-text",children:[w.jsx("div",{className:"row listing-program",children:w.jsxs(Ct,{children:["Test Program:",w.jsx(at,{assessment:t.assessment,path:E.concat([y,"program"]),useRawValue:!0,updateAssessment:t.updateAssessment})]})}),w.jsx("div",{className:"row listing-expected",children:w.jsxs(Ct,{children:["Score:",w.jsx(at,{assessment:t.assessment,isNumber:!0,path:E.concat([y,"score"]),updateAssessment:t.updateAssessment})]})}),w.jsx("div",{className:"row listing-expected",children:w.jsxs(Ct,{children:["Expected Answer:",w.jsx(at,{assessment:t.assessment,path:E.concat([y,"answer"]),useRawValue:!0,updateAssessment:t.updateAssessment})]})}),w.jsx("div",{className:"listing-controls",children:w.jsxs("div",{children:[w.jsx(W,{label:"Test",icon:j.PLAY,onClick:()=>t.handleTestcaseEval(p)}),w.jsx(W,{label:"Delete",icon:j.DELETE,onClick:()=>h(T,y)})]})})]})})})},l=t.assessment.questions[t.questionId],n=["questions",t.questionId,"testcases"],e=l.testcases.map((E,y)=>w.jsx("div",{children:a(n,y)},y)),o=["questions",t.questionId,"testcasesPrivate"],c=l.testcasesPrivate.map((E,y)=>w.jsx("div",{children:a(o,y)},y));return w.jsxs("div",{children:["Public Testcases",e,w.jsx(W,{label:"New public testcase",icon:j.PLUS,onClick:r(l.testcases)}),w.jsx("br",{}),w.jsx("br",{}),"Private Testcases",c,w.jsx(W,{label:"New private testcase",icon:j.PLUS,onClick:r(l.testcasesPrivate)})]})},Ot=t=>{const r=()=>{const d=t.pathToLibrary,g=K(d,t.assessment),x=g.external.symbols.map((m,N)=>w.jsxs("tr",{children:[w.jsx("td",{children:h(d.concat(["external","symbols",N]))}),w.jsx("td",{style:{width:"100px"},children:w.jsx(W,{label:"Delete",icon:j.MINUS,onClick:n(N)})})]},N)),D=g.globals.map((m,N)=>w.jsxs("tr",{children:[w.jsx("td",{style:{width:"170px"},children:h(d.concat(["globals",N,0]))}),w.jsx("td",{children:a(N)}),w.jsx("td",{style:{width:"90px"},children:w.jsx(W,{label:"Delete",icon:j.MINUS,onClick:o(N)})})]},N)),O=w.jsx(W,{label:"Use this Library",icon:j.REFRESH,onClick:()=>t.handleRefreshLibrary(g)}),b=w.jsxs(bt.Fragment,{children:["External Library:",w.jsx("br",{}),xs(g.external.name,y),w.jsx(Tt,{}),w.jsx("div",{children:"Symbols:"}),w.jsx("br",{}),w.jsx("table",{style:{width:"100%"},children:w.jsx("tbody",{children:x})}),w.jsx(W,{label:"New Symbol",icon:j.PLUS,onClick:e})]}),s=w.jsxs(bt.Fragment,{children:[w.jsx("div",{children:"Globals:"}),w.jsx("br",{}),w.jsx("table",{style:{width:"100%",borderSpacing:"5px"},children:w.jsx("tbody",{children:D})}),w.jsx(W,{label:"New Global",icon:j.PLUS,onClick:c})]});return w.jsxs("div",{children:[w.jsx(Tt,{}),O,w.jsx(Tt,{}),"Interpreter:",w.jsx("br",{}),ws(g.chapter,g.variant,E),w.jsx(Tt,{}),b,w.jsx(Tt,{}),s]})},h=d=>w.jsx(at,{assessment:t.assessment,path:d,processResults:Ts,updateAssessment:t.updateAssessment,useRawValue:!0}),a=d=>{const g=t.pathToLibrary.concat(["globals",d,2]);return w.jsx(at,{assessment:t.assessment,path:g,updateAssessment:l(d),useRawValue:!0})},l=d=>g=>{const D=K(t.pathToLibrary,t.assessment).globals[d];try{D[1]=Es(D[2]),t.updateAssessment(g)}catch{D[2]='"Invalid Expression"'}},n=d=>()=>{const g=t.assessment;K(t.pathToLibrary,g).external.symbols.splice(d,1),t.updateAssessment(g)},e=()=>{const d=t.assessment;K(t.pathToLibrary,d).external.symbols.push("new_symbol"),t.updateAssessment(d)},o=d=>()=>{const g=t.assessment;K(t.pathToLibrary,g).globals.splice(d,1),t.updateAssessment(g)},c=()=>{const d=t.assessment;K(t.pathToLibrary,d).globals.push(["new_global",null,"null"]),t.updateAssessment(d)},E=(d,g)=>{const x=t.assessment,D=K(t.pathToLibrary,x);D.chapter=d.chapter,t.updateAssessment(x)},y=(d,g)=>{const x=t.assessment,D=K(t.pathToLibrary,x);D.external.name=d.name,D.external.symbols=JSON.parse(JSON.stringify(Zn.get(d.name))),t.updateAssessment(x)},T=()=>{const d=t.assessment;if(p()){let g=K(t.pathToCopy||["globalDeployment"],d);g.chapter===-1&&(g=d.globalDeployment),g=JSON.parse(JSON.stringify(g)),xt(t.pathToLibrary,g,d)}else xt(t.pathToLibrary,$n(),d);t.updateAssessment(d)},p=(d=t.pathToLibrary)=>K(d.concat(["chapter"]),t.assessment)===-1;return t.isOptionalDeployment?w.jsxs("div",{children:[w.jsx(Lr,{checked:!p(),label:"Enable "+t.label+" Deployment",onChange:T}),p()?null:r()]}):w.jsxs("div",{children:[t.label+" Deployment",w.jsx("br",{}),r()]})},Ts=t=>typeof t=="string"?t.replace(/\s+/g,""):t,Es=t=>Function('"use strict";return ('+t+")")(),ws=(t,r=Lt.Variant.DEFAULT,h=(a,l)=>{})=>w.jsx(bs,{className:mt,items:Sr,onItemSelect:h,itemRenderer:vs,filterable:!1,children:w.jsx(Et,{className:mt,text:Pr(t,r),rightIcon:j.DOUBLE_CARET_VERTICAL})}),bs=Pt.ofType(),vs=(t,{handleClick:r,modifiers:h,query:a})=>w.jsx(Mt,{active:!1,onClick:r,text:t.displayName},t.displayName),Ns=Array.from(Zn.entries()).map((t,r)=>({name:t[0],key:r,symbols:t[1]})),xs=(t,r)=>w.jsx(Ds,{className:mt,items:Ns,onItemSelect:r,itemRenderer:Is,filterable:!1,children:w.jsx(Et,{className:mt,text:t,rightIcon:j.DOUBLE_CARET_VERTICAL})}),Ds=Pt.ofType(),Is=(t,{handleClick:r,modifiers:h,query:a})=>w.jsx(Mt,{active:!1,onClick:r,text:t.name},t.key),Os=t=>{const r=h=>w.jsx(at,{assessment:t.assessment,isNumber:!0,path:h,processResults:Er(0),updateAssessment:t.updateAssessment});return w.jsxs("div",{children:["Max Xp:",r(t.path.concat(["maxXp"]))]})},Cs=t=>{const r=tr(),[h,a]=U.useState(!1),[l,n]=U.useState(()=>{}),e=p=>w.jsxs("div",{children:[w.jsx(W,{label:"Clone",icon:j.DOCUMENT,onClick:y(c(()=>As(t.assessment.questions[p]),p))}),w.jsx(W,{label:"Delete",icon:j.REMOVE,onClick:y(E(p))}),w.jsx(W,{label:"Shift Up",icon:j.CARET_UP,onClick:y(o(-1,p)),isDisabled:p===0}),w.jsx(W,{label:"Shift Down",icon:j.CARET_DOWN,onClick:y(o(1,p)),isDisabled:p>=t.assessment.questions.length-1}),w.jsx("br",{}),w.jsx(W,{label:"Insert Programming Question",icon:j.FONT,onClick:y(c(Mr,p))}),w.jsx(W,{label:"Insert MCQ Question",icon:j.CONFIRM,onClick:y(c(_r,p))})]}),o=(p,d)=>()=>{const g=t.assessment,x=d+p;if(x>=0&&x<g.questions.length){const D=g.questions[d],O=g.questions;O[d]=O[x],O[x]=D,g.questions=O,t.updateAssessment(g),r("/mission-control/-1/"+x.toString())}},c=(p,d)=>()=>{const g=t.assessment;d=d+1;const x=g.questions;x.splice(d,0,p()),g.questions=x,t.updateAssessment(g),r("/mission-control/-1/"+d.toString())},E=p=>()=>{const d=t.assessment;let g=d.questions;g.length>1&&(g=g.slice(0,p).concat(g.slice(p+1))),d.questions=g,t.updateAssessment(d)},y=p=>()=>{t.hasUnsavedChanges?(a(!0),n(p)):p()},T=w.jsxs(De,{className:"assessment-reset",icon:j.ERROR,isCloseButtonShown:!0,isOpen:h,title:"Confirmation: Save unsaved changes?",children:[w.jsx("div",{className:Ie,children:w.jsx(vt,{content:"Are you sure you want to save over your unsaved changes?"})}),w.jsx("div",{className:er,children:w.jsxs(nr,{children:[w.jsx(W,{label:"Cancel",onClick:()=>a(!1),options:{minimal:!1}}),w.jsx(W,{label:"Confirm",onClick:()=>{l(),a(!1)},options:{minimal:!1,intent:xe.DANGER}})]})})]});return w.jsxs("div",{children:[T,t.assessment.questions.map((p,d)=>w.jsxs("div",{children:["Question ",d+1,w.jsx("br",{}),w.jsx(Et,{className:"mcq-option col-xs-12",minimal:!0,children:w.jsx(vt,{content:p.content.length>200?p.content.substring(0,300)+"...":p.content})}),e(d),w.jsx("br",{}),w.jsx("br",{})]},d))]})},As=t=>JSON.parse(JSON.stringify(t)),Ls=t=>{const r=()=>{const{assessment:c,questionId:E}=t,y=c.questions[E],T=y.choices.concat([{content:"A",hint:null}]);y.choices=T,c.questions[E]=y,t.updateAssessment(c)},h=()=>{const{assessment:c,questionId:E}=t,y=c.questions[E],T=y.choices.slice(0,y.choices.length-1);y.choices=T,c.questions[E]=y,t.updateAssessment(c)},a=(c,E=!1,y=[0])=>E?w.jsx(at,{assessment:t.assessment,isNumber:!0,path:c,processResults:Er(y[0],y[1]),updateAssessment:t.updateAssessment}):w.jsx(at,{assessment:t.assessment,path:c,updateAssessment:t.updateAssessment}),{questionId:l}=t,n=t.assessment.questions[l],e=n.choices.map((c,E)=>w.jsxs("div",{className:"mcq-option col-xs-12",children:["Option ",E,":",a(["questions",l,"choices",E,"content"]),w.jsx("br",{}),"Hint:",a(["questions",l,"choices",E,"hint"])]},E)),o=w.jsx(W,{label:"Delete Option",icon:j.REMOVE,onClick:h});return w.jsx("div",{className:"MCQChooser row",children:w.jsx(_t,{className:"mcq-content-parent col-xs-12 middle-xs",children:w.jsxs("div",{className:"row mcq-options-parent between-xs",children:[e,"Solution:",a(["questions",l,"solution"],!0,[0,n.choices.length]),w.jsx("br",{}),w.jsx(W,{label:"Add Option",icon:j.CONFIRM,onClick:r}),n.choices.length>0?o:void 0]})})})},Ss=Pt.ofType(),Yn=[{label:"Prepend",icon:j.CHEVRON_UP,id:"prepend"},{label:"Postpend",icon:j.CHEVRON_DOWN,id:"postpend"},{label:"Solution Template",icon:j.MANUAL,id:"solutionTemplate"},{label:"Suggested Answer",icon:j.TICK,id:"answer"}],Ps=t=>{const[r,h]=U.useState(Yn[0]),[a,l]=U.useState(""),[n,e]=U.useState(!1),o=()=>{const g=["questions",t.questionId].concat(r.id),x=w.jsx(W,{label:"Copy from Editor",icon:j.IMPORT,onClick:T(g)}),D=w.jsx(W,{label:"Copy to Editor",icon:j.EXPORT,onClick:p(g)}),O=w.jsxs("div",{children:[x,D,w.jsx(Tt,{}),c(g)]}),b=(m,{handleClick:N})=>w.jsx(Mt,{active:!1,onClick:N,text:m.label,icon:m.icon},m.id),s=(m,N)=>w.jsx(Ss,{className:mt,items:Yn,itemRenderer:b,onItemSelect:N,filterable:!1,children:w.jsx(Et,{className:mt,text:m.label,icon:j.EDIT,rightIcon:j.DOUBLE_CARET_VERTICAL})});return w.jsx("div",{className:"side-content",children:w.jsxs(_t,{children:[s(r,h),w.jsx(Tt,{}),w.jsx("div",{className:"side-content-text",children:O})]})})},c=d=>{const g=n?a:K(d,t.assessment);return w.jsx("div",{onClick:E(d),onBlur:y(d),children:w.jsx(vi,{className:"react-ace",editorProps:{$blockScrolling:1/0},fontSize:14,highlightActiveLine:!1,mode:"javascript",onChange:l,theme:"source",value:g,width:"100%"})})},E=d=>g=>{n||(l(K(d,t.assessment)),e(!0))},y=d=>g=>{if(n){if(K(d,t.assessment)!==a){const D=t.assessment;xt(d,a,D),t.updateAssessment(D)}if(r.id==="prepend"){const D=a;t.handleUpdateWorkspace({programPrependValue:D})}else if(r.id==="postpend"){const D=a;t.handleUpdateWorkspace({programPostpendValue:D})}l(""),e(!1)}},T=d=>()=>{const g=t.assessment;xt(d,t.editorValue,g),t.updateAssessment(g)},p=d=>()=>{const g=K(d,t.assessment);t.handleEditorValueChange(g)};return o()},be="assessment",Ms=t=>{const[r,h]=U.useState(At()),[a,l]=U.useState("question"),[n,e]=U.useState(!1),[o,c]=U.useState(!1),[E,y]=U.useState(0),T=Rr(),p=tr(),{isFolderModeEnabled:d,activeEditorTabIndex:g,editorTabs:x}=rr(_=>_.workspaces[be]);U.useEffect(()=>{r&&(A(),y(M()))},[]),U.useEffect(()=>L());const D=bt.useCallback(_=>T(jr(be,_)),[T]),O=bt.useCallback(_=>T(Fr(be,_)),[T]),{handleEditorValueChange:b}=t,s=bt.useCallback(_=>b(0,_),[b]);if(r===null||r.questions.length===0)return w.jsx(Xr,{className:We("WorkspaceParent",He),description:"Getting mission ready...",icon:w.jsx(Br,{size:qr.LARGE})});const m=()=>{let _=t.questionId;return _<0?_=0:_>=r.questions.length&&(_=r.questions.length-1),_},N=()=>w.jsxs(De,{className:"assessment-reset",icon:j.ERROR,isCloseButtonShown:!0,isOpen:o,title:"Confirmation: Reset editor?",children:[w.jsx("div",{className:Ie,children:w.jsx(vt,{content:"Are you sure you want to reset to your last save?"})}),w.jsx("div",{className:er,children:w.jsxs(nr,{children:[w.jsx(W,{label:"Cancel",onClick:()=>c(!1),options:{minimal:!1}}),w.jsx(W,{label:"Confirm",onClick:()=>{const _=At();h(_),e(!1),c(!1),y(M()),P(),A()},options:{minimal:!1,intent:xe.DANGER}})]})})]});function L(){if(r===void 0)return;const _=-1,B=m();(t.storedAssessmentId!==_||t.storedQuestionId!==B)&&(A(),t.handleUpdateCurrentAssessmentId(_,B),t.handleUpdateHasUnsavedChanges(!1),n&&(h(At()),e(!1)),P())}const P=(_=void 0)=>{const B=r.questions[m()];if(_||(_=B.library.chapter===-1?r.globalDeployment:B.library),_&&_.globals.length>0){const V=_.globals.map(dt=>dt[0]),J=_.external.symbols.concat(V);_={..._,external:{name:_.external.name,symbols:_s(J)}}}t.handleClearContext(_,!0)},A=()=>{const _=r.questions[m()];let B,V="",J="";_.type===ze.programming?(_.editorValue?B=_.editorValue:B=_.solutionTemplate,V=_.prepend,J=_.postpend):B="//If you see this, this is a bug. Please report bug.",t.handleResetWorkspace({editorTabs:[{value:B,highlightedLines:[],breakpoints:[]}],programPrependValue:V,programPostpendValue:J}),t.handleEditorValueChange(0,B)},i=_=>{const B=[_];t.handleUpdateWorkspace({editorTestcases:B}),t.handleTestcaseEval(0)},I=()=>{r.questions[m()].editorValue=x[0].value,h(r),e(!1),Ne(r),S()},S=()=>{const _=M(),B=_-E;if(B!==0){const V=t.assessmentOverview;B!==0&&(V.maxXp=_),y(_),t.updateAssessmentOverview(V),Nt(V)}},M=()=>{let _=0;const B=r.questions;for(const V of B)_+=V.maxXp;return _},F=_=>{h(_),e(!0)},k=_=>{h(_),P(),I(),A()},H=()=>{l(a==="question"?"global":"question")},q=(_,B)=>{const V=r;let J;if(a==="question"){const dt=V.questions[_.questionId].type,f=dt==="mcq"?w.jsx(Ls,{assessment:V,questionId:B,updateAssessment:F}):w.jsx(Ps,{assessment:V,questionId:B,updateAssessment:F,editorValue:x[0].value,handleEditorValueChange:s,handleUpdateWorkspace:_.handleUpdateWorkspace});J=[{label:`Question ${B+1}`,iconName:j.NINJA,body:w.jsx(at,{assessment:V,path:["questions",B,"content"],updateAssessment:F}),id:st.editorQuestionOverview},{label:"Question Template",iconName:j.DOCUMENT,body:f,id:st.editorQuestionTemplate},{label:"Manage Local Deployment",iconName:j.HOME,body:w.jsx(Ot,{assessment:V,label:"Question Specific",handleRefreshLibrary:P,pathToLibrary:["questions",B,"library"],updateAssessment:F,isOptionalDeployment:!0}),id:st.editorLocalDeployment},{label:"Manage Local Grader Deployment",iconName:j.CONFIRM,body:w.jsx(Ot,{assessment:V,label:"Question Specific Grader",handleRefreshLibrary:P,pathToLibrary:["questions",B,"graderLibrary"],pathToCopy:["questions",B,"library"],updateAssessment:F,isOptionalDeployment:!0}),id:st.editorLocalGraderDeployment},{label:"Grading",iconName:j.TICK,body:w.jsx(Os,{assessment:V,path:["questions",B],updateAssessment:F}),id:st.editorGrading}],dt==="programming"&&J.push({label:"Autograder",iconName:j.AIRPLANE,body:w.jsx(gs,{assessment:V,questionId:B,handleTestcaseEval:i,updateAssessment:F}),id:st.editorAutograder}),V.globalDeployment.external.symbols.includes("get_matrix")&&J.push({label:"Tone Matrix",iconName:j.GRID_VIEW,body:w.jsx(wi,{}),id:st.toneMatrix})}else J=[{label:`${V.type} Briefing`,iconName:j.BRIEFCASE,body:w.jsx(at,{assessment:V,path:["longSummary"],updateAssessment:F}),id:st.editorBriefing},{label:"Manage Question",iconName:j.WRENCH,body:w.jsx(Cs,{assessment:V,hasUnsavedChanges:n,questionId:B,updateAssessment:k}),id:st.editorManageQuestion},{label:"Manage Global Deployment",iconName:j.GLOBE,body:w.jsx(Ot,{assessment:V,label:"Global",handleRefreshLibrary:P,pathToLibrary:["globalDeployment"],updateAssessment:F,isOptionalDeployment:!1}),id:st.editorGlobalDeployment},{label:"Manage Global Grader Deployment",iconName:j.CONFIRM,body:w.jsx(Ot,{assessment:V,label:"Global Grader",handleRefreshLibrary:P,pathToLibrary:["graderDeployment"],updateAssessment:F,isOptionalDeployment:!0}),id:st.editorGlobalGraderDeployment}];return{tabs:{beforeDynamicTabs:J,afterDynamicTabs:[]}}},X=_=>{const B="/mission-control",V=B+`/${r.id.toString()}`,J=[_+1,r.questions.length],dt=()=>p(V+`/${(_-1).toString()}`),f=()=>p(V+`/${(_+1).toString()}`),u=()=>p(B),C=()=>{c(()=>n)},v=w.jsx(di,{onClickNext:f,onClickReturn:u,questionProgress:J},"next_question"),G=w.jsx(mi,{onClick:dt,questionProgress:J},"previous_question"),z=w.jsx(yi,{questionProgress:J},"question_view"),Q=w.jsx(gi,{onClick:C},"reset_template");return{editorButtons:[w.jsx(Di,{isEntrypointFileDefined:g!==null,handleEditorEval:t.handleEditorEval},"run"),w.jsx(Ti,{hasUnsavedChanges:n,onClickSave:I},"save"),Q],flowButtons:[G,z,v],editingWorkspaceButtons:[w.jsx(ys,{editingMode:a,toggleEditMode:H},"toggle_edit_mode")]}};function Ft(){const _=w.jsx(Ii,{handleReplOutputClear:t.handleReplOutputClear},"clear_repl");return[w.jsx(Oi,{handleReplEval:t.handleReplEval,isRunning:t.isRunning},"eval_repl"),_]}const pt=m(),ot=r.questions[pt],ut={controlBarProps:X(pt),editorContainerProps:ot.type===ze.programming?{editorVariant:"normal",isFolderModeEnabled:d,activeEditorTabIndex:g,setActiveEditorTabIndex:D,removeEditorTabByIndex:O,editorTabs:x.map(Ni).map((_,B)=>B!==0?_:{..._,editorValue:_.editorValue||ot.editorValue||ot.solutionTemplate}),editorSessionId:"",handleDeclarationNavigate:t.handleDeclarationNavigate,handleEditorEval:t.handleEditorEval,handleEditorValueChange:t.handleEditorValueChange,handleEditorUpdateBreakpoints:t.handleEditorUpdateBreakpoints,handleUpdateHasUnsavedChanges:t.handleUpdateHasUnsavedChanges,handlePromptAutocomplete:t.handlePromptAutocomplete,isEditorAutorun:!1}:void 0,handleSideContentHeightChange:t.handleSideContentHeightChange,hasUnsavedChanges:n,mcqProps:{mcq:ot,handleMCQSubmit:_=>t.handleSave(r.questions[pt].id,_)},sideBarProps:{tabs:[]},sideContentHeight:t.sideContentHeight,sideContentProps:q(t,pt),replProps:{handleBrowseHistoryDown:t.handleBrowseHistoryDown,handleBrowseHistoryUp:t.handleBrowseHistoryUp,handleReplEval:t.handleReplEval,handleReplValueChange:t.handleReplValueChange,output:t.output,replValue:t.replValue,sourceChapter:ot?.library?.chapter||Lt.Chapter.SOURCE_4,sourceVariant:Lt.Variant.DEFAULT,externalLibrary:ot?.library?.external?.name||"NONE",replButtons:Ft()}};return w.jsxs("div",{className:We("WorkspaceParent",He),children:[N(),w.jsx(xi,{...ut})]})};function _s(t){const r={};return t.filter(h=>r.hasOwnProperty(h)?!1:r[h]=!0)}const Rs=(t,r)=>({hasUnsavedChanges:t.workspaces.assessment.hasUnsavedChanges,isRunning:t.workspaces.assessment.isRunning,isDebugging:t.workspaces.assessment.isDebugging,enableDebugging:t.workspaces.assessment.enableDebugging,output:t.workspaces.assessment.output,replValue:t.workspaces.assessment.replValue,sideContentHeight:t.workspaces.assessment.sideContentHeight,storedAssessmentId:t.workspaces.assessment.currentAssessment,storedQuestionId:t.workspaces.assessment.currentQuestion}),Y="assessment",js=t=>sr({handleBrowseHistoryDown:()=>kr(Y),handleBrowseHistoryUp:()=>Ur(Y),handleChapterSelect:(r,h)=>Vr(r,Lt.Variant.DEFAULT,Y),handleClearContext:(r,h)=>Gr(Y,r,h),handleDeclarationNavigate:r=>Wr(Y,r),handleEditorEval:()=>Hr(Y),handleEditorValueChange:(r,h)=>zr(Y,r,h),handleEditorUpdateBreakpoints:(r,h)=>Yr(Y,r,h),handleInterruptEval:()=>Qr(Y),handleReplEval:()=>$r(Y),handleReplOutputClear:()=>Kr(Y),handleReplValueChange:r=>Jr(r,Y),handleResetWorkspace:r=>Zr(Y,r),handleUpdateWorkspace:r=>ti(Y,r),handleSave:ei,handleSideContentHeightChange:r=>ni(r,Y),handleTestcaseEval:r=>ri(Y,r),handleUpdateHasUnsavedChanges:r=>ii(Y,r),handleUpdateCurrentAssessmentId:si,handleDebuggerPause:()=>oi(Y),handleDebuggerResume:()=>ai(Y),handleDebuggerReset:()=>ui(Y),handlePromptAutocomplete:(r,h,a)=>ci(Y,r,h,a)},t),Fs=ir(Rs,js)(Ms);function Xs(t){const[r,h]=U.useState("Import XML");let a;U.useEffect(()=>{const o=At();o&&t.newAssessment(o)},[t.newAssessment]);const l=o=>c=>{if(!a)return;const E=a.result;E&&mr(E,(y,T)=>{console.dir(o);try{const p=rs(T);p[0].fileName=o.name.slice(0,-4),Nt(p[0]),t.updateEditingOverview(p[0]),Ne(p[1]),t.newAssessment(p[1]),h("Success!")}catch(p){console.log(p),h("Invalid XML!")}})},n=o=>{const c=o.target.files;o.target.files&&(a=new FileReader,a.onloadend=l(c[0]),a.readAsText(c[0]))},e=()=>{Nt(Ye()),t.updateEditingOverview(Ye()),Ne(Qe()),t.newAssessment(Qe())};return w.jsxs("div",{children:[w.jsx("div",{children:"Please ensure that the xml uploaded is trustable."}),w.jsx("div",{children:w.jsx(bi,{text:r,inputProps:{accept:".xml"},onChange:n})}),w.jsx("div",{children:w.jsx(W,{label:"Make New Mission",icon:j.NEW_OBJECT,onClick:e})})]})}const Bs=(t,r)=>r,qs=t=>sr({newAssessment:li},t),ks=ir(Bs,qs)(Xs),Us=()=>{},Vs=()=>{const{assessmentConfigurations:t}=rr(c=>c.session),r=t?.map(c=>c.type)||[],[h,a]=U.useState(ns()),l=hi();if(l.assessmentId&&!l.assessmentId?.match($e)||l.questionId&&!l.questionId?.match($e))return w.jsx(fi,{to:"/mission-control"});const n=Ke(l.assessmentId),e=Ke(l.questionId)||Jn.defaultQuestionId;if(n===-1&&h){const c=h,E={assessmentId:n,questionId:e,assessmentOverview:c,updateAssessmentOverview:a,notAttempted:c.status===Qn.not_attempted,closeDate:c.closeAt};return w.jsx("div",{className:"Academy",children:w.jsx(Fs,{...E})})}const o=w.jsxs(w.Fragment,{children:[w.jsx(ks,{updateEditingOverview:a}),h&&w.jsx(ps,{overview:h,updateEditingOverview:a,listingPath:"/mission-control",assessmentTypes:r})]});return w.jsx("div",{className:"Assessment Academy",children:w.jsx(Ei,{display:o,loadContentDispatch:Us})})},Gs=Vs;Gs.displayName="MissionControl";export{Gs as Component,Vs as default};
