import{ai as types$3,gn as docTooltip,r as reactExports,bd as reactDomExports,j as jsxRuntimeExports,c as classNames,gm as BUTTON_GROUP,fa as PropTypes$3,R as React$3,eq as getAugmentedNamespace,ay as Tooltip2,ba as Position,y as ControlButton,d as IconNames,C as Constants,w as commonjsGlobal,es as propTypesExports,dr as KeyboardCommand,aj as lodashExports,aw as distExports,m as Links,go as Documentation,g7 as eventsExports,x as getDefaultExportFromCjs,gp as captureException,gq as WorkspaceSettingsContext,I as Icon,bf as path,eW as _,ag as Markdown,dH as showSuccessMessage,ah as showWarningMessage,ar as Intent,e as Button,gr as useBlocker,gs as useBeforeUnload,D as DARK,gt as MediaQuery,be as CARD,bp as ELEVATION_0,P as Pre,aH as SideContentType,gu as ReactDOM,gv as JSXRuntime,a1 as useTypedSelector,eI as Tabs,eJ as Tab,gw as useDimensions,g4 as FocusStyleManager}from"./index-83d3858e.js";import{C as Card}from"./card-334db090.js";var source={};Object.defineProperty(source,"__esModule",{value:!0});var ModeSelector_1=source.ModeSelector=HighlightRulesSelector_1=source.HighlightRulesSelector=void 0;const types_1=types$3,docTooltip_1=docTooltip;function HighlightRulesSelector(s,r=types_1.Variant.DEFAULT,e="NONE",a=[]){function m(p,u,c){const f=p("../lib/oop"),n=p("./doc_comment_highlight_rules").DocCommentHighlightRules,t=p("./text_highlight_rules").TextHighlightRules,o="[a-zA-Z\\$_¡-￿][a-zA-Z\\d\\$_¡-￿]*",l=r===types_1.Variant.DEFAULT?s.toString():s.toString()+"_"+r,d=docTooltip_1.SourceDocumentation.builtins[l];function v(C){if(d===null)return"";let R="";for(const g in d)d[g].meta===C&&(R+="|"+g);return R}function y(C){if(a===null)return"";let R="";return a.forEach(g=>{g.meta===C&&(R+="|"+g.caption)}),R}function x(C){return(v(C)+y(C)).substr(1)}const E=()=>{const C=[];return s>=1&&C.push("import","const","else","if","return","function","debugger"),s>=2&&C.push("export"),s>=3&&C.push("while","for","break","continue","let"),C.join("|")},T=()=>{const C=[];return s<2&&C.push("export"),s<3&&C.push("while","for","break","continue","let"),r!==types_1.Variant.TYPED&&C.push("typeof","void"),C.join("|")},k=()=>r===types_1.Variant.TYPED?/\.{3}|--+|\+\++|\^|(==|!=)[^=]|[$%&*+\-~\/^]=+|[^&]*&[^&]/:/\.{3}|--+|\+\++|\^|(==|!=)[^=]|[$%&*+\-~\/^]=+|[^&]*&[^&]|[^\|]*\|[^\|]/,b=function(C){const R=this.createKeywordMapper({builtinconsts:x("const"),"constant.language.boolean":"true|false","constant.language.null":"null",keyword:E(),"storage.type":"const|let|function","support.function":x("func"),"variable.language":"this|arguments|var|yield|async|await|with|switch|throw|try|eval|class|enum|extends|super|implements|private|public|interface|package|protected|static|in|of|instanceof|new|case|catch|default|delete|do|finally|"+T()},"identifier"),g="else|return",w="\\\\(?:x[0-9a-fA-F]{2}|u[0-9a-fA-F]{4}|u{[0-9a-fA-F]{1,6}}|[0-2][0-7]{0,2}|3[0-7][0-7]?|[4-7][0-7]?|.)";this.$rules={no_regex:[n.getStartRule("doc-start"),A("no_regex"),{token:"string",regex:"'(?=.)",next:"qstring"},{token:"string",regex:'"(?=.)',next:"qqstring"},{token:"constant.numeric",regex:/0(?:[xX][0-9a-fA-F]+|[oO][0-7]+|[bB][01]+)\b/},{token:"constant.numeric",regex:/(?:\d\d*(?:\.\d*)?|\.\d+)(?:[eE][+-]?\d+\b)?/},{token:["storage.type","punctuation.operator","support.function","punctuation.operator","entity.name.function","text","keyword.operator"],regex:"("+o+")(\\.)(prototype)(\\.)("+o+")(\\s*)(=)",next:"function_arguments"},{token:["storage.type","punctuation.operator","entity.name.function","text","keyword.operator","text","storage.type","text","paren.lparen"],regex:"("+o+")(\\.)("+o+")(\\s*)(=)(\\s*)(function)(\\s*)(\\()",next:"function_arguments"},{token:["entity.name.function","text","keyword.operator","text","storage.type","text","paren.lparen"],regex:"("+o+")(\\s*)(=)(\\s*)(function)(\\s*)(\\()",next:"function_arguments"},{token:["storage.type","punctuation.operator","entity.name.function","text","keyword.operator","text","storage.type","text","entity.name.function","text","paren.lparen"],regex:"("+o+")(\\.)("+o+")(\\s*)(=)(\\s*)(function)(\\s+)(\\w+)(\\s*)(\\()",next:"function_arguments"},{token:["storage.type","text","entity.name.function","text","paren.lparen"],regex:"(function)(\\s+)("+o+")(\\s*)(\\()",next:"function_arguments"},{token:["entity.name.function","text","punctuation.operator","text","storage.type","text","paren.lparen"],regex:"("+o+")(\\s*)(:)(\\s*)(function)(\\s*)(\\()",next:"function_arguments"},{token:["text","text","storage.type","text","paren.lparen"],regex:"(:)(\\s*)(function)(\\s*)(\\()",next:"function_arguments"},{token:"keyword",regex:`from(?=\\s*('|"))`},{token:"keyword",regex:"(?:"+g+")\\b",next:"start"},{token:["support.constant"],regex:/that\b/},{token:["variable.language"],regex:k()},{token:R,regex:o},{token:"variable.language",regex:/[.](?![.])/,next:"property"},{token:"storage.type",regex:/=>/},{token:"keyword.operator",regex:/===|=|!==|<+=?|>+=?|!|&&|\|\||[%*+-\/]/,next:"start"},{token:"punctuation.operator",regex:/[?:,;.]/,next:"start"},{token:"paren.lparen",regex:/[\[({]/,next:"start"},{token:"paren.rparen",regex:/[\])}]/},{token:"comment",regex:/^#!.*$/}],property:[{token:"text",regex:"\\s+"},{token:["storage.type","punctuation.operator","entity.name.function","text","keyword.operator","text","storage.type","text","entity.name.function","text","paren.lparen"],regex:"("+o+")(\\.)("+o+")(\\s*)(=)(\\s*)(function)(?:(\\s+)(\\w+))?(\\s*)(\\()",next:"function_arguments"},{token:"punctuation.operator",regex:/[.](?![.])/},{token:"variable.language",regex:/(s(?:h(?:ift|ow(?:Mod(?:elessDialog|alDialog)|Help))|croll(?:X|By(?:Pages|Lines)?|Y|To)?|t(?:op|rike)|i(?:n|zeToContent|debar|gnText)|ort|u(?:p|b(?:str(?:ing)?)?)|pli(?:ce|t)|e(?:nd|t(?:Re(?:sizable|questHeader)|M(?:i(?:nutes|lliseconds)|onth)|Seconds|Ho(?:tKeys|urs)|Year|Cursor|Time(?:out)?|Interval|ZOptions|Date|UTC(?:M(?:i(?:nutes|lliseconds)|onth)|Seconds|Hours|Date|FullYear)|FullYear|Active)|arch)|qrt|lice|avePreferences|mall)|h(?:ome|andleEvent)|navigate|c(?:har(?:CodeAt|At)|o(?:s|n(?:cat|textual|firm)|mpile)|eil|lear(?:Timeout|Interval)?|a(?:ptureEvents|ll)|reate(?:StyleSheet|Popup|EventObject))|t(?:o(?:GMTString|S(?:tring|ource)|U(?:TCString|pperCase)|Lo(?:caleString|werCase))|est|a(?:n|int(?:Enabled)?))|i(?:s(?:NaN|Finite)|ndexOf|talics)|d(?:isableExternalCapture|ump|etachEvent)|u(?:n(?:shift|taint|escape|watch)|pdateCommands)|j(?:oin|avaEnabled)|p(?:o(?:p|w)|ush|lugins.refresh|a(?:ddings|rse(?:Int|Float)?)|r(?:int|ompt|eference))|e(?:scape|nableExternalCapture|val|lementFromPoint|x(?:p|ec(?:Script|Command)?))|valueOf|UTC|queryCommand(?:State|Indeterm|Enabled|Value)|f(?:i(?:nd|le(?:ModifiedDate|Size|CreatedDate|UpdatedDate)|xed)|o(?:nt(?:size|color)|rward)|loor|romCharCode)|watch|l(?:ink|o(?:ad|g)|astIndexOf)|a(?:sin|nchor|cos|t(?:tachEvent|ob|an(?:2)?)|pply|lert|b(?:s|ort))|r(?:ou(?:nd|teEvents)|e(?:size(?:By|To)|calc|turnValue|place|verse|l(?:oad|ease(?:Capture|Events)))|andom)|g(?:o|et(?:ResponseHeader|M(?:i(?:nutes|lliseconds)|onth)|Se(?:conds|lection)|Hours|Year|Time(?:zoneOffset)?|Da(?:y|te)|UTC(?:M(?:i(?:nutes|lliseconds)|onth)|Seconds|Hours|Da(?:y|te)|FullYear)|FullYear|A(?:ttention|llResponseHeaders)))|m(?:in|ove(?:B(?:y|elow)|To(?:Absolute)?|Above)|ergeAttributes|a(?:tch|rgins|x))|b(?:toa|ig|o(?:ld|rderWidths)|link|ack))\b(?=\()/},{token:"variable.language.dom",regex:/(s(?:ub(?:stringData|mit)|plitText|e(?:t(?:NamedItem|Attribute(?:Node)?)|lect))|has(?:ChildNodes|Feature)|namedItem|c(?:l(?:ick|o(?:se|neNode))|reate(?:C(?:omment|DATASection|aption)|T(?:Head|extNode|Foot)|DocumentFragment|ProcessingInstruction|E(?:ntityReference|lement)|Attribute))|tabIndex|i(?:nsert(?:Row|Before|Cell|Data)|tem)|open|delete(?:Row|C(?:ell|aption)|T(?:Head|Foot)|Data)|focus|write(?:ln)?|a(?:dd|ppend(?:Child|Data))|re(?:set|place(?:Child|Data)|move(?:NamedItem|Child|Attribute(?:Node)?)?)|get(?:NamedItem|Element(?:sBy(?:Name|TagName|ClassName)|ById)|Attribute(?:Node)?)|blur)\b(?=\()/},{token:"support.constant",regex:/(s(?:ystemLanguage|cr(?:ipts|ollbars|een(?:X|Y|Top|Left))|t(?:yle(?:Sheets)?|atus(?:Text|bar)?)|ibling(?:Below|Above)|ource|uffixes|e(?:curity(?:Policy)?|l(?:ection|f)))|h(?:istory|ost(?:name)?|as(?:h|Focus))|y|X(?:MLDocument|SLDocument)|n(?:ext|ame(?:space(?:s|URI)|Prop))|M(?:IN_VALUE|AX_VALUE)|c(?:haracterSet|o(?:n(?:structor|trollers)|okieEnabled|lorDepth|mp(?:onents|lete))|urrent|puClass|l(?:i(?:p(?:boardData)?|entInformation)|osed|asses)|alle(?:e|r)|rypto)|t(?:o(?:olbar|p)|ext(?:Transform|Indent|Decoration|Align)|ags)|SQRT(?:1_2|2)|i(?:n(?:ner(?:Height|Width)|put)|ds|gnoreCase)|zIndex|o(?:scpu|n(?:readystatechange|Line)|uter(?:Height|Width)|p(?:sProfile|ener)|ffscreenBuffering)|NEGATIVE_INFINITY|d(?:i(?:splay|alog(?:Height|Top|Width|Left|Arguments)|rectories)|e(?:scription|fault(?:Status|Ch(?:ecked|arset)|View)))|u(?:ser(?:Profile|Language|Agent)|n(?:iqueID|defined)|pdateInterval)|_content|p(?:ixelDepth|ort|ersonalbar|kcs11|l(?:ugins|atform)|a(?:thname|dding(?:Right|Bottom|Top|Left)|rent(?:Window|Layer)?|ge(?:X(?:Offset)?|Y(?:Offset)?))|r(?:o(?:to(?:col|type)|duct(?:Sub)?|mpter)|e(?:vious|fix)))|e(?:n(?:coding|abledPlugin)|x(?:ternal|pando)|mbeds)|v(?:isibility|endor(?:Sub)?|Linkcolor)|URLUnencoded|P(?:I|OSITIVE_INFINITY)|f(?:ilename|o(?:nt(?:Size|Family|Weight)|rmName)|rame(?:s|Element)|gColor)|E|whiteSpace|l(?:i(?:stStyleType|n(?:eHeight|kColor))|o(?:ca(?:tion(?:bar)?|lName)|wsrc)|e(?:ngth|ft(?:Context)?)|a(?:st(?:M(?:odified|atch)|Index|Paren)|yer(?:s|X)|nguage))|a(?:pp(?:MinorVersion|Name|Co(?:deName|re)|Version)|vail(?:Height|Top|Width|Left)|ll|r(?:ity|guments)|Linkcolor|bove)|r(?:ight(?:Context)?|e(?:sponse(?:XML|Text)|adyState))|global|x|m(?:imeTypes|ultiline|enubar|argin(?:Right|Bottom|Top|Left))|L(?:N(?:10|2)|OG(?:10E|2E))|b(?:o(?:ttom|rder(?:Width|RightWidth|BottomWidth|Style|Color|TopWidth|LeftWidth))|ufferDepth|elow|ackground(?:Color|Image)))\b/},{token:"identifier",regex:o},{regex:"",token:"empty",next:"no_regex"}],start:[n.getStartRule("doc-start"),A("start"),{token:"string.regexp",regex:"\\/",next:"regex"},{token:"text",regex:"\\s+|^$",next:"start"},{token:"empty",regex:"",next:"no_regex"}],regex:[{token:"regexp.keyword.operator",regex:"\\\\(?:u[\\da-fA-F]{4}|x[\\da-fA-F]{2}|.)"},{token:"string.regexp",regex:"/[sxngimy]*",next:"no_regex"},{token:"invalid",regex:/\{\d+\b,?\d*\}[+*]|[+*$^?][+*]|[$^][?]|\?{3,}/},{token:"constant.language.escape",regex:/\(\?[:=!]|\)|\{\d+\b,?\d*\}|[+*]\?|[()$^+*?.]/},{token:"constant.language.delimiter",regex:/\|/},{token:"constant.language.escape",regex:/\[\^?/,next:"regex_character_class"},{token:"empty",regex:"$",next:"no_regex"},{defaultToken:"string.regexp"}],regex_character_class:[{token:"regexp.charclass.keyword.operator",regex:"\\\\(?:u[\\da-fA-F]{4}|x[\\da-fA-F]{2}|.)"},{token:"constant.language.escape",regex:"]",next:"regex"},{token:"constant.language.escape",regex:"-"},{token:"empty",regex:"$",next:"no_regex"},{defaultToken:"string.regexp.charachterclass"}],function_arguments:[{token:"variable.parameter",regex:o},{token:"punctuation.operator",regex:"[, ]+"},{token:"punctuation.operator",regex:"$"},{token:"empty",regex:"",next:"no_regex"}],qqstring:[{token:"constant.language.escape",regex:w},{token:"string",regex:"\\\\$",consumeLineEnd:!0},{token:"string",regex:'"|$',next:"no_regex"},{defaultToken:"string"}],qstring:[{token:"constant.language.escape",regex:w},{token:"string",regex:"\\\\$",consumeLineEnd:!0},{token:"string",regex:"'|$",next:"no_regex"},{defaultToken:"string"}]},(!C||!C.noES6)&&(this.$rules.no_regex.unshift({regex:"[{}]",onMatch:function($,L,M){if(this.next=$=="{"?this.nextState:"",$=="{"&&M.length)M.unshift("start",L);else if($=="}"&&M.length&&(M.shift(),this.next=M.shift(),this.next.indexOf("string")!=-1||this.next.indexOf("jsx")!=-1))return"paren.quasi.end";return $=="{"?"paren.lparen":"paren.rparen"},nextState:"start"},{token:"string.quasi.start",regex:/`/,push:[{token:"constant.language.escape",regex:w},{token:"paren.quasi.start",regex:/\${/,push:"start"},{token:"string.quasi.end",regex:/`/,next:"pop"},{defaultToken:"string.quasi"}]}),(!C||C.jsx!=!1)&&S.call(this),r===types_1.Variant.TYPED&&this.$rules.no_regex.unshift({token:["storage.type","text","entity.name.function.ts"],regex:"(function)(\\s+)([a-zA-Z0-9$_¡-￿][a-zA-Z0-9d$_¡-￿]*)"},{token:["keyword","storage.type.variable.ts"],regex:"(type)(\\s+[a-zA-Z0-9_?.$][\\w?.$]*)"},{token:"keyword",regex:"\\b(?:typeof)\\b"})),this.embedRules(n,"doc-",[n.getEndRule("no_regex")]),this.normalizeRules()};f.inherits(b,t);function S(){const C=o.replace("\\d","\\d\\-"),R={onMatch:function(w,$,L){const M=w.charAt(1)=="/"?2:1;return M==1?($!=this.nextState?L.unshift(this.next,this.nextState,0):L.unshift(this.next),L[2]++):M==2&&$==this.nextState&&(L[1]--,(!L[1]||L[1]<0)&&(L.shift(),L.shift())),[{type:"meta.tag.punctuation."+(M==1?"":"end-")+"tag-open.xml",value:w.slice(0,M)},{type:"meta.tag.tag-name.xml",value:w.substr(M)}]},regex:"</?"+C,next:"jsxAttributes",nextState:"jsx"};this.$rules.start.unshift(R);const g={regex:"{",token:"paren.quasi.start",push:"start"};this.$rules.jsx=[g,R,{include:"reference"},{defaultToken:"string"}],this.$rules.jsxAttributes=[{token:"meta.tag.punctuation.tag-close.xml",regex:"/?>",onMatch:function(w,$,L){return $==L[0]&&L.shift(),w.length==2&&(L[0]==this.nextState&&L[1]--,(!L[1]||L[1]<0)&&L.splice(0,2)),this.next=L[0]||"start",[{type:this.token,value:w}]},nextState:"jsx"},g,A("jsxAttributes"),{token:"entity.other.attribute-name.xml",regex:C},{token:"keyword.operator.attribute-equals.xml",regex:"="},{token:"text.tag-whitespace.xml",regex:"\\s+"},{token:"string.attribute-value.xml",regex:"'",stateName:"jsx_attr_q",push:[{token:"string.attribute-value.xml",regex:"'",next:"pop"},{include:"reference"},{defaultToken:"string.attribute-value.xml"}]},{token:"string.attribute-value.xml",regex:'"',stateName:"jsx_attr_qq",push:[{token:"string.attribute-value.xml",regex:'"',next:"pop"},{include:"reference"},{defaultToken:"string.attribute-value.xml"}]},R],this.$rules.reference=[{token:"constant.language.escape.reference.xml",regex:"(?:&#[0-9]+;)|(?:&#x[0-9a-fA-F]+;)|(?:&[a-zA-Z0-9_:\\.-]+;)"}]}function A(C){return[{token:"comment",regex:/\/\*/,next:[n.getTagRule(),{token:"comment",regex:"\\*\\/",next:C||"pop"},{defaultToken:"comment",caseInsensitive:!0}]},{token:"comment",regex:"\\/\\/",next:[n.getTagRule(),{token:"comment",regex:"$|^",next:C||"pop"},{defaultToken:"comment",caseInsensitive:!0}]}]}u.SourceHighlightRules=b}const h=s.toString()+r+e;ace.define("ace/mode/source_highlight_rules"+h,["require","exports","module","ace/lib/oop","ace/mode/doc_comment_highlight_rules","ace/mode/text_highlight_rules"],m)}var HighlightRulesSelector_1=source.HighlightRulesSelector=HighlightRulesSelector;function ModeSelector(s,r=types_1.Variant.DEFAULT,e="NONE"){const a=s.toString()+r+e;function m(h,p,u){const c=h("../lib/oop"),f=h("./text").Mode,n=h("./source_highlight_rules"+a).SourceHighlightRules,t=h("./matching_brace_outdent").MatchingBraceOutdent,o=h("./behaviour/cstyle").CstyleBehaviour,l=h("./folding/cstyle").FoldMode,d=function(){this.HighlightRules=n,this.$outdent=new t,this.$behaviour=new o,this.foldingRules=new l};c.inherits(d,f),function(){this.lineCommentStart="//",this.blockComment={start:"/*",end:"*/"},this.$quotes={'"':'"',"'":"'","`":"`"},this.getNextLineIndent=function(v,y,x){let E=this.$getIndent(y);const T=this.getTokenizer().getLineTokens(y,v),k=T.tokens,b=T.state;if(k.length&&k[k.length-1].type=="comment")return E;if(v=="start"||v=="no_regex")y.match(/^.*(?:\bcase\b.*:|[\{\(\[])\s*$/)&&(E+=x);else if(v=="doc-start"){if(b=="start"||b=="no_regex")return"";const S=y.match(/^\s*(\/?)\*/);S&&(S[1]&&(E+=" "),E+="* ")}return E},this.checkOutdent=function(v,y,x){return this.$outdent.checkOutdent(y,x)},this.autoOutdent=function(v,y,x){this.$outdent.autoOutdent(y,x)},this.$id="ace/mode/source"+a}.call(d.prototype),p.Mode=d}ace.define("ace/mode/source"+a,["require","exports","module","ace/lib/oop","ace/mode/text","ace/mode/source_highlight_rules1","ace/mode/matching_brace_outdent","ace/worker/worker_client","ace/mode/behaviour/cstyle","ace/mode/folding/cstyle"],m)}ModeSelector_1=source.ModeSelector=ModeSelector;var __extends$5=globalThis&&globalThis.__extends||function(){var s=function(r,e){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,m){a.__proto__=m}||function(a,m){for(var h in m)Object.prototype.hasOwnProperty.call(m,h)&&(a[h]=m[h])},s(r,e)};return function(r,e){s(r,e);function a(){this.constructor=r}r.prototype=e===null?Object.create(e):(a.prototype=e.prototype,new a)}}(),__assign$3=globalThis&&globalThis.__assign||function(){return __assign$3=Object.assign||function(s){for(var r,e=1,a=arguments.length;e<a;e++){r=arguments[e];for(var m in r)Object.prototype.hasOwnProperty.call(r,m)&&(s[m]=r[m])}return s},__assign$3.apply(this,arguments)},rowSizeBase={width:"100%",height:"10px",top:"0px",left:"0px",cursor:"row-resize"},colSizeBase={width:"10px",height:"100%",top:"0px",left:"0px",cursor:"col-resize"},edgeBase={width:"20px",height:"20px",position:"absolute"},styles={top:__assign$3(__assign$3({},rowSizeBase),{top:"-5px"}),right:__assign$3(__assign$3({},colSizeBase),{left:void 0,right:"-5px"}),bottom:__assign$3(__assign$3({},rowSizeBase),{top:void 0,bottom:"-5px"}),left:__assign$3(__assign$3({},colSizeBase),{left:"-5px"}),topRight:__assign$3(__assign$3({},edgeBase),{right:"-10px",top:"-10px",cursor:"ne-resize"}),bottomRight:__assign$3(__assign$3({},edgeBase),{right:"-10px",bottom:"-10px",cursor:"se-resize"}),bottomLeft:__assign$3(__assign$3({},edgeBase),{left:"-10px",bottom:"-10px",cursor:"sw-resize"}),topLeft:__assign$3(__assign$3({},edgeBase),{left:"-10px",top:"-10px",cursor:"nw-resize"})},Resizer=function(s){__extends$5(r,s);function r(){var e=s!==null&&s.apply(this,arguments)||this;return e.onMouseDown=function(a){e.props.onResizeStart(a,e.props.direction)},e.onTouchStart=function(a){e.props.onResizeStart(a,e.props.direction)},e}return r.prototype.render=function(){return reactExports.createElement("div",{className:this.props.className||"",style:__assign$3(__assign$3({position:"absolute",userSelect:"none"},styles[this.props.direction]),this.props.replaceStyles||{}),onMouseDown:this.onMouseDown,onTouchStart:this.onTouchStart},this.props.children)},r}(reactExports.PureComponent),__extends$4=globalThis&&globalThis.__extends||function(){var s=function(r,e){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,m){a.__proto__=m}||function(a,m){for(var h in m)Object.prototype.hasOwnProperty.call(m,h)&&(a[h]=m[h])},s(r,e)};return function(r,e){s(r,e);function a(){this.constructor=r}r.prototype=e===null?Object.create(e):(a.prototype=e.prototype,new a)}}(),__assign$2=globalThis&&globalThis.__assign||function(){return __assign$2=Object.assign||function(s){for(var r,e=1,a=arguments.length;e<a;e++){r=arguments[e];for(var m in r)Object.prototype.hasOwnProperty.call(r,m)&&(s[m]=r[m])}return s},__assign$2.apply(this,arguments)},DEFAULT_SIZE={width:"auto",height:"auto"},clamp=function(s,r,e){return Math.max(Math.min(s,e),r)},snap=function(s,r){return Math.round(s/r)*r},hasDirection=function(s,r){return new RegExp(s,"i").test(r)},isTouchEvent=function(s){return!!(s.touches&&s.touches.length)},isMouseEvent=function(s){return!!((s.clientX||s.clientX===0)&&(s.clientY||s.clientY===0))},findClosestSnap=function(s,r,e){e===void 0&&(e=0);var a=r.reduce(function(h,p,u){return Math.abs(p-s)<Math.abs(r[h]-s)?u:h},0),m=Math.abs(r[a]-s);return e===0||m<e?r[a]:s},getStringSize=function(s){return s=s.toString(),s==="auto"||s.endsWith("px")||s.endsWith("%")||s.endsWith("vh")||s.endsWith("vw")||s.endsWith("vmax")||s.endsWith("vmin")?s:s+"px"},getPixelSize=function(s,r,e,a){if(s&&typeof s=="string"){if(s.endsWith("px"))return Number(s.replace("px",""));if(s.endsWith("%")){var m=Number(s.replace("%",""))/100;return r*m}if(s.endsWith("vw")){var m=Number(s.replace("vw",""))/100;return e*m}if(s.endsWith("vh")){var m=Number(s.replace("vh",""))/100;return a*m}}return s},calculateNewMax=function(s,r,e,a,m,h,p){return a=getPixelSize(a,s.width,r,e),m=getPixelSize(m,s.height,r,e),h=getPixelSize(h,s.width,r,e),p=getPixelSize(p,s.height,r,e),{maxWidth:typeof a>"u"?void 0:Number(a),maxHeight:typeof m>"u"?void 0:Number(m),minWidth:typeof h>"u"?void 0:Number(h),minHeight:typeof p>"u"?void 0:Number(p)}},definedProps=["as","style","className","grid","snap","bounds","boundsByDirection","size","defaultSize","minWidth","minHeight","maxWidth","maxHeight","lockAspectRatio","lockAspectRatioExtraWidth","lockAspectRatioExtraHeight","enable","handleStyles","handleClasses","handleWrapperStyle","handleWrapperClass","children","onResizeStart","onResize","onResizeStop","handleComponent","scale","resizeRatio","snapGap"],baseClassName="__resizable_base__",Resizable=function(s){__extends$4(r,s);function r(e){var a=s.call(this,e)||this;return a.ratio=1,a.resizable=null,a.parentLeft=0,a.parentTop=0,a.resizableLeft=0,a.resizableRight=0,a.resizableTop=0,a.resizableBottom=0,a.targetLeft=0,a.targetTop=0,a.appendBase=function(){if(!a.resizable||!a.window)return null;var m=a.parentNode;if(!m)return null;var h=a.window.document.createElement("div");return h.style.width="100%",h.style.height="100%",h.style.position="absolute",h.style.transform="scale(0, 0)",h.style.left="0",h.style.flex="0 0 100%",h.classList?h.classList.add(baseClassName):h.className+=baseClassName,m.appendChild(h),h},a.removeBase=function(m){var h=a.parentNode;h&&h.removeChild(m)},a.ref=function(m){m&&(a.resizable=m)},a.state={isResizing:!1,width:typeof(a.propsSize&&a.propsSize.width)>"u"?"auto":a.propsSize&&a.propsSize.width,height:typeof(a.propsSize&&a.propsSize.height)>"u"?"auto":a.propsSize&&a.propsSize.height,direction:"right",original:{x:0,y:0,width:0,height:0},backgroundStyle:{height:"100%",width:"100%",backgroundColor:"rgba(0,0,0,0)",cursor:"auto",opacity:0,position:"fixed",zIndex:9999,top:"0",left:"0",bottom:"0",right:"0"},flexBasis:void 0},a.onResizeStart=a.onResizeStart.bind(a),a.onMouseMove=a.onMouseMove.bind(a),a.onMouseUp=a.onMouseUp.bind(a),a}return Object.defineProperty(r.prototype,"parentNode",{get:function(){return this.resizable?this.resizable.parentNode:null},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"window",{get:function(){return!this.resizable||!this.resizable.ownerDocument?null:this.resizable.ownerDocument.defaultView},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"propsSize",{get:function(){return this.props.size||this.props.defaultSize||DEFAULT_SIZE},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"size",{get:function(){var e=0,a=0;if(this.resizable&&this.window){var m=this.resizable.offsetWidth,h=this.resizable.offsetHeight,p=this.resizable.style.position;p!=="relative"&&(this.resizable.style.position="relative"),e=this.resizable.style.width!=="auto"?this.resizable.offsetWidth:m,a=this.resizable.style.height!=="auto"?this.resizable.offsetHeight:h,this.resizable.style.position=p}return{width:e,height:a}},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"sizeStyle",{get:function(){var e=this,a=this.props.size,m=function(u){if(typeof e.state[u]>"u"||e.state[u]==="auto")return"auto";if(e.propsSize&&e.propsSize[u]&&e.propsSize[u].toString().endsWith("%")){if(e.state[u].toString().endsWith("%"))return e.state[u].toString();var c=e.getParentSize(),f=Number(e.state[u].toString().replace("px","")),n=f/c[u]*100;return n+"%"}return getStringSize(e.state[u])},h=a&&typeof a.width<"u"&&!this.state.isResizing?getStringSize(a.width):m("width"),p=a&&typeof a.height<"u"&&!this.state.isResizing?getStringSize(a.height):m("height");return{width:h,height:p}},enumerable:!1,configurable:!0}),r.prototype.getParentSize=function(){if(!this.parentNode)return this.window?{width:this.window.innerWidth,height:this.window.innerHeight}:{width:0,height:0};var e=this.appendBase();if(!e)return{width:0,height:0};var a=!1,m=this.parentNode.style.flexWrap;m!=="wrap"&&(a=!0,this.parentNode.style.flexWrap="wrap"),e.style.position="relative",e.style.minWidth="100%",e.style.minHeight="100%";var h={width:e.offsetWidth,height:e.offsetHeight};return a&&(this.parentNode.style.flexWrap=m),this.removeBase(e),h},r.prototype.bindEvents=function(){this.window&&(this.window.addEventListener("mouseup",this.onMouseUp),this.window.addEventListener("mousemove",this.onMouseMove),this.window.addEventListener("mouseleave",this.onMouseUp),this.window.addEventListener("touchmove",this.onMouseMove,{capture:!0,passive:!1}),this.window.addEventListener("touchend",this.onMouseUp))},r.prototype.unbindEvents=function(){this.window&&(this.window.removeEventListener("mouseup",this.onMouseUp),this.window.removeEventListener("mousemove",this.onMouseMove),this.window.removeEventListener("mouseleave",this.onMouseUp),this.window.removeEventListener("touchmove",this.onMouseMove,!0),this.window.removeEventListener("touchend",this.onMouseUp))},r.prototype.componentDidMount=function(){if(!(!this.resizable||!this.window)){var e=this.window.getComputedStyle(this.resizable);this.setState({width:this.state.width||this.size.width,height:this.state.height||this.size.height,flexBasis:e.flexBasis!=="auto"?e.flexBasis:void 0})}},r.prototype.componentWillUnmount=function(){this.window&&this.unbindEvents()},r.prototype.createSizeForCssProperty=function(e,a){var m=this.propsSize&&this.propsSize[a];return this.state[a]==="auto"&&this.state.original[a]===e&&(typeof m>"u"||m==="auto")?"auto":e},r.prototype.calculateNewMaxFromBoundary=function(e,a){var m=this.props.boundsByDirection,h=this.state.direction,p=m&&hasDirection("left",h),u=m&&hasDirection("top",h),c,f;if(this.props.bounds==="parent"){var n=this.parentNode;n&&(c=p?this.resizableRight-this.parentLeft:n.offsetWidth+(this.parentLeft-this.resizableLeft),f=u?this.resizableBottom-this.parentTop:n.offsetHeight+(this.parentTop-this.resizableTop))}else this.props.bounds==="window"?this.window&&(c=p?this.resizableRight:this.window.innerWidth-this.resizableLeft,f=u?this.resizableBottom:this.window.innerHeight-this.resizableTop):this.props.bounds&&(c=p?this.resizableRight-this.targetLeft:this.props.bounds.offsetWidth+(this.targetLeft-this.resizableLeft),f=u?this.resizableBottom-this.targetTop:this.props.bounds.offsetHeight+(this.targetTop-this.resizableTop));return c&&Number.isFinite(c)&&(e=e&&e<c?e:c),f&&Number.isFinite(f)&&(a=a&&a<f?a:f),{maxWidth:e,maxHeight:a}},r.prototype.calculateNewSizeFromDirection=function(e,a){var m=this.props.scale||1,h=this.props.resizeRatio||1,p=this.state,u=p.direction,c=p.original,f=this.props,n=f.lockAspectRatio,t=f.lockAspectRatioExtraHeight,o=f.lockAspectRatioExtraWidth,l=c.width,d=c.height,v=t||0,y=o||0;return hasDirection("right",u)&&(l=c.width+(e-c.x)*h/m,n&&(d=(l-y)/this.ratio+v)),hasDirection("left",u)&&(l=c.width-(e-c.x)*h/m,n&&(d=(l-y)/this.ratio+v)),hasDirection("bottom",u)&&(d=c.height+(a-c.y)*h/m,n&&(l=(d-v)*this.ratio+y)),hasDirection("top",u)&&(d=c.height-(a-c.y)*h/m,n&&(l=(d-v)*this.ratio+y)),{newWidth:l,newHeight:d}},r.prototype.calculateNewSizeFromAspectRatio=function(e,a,m,h){var p=this.props,u=p.lockAspectRatio,c=p.lockAspectRatioExtraHeight,f=p.lockAspectRatioExtraWidth,n=typeof h.width>"u"?10:h.width,t=typeof m.width>"u"||m.width<0?e:m.width,o=typeof h.height>"u"?10:h.height,l=typeof m.height>"u"||m.height<0?a:m.height,d=c||0,v=f||0;if(u){var y=(o-d)*this.ratio+v,x=(l-d)*this.ratio+v,E=(n-v)/this.ratio+d,T=(t-v)/this.ratio+d,k=Math.max(n,y),b=Math.min(t,x),S=Math.max(o,E),A=Math.min(l,T);e=clamp(e,k,b),a=clamp(a,S,A)}else e=clamp(e,n,t),a=clamp(a,o,l);return{newWidth:e,newHeight:a}},r.prototype.setBoundingClientRect=function(){if(this.props.bounds==="parent"){var e=this.parentNode;if(e){var a=e.getBoundingClientRect();this.parentLeft=a.left,this.parentTop=a.top}}if(this.props.bounds&&typeof this.props.bounds!="string"){var m=this.props.bounds.getBoundingClientRect();this.targetLeft=m.left,this.targetTop=m.top}if(this.resizable){var h=this.resizable.getBoundingClientRect(),p=h.left,u=h.top,c=h.right,f=h.bottom;this.resizableLeft=p,this.resizableRight=c,this.resizableTop=u,this.resizableBottom=f}},r.prototype.onResizeStart=function(e,a){if(!(!this.resizable||!this.window)){var m=0,h=0;if(e.nativeEvent&&isMouseEvent(e.nativeEvent)?(m=e.nativeEvent.clientX,h=e.nativeEvent.clientY):e.nativeEvent&&isTouchEvent(e.nativeEvent)&&(m=e.nativeEvent.touches[0].clientX,h=e.nativeEvent.touches[0].clientY),this.props.onResizeStart&&this.resizable){var p=this.props.onResizeStart(e,a,this.resizable);if(p===!1)return}this.props.size&&(typeof this.props.size.height<"u"&&this.props.size.height!==this.state.height&&this.setState({height:this.props.size.height}),typeof this.props.size.width<"u"&&this.props.size.width!==this.state.width&&this.setState({width:this.props.size.width})),this.ratio=typeof this.props.lockAspectRatio=="number"?this.props.lockAspectRatio:this.size.width/this.size.height;var u,c=this.window.getComputedStyle(this.resizable);if(c.flexBasis!=="auto"){var f=this.parentNode;if(f){var n=this.window.getComputedStyle(f).flexDirection;this.flexDir=n.startsWith("row")?"row":"column",u=c.flexBasis}}this.setBoundingClientRect(),this.bindEvents();var t={original:{x:m,y:h,width:this.size.width,height:this.size.height},isResizing:!0,backgroundStyle:__assign$2(__assign$2({},this.state.backgroundStyle),{cursor:this.window.getComputedStyle(e.target).cursor||"auto"}),direction:a,flexBasis:u};this.setState(t)}},r.prototype.onMouseMove=function(e){var a=this;if(!(!this.state.isResizing||!this.resizable||!this.window)){if(this.window.TouchEvent&&isTouchEvent(e))try{e.preventDefault(),e.stopPropagation()}catch{}var m=this.props,h=m.maxWidth,p=m.maxHeight,u=m.minWidth,c=m.minHeight,f=isTouchEvent(e)?e.touches[0].clientX:e.clientX,n=isTouchEvent(e)?e.touches[0].clientY:e.clientY,t=this.state,o=t.direction,l=t.original,d=t.width,v=t.height,y=this.getParentSize(),x=calculateNewMax(y,this.window.innerWidth,this.window.innerHeight,h,p,u,c);h=x.maxWidth,p=x.maxHeight,u=x.minWidth,c=x.minHeight;var E=this.calculateNewSizeFromDirection(f,n),T=E.newHeight,k=E.newWidth,b=this.calculateNewMaxFromBoundary(h,p);this.props.snap&&this.props.snap.x&&(k=findClosestSnap(k,this.props.snap.x,this.props.snapGap)),this.props.snap&&this.props.snap.y&&(T=findClosestSnap(T,this.props.snap.y,this.props.snapGap));var S=this.calculateNewSizeFromAspectRatio(k,T,{width:b.maxWidth,height:b.maxHeight},{width:u,height:c});if(k=S.newWidth,T=S.newHeight,this.props.grid){var A=snap(k,this.props.grid[0]),C=snap(T,this.props.grid[1]),R=this.props.snapGap||0;k=R===0||Math.abs(A-k)<=R?A:k,T=R===0||Math.abs(C-T)<=R?C:T}var g={width:k-l.width,height:T-l.height};if(d&&typeof d=="string"){if(d.endsWith("%")){var w=k/y.width*100;k=w+"%"}else if(d.endsWith("vw")){var $=k/this.window.innerWidth*100;k=$+"vw"}else if(d.endsWith("vh")){var L=k/this.window.innerHeight*100;k=L+"vh"}}if(v&&typeof v=="string"){if(v.endsWith("%")){var w=T/y.height*100;T=w+"%"}else if(v.endsWith("vw")){var $=T/this.window.innerWidth*100;T=$+"vw"}else if(v.endsWith("vh")){var L=T/this.window.innerHeight*100;T=L+"vh"}}var M={width:this.createSizeForCssProperty(k,"width"),height:this.createSizeForCssProperty(T,"height")};this.flexDir==="row"?M.flexBasis=M.width:this.flexDir==="column"&&(M.flexBasis=M.height),reactDomExports.flushSync(function(){a.setState(M)}),this.props.onResize&&this.props.onResize(e,o,this.resizable,g)}},r.prototype.onMouseUp=function(e){var a=this.state,m=a.isResizing,h=a.direction,p=a.original;if(!(!m||!this.resizable)){var u={width:this.size.width-p.width,height:this.size.height-p.height};this.props.onResizeStop&&this.props.onResizeStop(e,h,this.resizable,u),this.props.size&&this.setState(this.props.size),this.unbindEvents(),this.setState({isResizing:!1,backgroundStyle:__assign$2(__assign$2({},this.state.backgroundStyle),{cursor:"auto"})})}},r.prototype.updateSize=function(e){this.setState({width:e.width,height:e.height})},r.prototype.renderResizer=function(){var e=this,a=this.props,m=a.enable,h=a.handleStyles,p=a.handleClasses,u=a.handleWrapperStyle,c=a.handleWrapperClass,f=a.handleComponent;if(!m)return null;var n=Object.keys(m).map(function(t){return m[t]!==!1?reactExports.createElement(Resizer,{key:t,direction:t,onResizeStart:e.onResizeStart,replaceStyles:h&&h[t],className:p&&p[t]},f&&f[t]?f[t]:null):null});return reactExports.createElement("div",{className:c,style:u},n)},r.prototype.render=function(){var e=this,a=Object.keys(this.props).reduce(function(p,u){return definedProps.indexOf(u)!==-1||(p[u]=e.props[u]),p},{}),m=__assign$2(__assign$2(__assign$2({position:"relative",userSelect:this.state.isResizing?"none":"auto"},this.props.style),this.sizeStyle),{maxWidth:this.props.maxWidth,maxHeight:this.props.maxHeight,minWidth:this.props.minWidth,minHeight:this.props.minHeight,boxSizing:"border-box",flexShrink:0});this.state.flexBasis&&(m.flexBasis=this.state.flexBasis);var h=this.props.as||"div";return reactExports.createElement(h,__assign$2({ref:this.ref,style:m,className:this.props.className},a),this.state.isResizing&&reactExports.createElement("div",{style:this.state.backgroundStyle}),this.props.children,this.renderResizer())},r.defaultProps={as:"div",onResizeStart:function(){},onResize:function(){},onResizeStop:function(){},enable:{top:!0,right:!0,bottom:!0,left:!0,topRight:!0,bottomRight:!0,bottomLeft:!0,topLeft:!0},style:{},grid:[1,1],lockAspectRatio:!1,lockAspectRatioExtraWidth:0,lockAspectRatioExtraHeight:0,scale:1,resizeRatio:1,snapGap:0},r}(reactExports.PureComponent);const ControlBar=s=>{const r=jsxRuntimeExports.jsx("div",{className:classNames("ControlBar_editor",BUTTON_GROUP),children:s.editorButtons}),e=s.flowButtons&&jsxRuntimeExports.jsx("div",{className:classNames("ControlBar_flow",BUTTON_GROUP),children:s.flowButtons}),a=jsxRuntimeExports.jsx("div",{className:classNames("ControlBar_editingWorkspace",BUTTON_GROUP),children:s.editingWorkspaceButtons});return jsxRuntimeExports.jsxs("div",{className:"ControlBar",children:[r,e,a]})};var ace$4={exports:{}};(function(s,r){(function(){var e="ace",a=function(){return this}();!a&&typeof window<"u"&&(a=window);var m=function(n,t,o){if(typeof n!="string"){m.original?m.original.apply(this,arguments):(console.error("dropping module because define wasn't a string."),console.trace());return}arguments.length==2&&(o=t),m.modules[n]||(m.payloads[n]=o,m.modules[n]=null)};m.modules={},m.payloads={};var h=function(n,t,o){if(typeof t=="string"){var l=c(n,t);if(l!=null)return o&&o(),l}else if(Object.prototype.toString.call(t)==="[object Array]"){for(var d=[],v=0,y=t.length;v<y;++v){var x=c(n,t[v]);if(x==null&&p.original)return;d.push(x)}return o&&o.apply(null,d)||!0}},p=function(n,t){var o=h("",n,t);return o==null&&p.original?p.original.apply(this,arguments):o},u=function(n,t){if(t.indexOf("!")!==-1){var o=t.split("!");return u(n,o[0])+"!"+u(n,o[1])}if(t.charAt(0)=="."){var l=n.split("/").slice(0,-1).join("/");for(t=l+"/"+t;t.indexOf(".")!==-1&&d!=t;){var d=t;t=t.replace(/\/\.\//,"/").replace(/[^\/]+\/\.\.\//,"")}}return t},c=function(n,t){t=u(n,t);var o=m.modules[t];if(!o){if(o=m.payloads[t],typeof o=="function"){var l={},d={id:t,uri:"",exports:l,packaged:!0},v=function(x,E){return h(t,x,E)},y=o(v,l,d);l=y||d.exports,m.modules[t]=l,delete m.payloads[t]}o=m.modules[t]=l||o}return o};function f(n){var t=a;n&&(a[n]||(a[n]={}),t=a[n]),(!t.define||!t.define.packaged)&&(m.original=t.define,t.define=m,t.define.packaged=!0),(!t.require||!t.require.packaged)&&(p.original=t.require,t.require=p,t.require.packaged=!0)}f(e)})(),ace.define("ace/lib/es6-shim",["require","exports","module"],function(e,a,m){function h(p,u,c){Object.defineProperty(p,u,{value:c,enumerable:!1,writable:!0,configurable:!0})}String.prototype.startsWith||h(String.prototype,"startsWith",function(p,u){return u=u||0,this.lastIndexOf(p,u)===u}),String.prototype.endsWith||h(String.prototype,"endsWith",function(p,u){var c=this;(u===void 0||u>c.length)&&(u=c.length),u-=p.length;var f=c.indexOf(p,u);return f!==-1&&f===u}),String.prototype.repeat||h(String.prototype,"repeat",function(p){for(var u="",c=this;p>0;)p&1&&(u+=c),(p>>=1)&&(c+=c);return u}),String.prototype.includes||h(String.prototype,"includes",function(p,u){return this.indexOf(p,u)!=-1}),Object.assign||(Object.assign=function(p){if(p==null)throw new TypeError("Cannot convert undefined or null to object");for(var u=Object(p),c=1;c<arguments.length;c++){var f=arguments[c];f!=null&&Object.keys(f).forEach(function(n){u[n]=f[n]})}return u}),Object.values||(Object.values=function(p){return Object.keys(p).map(function(u){return p[u]})}),Array.prototype.find||h(Array.prototype,"find",function(p){for(var u=this.length,c=arguments[1],f=0;f<u;f++){var n=this[f];if(p.call(c,n,f,this))return n}}),Array.prototype.findIndex||h(Array.prototype,"findIndex",function(p){for(var u=this.length,c=arguments[1],f=0;f<u;f++){var n=this[f];if(p.call(c,n,f,this))return f}}),Array.prototype.includes||h(Array.prototype,"includes",function(p,u){return this.indexOf(p,u)!=-1}),Array.prototype.fill||h(Array.prototype,"fill",function(p){for(var u=this,c=u.length>>>0,f=arguments[1],n=f>>0,t=n<0?Math.max(c+n,0):Math.min(n,c),o=arguments[2],l=o===void 0?c:o>>0,d=l<0?Math.max(c+l,0):Math.min(l,c);t<d;)u[t]=p,t++;return u}),Array.of||h(Array,"of",function(){return Array.prototype.slice.call(arguments)})}),ace.define("ace/lib/fixoldbrowsers",["require","exports","module","ace/lib/es6-shim"],function(e,a,m){e("./es6-shim")}),ace.define("ace/lib/lang",["require","exports","module"],function(e,a,m){a.last=function(u){return u[u.length-1]},a.stringReverse=function(u){return u.split("").reverse().join("")},a.stringRepeat=function(u,c){for(var f="";c>0;)c&1&&(f+=u),(c>>=1)&&(u+=u);return f};var h=/^\s\s*/,p=/\s\s*$/;a.stringTrimLeft=function(u){return u.replace(h,"")},a.stringTrimRight=function(u){return u.replace(p,"")},a.copyObject=function(u){var c={};for(var f in u)c[f]=u[f];return c},a.copyArray=function(u){for(var c=[],f=0,n=u.length;f<n;f++)u[f]&&typeof u[f]=="object"?c[f]=this.copyObject(u[f]):c[f]=u[f];return c},a.deepCopy=function u(c){if(typeof c!="object"||!c)return c;var f;if(Array.isArray(c)){f=[];for(var n=0;n<c.length;n++)f[n]=u(c[n]);return f}if(Object.prototype.toString.call(c)!=="[object Object]")return c;f={};for(var n in c)f[n]=u(c[n]);return f},a.arrayToMap=function(u){for(var c={},f=0;f<u.length;f++)c[u[f]]=1;return c},a.createMap=function(u){var c=Object.create(null);for(var f in u)c[f]=u[f];return c},a.arrayRemove=function(u,c){for(var f=0;f<=u.length;f++)c===u[f]&&u.splice(f,1)},a.escapeRegExp=function(u){return u.replace(/([.*+?^${}()|[\]\/\\])/g,"\\$1")},a.escapeHTML=function(u){return(""+u).replace(/&/g,"&#38;").replace(/"/g,"&#34;").replace(/'/g,"&#39;").replace(/</g,"&#60;")},a.getMatchOffsets=function(u,c){var f=[];return u.replace(c,function(n){f.push({offset:arguments[arguments.length-2],length:n.length})}),f},a.deferredCall=function(u){var c=null,f=function(){c=null,u()},n=function(t){return n.cancel(),c=setTimeout(f,t||0),n};return n.schedule=n,n.call=function(){return this.cancel(),u(),n},n.cancel=function(){return clearTimeout(c),c=null,n},n.isPending=function(){return c},n},a.delayedCall=function(u,c){var f=null,n=function(){f=null,u()},t=function(o){f==null&&(f=setTimeout(n,o||c))};return t.delay=function(o){f&&clearTimeout(f),f=setTimeout(n,o||c)},t.schedule=t,t.call=function(){this.cancel(),u()},t.cancel=function(){f&&clearTimeout(f),f=null},t.isPending=function(){return f},t}}),ace.define("ace/lib/oop",["require","exports","module"],function(e,a,m){a.inherits=function(h,p){h.super_=p,h.prototype=Object.create(p.prototype,{constructor:{value:h,enumerable:!1,writable:!0,configurable:!0}})},a.mixin=function(h,p){for(var u in p)h[u]=p[u];return h},a.implement=function(h,p){a.mixin(h,p)}}),ace.define("ace/lib/useragent",["require","exports","module"],function(e,a,m){a.OS={LINUX:"LINUX",MAC:"MAC",WINDOWS:"WINDOWS"},a.getOS=function(){return a.isMac?a.OS.MAC:a.isLinux?a.OS.LINUX:a.OS.WINDOWS};var h=typeof navigator=="object"?navigator:{},p=(/mac|win|linux/i.exec(h.platform)||["other"])[0].toLowerCase(),u=h.userAgent||"",c=h.appName||"";a.isWin=p=="win",a.isMac=p=="mac",a.isLinux=p=="linux",a.isIE=c=="Microsoft Internet Explorer"||c.indexOf("MSAppHost")>=0?parseFloat((u.match(/(?:MSIE |Trident\/[0-9]+[\.0-9]+;.*rv:)([0-9]+[\.0-9]+)/)||[])[1]):parseFloat((u.match(/(?:Trident\/[0-9]+[\.0-9]+;.*rv:)([0-9]+[\.0-9]+)/)||[])[1]),a.isOldIE=a.isIE&&a.isIE<9,a.isGecko=a.isMozilla=u.match(/ Gecko\/\d+/),a.isOpera=typeof opera=="object"&&Object.prototype.toString.call(window.opera)=="[object Opera]",a.isWebKit=parseFloat(u.split("WebKit/")[1])||void 0,a.isChrome=parseFloat(u.split(" Chrome/")[1])||void 0,a.isEdge=parseFloat(u.split(" Edge/")[1])||void 0,a.isAIR=u.indexOf("AdobeAIR")>=0,a.isAndroid=u.indexOf("Android")>=0,a.isChromeOS=u.indexOf(" CrOS ")>=0,a.isIOS=/iPad|iPhone|iPod/.test(u)&&!window.MSStream,a.isIOS&&(a.isMac=!0),a.isMobile=a.isIOS||a.isAndroid}),ace.define("ace/lib/dom",["require","exports","module","ace/lib/useragent"],function(e,a,m){var h=e("./useragent"),p="http://www.w3.org/1999/xhtml";a.buildDom=function o(l,d,v){if(typeof l=="string"&&l){var y=document.createTextNode(l);return d&&d.appendChild(y),y}if(!Array.isArray(l))return l&&l.appendChild&&d&&d.appendChild(l),l;if(typeof l[0]!="string"||!l[0]){for(var x=[],E=0;E<l.length;E++){var T=o(l[E],d,v);T&&x.push(T)}return x}var k=document.createElement(l[0]),b=l[1],S=1;b&&typeof b=="object"&&!Array.isArray(b)&&(S=2);for(var E=S;E<l.length;E++)o(l[E],k,v);return S==2&&Object.keys(b).forEach(function(A){var C=b[A];A==="class"?k.className=Array.isArray(C)?C.join(" "):C:typeof C=="function"||A=="value"||A[0]=="$"?k[A]=C:A==="ref"?v&&(v[C]=k):A==="style"?typeof C=="string"&&(k.style.cssText=C):C!=null&&k.setAttribute(A,C)}),d&&d.appendChild(k),k},a.getDocumentHead=function(o){return o||(o=document),o.head||o.getElementsByTagName("head")[0]||o.documentElement},a.createElement=function(o,l){return document.createElementNS?document.createElementNS(l||p,o):document.createElement(o)},a.removeChildren=function(o){o.innerHTML=""},a.createTextNode=function(o,l){var d=l?l.ownerDocument:document;return d.createTextNode(o)},a.createFragment=function(o){var l=o?o.ownerDocument:document;return l.createDocumentFragment()},a.hasCssClass=function(o,l){var d=(o.className+"").split(/\s+/g);return d.indexOf(l)!==-1},a.addCssClass=function(o,l){a.hasCssClass(o,l)||(o.className+=" "+l)},a.removeCssClass=function(o,l){for(var d=o.className.split(/\s+/g);;){var v=d.indexOf(l);if(v==-1)break;d.splice(v,1)}o.className=d.join(" ")},a.toggleCssClass=function(o,l){for(var d=o.className.split(/\s+/g),v=!0;;){var y=d.indexOf(l);if(y==-1)break;v=!1,d.splice(y,1)}return v&&d.push(l),o.className=d.join(" "),v},a.setCssClass=function(o,l,d){d?a.addCssClass(o,l):a.removeCssClass(o,l)},a.hasCssString=function(o,l){var d=0,v;if(l=l||document,v=l.querySelectorAll("style")){for(;d<v.length;)if(v[d++].id===o)return!0}},a.removeElementById=function(o,l){l=l||document,l.getElementById(o)&&l.getElementById(o).remove()};var u,c=[];a.useStrictCSP=function(o){u=o,o==!1?f():c||(c=[])};function f(){var o=c;c=null,o&&o.forEach(function(l){n(l[0],l[1])})}function n(o,l,d){if(!(typeof document>"u")){if(c){if(d)f();else if(d===!1)return c.push([o,l])}if(!u){var v=d;!d||!d.getRootNode?v=document:(v=d.getRootNode(),(!v||v==d)&&(v=document));var y=v.ownerDocument||v;if(l&&a.hasCssString(l,v))return null;l&&(o+=`
/*# sourceURL=ace/css/`+l+" */");var x=a.createElement("style");x.appendChild(y.createTextNode(o)),l&&(x.id=l),v==y&&(v=a.getDocumentHead(y)),v.insertBefore(x,v.firstChild)}}}if(a.importCssString=n,a.importCssStylsheet=function(o,l){a.buildDom(["link",{rel:"stylesheet",href:o}],a.getDocumentHead(l))},a.scrollbarWidth=function(o){var l=a.createElement("ace_inner");l.style.width="100%",l.style.minWidth="0px",l.style.height="200px",l.style.display="block";var d=a.createElement("ace_outer"),v=d.style;v.position="absolute",v.left="-10000px",v.overflow="hidden",v.width="200px",v.minWidth="0px",v.height="150px",v.display="block",d.appendChild(l);var y=o&&o.documentElement||document&&document.documentElement;if(!y)return 0;y.appendChild(d);var x=l.offsetWidth;v.overflow="scroll";var E=l.offsetWidth;return x===E&&(E=d.clientWidth),y.removeChild(d),x-E},a.computedStyle=function(o,l){return window.getComputedStyle(o,"")||{}},a.setStyle=function(o,l,d){o[l]!==d&&(o[l]=d)},a.HAS_CSS_ANIMATION=!1,a.HAS_CSS_TRANSFORMS=!1,a.HI_DPI=h.isWin?typeof window<"u"&&window.devicePixelRatio>=1.5:!0,h.isChromeOS&&(a.HI_DPI=!1),typeof document<"u"){var t=document.createElement("div");a.HI_DPI&&t.style.transform!==void 0&&(a.HAS_CSS_TRANSFORMS=!0),!h.isEdge&&typeof t.style.animationName<"u"&&(a.HAS_CSS_ANIMATION=!0),t=null}a.HAS_CSS_TRANSFORMS?a.translate=function(o,l,d){o.style.transform="translate("+Math.round(l)+"px, "+Math.round(d)+"px)"}:a.translate=function(o,l,d){o.style.top=Math.round(d)+"px",o.style.left=Math.round(l)+"px"}}),ace.define("ace/lib/net",["require","exports","module","ace/lib/dom"],function(e,a,m){/*
* based on code from:
*
* @license RequireJS text 0.25.0 Copyright (c) 2010-2011, The Dojo Foundation All Rights Reserved.
* Available via the MIT or new BSD license.
* see: http://github.com/jrburke/requirejs for details
*/var h=e("./dom");a.get=function(p,u){var c=new XMLHttpRequest;c.open("GET",p,!0),c.onreadystatechange=function(){c.readyState===4&&u(c.responseText)},c.send(null)},a.loadScript=function(p,u){var c=h.getDocumentHead(),f=document.createElement("script");f.src=p,c.appendChild(f),f.onload=f.onreadystatechange=function(n,t){(t||!f.readyState||f.readyState=="loaded"||f.readyState=="complete")&&(f=f.onload=f.onreadystatechange=null,t||u())}},a.qualifyURL=function(p){var u=document.createElement("a");return u.href=p,u.href}}),ace.define("ace/lib/event_emitter",["require","exports","module"],function(e,a,m){var h={},p=function(){this.propagationStopped=!0},u=function(){this.defaultPrevented=!0};h._emit=h._dispatchEvent=function(c,f){this._eventRegistry||(this._eventRegistry={}),this._defaultHandlers||(this._defaultHandlers={});var n=this._eventRegistry[c]||[],t=this._defaultHandlers[c];if(!(!n.length&&!t)){(typeof f!="object"||!f)&&(f={}),f.type||(f.type=c),f.stopPropagation||(f.stopPropagation=p),f.preventDefault||(f.preventDefault=u),n=n.slice();for(var o=0;o<n.length&&(n[o](f,this),!f.propagationStopped);o++);if(t&&!f.defaultPrevented)return t(f,this)}},h._signal=function(c,f){var n=(this._eventRegistry||{})[c];if(n){n=n.slice();for(var t=0;t<n.length;t++)n[t](f,this)}},h.once=function(c,f){var n=this;if(this.on(c,function t(){n.off(c,t),f.apply(null,arguments)}),!f)return new Promise(function(t){f=t})},h.setDefaultHandler=function(c,f){var n=this._defaultHandlers;if(n||(n=this._defaultHandlers={_disabled_:{}}),n[c]){var t=n[c],o=n._disabled_[c];o||(n._disabled_[c]=o=[]),o.push(t);var l=o.indexOf(f);l!=-1&&o.splice(l,1)}n[c]=f},h.removeDefaultHandler=function(c,f){var n=this._defaultHandlers;if(n){var t=n._disabled_[c];if(n[c]==f)t&&this.setDefaultHandler(c,t.pop());else if(t){var o=t.indexOf(f);o!=-1&&t.splice(o,1)}}},h.on=h.addEventListener=function(c,f,n){this._eventRegistry=this._eventRegistry||{};var t=this._eventRegistry[c];return t||(t=this._eventRegistry[c]=[]),t.indexOf(f)==-1&&t[n?"unshift":"push"](f),f},h.off=h.removeListener=h.removeEventListener=function(c,f){this._eventRegistry=this._eventRegistry||{};var n=this._eventRegistry[c];if(n){var t=n.indexOf(f);t!==-1&&n.splice(t,1)}},h.removeAllListeners=function(c){c||(this._eventRegistry=this._defaultHandlers=void 0),this._eventRegistry&&(this._eventRegistry[c]=void 0),this._defaultHandlers&&(this._defaultHandlers[c]=void 0)},a.EventEmitter=h}),ace.define("ace/lib/app_config",["require","exports","module","ace/lib/oop","ace/lib/event_emitter"],function(e,a,m){"no use strict";var h=e("./oop"),p=e("./event_emitter").EventEmitter,u={setOptions:function(t){Object.keys(t).forEach(function(o){this.setOption(o,t[o])},this)},getOptions:function(t){var o={};if(t)Array.isArray(t)||(o=t,t=Object.keys(o));else{var l=this.$options;t=Object.keys(l).filter(function(d){return!l[d].hidden})}return t.forEach(function(d){o[d]=this.getOption(d)},this),o},setOption:function(t,o){if(this["$"+t]!==o){var l=this.$options[t];if(!l)return c('misspelled option "'+t+'"');if(l.forwardTo)return this[l.forwardTo]&&this[l.forwardTo].setOption(t,o);l.handlesSet||(this["$"+t]=o),l&&l.set&&l.set.call(this,o)}},getOption:function(t){var o=this.$options[t];return o?o.forwardTo?this[o.forwardTo]&&this[o.forwardTo].getOption(t):o&&o.get?o.get.call(this):this["$"+t]:c('misspelled option "'+t+'"')}};function c(t){typeof console<"u"&&console.warn&&console.warn.apply(console,arguments)}function f(t,o){var l=new Error(t);l.data=o,typeof console=="object"&&console.error&&console.error(l),setTimeout(function(){throw l})}var n=function(){this.$defaultOptions={}};(function(){h.implement(this,p),this.defineOptions=function(t,o,l){return t.$options||(this.$defaultOptions[o]=t.$options={}),Object.keys(l).forEach(function(d){var v=l[d];typeof v=="string"&&(v={forwardTo:v}),v.name||(v.name=d),t.$options[v.name]=v,"initialValue"in v&&(t["$"+v.name]=v.initialValue)}),h.implement(t,u),this},this.resetOptions=function(t){Object.keys(t.$options).forEach(function(o){var l=t.$options[o];"value"in l&&t.setOption(o,l.value)})},this.setDefaultValue=function(t,o,l){if(!t){for(t in this.$defaultOptions)if(this.$defaultOptions[t][o])break;if(!this.$defaultOptions[t][o])return!1}var d=this.$defaultOptions[t]||(this.$defaultOptions[t]={});d[o]&&(d.forwardTo?this.setDefaultValue(d.forwardTo,o,l):d[o].value=l)},this.setDefaultValues=function(t,o){Object.keys(o).forEach(function(l){this.setDefaultValue(t,l,o[l])},this)},this.warn=c,this.reportError=f}).call(n.prototype),a.AppConfig=n}),ace.define("ace/theme/textmate.css",["require","exports","module"],function(e,a,m){m.exports=`.ace-tm .ace_gutter {
  background: #f0f0f0;
  color: #333;
}

.ace-tm .ace_print-margin {
  width: 1px;
  background: #e8e8e8;
}

.ace-tm .ace_fold {
    background-color: #6B72E6;
}

.ace-tm {
  background-color: #FFFFFF;
  color: black;
}

.ace-tm .ace_cursor {
  color: black;
}
        
.ace-tm .ace_invisible {
  color: rgb(191, 191, 191);
}

.ace-tm .ace_storage,
.ace-tm .ace_keyword {
  color: blue;
}

.ace-tm .ace_constant {
  color: rgb(197, 6, 11);
}

.ace-tm .ace_constant.ace_buildin {
  color: rgb(88, 72, 246);
}

.ace-tm .ace_constant.ace_language {
  color: rgb(88, 92, 246);
}

.ace-tm .ace_constant.ace_library {
  color: rgb(6, 150, 14);
}

.ace-tm .ace_invalid {
  background-color: rgba(255, 0, 0, 0.1);
  color: red;
}

.ace-tm .ace_support.ace_function {
  color: rgb(60, 76, 114);
}

.ace-tm .ace_support.ace_constant {
  color: rgb(6, 150, 14);
}

.ace-tm .ace_support.ace_type,
.ace-tm .ace_support.ace_class {
  color: rgb(109, 121, 222);
}

.ace-tm .ace_keyword.ace_operator {
  color: rgb(104, 118, 135);
}

.ace-tm .ace_string {
  color: rgb(3, 106, 7);
}

.ace-tm .ace_comment {
  color: rgb(76, 136, 107);
}

.ace-tm .ace_comment.ace_doc {
  color: rgb(0, 102, 255);
}

.ace-tm .ace_comment.ace_doc.ace_tag {
  color: rgb(128, 159, 191);
}

.ace-tm .ace_constant.ace_numeric {
  color: rgb(0, 0, 205);
}

.ace-tm .ace_variable {
  color: rgb(49, 132, 149);
}

.ace-tm .ace_xml-pe {
  color: rgb(104, 104, 91);
}

.ace-tm .ace_entity.ace_name.ace_function {
  color: #0000A2;
}


.ace-tm .ace_heading {
  color: rgb(12, 7, 255);
}

.ace-tm .ace_list {
  color:rgb(185, 6, 144);
}

.ace-tm .ace_meta.ace_tag {
  color:rgb(0, 22, 142);
}

.ace-tm .ace_string.ace_regex {
  color: rgb(255, 0, 0)
}

.ace-tm .ace_marker-layer .ace_selection {
  background: rgb(181, 213, 255);
}
.ace-tm.ace_multiselect .ace_selection.ace_start {
  box-shadow: 0 0 3px 0px white;
}
.ace-tm .ace_marker-layer .ace_step {
  background: rgb(252, 255, 0);
}

.ace-tm .ace_marker-layer .ace_stack {
  background: rgb(164, 229, 101);
}

.ace-tm .ace_marker-layer .ace_bracket {
  margin: -1px 0 0 -1px;
  border: 1px solid rgb(192, 192, 192);
}

.ace-tm .ace_marker-layer .ace_active-line {
  background: rgba(0, 0, 0, 0.07);
}

.ace-tm .ace_gutter-active-line {
    background-color : #dcdcdc;
}

.ace-tm .ace_marker-layer .ace_selected-word {
  background: rgb(250, 250, 255);
  border: 1px solid rgb(200, 200, 250);
}

.ace-tm .ace_indent-guide {
  background: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAACCAYAAACZgbYnAAAAE0lEQVQImWP4////f4bLly//BwAmVgd1/w11/gAAAABJRU5ErkJggg==") right repeat-y;
}

.ace-tm .ace_indent-guide-active {
  background: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAACCAYAAACZgbYnAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAIGNIUk0AAHolAACAgwAA+f8AAIDpAAB1MAAA6mAAADqYAAAXb5JfxUYAAAAZSURBVHjaYvj///9/hivKyv8BAAAA//8DACLqBhbvk+/eAAAAAElFTkSuQmCC") right repeat-y;
}
`}),ace.define("ace/theme/textmate",["require","exports","module","ace/theme/textmate.css","ace/lib/dom"],function(e,a,m){a.isDark=!1,a.cssClass="ace-tm",a.cssText=e("./textmate.css"),a.$id="ace/theme/textmate";var h=e("../lib/dom");h.importCssString(a.cssText,a.cssClass,!1)}),ace.define("ace/config",["require","exports","module","ace/lib/lang","ace/lib/oop","ace/lib/net","ace/lib/dom","ace/lib/app_config","ace/theme/textmate"],function(e,a,m){"no use strict";var h=e("./lib/lang");e("./lib/oop");var p=e("./lib/net"),u=e("./lib/dom"),c=e("./lib/app_config").AppConfig;m.exports=a=new c;var f={packaged:!1,workerPath:null,modePath:null,themePath:null,basePath:"",suffix:".js",$moduleUrls:{},loadWorkerFromBlob:!0,sharedPopups:!1,useStrictCSP:null};a.get=function(o){if(!f.hasOwnProperty(o))throw new Error("Unknown config key: "+o);return f[o]},a.set=function(o,l){if(f.hasOwnProperty(o))f[o]=l;else if(this.setDefaultValue("",o,l)==!1)throw new Error("Unknown config key: "+o);o=="useStrictCSP"&&u.useStrictCSP(l)},a.all=function(){return h.copyObject(f)},a.$modes={},a.moduleUrl=function(o,l){if(f.$moduleUrls[o])return f.$moduleUrls[o];var d=o.split("/");l=l||d[d.length-2]||"";var v=l=="snippets"?"/":"-",y=d[d.length-1];if(l=="worker"&&v=="-"){var x=new RegExp("^"+l+"[\\-_]|[\\-_]"+l+"$","g");y=y.replace(x,"")}(!y||y==l)&&d.length>1&&(y=d[d.length-2]);var E=f[l+"Path"];return E==null?E=f.basePath:v=="/"&&(l=v=""),E&&E.slice(-1)!="/"&&(E+="/"),E+l+v+y+this.get("suffix")},a.setModuleUrl=function(o,l){return f.$moduleUrls[o]=l};var n=function(o,l){return o==="ace/theme/textmate"||o==="./theme/textmate"?l(null,e("./theme/textmate")):console.error("loader is not configured")};a.setLoader=function(o){n=o},a.dynamicModules=Object.create(null),a.$loading={},a.loadModule=function(o,l){var d,v;Array.isArray(o)&&(v=o[0],o=o[1]);var y=function(x){if(x&&!a.$loading[o])return l&&l(x);if(a.$loading[o]||(a.$loading[o]=[]),a.$loading[o].push(l),!(a.$loading[o].length>1)){var E=function(){n(o,function(T,k){a._emit("load.module",{name:o,module:k});var b=a.$loading[o];a.$loading[o]=null,b.forEach(function(S){S&&S(k)})})};if(!a.get("packaged"))return E();p.loadScript(a.moduleUrl(o,v),E),t()}};if(a.dynamicModules[o])a.dynamicModules[o]().then(function(x){x.default?y(x.default):y(x)});else{try{d=e(o)}catch{}y(d)}},a.setModuleLoader=function(o,l){a.dynamicModules[o]=l};var t=function(){!f.basePath&&!f.workerPath&&!f.modePath&&!f.themePath&&!Object.keys(f.$moduleUrls).length&&(console.error("Unable to infer path to ace from script src,","use ace.config.set('basePath', 'path') to enable dynamic loading of modes and themes","or with webpack use ace/webpack-resolver"),t=function(){})};a.version="1.15.3"}),ace.define("ace/loader_build",["require","exports","module","ace/lib/fixoldbrowsers","ace/config"],function(e,a,m){e("./lib/fixoldbrowsers");var h=e("./config");h.setLoader(function(f,n){e([f],function(t){n(null,t)})});var p=function(){return this||typeof window<"u"&&window}();m.exports=function(f){h.init=u,f.require=e},u(!0);function u(f){if(!(!p||!p.document)){h.set("packaged",f||e.packaged||m.packaged||p.define&&(void 0).packaged);var n={},t="",o=document.currentScript||document._currentScript,l=o&&o.ownerDocument||document;o&&o.src&&(t=o.src.split(/[?#]/)[0].split("/").slice(0,-1).join("/")||"");for(var d=l.getElementsByTagName("script"),v=0;v<d.length;v++){var y=d[v],x=y.src||y.getAttribute("src");if(x){for(var E=y.attributes,T=0,k=E.length;T<k;T++){var b=E[T];b.name.indexOf("data-ace-")===0&&(n[c(b.name.replace(/^data-ace-/,""))]=b.value)}var S=x.match(/^(.*)\/ace([\-.]\w+)?\.js(\?|$)/);S&&(t=S[1])}}t&&(n.base=n.base||t,n.packaged=!0),n.basePath=n.base,n.workerPath=n.workerPath||n.base,n.modePath=n.modePath||n.base,n.themePath=n.themePath||n.base,delete n.base;for(var A in n)typeof n[A]<"u"&&h.set(A,n[A])}}function c(f){return f.replace(/-(.)/g,function(n,t){return t.toUpperCase()})}}),ace.define("ace/lib/keys",["require","exports","module","ace/lib/oop"],function(e,a,m){/*! @license
	==========================================================================
	SproutCore -- JavaScript Application Framework
	copyright 2006-2009, Sprout Systems Inc., Apple Inc. and contributors.

	Permission is hereby granted, free of charge, to any person obtaining a
	copy of this software and associated documentation files (the "Software"),
	to deal in the Software without restriction, including without limitation
	the rights to use, copy, modify, merge, publish, distribute, sublicense,
	and/or sell copies of the Software, and to permit persons to whom the
	Software is furnished to do so, subject to the following conditions:

	The above copyright notice and this permission notice shall be included in
	all copies or substantial portions of the Software.

	THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
	IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
	FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
	AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
	LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
	FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER
	DEALINGS IN THE SOFTWARE.

	SproutCore and the SproutCore logo are trademarks of Sprout Systems, Inc.

	For more information about SproutCore, visit http://www.sproutcore.com


	==========================================================================
	@license */var h=e("./oop"),p=function(){var u={MODIFIER_KEYS:{16:"Shift",17:"Ctrl",18:"Alt",224:"Meta",91:"MetaLeft",92:"MetaRight",93:"ContextMenu"},KEY_MODS:{ctrl:1,alt:2,option:2,shift:4,super:8,meta:8,command:8,cmd:8,control:1},FUNCTION_KEYS:{8:"Backspace",9:"Tab",13:"Return",19:"Pause",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"Print",45:"Insert",46:"Delete",96:"Numpad0",97:"Numpad1",98:"Numpad2",99:"Numpad3",100:"Numpad4",101:"Numpad5",102:"Numpad6",103:"Numpad7",104:"Numpad8",105:"Numpad9","-13":"NumpadEnter",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"Numlock",145:"Scrolllock"},PRINTABLE_KEYS:{32:" ",48:"0",49:"1",50:"2",51:"3",52:"4",53:"5",54:"6",55:"7",56:"8",57:"9",59:";",61:"=",65:"a",66:"b",67:"c",68:"d",69:"e",70:"f",71:"g",72:"h",73:"i",74:"j",75:"k",76:"l",77:"m",78:"n",79:"o",80:"p",81:"q",82:"r",83:"s",84:"t",85:"u",86:"v",87:"w",88:"x",89:"y",90:"z",107:"+",109:"-",110:".",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",111:"/",106:"*"}};u.PRINTABLE_KEYS[173]="-";var c,f;for(f in u.FUNCTION_KEYS)c=u.FUNCTION_KEYS[f].toLowerCase(),u[c]=parseInt(f,10);for(f in u.PRINTABLE_KEYS)c=u.PRINTABLE_KEYS[f].toLowerCase(),u[c]=parseInt(f,10);return h.mixin(u,u.MODIFIER_KEYS),h.mixin(u,u.PRINTABLE_KEYS),h.mixin(u,u.FUNCTION_KEYS),u.enter=u.return,u.escape=u.esc,u.del=u.delete,function(){for(var n=["cmd","ctrl","alt","shift"],t=Math.pow(2,n.length);t--;)u.KEY_MODS[t]=n.filter(function(o){return t&u.KEY_MODS[o]}).join("-")+"-"}(),u.KEY_MODS[0]="",u.KEY_MODS[-1]="input-",u}();h.mixin(a,p),a.keyCodeToString=function(u){var c=p[u];return typeof c!="string"&&(c=String.fromCharCode(u)),c.toLowerCase()}}),ace.define("ace/lib/event",["require","exports","module","ace/lib/keys","ace/lib/useragent"],function(e,a,m){var h=e("./keys"),p=e("./useragent"),u=null,c=0,f;function n(){f=!1;try{document.createComment("").addEventListener("test",function(){},{get passive(){f={passive:!1}}})}catch{}}function t(){return f==null&&n(),f}function o(T,k,b){this.elem=T,this.type=k,this.callback=b}o.prototype.destroy=function(){d(this.elem,this.type,this.callback),this.elem=this.type=this.callback=void 0};var l=a.addListener=function(T,k,b,S){T.addEventListener(k,b,t()),S&&S.$toDestroy.push(new o(T,k,b))},d=a.removeListener=function(T,k,b){T.removeEventListener(k,b,t())};a.stopEvent=function(T){return a.stopPropagation(T),a.preventDefault(T),!1},a.stopPropagation=function(T){T.stopPropagation&&T.stopPropagation()},a.preventDefault=function(T){T.preventDefault&&T.preventDefault()},a.getButton=function(T){return T.type=="dblclick"?0:T.type=="contextmenu"||p.isMac&&T.ctrlKey&&!T.altKey&&!T.shiftKey?2:T.button},a.capture=function(T,k,b){var S=T&&T.ownerDocument||document;function A(C){k&&k(C),b&&b(C),d(S,"mousemove",k),d(S,"mouseup",A),d(S,"dragstart",A)}return l(S,"mousemove",k),l(S,"mouseup",A),l(S,"dragstart",A),A},a.addMouseWheelListener=function(T,k,b){l(T,"wheel",function(S){var A=.15,C=S.deltaX||0,R=S.deltaY||0;switch(S.deltaMode){case S.DOM_DELTA_PIXEL:S.wheelX=C*A,S.wheelY=R*A;break;case S.DOM_DELTA_LINE:var g=15;S.wheelX=C*g,S.wheelY=R*g;break;case S.DOM_DELTA_PAGE:var w=150;S.wheelX=C*w,S.wheelY=R*w;break}k(S)},b)},a.addMultiMouseDownListener=function(T,k,b,S,A){var C=0,R,g,w,$={2:"dblclick",3:"tripleclick",4:"quadclick"};function L(M){if(a.getButton(M)!==0?C=0:M.detail>1?(C++,C>4&&(C=1)):C=1,p.isIE){var O=Math.abs(M.clientX-R)>5||Math.abs(M.clientY-g)>5;(!w||O)&&(C=1),w&&clearTimeout(w),w=setTimeout(function(){w=null},k[C-1]||600),C==1&&(R=M.clientX,g=M.clientY)}if(M._clicks=C,b[S]("mousedown",M),C>4)C=0;else if(C>1)return b[S]($[C],M)}Array.isArray(T)||(T=[T]),T.forEach(function(M){l(M,"mousedown",L,A)})};var v=function(T){return 0|(T.ctrlKey?1:0)|(T.altKey?2:0)|(T.shiftKey?4:0)|(T.metaKey?8:0)};a.getModifierString=function(T){return h.KEY_MODS[v(T)]};function y(T,k,b){var S=v(k);if(!p.isMac&&u){if(k.getModifierState&&(k.getModifierState("OS")||k.getModifierState("Win"))&&(S|=8),u.altGr)if((3&S)!=3)u.altGr=0;else return;if(b===18||b===17){var A="location"in k?k.location:k.keyLocation;if(b===17&&A===1)u[b]==1&&(c=k.timeStamp);else if(b===18&&S===3&&A===2){var C=k.timeStamp-c;C<50&&(u.altGr=!0)}}}if(b in h.MODIFIER_KEYS&&(b=-1),!S&&b===13){var A="location"in k?k.location:k.keyLocation;if(A===3&&(T(k,S,-b),k.defaultPrevented))return}if(p.isChromeOS&&S&8){if(T(k,S,b),k.defaultPrevented)return;S&=-9}return!S&&!(b in h.FUNCTION_KEYS)&&!(b in h.PRINTABLE_KEYS)?!1:T(k,S,b)}a.addCommandKeyListener=function(T,k,b){if(p.isOldGecko||p.isOpera&&!("KeyboardEvent"in window)){var S=null;l(T,"keydown",function(C){S=C.keyCode},b),l(T,"keypress",function(C){return y(k,C,S)},b)}else{var A=null;l(T,"keydown",function(C){u[C.keyCode]=(u[C.keyCode]||0)+1;var R=y(k,C,C.keyCode);return A=C.defaultPrevented,R},b),l(T,"keypress",function(C){A&&(C.ctrlKey||C.altKey||C.shiftKey||C.metaKey)&&(a.stopEvent(C),A=null)},b),l(T,"keyup",function(C){u[C.keyCode]=null},b),u||(x(),l(window,"focus",x))}};function x(){u=Object.create(null)}if(typeof window=="object"&&window.postMessage&&!p.isOldIE){var E=1;a.nextTick=function(T,k){k=k||window;var b="zero-timeout-message-"+E++,S=function(A){A.data==b&&(a.stopPropagation(A),d(k,"message",S),T())};l(k,"message",S),k.postMessage(b,"*")}}a.$idleBlocked=!1,a.onIdle=function(T,k){return setTimeout(function b(){a.$idleBlocked?setTimeout(b,100):T()},k)},a.$idleBlockId=null,a.blockIdle=function(T){a.$idleBlockId&&clearTimeout(a.$idleBlockId),a.$idleBlocked=!0,a.$idleBlockId=setTimeout(function(){a.$idleBlocked=!1},T||100)},a.nextFrame=typeof window=="object"&&(window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame||window.oRequestAnimationFrame),a.nextFrame?a.nextFrame=a.nextFrame.bind(window):a.nextFrame=function(T){setTimeout(T,17)}}),ace.define("ace/range",["require","exports","module"],function(e,a,m){var h=function(u,c){return u.row-c.row||u.column-c.column},p=function(u,c,f,n){this.start={row:u,column:c},this.end={row:f,column:n}};(function(){this.isEqual=function(u){return this.start.row===u.start.row&&this.end.row===u.end.row&&this.start.column===u.start.column&&this.end.column===u.end.column},this.toString=function(){return"Range: ["+this.start.row+"/"+this.start.column+"] -> ["+this.end.row+"/"+this.end.column+"]"},this.contains=function(u,c){return this.compare(u,c)==0},this.compareRange=function(u){var c,f=u.end,n=u.start;return c=this.compare(f.row,f.column),c==1?(c=this.compare(n.row,n.column),c==1?2:c==0?1:0):c==-1?-2:(c=this.compare(n.row,n.column),c==-1?-1:c==1?42:0)},this.comparePoint=function(u){return this.compare(u.row,u.column)},this.containsRange=function(u){return this.comparePoint(u.start)==0&&this.comparePoint(u.end)==0},this.intersects=function(u){var c=this.compareRange(u);return c==-1||c==0||c==1},this.isEnd=function(u,c){return this.end.row==u&&this.end.column==c},this.isStart=function(u,c){return this.start.row==u&&this.start.column==c},this.setStart=function(u,c){typeof u=="object"?(this.start.column=u.column,this.start.row=u.row):(this.start.row=u,this.start.column=c)},this.setEnd=function(u,c){typeof u=="object"?(this.end.column=u.column,this.end.row=u.row):(this.end.row=u,this.end.column=c)},this.inside=function(u,c){return this.compare(u,c)==0?!(this.isEnd(u,c)||this.isStart(u,c)):!1},this.insideStart=function(u,c){return this.compare(u,c)==0?!this.isEnd(u,c):!1},this.insideEnd=function(u,c){return this.compare(u,c)==0?!this.isStart(u,c):!1},this.compare=function(u,c){return!this.isMultiLine()&&u===this.start.row?c<this.start.column?-1:c>this.end.column?1:0:u<this.start.row?-1:u>this.end.row?1:this.start.row===u?c>=this.start.column?0:-1:this.end.row===u?c<=this.end.column?0:1:0},this.compareStart=function(u,c){return this.start.row==u&&this.start.column==c?-1:this.compare(u,c)},this.compareEnd=function(u,c){return this.end.row==u&&this.end.column==c?1:this.compare(u,c)},this.compareInside=function(u,c){return this.end.row==u&&this.end.column==c?1:this.start.row==u&&this.start.column==c?-1:this.compare(u,c)},this.clipRows=function(u,c){if(this.end.row>c)var f={row:c+1,column:0};else if(this.end.row<u)var f={row:u,column:0};if(this.start.row>c)var n={row:c+1,column:0};else if(this.start.row<u)var n={row:u,column:0};return p.fromPoints(n||this.start,f||this.end)},this.extend=function(u,c){var f=this.compare(u,c);if(f==0)return this;if(f==-1)var n={row:u,column:c};else var t={row:u,column:c};return p.fromPoints(n||this.start,t||this.end)},this.isEmpty=function(){return this.start.row===this.end.row&&this.start.column===this.end.column},this.isMultiLine=function(){return this.start.row!==this.end.row},this.clone=function(){return p.fromPoints(this.start,this.end)},this.collapseRows=function(){return this.end.column==0?new p(this.start.row,0,Math.max(this.start.row,this.end.row-1),0):new p(this.start.row,0,this.end.row,0)},this.toScreenRange=function(u){var c=u.documentToScreenPosition(this.start),f=u.documentToScreenPosition(this.end);return new p(c.row,c.column,f.row,f.column)},this.moveBy=function(u,c){this.start.row+=u,this.start.column+=c,this.end.row+=u,this.end.column+=c}}).call(p.prototype),p.fromPoints=function(u,c){return new p(u.row,u.column,c.row,c.column)},p.comparePoints=h,p.comparePoints=function(u,c){return u.row-c.row||u.column-c.column},a.Range=p}),ace.define("ace/clipboard",["require","exports","module"],function(e,a,m){var h;m.exports={lineMode:!1,pasteCancelled:function(){return h&&h>Date.now()-50?!0:h=!1},cancel:function(){h=Date.now()}}}),ace.define("ace/keyboard/textinput",["require","exports","module","ace/lib/event","ace/lib/useragent","ace/lib/dom","ace/lib/lang","ace/clipboard","ace/lib/keys"],function(e,a,m){var h=e("../lib/event"),p=e("../lib/useragent"),u=e("../lib/dom"),c=e("../lib/lang"),f=e("../clipboard"),n=p.isChrome<18,t=p.isIE,o=p.isChrome>63,l=400,d=e("../lib/keys"),v=d.KEY_MODS,y=p.isIOS,x=y?/\s/:/\n/,E=p.isMobile,T=function(k,b){var S=u.createElement("textarea");S.className="ace_text-input",S.setAttribute("wrap","off"),S.setAttribute("autocorrect","off"),S.setAttribute("autocapitalize","off"),S.setAttribute("spellcheck",!1),S.style.opacity="0",k.insertBefore(S,k.firstChild);var A=!1,C=!1,R=!1,g=!1,w="";E||(S.style.fontSize="1px");var $=!1,L=!1,M="",O=0,I=0,B=0;try{var H=document.activeElement===S}catch{}this.setAriaOptions=function(J){J.activeDescendant?(S.setAttribute("aria-haspopup","true"),S.setAttribute("aria-autocomplete","list"),S.setAttribute("aria-activedescendant",J.activeDescendant)):(S.setAttribute("aria-haspopup","false"),S.setAttribute("aria-autocomplete","both"),S.removeAttribute("aria-activedescendant")),J.role&&S.setAttribute("role",J.role)},this.setAriaOptions({role:"textbox"}),h.addListener(S,"blur",function(J){L||(b.onBlur(J),H=!1)},b),h.addListener(S,"focus",function(J){if(!L){if(H=!0,p.isEdge)try{if(!document.hasFocus())return}catch{}b.onFocus(J),p.isEdge?setTimeout(K):K()}},b),this.$focusScroll=!1,this.focus=function(){if(w||o||this.$focusScroll=="browser")return S.focus({preventScroll:!0});var J=S.style.top;S.style.position="fixed",S.style.top="0px";try{var ue=S.getBoundingClientRect().top!=0}catch{return}var de=[];if(ue)for(var me=S.parentElement;me&&me.nodeType==1;)de.push(me),me.setAttribute("ace_nocontext",!0),!me.parentElement&&me.getRootNode?me=me.getRootNode().host:me=me.parentElement;S.focus({preventScroll:!0}),ue&&de.forEach(function(we){we.removeAttribute("ace_nocontext")}),setTimeout(function(){S.style.position="",S.style.top=="0px"&&(S.style.top=J)},0)},this.blur=function(){S.blur()},this.isFocused=function(){return H},b.on("beforeEndOperation",function(){var J=b.curOp,ue=J&&J.command&&J.command.name;if(ue!="insertstring"){var de=ue&&(J.docChanged||J.selectionChanged);R&&de&&(M=S.value="",Ae()),K()}});var K=y?function(J){if(!(!H||A&&!J||g)){J||(J="");var ue=`
 ab`+J+`cde fg
`;ue!=S.value&&(S.value=M=ue);var de=4,me=4+(J.length||(b.selection.isEmpty()?0:1));(O!=de||I!=me)&&S.setSelectionRange(de,me),O=de,I=me}}:function(){if(!(R||g)&&!(!H&&!z)){R=!0;var J=0,ue=0,de="";if(b.session){var me=b.selection,we=me.getRange(),ke=me.cursor.row;if(J=we.start.column,ue=we.end.column,de=b.session.getLine(ke),we.start.row!=ke){var xe=b.session.getLine(ke-1);J=we.start.row<ke-1?0:J,ue+=xe.length+1,de=xe+`
`+de}else if(we.end.row!=ke){var $e=b.session.getLine(ke+1);ue=we.end.row>ke+1?$e.length:ue,ue+=de.length+1,de=de+`
`+$e}else E&&ke>0&&(de=`
`+de,ue+=1,J+=1);de.length>l&&(J<l&&ue<l?de=de.slice(0,l):(de=`
`,J==ue?J=ue=0:(J=0,ue=1)))}var Se=de+`

`;if(Se!=M&&(S.value=M=Se,O=I=Se.length),z&&(O=S.selectionStart,I=S.selectionEnd),I!=ue||O!=J||S.selectionEnd!=I)try{S.setSelectionRange(J,ue),O=J,I=ue}catch{}R=!1}};this.resetSelection=K,H&&b.onFocus();var j=function(J){return J.selectionStart===0&&J.selectionEnd>=M.length&&J.value===M&&M&&J.selectionEnd!==I},Y=function(J){R||(A?A=!1:j(S)?(b.selectAll(),K()):E&&S.selectionStart!=O&&K())},Q=null;this.setInputHandler=function(J){Q=J},this.getInputHandler=function(){return Q};var z=!1,V=function(J,ue){if(z&&(z=!1),C)return K(),J&&b.onPaste(J),C=!1,"";for(var de=S.selectionStart,me=S.selectionEnd,we=O,ke=M.length-I,xe=J,$e=J.length-de,Se=J.length-me,ve=0;we>0&&M[ve]==J[ve];)ve++,we--;for(xe=xe.slice(ve),ve=1;ke>0&&M.length-ve>O-1&&M[M.length-ve]==J[J.length-ve];)ve++,ke--;$e-=ve-1,Se-=ve-1;var We=xe.length-ve+1;if(We<0&&(we=-We,We=0),xe=xe.slice(0,We),!ue&&!xe&&!$e&&!we&&!ke&&!Se)return"";g=!0;var st=!1;return p.isAndroid&&xe==". "&&(xe="  ",st=!0),xe&&!we&&!ke&&!$e&&!Se||$?b.onTextInput(xe):b.onTextInput(xe,{extendLeft:we,extendRight:ke,restoreStart:$e,restoreEnd:Se}),g=!1,M=J,O=de,I=me,B=Se,st?`
`:xe},X=function(J){if(R)return ye();if(J&&J.inputType){if(J.inputType=="historyUndo")return b.execCommand("undo");if(J.inputType=="historyRedo")return b.execCommand("redo")}var ue=S.value,de=V(ue,!0);(ue.length>l+100||x.test(de)||E&&O<1&&O==I)&&K()},ie=function(J,ue,de){var me=J.clipboardData||window.clipboardData;if(!(!me||n)){var we=t||de?"Text":"text/plain";try{return ue?me.setData(we,ue)!==!1:me.getData(we)}catch(ke){if(!de)return ie(ke,ue,!0)}}},se=function(J,ue){var de=b.getCopyText();if(!de)return h.preventDefault(J);ie(J,de)?(y&&(K(de),A=de,setTimeout(function(){A=!1},10)),ue?b.onCut():b.onCopy(),h.preventDefault(J)):(A=!0,S.value=de,S.select(),setTimeout(function(){A=!1,K(),ue?b.onCut():b.onCopy()}))},ee=function(J){se(J,!0)},re=function(J){se(J,!1)},ae=function(J){var ue=ie(J);f.pasteCancelled()||(typeof ue=="string"?(ue&&b.onPaste(ue,J),p.isIE&&setTimeout(K),h.preventDefault(J)):(S.value="",C=!0))};h.addCommandKeyListener(S,b.onCommandKey.bind(b),b),h.addListener(S,"select",Y,b),h.addListener(S,"input",X,b),h.addListener(S,"cut",ee,b),h.addListener(S,"copy",re,b),h.addListener(S,"paste",ae,b),(!("oncut"in S)||!("oncopy"in S)||!("onpaste"in S))&&h.addListener(k,"keydown",function(J){if(!(p.isMac&&!J.metaKey||!J.ctrlKey))switch(J.keyCode){case 67:re(J);break;case 86:ae(J);break;case 88:ee(J);break}},b);var he=function(J){if(!(R||!b.onCompositionStart||b.$readOnly)&&(R={},!$)){J.data&&(R.useTextareaForIME=!1),setTimeout(ye,0),b._signal("compositionStart"),b.on("mousedown",Ce);var ue=b.getSelectionRange();ue.end.row=ue.start.row,ue.end.column=ue.start.column,R.markerRange=ue,R.selectionStart=O,b.onCompositionStart(R),R.useTextareaForIME?(M=S.value="",O=0,I=0):(S.msGetInputContext&&(R.context=S.msGetInputContext()),S.getInputContext&&(R.context=S.getInputContext()))}},ye=function(){if(!(!R||!b.onCompositionUpdate||b.$readOnly)){if($)return Ce();if(R.useTextareaForIME)b.onCompositionUpdate(S.value);else{var J=S.value;V(J),R.markerRange&&(R.context&&(R.markerRange.start.column=R.selectionStart=R.context.compositionStartOffset),R.markerRange.end.column=R.markerRange.start.column+I-R.selectionStart+B)}}},Ae=function(J){!b.onCompositionEnd||b.$readOnly||(R=!1,b.onCompositionEnd(),b.off("mousedown",Ce),J&&X())};function Ce(){L=!0,S.blur(),S.focus(),L=!1}var _e=c.delayedCall(ye,50).schedule.bind(null,null);function Ne(J){J.keyCode==27&&S.value.length<S.selectionStart&&(R||(M=S.value),O=I=-1,K()),_e()}h.addListener(S,"compositionstart",he,b),h.addListener(S,"compositionupdate",ye,b),h.addListener(S,"keyup",Ne,b),h.addListener(S,"keydown",_e,b),h.addListener(S,"compositionend",Ae,b),this.getElement=function(){return S},this.setCommandMode=function(J){$=J,S.readOnly=!1},this.setReadOnly=function(J){$||(S.readOnly=J)},this.setCopyWithEmptySelection=function(J){},this.onContextMenu=function(J){z=!0,K(),b._emit("nativecontextmenu",{target:b,domEvent:J}),this.moveToMouse(J,!0)},this.moveToMouse=function(J,ue){w||(w=S.style.cssText),S.style.cssText=(ue?"z-index:100000;":"")+(p.isIE?"opacity:0.1;":"")+"text-indent: -"+(O+I)*b.renderer.characterWidth*.5+"px;";var de=b.container.getBoundingClientRect(),me=u.computedStyle(b.container),we=de.top+(parseInt(me.borderTopWidth)||0),ke=de.left+(parseInt(de.borderLeftWidth)||0),xe=de.bottom-we-S.clientHeight-2,$e=function(Se){u.translate(S,Se.clientX-ke-2,Math.min(Se.clientY-we-2,xe))};$e(J),J.type=="mousedown"&&(b.renderer.$isMousePressed=!0,clearTimeout(Qe),p.isWin&&h.capture(b.container,$e,Ve))},this.onContextMenuClose=Ve;var Qe;function Ve(){clearTimeout(Qe),Qe=setTimeout(function(){w&&(S.style.cssText=w,w=""),b.renderer.$isMousePressed=!1,b.renderer.$keepTextAreaAtCursor&&b.renderer.$moveTextAreaToCursor()},0)}var bt=function(J){b.textInput.onContextMenu(J),Ve()};h.addListener(S,"mouseup",bt,b),h.addListener(S,"mousedown",function(J){J.preventDefault(),Ve()},b),h.addListener(b.renderer.scroller,"contextmenu",bt,b),h.addListener(S,"contextmenu",bt,b),y&&Ht(k,b,S);function Ht(J,ue,de){var me=null,we=!1;de.addEventListener("keydown",function(xe){me&&clearTimeout(me),we=!0},!0),de.addEventListener("keyup",function(xe){me=setTimeout(function(){we=!1},100)},!0);var ke=function(xe){if(document.activeElement===de&&!(we||R||ue.$mouseHandler.isMousePressed)&&!A){var $e=de.selectionStart,Se=de.selectionEnd,ve=null,We=0;if($e==0?ve=d.up:$e==1?ve=d.home:Se>I&&M[Se]==`
`?ve=d.end:$e<O&&M[$e-1]==" "?(ve=d.left,We=v.option):$e<O||$e==O&&I!=O&&$e==Se?ve=d.left:Se>I&&M.slice(0,Se).split(`
`).length>2?ve=d.down:Se>I&&M[Se-1]==" "?(ve=d.right,We=v.option):(Se>I||Se==I&&I!=O&&$e==Se)&&(ve=d.right),$e!==Se&&(We|=v.shift),ve){var st=ue.onCommandKey({},We,ve);if(!st&&ue.commands){ve=d.keyCodeToString(ve);var Tt=ue.commands.findKeyCommand(We,ve);Tt&&ue.execCommand(Tt)}O=$e,I=Se,K("")}}};document.addEventListener("selectionchange",ke),ue.on("destroy",function(){document.removeEventListener("selectionchange",ke)})}this.destroy=function(){S.parentElement&&S.parentElement.removeChild(S)}};a.TextInput=T,a.$setUserAgentForTests=function(k,b){E=k,y=b}}),ace.define("ace/mouse/default_handlers",["require","exports","module","ace/lib/useragent"],function(e,a,m){var h=e("../lib/useragent"),p=0,u=550;function c(t){t.$clickSelection=null;var o=t.editor;o.setDefaultHandler("mousedown",this.onMouseDown.bind(t)),o.setDefaultHandler("dblclick",this.onDoubleClick.bind(t)),o.setDefaultHandler("tripleclick",this.onTripleClick.bind(t)),o.setDefaultHandler("quadclick",this.onQuadClick.bind(t)),o.setDefaultHandler("mousewheel",this.onMouseWheel.bind(t));var l=["select","startSelect","selectEnd","selectAllEnd","selectByWordsEnd","selectByLinesEnd","dragWait","dragWaitEnd","focusWait"];l.forEach(function(d){t[d]=this[d]},this),t.selectByLines=this.extendSelectionBy.bind(t,"getLineRange"),t.selectByWords=this.extendSelectionBy.bind(t,"getWordRange")}(function(){this.onMouseDown=function(t){var o=t.inSelection(),l=t.getDocumentPosition();this.mousedownEvent=t;var d=this.editor,v=t.getButton();if(v!==0){var y=d.getSelectionRange(),x=y.isEmpty();(x||v==1)&&d.selection.moveToPosition(l),v==2&&(d.textInput.onContextMenu(t.domEvent),h.isMozilla||t.preventDefault());return}if(this.mousedownEvent.time=Date.now(),o&&!d.isFocused()&&(d.focus(),this.$focusTimeout&&!this.$clickSelection&&!d.inMultiSelectMode)){this.setState("focusWait"),this.captureMouse(t);return}return this.captureMouse(t),this.startSelect(l,t.domEvent._clicks>1),t.preventDefault()},this.startSelect=function(t,o){t=t||this.editor.renderer.screenToTextCoordinates(this.x,this.y);var l=this.editor;this.mousedownEvent&&(this.mousedownEvent.getShiftKey()?l.selection.selectToPosition(t):o||l.selection.moveToPosition(t),o||this.select(),l.setStyle("ace_selecting"),this.setState("select"))},this.select=function(){var t,o=this.editor,l=o.renderer.screenToTextCoordinates(this.x,this.y);if(this.$clickSelection){var d=this.$clickSelection.comparePoint(l);if(d==-1)t=this.$clickSelection.end;else if(d==1)t=this.$clickSelection.start;else{var v=n(this.$clickSelection,l);l=v.cursor,t=v.anchor}o.selection.setSelectionAnchor(t.row,t.column)}o.selection.selectToPosition(l),o.renderer.scrollCursorIntoView()},this.extendSelectionBy=function(t){var o,l=this.editor,d=l.renderer.screenToTextCoordinates(this.x,this.y),v=l.selection[t](d.row,d.column);if(this.$clickSelection){var y=this.$clickSelection.comparePoint(v.start),x=this.$clickSelection.comparePoint(v.end);if(y==-1&&x<=0)o=this.$clickSelection.end,(v.end.row!=d.row||v.end.column!=d.column)&&(d=v.start);else if(x==1&&y>=0)o=this.$clickSelection.start,(v.start.row!=d.row||v.start.column!=d.column)&&(d=v.end);else if(y==-1&&x==1)d=v.end,o=v.start;else{var E=n(this.$clickSelection,d);d=E.cursor,o=E.anchor}l.selection.setSelectionAnchor(o.row,o.column)}l.selection.selectToPosition(d),l.renderer.scrollCursorIntoView()},this.selectEnd=this.selectAllEnd=this.selectByWordsEnd=this.selectByLinesEnd=function(){this.$clickSelection=null,this.editor.unsetStyle("ace_selecting")},this.focusWait=function(){var t=f(this.mousedownEvent.x,this.mousedownEvent.y,this.x,this.y),o=Date.now();(t>p||o-this.mousedownEvent.time>this.$focusTimeout)&&this.startSelect(this.mousedownEvent.getDocumentPosition())},this.onDoubleClick=function(t){var o=t.getDocumentPosition(),l=this.editor,d=l.session,v=d.getBracketRange(o);v?(v.isEmpty()&&(v.start.column--,v.end.column++),this.setState("select")):(v=l.selection.getWordRange(o.row,o.column),this.setState("selectByWords")),this.$clickSelection=v,this.select()},this.onTripleClick=function(t){var o=t.getDocumentPosition(),l=this.editor;this.setState("selectByLines");var d=l.getSelectionRange();d.isMultiLine()&&d.contains(o.row,o.column)?(this.$clickSelection=l.selection.getLineRange(d.start.row),this.$clickSelection.end=l.selection.getLineRange(d.end.row).end):this.$clickSelection=l.selection.getLineRange(o.row),this.select()},this.onQuadClick=function(t){var o=this.editor;o.selectAll(),this.$clickSelection=o.getSelectionRange(),this.setState("selectAll")},this.onMouseWheel=function(t){if(!t.getAccelKey()){t.getShiftKey()&&t.wheelY&&!t.wheelX&&(t.wheelX=t.wheelY,t.wheelY=0);var o=this.editor;this.$lastScroll||(this.$lastScroll={t:0,vx:0,vy:0,allowed:0});var l=this.$lastScroll,d=t.domEvent.timeStamp,v=d-l.t,y=v?t.wheelX/v:l.vx,x=v?t.wheelY/v:l.vy;v<u&&(y=(y+l.vx)/2,x=(x+l.vy)/2);var E=Math.abs(y/x),T=!1;if(E>=1&&o.renderer.isScrollableBy(t.wheelX*t.speed,0)&&(T=!0),E<=1&&o.renderer.isScrollableBy(0,t.wheelY*t.speed)&&(T=!0),T)l.allowed=d;else if(d-l.allowed<u){var k=Math.abs(y)<=1.5*Math.abs(l.vx)&&Math.abs(x)<=1.5*Math.abs(l.vy);k?(T=!0,l.allowed=d):l.allowed=0}if(l.t=d,l.vx=y,l.vy=x,T)return o.renderer.scrollBy(t.wheelX*t.speed,t.wheelY*t.speed),t.stop()}}}).call(c.prototype),a.DefaultHandlers=c;function f(t,o,l,d){return Math.sqrt(Math.pow(l-t,2)+Math.pow(d-o,2))}function n(t,o){if(t.start.row==t.end.row)var l=2*o.column-t.start.column-t.end.column;else if(t.start.row==t.end.row-1&&!t.start.column&&!t.end.column)var l=o.column-4;else var l=2*o.row-t.start.row-t.end.row;return l<0?{cursor:t.start,anchor:t.end}:{cursor:t.end,anchor:t.start}}}),ace.define("ace/tooltip",["require","exports","module","ace/lib/oop","ace/lib/dom"],function(e,a,m){e("./lib/oop");var h=e("./lib/dom"),p="ace_tooltip";function u(c){this.isOpen=!1,this.$element=null,this.$parentNode=c}(function(){this.$init=function(){return this.$element=h.createElement("div"),this.$element.className=p,this.$element.style.display="none",this.$parentNode.appendChild(this.$element),this.$element},this.getElement=function(){return this.$element||this.$init()},this.setText=function(c){this.getElement().textContent=c},this.setHtml=function(c){this.getElement().innerHTML=c},this.setPosition=function(c,f){this.getElement().style.left=c+"px",this.getElement().style.top=f+"px"},this.setClassName=function(c){h.addCssClass(this.getElement(),c)},this.show=function(c,f,n){c!=null&&this.setText(c),f!=null&&n!=null&&this.setPosition(f,n),this.isOpen||(this.getElement().style.display="block",this.isOpen=!0)},this.hide=function(){this.isOpen&&(this.getElement().style.display="none",this.getElement().className=p,this.isOpen=!1)},this.getHeight=function(){return this.getElement().offsetHeight},this.getWidth=function(){return this.getElement().offsetWidth},this.destroy=function(){this.isOpen=!1,this.$element&&this.$element.parentNode&&this.$element.parentNode.removeChild(this.$element)}}).call(u.prototype),a.Tooltip=u}),ace.define("ace/mouse/default_gutter_handler",["require","exports","module","ace/lib/dom","ace/lib/oop","ace/lib/event","ace/tooltip"],function(e,a,m){var h=e("../lib/dom"),p=e("../lib/oop"),u=e("../lib/event"),c=e("../tooltip").Tooltip;function f(t){var o=t.editor,l=o.renderer.$gutterLayer,d=new n(o.container);t.editor.setDefaultHandler("guttermousedown",function(b){if(!(!o.isFocused()||b.getButton()!=0)){var S=l.getRegion(b);if(S!="foldWidgets"){var A=b.getDocumentPosition().row,C=o.session.selection;if(b.getShiftKey())C.selectTo(A,0);else{if(b.domEvent.detail==2)return o.selectAll(),b.preventDefault();t.$clickSelection=o.selection.getLineRange(A)}return t.setState("selectByLines"),t.captureMouse(b),b.preventDefault()}}});var v,y,x;function E(){var b=y.getDocumentPosition().row,S=l.$annotations[b];if(!S)return T();var A=o.session.getLength();if(b==A){var C=o.renderer.pixelToScreenCoordinates(0,y.y).row,R=y.$pos;if(C>o.session.documentToScreenRow(R.row,R.column))return T()}if(x!=S){x=S.text.join("<br/>"),d.setHtml(x);var g=S.className;if(g&&d.setClassName(g.trim()),d.show(),o._signal("showGutterTooltip",d),o.on("mousewheel",T),t.$tooltipFollowsMouse)k(y);else{var w=y.domEvent.target,$=w.getBoundingClientRect(),L=d.getElement().style;L.left=$.right+"px",L.top=$.bottom+"px"}}}function T(){v&&(v=clearTimeout(v)),x&&(d.hide(),x=null,o._signal("hideGutterTooltip",d),o.off("mousewheel",T))}function k(b){d.setPosition(b.x,b.y)}t.editor.setDefaultHandler("guttermousemove",function(b){var S=b.domEvent.target||b.domEvent.srcElement;if(h.hasCssClass(S,"ace_fold-widget"))return T();x&&t.$tooltipFollowsMouse&&k(b),y=b,!v&&(v=setTimeout(function(){v=null,y&&!t.isMousePressed?E():T()},50))}),u.addListener(o.renderer.$gutter,"mouseout",function(b){y=null,!(!x||v)&&(v=setTimeout(function(){v=null,T()},50))},o),o.on("changeSession",T)}function n(t){c.call(this,t)}p.inherits(n,c),function(){this.setPosition=function(t,o){var l=window.innerWidth||document.documentElement.clientWidth,d=window.innerHeight||document.documentElement.clientHeight,v=this.getWidth(),y=this.getHeight();t+=15,o+=15,t+v>l&&(t-=t+v-l),o+y>d&&(o-=20+y),c.prototype.setPosition.call(this,t,o)}}.call(n.prototype),a.GutterHandler=f}),ace.define("ace/mouse/mouse_event",["require","exports","module","ace/lib/event","ace/lib/useragent"],function(e,a,m){var h=e("../lib/event"),p=e("../lib/useragent"),u=a.MouseEvent=function(c,f){this.domEvent=c,this.editor=f,this.x=this.clientX=c.clientX,this.y=this.clientY=c.clientY,this.$pos=null,this.$inSelection=null,this.propagationStopped=!1,this.defaultPrevented=!1};(function(){this.stopPropagation=function(){h.stopPropagation(this.domEvent),this.propagationStopped=!0},this.preventDefault=function(){h.preventDefault(this.domEvent),this.defaultPrevented=!0},this.stop=function(){this.stopPropagation(),this.preventDefault()},this.getDocumentPosition=function(){return this.$pos?this.$pos:(this.$pos=this.editor.renderer.screenToTextCoordinates(this.clientX,this.clientY),this.$pos)},this.inSelection=function(){if(this.$inSelection!==null)return this.$inSelection;var c=this.editor,f=c.getSelectionRange();if(f.isEmpty())this.$inSelection=!1;else{var n=this.getDocumentPosition();this.$inSelection=f.contains(n.row,n.column)}return this.$inSelection},this.getButton=function(){return h.getButton(this.domEvent)},this.getShiftKey=function(){return this.domEvent.shiftKey},this.getAccelKey=p.isMac?function(){return this.domEvent.metaKey}:function(){return this.domEvent.ctrlKey}}).call(u.prototype)}),ace.define("ace/mouse/dragdrop_handler",["require","exports","module","ace/lib/dom","ace/lib/event","ace/lib/useragent"],function(e,a,m){var h=e("../lib/dom"),p=e("../lib/event"),u=e("../lib/useragent"),c=200,f=200,n=5;function t(l){var d=l.editor,v=h.createElement("div");v.style.cssText="top:-100px;position:absolute;z-index:2147483647;opacity:0.5",v.textContent=" ";var y=["dragWait","dragWaitEnd","startDrag","dragReadyEnd","onMouseDrag"];y.forEach(function(z){l[z]=this[z]},this),d.on("mousedown",this.onMouseDown.bind(l));var x=d.container,E,T,k,b,S,A,C=0,R,g,w,$,L;this.onDragStart=function(z){if(this.cancelDrag||!x.draggable){var V=this;return setTimeout(function(){V.startSelect(),V.captureMouse(z)},0),z.preventDefault()}S=d.getSelectionRange();var X=z.dataTransfer;X.effectAllowed=d.getReadOnly()?"copy":"copyMove",d.container.appendChild(v),X.setDragImage&&X.setDragImage(v,0,0),setTimeout(function(){d.container.removeChild(v)}),X.clearData(),X.setData("Text",d.session.getTextRange()),g=!0,this.setState("drag")},this.onDragEnd=function(z){if(x.draggable=!1,g=!1,this.setState(null),!d.getReadOnly()){var V=z.dataTransfer.dropEffect;!R&&V=="move"&&d.session.remove(d.getSelectionRange()),d.$resetCursorStyle()}this.editor.unsetStyle("ace_dragging"),this.editor.renderer.setCursorStyle("")},this.onDragEnter=function(z){if(!(d.getReadOnly()||!Y(z.dataTransfer)))return T=z.clientX,k=z.clientY,E||B(),C++,z.dataTransfer.dropEffect=R=Q(z),p.preventDefault(z)},this.onDragOver=function(z){if(!(d.getReadOnly()||!Y(z.dataTransfer)))return T=z.clientX,k=z.clientY,E||(B(),C++),K!==null&&(K=null),z.dataTransfer.dropEffect=R=Q(z),p.preventDefault(z)},this.onDragLeave=function(z){if(C--,C<=0&&E)return H(),R=null,p.preventDefault(z)},this.onDrop=function(z){if(A){var V=z.dataTransfer;if(g)switch(R){case"move":S.contains(A.row,A.column)?S={start:A,end:A}:S=d.moveText(S,A);break;case"copy":S=d.moveText(S,A,!0);break}else{var X=V.getData("Text");S={start:A,end:d.session.insert(A,X)},d.focus(),R=null}return H(),p.preventDefault(z)}},p.addListener(x,"dragstart",this.onDragStart.bind(l),d),p.addListener(x,"dragend",this.onDragEnd.bind(l),d),p.addListener(x,"dragenter",this.onDragEnter.bind(l),d),p.addListener(x,"dragover",this.onDragOver.bind(l),d),p.addListener(x,"dragleave",this.onDragLeave.bind(l),d),p.addListener(x,"drop",this.onDrop.bind(l),d);function M(z,V){var X=Date.now(),ie=!V||z.row!=V.row,se=!V||z.column!=V.column;if(!$||ie||se)d.moveCursorToPosition(z),$=X,L={x:T,y:k};else{var ee=o(L.x,L.y,T,k);ee>n?$=null:X-$>=f&&(d.renderer.scrollCursorIntoView(),$=null)}}function O(z,V){var X=Date.now(),ie=d.renderer.layerConfig.lineHeight,se=d.renderer.layerConfig.characterWidth,ee=d.renderer.scroller.getBoundingClientRect(),re={x:{left:T-ee.left,right:ee.right-T},y:{top:k-ee.top,bottom:ee.bottom-k}},ae=Math.min(re.x.left,re.x.right),he=Math.min(re.y.top,re.y.bottom),ye={row:z.row,column:z.column};ae/se<=2&&(ye.column+=re.x.left<re.x.right?-3:2),he/ie<=1&&(ye.row+=re.y.top<re.y.bottom?-1:1);var Ae=z.row!=ye.row,Ce=z.column!=ye.column,_e=!V||z.row!=V.row;Ae||Ce&&!_e?w?X-w>=c&&d.renderer.scrollCursorIntoView(ye):w=X:w=null}function I(){var z=A;A=d.renderer.screenToTextCoordinates(T,k),M(A,z),O(A,z)}function B(){S=d.selection.toOrientedRange(),E=d.session.addMarker(S,"ace_selection",d.getSelectionStyle()),d.clearSelection(),d.isFocused()&&d.renderer.$cursorLayer.setBlinking(!1),clearInterval(b),I(),b=setInterval(I,20),C=0,p.addListener(document,"mousemove",j)}function H(){clearInterval(b),d.session.removeMarker(E),E=null,d.selection.fromOrientedRange(S),d.isFocused()&&!g&&d.$resetCursorStyle(),S=null,A=null,C=0,w=null,$=null,p.removeListener(document,"mousemove",j)}var K=null;function j(){K==null&&(K=setTimeout(function(){K!=null&&E&&H()},20))}function Y(z){var V=z.types;return!V||Array.prototype.some.call(V,function(X){return X=="text/plain"||X=="Text"})}function Q(z){var V=["copy","copymove","all","uninitialized"],X=["move","copymove","linkmove","all","uninitialized"],ie=u.isMac?z.altKey:z.ctrlKey,se="uninitialized";try{se=z.dataTransfer.effectAllowed.toLowerCase()}catch{}var ee="none";return ie&&V.indexOf(se)>=0?ee="copy":X.indexOf(se)>=0?ee="move":V.indexOf(se)>=0&&(ee="copy"),ee}}(function(){this.dragWait=function(){var l=Date.now()-this.mousedownEvent.time;l>this.editor.getDragDelay()&&this.startDrag()},this.dragWaitEnd=function(){var l=this.editor.container;l.draggable=!1,this.startSelect(this.mousedownEvent.getDocumentPosition()),this.selectEnd()},this.dragReadyEnd=function(l){this.editor.$resetCursorStyle(),this.editor.unsetStyle("ace_dragging"),this.editor.renderer.setCursorStyle(""),this.dragWaitEnd()},this.startDrag=function(){this.cancelDrag=!1;var l=this.editor,d=l.container;d.draggable=!0,l.renderer.$cursorLayer.setBlinking(!1),l.setStyle("ace_dragging");var v=u.isWin?"default":"move";l.renderer.setCursorStyle(v),this.setState("dragReady")},this.onMouseDrag=function(l){var d=this.editor.container;if(u.isIE&&this.state=="dragReady"){var v=o(this.mousedownEvent.x,this.mousedownEvent.y,this.x,this.y);v>3&&d.dragDrop()}if(this.state==="dragWait"){var v=o(this.mousedownEvent.x,this.mousedownEvent.y,this.x,this.y);v>0&&(d.draggable=!1,this.startSelect(this.mousedownEvent.getDocumentPosition()))}},this.onMouseDown=function(l){if(this.$dragEnabled){this.mousedownEvent=l;var d=this.editor,v=l.inSelection(),y=l.getButton(),x=l.domEvent.detail||1;if(x===1&&y===0&&v){if(l.editor.inMultiSelectMode&&(l.getAccelKey()||l.getShiftKey()))return;this.mousedownEvent.time=Date.now();var E=l.domEvent.target||l.domEvent.srcElement;if("unselectable"in E&&(E.unselectable="on"),d.getDragDelay()){if(u.isWebKit){this.cancelDrag=!0;var T=d.container;T.draggable=!0}this.setState("dragWait")}else this.startDrag();this.captureMouse(l,this.onMouseDrag.bind(this)),l.defaultPrevented=!0}}}}).call(t.prototype);function o(l,d,v,y){return Math.sqrt(Math.pow(v-l,2)+Math.pow(y-d,2))}a.DragdropHandler=t}),ace.define("ace/mouse/touch_handler",["require","exports","module","ace/mouse/mouse_event","ace/lib/event","ace/lib/dom"],function(e,a,m){var h=e("./mouse_event").MouseEvent,p=e("../lib/event"),u=e("../lib/dom");a.addTouchListeners=function(c,f){var n="scroll",t,o,l,d,v,y,x=0,E,T=0,k=0,b=0,S,A;function C(){var M=window.navigator&&window.navigator.clipboard,O=!1,I=function(){var H=f.getCopyText(),K=f.session.getUndoManager().hasUndo();A.replaceChild(u.buildDom(O?["span",!H&&["span",{class:"ace_mobile-button",action:"selectall"},"Select All"],H&&["span",{class:"ace_mobile-button",action:"copy"},"Copy"],H&&["span",{class:"ace_mobile-button",action:"cut"},"Cut"],M&&["span",{class:"ace_mobile-button",action:"paste"},"Paste"],K&&["span",{class:"ace_mobile-button",action:"undo"},"Undo"],["span",{class:"ace_mobile-button",action:"find"},"Find"],["span",{class:"ace_mobile-button",action:"openCommandPallete"},"Palette"]]:["span"]),A.firstChild)},B=function(H){var K=H.target.getAttribute("action");if(K=="more"||!O)return O=!O,I();K=="paste"?M.readText().then(function(j){f.execCommand(K,j)}):K&&((K=="cut"||K=="copy")&&(M?M.writeText(f.getCopyText()):document.execCommand("copy")),f.execCommand(K)),A.firstChild.style.display="none",O=!1,K!="openCommandPallete"&&f.focus()};A=u.buildDom(["div",{class:"ace_mobile-menu",ontouchstart:function(H){n="menu",H.stopPropagation(),H.preventDefault(),f.textInput.focus()},ontouchend:function(H){H.stopPropagation(),H.preventDefault(),B(H)},onclick:B},["span"],["span",{class:"ace_mobile-button",action:"more"},"..."]],f.container)}function R(){A||C();var M=f.selection.cursor,O=f.renderer.textToScreenCoordinates(M.row,M.column),I=f.renderer.textToScreenCoordinates(0,0).pageX,B=f.renderer.scrollLeft,H=f.container.getBoundingClientRect();A.style.top=O.pageY-H.top-3+"px",O.pageX-H.left<H.width-70?(A.style.left="",A.style.right="10px"):(A.style.right="",A.style.left=I+B-H.left+"px"),A.style.display="",A.firstChild.style.display="none",f.on("input",g)}function g(M){A&&(A.style.display="none"),f.off("input",g)}function w(){v=null,clearTimeout(v);var M=f.selection.getRange(),O=M.contains(E.row,E.column);(M.isEmpty()||!O)&&(f.selection.moveToPosition(E),f.selection.selectWord()),n="wait",R()}function $(){v=null,clearTimeout(v),f.selection.moveToPosition(E);var M=T>=2?f.selection.getLineRange(E.row):f.session.getBracketRange(E);M&&!M.isEmpty()?f.selection.setRange(M):f.selection.selectWord(),n="wait"}p.addListener(c,"contextmenu",function(M){if(S){var O=f.textInput.getElement();O.focus()}},f),p.addListener(c,"touchstart",function(M){var O=M.touches;if(v||O.length>1){clearTimeout(v),v=null,l=-1,n="zoom";return}S=f.$mouseHandler.isMousePressed=!0;var I=f.renderer.layerConfig.lineHeight,B=f.renderer.layerConfig.lineHeight,H=M.timeStamp;d=H;var K=O[0],j=K.clientX,Y=K.clientY;Math.abs(t-j)+Math.abs(o-Y)>I&&(l=-1),t=M.clientX=j,o=M.clientY=Y,k=b=0;var Q=new h(M,f);if(E=Q.getDocumentPosition(),H-l<500&&O.length==1&&!x)T++,M.preventDefault(),M.button=0,$();else{T=0;var z=f.selection.cursor,V=f.selection.isEmpty()?z:f.selection.anchor,X=f.renderer.$cursorLayer.getPixelPosition(z,!0),ie=f.renderer.$cursorLayer.getPixelPosition(V,!0),se=f.renderer.scroller.getBoundingClientRect(),ee=f.renderer.layerConfig.offset,re=f.renderer.scrollLeft,ae=function(Ae,Ce){return Ae=Ae/B,Ce=Ce/I-.75,Ae*Ae+Ce*Ce};if(M.clientX<se.left){n="zoom";return}var he=ae(M.clientX-se.left-X.left+re,M.clientY-se.top-X.top+ee),ye=ae(M.clientX-se.left-ie.left+re,M.clientY-se.top-ie.top+ee);he<3.5&&ye<3.5&&(n=he>ye?"cursor":"anchor"),ye<3.5?n="anchor":he<3.5?n="cursor":n="scroll",v=setTimeout(w,450)}l=H},f),p.addListener(c,"touchend",function(M){S=f.$mouseHandler.isMousePressed=!1,y&&clearInterval(y),n=="zoom"?(n="",x=0):v?(f.selection.moveToPosition(E),x=0,R()):n=="scroll"?(L(),g()):R(),clearTimeout(v),v=null},f),p.addListener(c,"touchmove",function(M){v&&(clearTimeout(v),v=null);var O=M.touches;if(!(O.length>1||n=="zoom")){var I=O[0],B=t-I.clientX,H=o-I.clientY;if(n=="wait")if(B*B+H*H>4)n="cursor";else return M.preventDefault();t=I.clientX,o=I.clientY,M.clientX=I.clientX,M.clientY=I.clientY;var K=M.timeStamp,j=K-d;if(d=K,n=="scroll"){var Y=new h(M,f);Y.speed=1,Y.wheelX=B,Y.wheelY=H,10*Math.abs(B)<Math.abs(H)&&(B=0),10*Math.abs(H)<Math.abs(B)&&(H=0),j!=0&&(k=B/j,b=H/j),f._emit("mousewheel",Y),Y.propagationStopped||(k=b=0)}else{var Q=new h(M,f),z=Q.getDocumentPosition();n=="cursor"?f.selection.moveCursorToPosition(z):n=="anchor"&&f.selection.setSelectionAnchor(z.row,z.column),f.renderer.scrollCursorIntoView(z),M.preventDefault()}}},f);function L(){x+=60,y=setInterval(function(){x--<=0&&(clearInterval(y),y=null),Math.abs(k)<.01&&(k=0),Math.abs(b)<.01&&(b=0),x<20&&(k=.9*k),x<20&&(b=.9*b);var M=f.session.getScrollTop();f.renderer.scrollBy(10*k,10*b),M==f.session.getScrollTop()&&(x=0)},10)}}}),ace.define("ace/mouse/mouse_handler",["require","exports","module","ace/lib/event","ace/lib/useragent","ace/mouse/default_handlers","ace/mouse/default_gutter_handler","ace/mouse/mouse_event","ace/mouse/dragdrop_handler","ace/mouse/touch_handler","ace/config"],function(e,a,m){var h=e("../lib/event"),p=e("../lib/useragent"),u=e("./default_handlers").DefaultHandlers,c=e("./default_gutter_handler").GutterHandler,f=e("./mouse_event").MouseEvent,n=e("./dragdrop_handler").DragdropHandler,t=e("./touch_handler").addTouchListeners,o=e("../config"),l=function(d){var v=this;this.editor=d,new u(this),new c(this),new n(this);var y=function(T){var k=!document.hasFocus||!document.hasFocus()||!d.isFocused()&&document.activeElement==(d.textInput&&d.textInput.getElement());k&&window.focus(),d.focus(),setTimeout(function(){d.isFocused()||d.focus()})},x=d.renderer.getMouseEventTarget();h.addListener(x,"click",this.onMouseEvent.bind(this,"click"),d),h.addListener(x,"mousemove",this.onMouseMove.bind(this,"mousemove"),d),h.addMultiMouseDownListener([x,d.renderer.scrollBarV&&d.renderer.scrollBarV.inner,d.renderer.scrollBarH&&d.renderer.scrollBarH.inner,d.textInput&&d.textInput.getElement()].filter(Boolean),[400,300,250],this,"onMouseEvent",d),h.addMouseWheelListener(d.container,this.onMouseWheel.bind(this,"mousewheel"),d),t(d.container,d);var E=d.renderer.$gutter;h.addListener(E,"mousedown",this.onMouseEvent.bind(this,"guttermousedown"),d),h.addListener(E,"click",this.onMouseEvent.bind(this,"gutterclick"),d),h.addListener(E,"dblclick",this.onMouseEvent.bind(this,"gutterdblclick"),d),h.addListener(E,"mousemove",this.onMouseEvent.bind(this,"guttermousemove"),d),h.addListener(x,"mousedown",y,d),h.addListener(E,"mousedown",y,d),p.isIE&&d.renderer.scrollBarV&&(h.addListener(d.renderer.scrollBarV.element,"mousedown",y,d),h.addListener(d.renderer.scrollBarH.element,"mousedown",y,d)),d.on("mousemove",function(T){if(!(v.state||v.$dragDelay||!v.$dragEnabled)){var k=d.renderer.screenToTextCoordinates(T.x,T.y),b=d.session.selection.getRange(),S=d.renderer;!b.isEmpty()&&b.insideStart(k.row,k.column)?S.setCursorStyle("default"):S.setCursorStyle("")}},d)};(function(){this.onMouseEvent=function(d,v){this.editor.session&&this.editor._emit(d,new f(v,this.editor))},this.onMouseMove=function(d,v){var y=this.editor._eventRegistry&&this.editor._eventRegistry.mousemove;!y||!y.length||this.editor._emit(d,new f(v,this.editor))},this.onMouseWheel=function(d,v){var y=new f(v,this.editor);y.speed=this.$scrollSpeed*2,y.wheelX=v.wheelX,y.wheelY=v.wheelY,this.editor._emit(d,y)},this.setState=function(d){this.state=d},this.captureMouse=function(d,v){this.x=d.x,this.y=d.y,this.isMousePressed=!0;var y=this.editor,x=this.editor.renderer;x.$isMousePressed=!0;var E=this,T=function(C){if(C){if(p.isWebKit&&!C.which&&E.releaseMouse)return E.releaseMouse();E.x=C.clientX,E.y=C.clientY,v&&v(C),E.mouseEvent=new f(C,E.editor),E.$mouseMoved=!0}},k=function(C){y.off("beforeEndOperation",S),clearInterval(A),y.session&&b(),E[E.state+"End"]&&E[E.state+"End"](C),E.state="",E.isMousePressed=x.$isMousePressed=!1,x.$keepTextAreaAtCursor&&x.$moveTextAreaToCursor(),E.$onCaptureMouseMove=E.releaseMouse=null,C&&E.onMouseEvent("mouseup",C),y.endOperation()},b=function(){E[E.state]&&E[E.state](),E.$mouseMoved=!1};if(p.isOldIE&&d.domEvent.type=="dblclick")return setTimeout(function(){k(d)});var S=function(C){E.releaseMouse&&y.curOp.command.name&&y.curOp.selectionChanged&&(E[E.state+"End"]&&E[E.state+"End"](),E.state="",E.releaseMouse())};y.on("beforeEndOperation",S),y.startOperation({command:{name:"mouse"}}),E.$onCaptureMouseMove=T,E.releaseMouse=h.capture(this.editor.container,T,k);var A=setInterval(b,20)},this.releaseMouse=null,this.cancelContextMenu=function(){var d=function(v){v&&v.domEvent&&v.domEvent.type!="contextmenu"||(this.editor.off("nativecontextmenu",d),v&&v.domEvent&&h.stopEvent(v.domEvent))}.bind(this);setTimeout(d,10),this.editor.on("nativecontextmenu",d)},this.destroy=function(){this.releaseMouse&&this.releaseMouse()}}).call(l.prototype),o.defineOptions(l.prototype,"mouseHandler",{scrollSpeed:{initialValue:2},dragDelay:{initialValue:p.isMac?150:0},dragEnabled:{initialValue:!0},focusTimeout:{initialValue:0},tooltipFollowsMouse:{initialValue:!0}}),a.MouseHandler=l}),ace.define("ace/mouse/fold_handler",["require","exports","module","ace/lib/dom"],function(e,a,m){var h=e("../lib/dom");function p(u){u.on("click",function(c){var f=c.getDocumentPosition(),n=u.session,t=n.getFoldAt(f.row,f.column,1);t&&(c.getAccelKey()?n.removeFold(t):n.expandFold(t),c.stop());var o=c.domEvent&&c.domEvent.target;o&&h.hasCssClass(o,"ace_inline_button")&&h.hasCssClass(o,"ace_toggle_wrap")&&(n.setOption("wrap",!n.getUseWrapMode()),u.renderer.scrollCursorIntoView())}),u.on("gutterclick",function(c){var f=u.renderer.$gutterLayer.getRegion(c);if(f=="foldWidgets"){var n=c.getDocumentPosition().row,t=u.session;t.foldWidgets&&t.foldWidgets[n]&&u.session.onFoldWidgetClick(n,c),u.isFocused()||u.focus(),c.stop()}}),u.on("gutterdblclick",function(c){var f=u.renderer.$gutterLayer.getRegion(c);if(f=="foldWidgets"){var n=c.getDocumentPosition().row,t=u.session,o=t.getParentFoldRangeData(n,!0),l=o.range||o.firstRange;if(l){n=l.start.row;var d=t.getFoldAt(n,t.getLine(n).length,1);d?t.removeFold(d):(t.addFold("...",l),u.renderer.scrollCursorIntoView({row:l.start.row,column:0}))}c.stop()}})}a.FoldHandler=p}),ace.define("ace/keyboard/keybinding",["require","exports","module","ace/lib/keys","ace/lib/event"],function(e,a,m){var h=e("../lib/keys"),p=e("../lib/event"),u=function(c){this.$editor=c,this.$data={editor:c},this.$handlers=[],this.setDefaultHandler(c.commands)};(function(){this.setDefaultHandler=function(c){this.removeKeyboardHandler(this.$defaultHandler),this.$defaultHandler=c,this.addKeyboardHandler(c,0)},this.setKeyboardHandler=function(c){var f=this.$handlers;if(f[f.length-1]!=c){for(;f[f.length-1]&&f[f.length-1]!=this.$defaultHandler;)this.removeKeyboardHandler(f[f.length-1]);this.addKeyboardHandler(c,1)}},this.addKeyboardHandler=function(c,f){if(c){typeof c=="function"&&!c.handleKeyboard&&(c.handleKeyboard=c);var n=this.$handlers.indexOf(c);n!=-1&&this.$handlers.splice(n,1),f==null?this.$handlers.push(c):this.$handlers.splice(f,0,c),n==-1&&c.attach&&c.attach(this.$editor)}},this.removeKeyboardHandler=function(c){var f=this.$handlers.indexOf(c);return f==-1?!1:(this.$handlers.splice(f,1),c.detach&&c.detach(this.$editor),!0)},this.getKeyboardHandler=function(){return this.$handlers[this.$handlers.length-1]},this.getStatusText=function(){var c=this.$data,f=c.editor;return this.$handlers.map(function(n){return n.getStatusText&&n.getStatusText(f,c)||""}).filter(Boolean).join(" ")},this.$callKeyboardHandlers=function(c,f,n,t){for(var o,l=!1,d=this.$editor.commands,v=this.$handlers.length;v--&&(o=this.$handlers[v].handleKeyboard(this.$data,c,f,n,t),!(!(!o||!o.command)&&(o.command=="null"?l=!0:l=d.exec(o.command,this.$editor,o.args,t),l&&t&&c!=-1&&o.passEvent!=!0&&o.command.passEvent!=!0&&p.stopEvent(t),l))););return!l&&c==-1&&(o={command:"insertstring"},l=d.exec("insertstring",this.$editor,f)),l&&this.$editor._signal&&this.$editor._signal("keyboardActivity",o),l},this.onCommandKey=function(c,f,n){var t=h.keyCodeToString(n);return this.$callKeyboardHandlers(f,t,n,c)},this.onTextInput=function(c){return this.$callKeyboardHandlers(-1,c)}}).call(u.prototype),a.KeyBinding=u}),ace.define("ace/lib/bidiutil",["require","exports","module"],function(e,a,m){var h=0,p=0,u=!1,c=!1,f=!1,n=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],t=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],o=0,l=1,d=0,v=1,y=2,x=3,E=4,T=5,k=6,b=7,S=8,A=9,C=10,R=11,g=12,w=13,$=14,L=15,M=16,O=17,I=18,B=[I,I,I,I,I,I,I,I,I,k,T,k,S,T,I,I,I,I,I,I,I,I,I,I,I,I,I,I,T,T,T,k,S,E,E,R,R,R,E,E,E,E,E,C,A,C,A,A,y,y,y,y,y,y,y,y,y,y,A,E,E,E,E,E,E,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,E,E,E,E,E,E,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,E,E,E,E,I,I,I,I,I,I,T,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,I,A,E,R,R,R,R,E,E,E,E,d,E,E,I,E,E,R,R,y,y,E,d,E,E,E,y,d,E,E,E,E,E],H=[S,S,S,S,S,S,S,S,S,S,S,I,I,I,d,v,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,S,T,w,$,L,M,O,A,R,R,R,R,R,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,A,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,E,S];function K(z,V,X,ie){var se=h?t:n,ee=null,re=null,ae=null,he=0,ye=null,Ae=null,Ce=-1,_e=null,Ne=null,Qe=[];if(!ie)for(_e=0,ie=[];_e<X;_e++)ie[_e]=Q(z[_e]);for(p=h,u=!1,c=!1,f=!1,Ne=0;Ne<X;Ne++){if(ee=he,Qe[Ne]=re=Y(z,ie,Qe,Ne),he=se[ee][re],ye=he&240,he&=15,V[Ne]=ae=se[he][5],ye>0)if(ye==16){for(_e=Ce;_e<Ne;_e++)V[_e]=1;Ce=-1}else Ce=-1;if(Ae=se[he][6],Ae)Ce==-1&&(Ce=Ne);else if(Ce>-1){for(_e=Ce;_e<Ne;_e++)V[_e]=ae;Ce=-1}ie[Ne]==T&&(V[Ne]=0),p|=ae}if(f){for(_e=0;_e<X;_e++)if(ie[_e]==k){V[_e]=h;for(var Ve=_e-1;Ve>=0&&ie[Ve]==S;Ve--)V[Ve]=h}}}function j(z,V,X){if(!(p<z)){if(z==1&&h==l&&!c){X.reverse();return}for(var ie=X.length,se=0,ee,re,ae,he;se<ie;){if(V[se]>=z){for(ee=se+1;ee<ie&&V[ee]>=z;)ee++;for(re=se,ae=ee-1;re<ae;re++,ae--)he=X[re],X[re]=X[ae],X[ae]=he;se=ee}se++}}}function Y(z,V,X,ie){var se=V[ie],ee,re,ae,he;switch(se){case d:case v:u=!1;case E:case x:return se;case y:return u?x:y;case b:return u=!0,v;case S:return E;case A:return ie<1||ie+1>=V.length||(ee=X[ie-1])!=y&&ee!=x||(re=V[ie+1])!=y&&re!=x?E:(u&&(re=x),re==ee?re:E);case C:return ee=ie>0?X[ie-1]:T,ee==y&&ie+1<V.length&&V[ie+1]==y?y:E;case R:if(ie>0&&X[ie-1]==y)return y;if(u)return E;for(he=ie+1,ae=V.length;he<ae&&V[he]==R;)he++;return he<ae&&V[he]==y?y:E;case g:for(ae=V.length,he=ie+1;he<ae&&V[he]==g;)he++;if(he<ae){var ye=z[ie],Ae=ye>=1425&&ye<=2303||ye==64286;if(ee=V[he],Ae&&(ee==v||ee==b))return v}return ie<1||(ee=V[ie-1])==T?E:X[ie-1];case T:return u=!1,c=!0,h;case k:return f=!0,E;case w:case $:case M:case O:case L:u=!1;case I:return E}}function Q(z){var V=z.charCodeAt(0),X=V>>8;return X==0?V>191?d:B[V]:X==5?/[\u0591-\u05f4]/.test(z)?v:d:X==6?/[\u0610-\u061a\u064b-\u065f\u06d6-\u06e4\u06e7-\u06ed]/.test(z)?g:/[\u0660-\u0669\u066b-\u066c]/.test(z)?x:V==1642?R:/[\u06f0-\u06f9]/.test(z)?y:b:X==32&&V<=8287?H[V&255]:X==254&&V>=65136?b:E}a.L=d,a.R=v,a.EN=y,a.ON_R=3,a.AN=4,a.R_H=5,a.B=6,a.RLE=7,a.DOT="·",a.doBidiReorder=function(z,V,X){if(z.length<2)return{};var ie=z.split(""),se=new Array(ie.length),ee=new Array(ie.length),re=[];h=X?l:o,K(ie,re,ie.length,V);for(var ae=0;ae<se.length;se[ae]=ae,ae++);j(2,re,se),j(1,re,se);for(var ae=0;ae<se.length-1;ae++)V[ae]===x?re[ae]=a.AN:re[ae]===v&&(V[ae]>b&&V[ae]<w||V[ae]===E||V[ae]===I)?re[ae]=a.ON_R:ae>0&&ie[ae-1]==="ل"&&/\u0622|\u0623|\u0625|\u0627/.test(ie[ae])&&(re[ae-1]=re[ae]=a.R_H,ae++);ie[ie.length-1]===a.DOT&&(re[ie.length-1]=a.B),ie[0]==="‫"&&(re[0]=a.RLE);for(var ae=0;ae<se.length;ae++)ee[ae]=re[se[ae]];return{logicalFromVisual:se,bidiLevels:ee}},a.hasBidiCharacters=function(z,V){for(var X=!1,ie=0;ie<z.length;ie++)V[ie]=Q(z.charAt(ie)),!X&&(V[ie]==v||V[ie]==b||V[ie]==x)&&(X=!0);return X},a.getVisualFromLogicalIdx=function(z,V){for(var X=0;X<V.logicalFromVisual.length;X++)if(V.logicalFromVisual[X]==z)return X;return 0}}),ace.define("ace/bidihandler",["require","exports","module","ace/lib/bidiutil","ace/lib/lang"],function(e,a,m){var h=e("./lib/bidiutil"),p=e("./lib/lang"),u=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac\u202B]/,c=function(f){this.session=f,this.bidiMap={},this.currentRow=null,this.bidiUtil=h,this.charWidths=[],this.EOL="¬",this.showInvisibles=!0,this.isRtlDir=!1,this.$isRtl=!1,this.line="",this.wrapIndent=0,this.EOF="¶",this.RLE="‫",this.contentWidth=0,this.fontMetrics=null,this.rtlLineOffset=0,this.wrapOffset=0,this.isMoveLeftOperation=!1,this.seenBidi=u.test(f.getValue())};(function(){this.isBidiRow=function(f,n,t){return this.seenBidi?(f!==this.currentRow&&(this.currentRow=f,this.updateRowLine(n,t),this.updateBidiMap()),this.bidiMap.bidiLevels):!1},this.onChange=function(f){this.seenBidi?this.currentRow=null:f.action=="insert"&&u.test(f.lines.join(`
`))&&(this.seenBidi=!0,this.currentRow=null)},this.getDocumentRow=function(){var f=0,n=this.session.$screenRowCache;if(n.length){var t=this.session.$getRowCacheIndex(n,this.currentRow);t>=0&&(f=this.session.$docRowCache[t])}return f},this.getSplitIndex=function(){var f=0,n=this.session.$screenRowCache;if(n.length)for(var t,o=this.session.$getRowCacheIndex(n,this.currentRow);this.currentRow-f>0&&(t=this.session.$getRowCacheIndex(n,this.currentRow-f-1),t===o);)o=t,f++;else f=this.currentRow;return f},this.updateRowLine=function(f,n){f===void 0&&(f=this.getDocumentRow());var t=f===this.session.getLength()-1,o=t?this.EOF:this.EOL;if(this.wrapIndent=0,this.line=this.session.getLine(f),this.isRtlDir=this.$isRtl||this.line.charAt(0)===this.RLE,this.session.$useWrapMode){var l=this.session.$wrapData[f];l&&(n===void 0&&(n=this.getSplitIndex()),n>0&&l.length?(this.wrapIndent=l.indent,this.wrapOffset=this.wrapIndent*this.charWidths[h.L],this.line=n<l.length?this.line.substring(l[n-1],l[n]):this.line.substring(l[l.length-1])):this.line=this.line.substring(0,l[n]),n==l.length&&(this.line+=this.showInvisibles?o:h.DOT))}else this.line+=this.showInvisibles?o:h.DOT;var d=this.session,v=0,y;this.line=this.line.replace(/\t|[\u1100-\u2029, \u202F-\uFFE6]/g,function(x,E){return x==="	"||d.isFullWidth(x.charCodeAt(0))?(y=x==="	"?d.getScreenTabSize(E+v):2,v+=y-1,p.stringRepeat(h.DOT,y)):x}),this.isRtlDir&&(this.fontMetrics.$main.textContent=this.line.charAt(this.line.length-1)==h.DOT?this.line.substr(0,this.line.length-1):this.line,this.rtlLineOffset=this.contentWidth-this.fontMetrics.$main.getBoundingClientRect().width)},this.updateBidiMap=function(){var f=[];h.hasBidiCharacters(this.line,f)||this.isRtlDir?this.bidiMap=h.doBidiReorder(this.line,f,this.isRtlDir):this.bidiMap={}},this.markAsDirty=function(){this.currentRow=null},this.updateCharacterWidths=function(f){if(this.characterWidth!==f.$characterSize.width){this.fontMetrics=f;var n=this.characterWidth=f.$characterSize.width,t=f.$measureCharWidth("ה");this.charWidths[h.L]=this.charWidths[h.EN]=this.charWidths[h.ON_R]=n,this.charWidths[h.R]=this.charWidths[h.AN]=t,this.charWidths[h.R_H]=t*.45,this.charWidths[h.B]=this.charWidths[h.RLE]=0,this.currentRow=null}},this.setShowInvisibles=function(f){this.showInvisibles=f,this.currentRow=null},this.setEolChar=function(f){this.EOL=f},this.setContentWidth=function(f){this.contentWidth=f},this.isRtlLine=function(f){return this.$isRtl?!0:f!=null?this.session.getLine(f).charAt(0)==this.RLE:this.isRtlDir},this.setRtlDirection=function(f,n){for(var t=f.getCursorPosition(),o=f.selection.getSelectionAnchor().row;o<=t.row;o++)!n&&f.session.getLine(o).charAt(0)===f.session.$bidiHandler.RLE?f.session.doc.removeInLine(o,0,1):n&&f.session.getLine(o).charAt(0)!==f.session.$bidiHandler.RLE&&f.session.doc.insert({column:0,row:o},f.session.$bidiHandler.RLE)},this.getPosLeft=function(f){f-=this.wrapIndent;var n=this.line.charAt(0)===this.RLE?1:0,t=f>n?this.session.getOverwrite()?f:f-1:n,o=h.getVisualFromLogicalIdx(t,this.bidiMap),l=this.bidiMap.bidiLevels,d=0;!this.session.getOverwrite()&&f<=n&&l[o]%2!==0&&o++;for(var v=0;v<o;v++)d+=this.charWidths[l[v]];return!this.session.getOverwrite()&&f>n&&l[o]%2===0&&(d+=this.charWidths[l[o]]),this.wrapIndent&&(d+=this.isRtlDir?-1*this.wrapOffset:this.wrapOffset),this.isRtlDir&&(d+=this.rtlLineOffset),d},this.getSelections=function(f,n){var t=this.bidiMap,o=t.bidiLevels,l,d=[],v=0,y=Math.min(f,n)-this.wrapIndent,x=Math.max(f,n)-this.wrapIndent,E=!1,T=!1,k=0;this.wrapIndent&&(v+=this.isRtlDir?-1*this.wrapOffset:this.wrapOffset);for(var b,S=0;S<o.length;S++)b=t.logicalFromVisual[S],l=o[S],E=b>=y&&b<x,E&&!T?k=v:!E&&T&&d.push({left:k,width:v-k}),v+=this.charWidths[l],T=E;if(E&&S===o.length&&d.push({left:k,width:v-k}),this.isRtlDir)for(var A=0;A<d.length;A++)d[A].left+=this.rtlLineOffset;return d},this.offsetToCol=function(t){this.isRtlDir&&(t-=this.rtlLineOffset);var n=0,t=Math.max(t,0),o=0,l=0,d=this.bidiMap.bidiLevels,v=this.charWidths[d[l]];for(this.wrapIndent&&(t-=this.isRtlDir?-1*this.wrapOffset:this.wrapOffset);t>o+v/2;){if(o+=v,l===d.length-1){v=0;break}v=this.charWidths[d[++l]]}return l>0&&d[l-1]%2!==0&&d[l]%2===0?(t<o&&l--,n=this.bidiMap.logicalFromVisual[l]):l>0&&d[l-1]%2===0&&d[l]%2!==0?n=1+(t>o?this.bidiMap.logicalFromVisual[l]:this.bidiMap.logicalFromVisual[l-1]):this.isRtlDir&&l===d.length-1&&v===0&&d[l-1]%2===0||!this.isRtlDir&&l===0&&d[l]%2!==0?n=1+this.bidiMap.logicalFromVisual[l]:(l>0&&d[l-1]%2!==0&&v!==0&&l--,n=this.bidiMap.logicalFromVisual[l]),n===0&&this.isRtlDir&&n++,n+this.wrapIndent}}).call(c.prototype),a.BidiHandler=c}),ace.define("ace/selection",["require","exports","module","ace/lib/oop","ace/lib/lang","ace/lib/event_emitter","ace/range"],function(e,a,m){var h=e("./lib/oop"),p=e("./lib/lang"),u=e("./lib/event_emitter").EventEmitter,c=e("./range").Range,f=function(n){this.session=n,this.doc=n.getDocument(),this.clearSelection(),this.cursor=this.lead=this.doc.createAnchor(0,0),this.anchor=this.doc.createAnchor(0,0),this.$silent=!1;var t=this;this.cursor.on("change",function(o){t.$cursorChanged=!0,t.$silent||t._emit("changeCursor"),!t.$isEmpty&&!t.$silent&&t._emit("changeSelection"),!t.$keepDesiredColumnOnChange&&o.old.column!=o.value.column&&(t.$desiredColumn=null)}),this.anchor.on("change",function(){t.$anchorChanged=!0,!t.$isEmpty&&!t.$silent&&t._emit("changeSelection")})};(function(){h.implement(this,u),this.isEmpty=function(){return this.$isEmpty||this.anchor.row==this.lead.row&&this.anchor.column==this.lead.column},this.isMultiLine=function(){return!this.$isEmpty&&this.anchor.row!=this.cursor.row},this.getCursor=function(){return this.lead.getPosition()},this.setAnchor=function(n,t){this.$isEmpty=!1,this.anchor.setPosition(n,t)},this.setSelectionAnchor=this.setAnchor,this.getAnchor=function(){return this.$isEmpty?this.getSelectionLead():this.anchor.getPosition()},this.getSelectionAnchor=this.getAnchor,this.getSelectionLead=function(){return this.lead.getPosition()},this.isBackwards=function(){var n=this.anchor,t=this.lead;return n.row>t.row||n.row==t.row&&n.column>t.column},this.getRange=function(){var n=this.anchor,t=this.lead;return this.$isEmpty?c.fromPoints(t,t):this.isBackwards()?c.fromPoints(t,n):c.fromPoints(n,t)},this.clearSelection=function(){this.$isEmpty||(this.$isEmpty=!0,this._emit("changeSelection"))},this.selectAll=function(){this.$setSelection(0,0,Number.MAX_VALUE,Number.MAX_VALUE)},this.setRange=this.setSelectionRange=function(n,t){var o=t?n.end:n.start,l=t?n.start:n.end;this.$setSelection(o.row,o.column,l.row,l.column)},this.$setSelection=function(n,t,o,l){if(!this.$silent){var d=this.$isEmpty,v=this.inMultiSelectMode;this.$silent=!0,this.$cursorChanged=this.$anchorChanged=!1,this.anchor.setPosition(n,t),this.cursor.setPosition(o,l),this.$isEmpty=!c.comparePoints(this.anchor,this.cursor),this.$silent=!1,this.$cursorChanged&&this._emit("changeCursor"),(this.$cursorChanged||this.$anchorChanged||d!=this.$isEmpty||v)&&this._emit("changeSelection")}},this.$moveSelection=function(n){var t=this.lead;this.$isEmpty&&this.setSelectionAnchor(t.row,t.column),n.call(this)},this.selectTo=function(n,t){this.$moveSelection(function(){this.moveCursorTo(n,t)})},this.selectToPosition=function(n){this.$moveSelection(function(){this.moveCursorToPosition(n)})},this.moveTo=function(n,t){this.clearSelection(),this.moveCursorTo(n,t)},this.moveToPosition=function(n){this.clearSelection(),this.moveCursorToPosition(n)},this.selectUp=function(){this.$moveSelection(this.moveCursorUp)},this.selectDown=function(){this.$moveSelection(this.moveCursorDown)},this.selectRight=function(){this.$moveSelection(this.moveCursorRight)},this.selectLeft=function(){this.$moveSelection(this.moveCursorLeft)},this.selectLineStart=function(){this.$moveSelection(this.moveCursorLineStart)},this.selectLineEnd=function(){this.$moveSelection(this.moveCursorLineEnd)},this.selectFileEnd=function(){this.$moveSelection(this.moveCursorFileEnd)},this.selectFileStart=function(){this.$moveSelection(this.moveCursorFileStart)},this.selectWordRight=function(){this.$moveSelection(this.moveCursorWordRight)},this.selectWordLeft=function(){this.$moveSelection(this.moveCursorWordLeft)},this.getWordRange=function(n,t){if(typeof t>"u"){var o=n||this.lead;n=o.row,t=o.column}return this.session.getWordRange(n,t)},this.selectWord=function(){this.setSelectionRange(this.getWordRange())},this.selectAWord=function(){var n=this.getCursor(),t=this.session.getAWordRange(n.row,n.column);this.setSelectionRange(t)},this.getLineRange=function(n,t){var o=typeof n=="number"?n:this.lead.row,l,d=this.session.getFoldLine(o);return d?(o=d.start.row,l=d.end.row):l=o,t===!0?new c(o,0,l,this.session.getLine(l).length):new c(o,0,l+1,0)},this.selectLine=function(){this.setSelectionRange(this.getLineRange())},this.moveCursorUp=function(){this.moveCursorBy(-1,0)},this.moveCursorDown=function(){this.moveCursorBy(1,0)},this.wouldMoveIntoSoftTab=function(n,t,o){var l=n.column,d=n.column+t;return o<0&&(l=n.column-t,d=n.column),this.session.isTabStop(n)&&this.doc.getLine(n.row).slice(l,d).split(" ").length-1==t},this.moveCursorLeft=function(){var n=this.lead.getPosition(),t;if(t=this.session.getFoldAt(n.row,n.column,-1))this.moveCursorTo(t.start.row,t.start.column);else if(n.column===0)n.row>0&&this.moveCursorTo(n.row-1,this.doc.getLine(n.row-1).length);else{var o=this.session.getTabSize();this.wouldMoveIntoSoftTab(n,o,-1)&&!this.session.getNavigateWithinSoftTabs()?this.moveCursorBy(0,-o):this.moveCursorBy(0,-1)}},this.moveCursorRight=function(){var n=this.lead.getPosition(),t;if(t=this.session.getFoldAt(n.row,n.column,1))this.moveCursorTo(t.end.row,t.end.column);else if(this.lead.column==this.doc.getLine(this.lead.row).length)this.lead.row<this.doc.getLength()-1&&this.moveCursorTo(this.lead.row+1,0);else{var o=this.session.getTabSize(),n=this.lead;this.wouldMoveIntoSoftTab(n,o,1)&&!this.session.getNavigateWithinSoftTabs()?this.moveCursorBy(0,o):this.moveCursorBy(0,1)}},this.moveCursorLineStart=function(){var n=this.lead.row,t=this.lead.column,o=this.session.documentToScreenRow(n,t),l=this.session.screenToDocumentPosition(o,0),d=this.session.getDisplayLine(n,null,l.row,l.column),v=d.match(/^\s*/);v[0].length!=t&&!this.session.$useEmacsStyleLineStart&&(l.column+=v[0].length),this.moveCursorToPosition(l)},this.moveCursorLineEnd=function(){var n=this.lead,t=this.session.getDocumentLastRowColumnPosition(n.row,n.column);if(this.lead.column==t.column){var o=this.session.getLine(t.row);if(t.column==o.length){var l=o.search(/\s+$/);l>0&&(t.column=l)}}this.moveCursorTo(t.row,t.column)},this.moveCursorFileEnd=function(){var n=this.doc.getLength()-1,t=this.doc.getLine(n).length;this.moveCursorTo(n,t)},this.moveCursorFileStart=function(){this.moveCursorTo(0,0)},this.moveCursorLongWordRight=function(){var n=this.lead.row,t=this.lead.column,o=this.doc.getLine(n),l=o.substring(t);this.session.nonTokenRe.lastIndex=0,this.session.tokenRe.lastIndex=0;var d=this.session.getFoldAt(n,t,1);if(d){this.moveCursorTo(d.end.row,d.end.column);return}if(this.session.nonTokenRe.exec(l)&&(t+=this.session.nonTokenRe.lastIndex,this.session.nonTokenRe.lastIndex=0,l=o.substring(t)),t>=o.length){this.moveCursorTo(n,o.length),this.moveCursorRight(),n<this.doc.getLength()-1&&this.moveCursorWordRight();return}this.session.tokenRe.exec(l)&&(t+=this.session.tokenRe.lastIndex,this.session.tokenRe.lastIndex=0),this.moveCursorTo(n,t)},this.moveCursorLongWordLeft=function(){var n=this.lead.row,t=this.lead.column,o;if(o=this.session.getFoldAt(n,t,-1)){this.moveCursorTo(o.start.row,o.start.column);return}var l=this.session.getFoldStringAt(n,t,-1);l==null&&(l=this.doc.getLine(n).substring(0,t));var d=p.stringReverse(l);if(this.session.nonTokenRe.lastIndex=0,this.session.tokenRe.lastIndex=0,this.session.nonTokenRe.exec(d)&&(t-=this.session.nonTokenRe.lastIndex,d=d.slice(this.session.nonTokenRe.lastIndex),this.session.nonTokenRe.lastIndex=0),t<=0){this.moveCursorTo(n,0),this.moveCursorLeft(),n>0&&this.moveCursorWordLeft();return}this.session.tokenRe.exec(d)&&(t-=this.session.tokenRe.lastIndex,this.session.tokenRe.lastIndex=0),this.moveCursorTo(n,t)},this.$shortWordEndIndex=function(n){var t=0,o,l=/\s/,d=this.session.tokenRe;if(d.lastIndex=0,this.session.tokenRe.exec(n))t=this.session.tokenRe.lastIndex;else{for(;(o=n[t])&&l.test(o);)t++;if(t<1){for(d.lastIndex=0;(o=n[t])&&!d.test(o);)if(d.lastIndex=0,t++,l.test(o))if(t>2){t--;break}else{for(;(o=n[t])&&l.test(o);)t++;if(t>2)break}}}return d.lastIndex=0,t},this.moveCursorShortWordRight=function(){var n=this.lead.row,t=this.lead.column,o=this.doc.getLine(n),l=o.substring(t),d=this.session.getFoldAt(n,t,1);if(d)return this.moveCursorTo(d.end.row,d.end.column);if(t==o.length){var v=this.doc.getLength();do n++,l=this.doc.getLine(n);while(n<v&&/^\s*$/.test(l));/^\s+/.test(l)||(l=""),t=0}var y=this.$shortWordEndIndex(l);this.moveCursorTo(n,t+y)},this.moveCursorShortWordLeft=function(){var n=this.lead.row,t=this.lead.column,o;if(o=this.session.getFoldAt(n,t,-1))return this.moveCursorTo(o.start.row,o.start.column);var l=this.session.getLine(n).substring(0,t);if(t===0){do n--,l=this.doc.getLine(n);while(n>0&&/^\s*$/.test(l));t=l.length,/\s+$/.test(l)||(l="")}var d=p.stringReverse(l),v=this.$shortWordEndIndex(d);return this.moveCursorTo(n,t-v)},this.moveCursorWordRight=function(){this.session.$selectLongWords?this.moveCursorLongWordRight():this.moveCursorShortWordRight()},this.moveCursorWordLeft=function(){this.session.$selectLongWords?this.moveCursorLongWordLeft():this.moveCursorShortWordLeft()},this.moveCursorBy=function(n,t){var o=this.session.documentToScreenPosition(this.lead.row,this.lead.column),l;if(t===0&&(n!==0&&(this.session.$bidiHandler.isBidiRow(o.row,this.lead.row)?(l=this.session.$bidiHandler.getPosLeft(o.column),o.column=Math.round(l/this.session.$bidiHandler.charWidths[0])):l=o.column*this.session.$bidiHandler.charWidths[0]),this.$desiredColumn?o.column=this.$desiredColumn:this.$desiredColumn=o.column),n!=0&&this.session.lineWidgets&&this.session.lineWidgets[this.lead.row]){var d=this.session.lineWidgets[this.lead.row];n<0?n-=d.rowsAbove||0:n>0&&(n+=d.rowCount-(d.rowsAbove||0))}var v=this.session.screenToDocumentPosition(o.row+n,o.column,l);n!==0&&t===0&&v.row===this.lead.row&&(v.column,this.lead.column),this.moveCursorTo(v.row,v.column+t,t===0)},this.moveCursorToPosition=function(n){this.moveCursorTo(n.row,n.column)},this.moveCursorTo=function(n,t,o){var l=this.session.getFoldAt(n,t,1);l&&(n=l.start.row,t=l.start.column),this.$keepDesiredColumnOnChange=!0;var d=this.session.getLine(n);/[\uDC00-\uDFFF]/.test(d.charAt(t))&&d.charAt(t-1)&&(this.lead.row==n&&this.lead.column==t+1?t=t-1:t=t+1),this.lead.setPosition(n,t),this.$keepDesiredColumnOnChange=!1,o||(this.$desiredColumn=null)},this.moveCursorToScreen=function(n,t,o){var l=this.session.screenToDocumentPosition(n,t);this.moveCursorTo(l.row,l.column,o)},this.detach=function(){this.lead.detach(),this.anchor.detach()},this.fromOrientedRange=function(n){this.setSelectionRange(n,n.cursor==n.start),this.$desiredColumn=n.desiredColumn||this.$desiredColumn},this.toOrientedRange=function(n){var t=this.getRange();return n?(n.start.column=t.start.column,n.start.row=t.start.row,n.end.column=t.end.column,n.end.row=t.end.row):n=t,n.cursor=this.isBackwards()?n.start:n.end,n.desiredColumn=this.$desiredColumn,n},this.getRangeOfMovements=function(n){var t=this.getCursor();try{n(this);var o=this.getCursor();return c.fromPoints(t,o)}catch{return c.fromPoints(t,t)}finally{this.moveCursorToPosition(t)}},this.toJSON=function(){if(this.rangeCount)var n=this.ranges.map(function(t){var o=t.clone();return o.isBackwards=t.cursor==t.start,o});else{var n=this.getRange();n.isBackwards=this.isBackwards()}return n},this.fromJSON=function(n){if(n.start==null)if(this.rangeList&&n.length>1){this.toSingleRange(n[0]);for(var t=n.length;t--;){var o=c.fromPoints(n[t].start,n[t].end);n[t].isBackwards&&(o.cursor=o.start),this.addRange(o,!0)}return}else n=n[0];this.rangeList&&this.toSingleRange(n),this.setSelectionRange(n,n.isBackwards)},this.isEqual=function(n){if((n.length||this.rangeCount)&&n.length!=this.rangeCount)return!1;if(!n.length||!this.ranges)return this.getRange().isEqual(n);for(var t=this.ranges.length;t--;)if(!this.ranges[t].isEqual(n[t]))return!1;return!0}}).call(f.prototype),a.Selection=f}),ace.define("ace/tokenizer",["require","exports","module","ace/config"],function(e,a,m){var h=e("./config"),p=2e3,u=function(c){this.states=c,this.regExps={},this.matchMappings={};for(var f in this.states){for(var n=this.states[f],t=[],o=0,l=this.matchMappings[f]={defaultToken:"text"},d="g",v=[],y=0;y<n.length;y++){var x=n[y];if(x.defaultToken&&(l.defaultToken=x.defaultToken),x.caseInsensitive&&d.indexOf("i")===-1&&(d+="i"),x.unicode&&d.indexOf("u")===-1&&(d+="u"),x.regex!=null){x.regex instanceof RegExp&&(x.regex=x.regex.toString().slice(1,-1));var E=x.regex,T=new RegExp("(?:("+E+")|(.))").exec("a").length-2;Array.isArray(x.token)?x.token.length==1||T==1?x.token=x.token[0]:T-1!=x.token.length?(this.reportError("number of classes and regexp groups doesn't match",{rule:x,groupCount:T-1}),x.token=x.token[0]):(x.tokenArray=x.token,x.token=null,x.onMatch=this.$arrayTokens):typeof x.token=="function"&&!x.onMatch&&(T>1?x.onMatch=this.$applyToken:x.onMatch=x.token),T>1&&(/\\\d/.test(x.regex)?E=x.regex.replace(/\\([0-9]+)/g,function(k,b){return"\\"+(parseInt(b,10)+o+1)}):(T=1,E=this.removeCapturingGroups(x.regex)),!x.splitRegex&&typeof x.token!="string"&&v.push(x)),l[o]=y,o+=T,t.push(E),x.onMatch||(x.onMatch=null)}}t.length||(l[0]=0,t.push("$")),v.forEach(function(k){k.splitRegex=this.createSplitterRegexp(k.regex,d)},this),this.regExps[f]=new RegExp("("+t.join(")|(")+")|($)",d)}};(function(){this.$setMaxTokenCount=function(c){p=c|0},this.$applyToken=function(c){var f=this.splitRegex.exec(c).slice(1),n=this.token.apply(this,f);if(typeof n=="string")return[{type:n,value:c}];for(var t=[],o=0,l=n.length;o<l;o++)f[o]&&(t[t.length]={type:n[o],value:f[o]});return t},this.$arrayTokens=function(c){if(!c)return[];var f=this.splitRegex.exec(c);if(!f)return"text";for(var n=[],t=this.tokenArray,o=0,l=t.length;o<l;o++)f[o+1]&&(n[n.length]={type:t[o],value:f[o+1]});return n},this.removeCapturingGroups=function(c){var f=c.replace(/\\.|\[(?:\\.|[^\\\]])*|\(\?[:=!<]|(\()/g,function(n,t){return t?"(?:":n});return f},this.createSplitterRegexp=function(c,f){if(c.indexOf("(?=")!=-1){var n=0,t=!1,o={};c.replace(/(\\.)|(\((?:\?[=!])?)|(\))|([\[\]])/g,function(l,d,v,y,x,E){return t?t=x!="]":x?t=!0:y?(n==o.stack&&(o.end=E+1,o.stack=-1),n--):v&&(n++,v.length!=1&&(o.stack=n,o.start=E)),l}),o.end!=null&&/^\)*$/.test(c.substr(o.end))&&(c=c.substring(0,o.start)+c.substr(o.end))}return c.charAt(0)!="^"&&(c="^"+c),c.charAt(c.length-1)!="$"&&(c+="$"),new RegExp(c,(f||"").replace("g",""))},this.getLineTokens=function(c,f){if(f&&typeof f!="string"){var n=f.slice(0);f=n[0],f==="#tmp"&&(n.shift(),f=n.shift())}else var n=[];var t=f||"start",o=this.states[t];o||(t="start",o=this.states[t]);var l=this.matchMappings[t],d=this.regExps[t];d.lastIndex=0;for(var v,y=[],x=0,E=0,T={type:null,value:""};v=d.exec(c);){var k=l.defaultToken,b=null,S=v[0],A=d.lastIndex;if(A-S.length>x){var C=c.substring(x,A-S.length);T.type==k?T.value+=C:(T.type&&y.push(T),T={type:k,value:C})}for(var R=0;R<v.length-2;R++)if(v[R+1]!==void 0){b=o[l[R]],b.onMatch?k=b.onMatch(S,t,n,c):k=b.token,b.next&&(typeof b.next=="string"?t=b.next:t=b.next(t,n),o=this.states[t],o||(this.reportError("state doesn't exist",t),t="start",o=this.states[t]),l=this.matchMappings[t],x=A,d=this.regExps[t],d.lastIndex=A),b.consumeLineEnd&&(x=A);break}if(S){if(typeof k=="string")(!b||b.merge!==!1)&&T.type===k?T.value+=S:(T.type&&y.push(T),T={type:k,value:S});else if(k){T.type&&y.push(T),T={type:null,value:""};for(var R=0;R<k.length;R++)y.push(k[R])}}if(x==c.length)break;if(x=A,E++>p){for(E>2*c.length&&this.reportError("infinite loop with in ace tokenizer",{startState:f,line:c});x<c.length;)T.type&&y.push(T),T={value:c.substring(x,x+=500),type:"overflow"};t="start",n=[];break}}return T.type&&y.push(T),n.length>1&&n[0]!==t&&n.unshift("#tmp",t),{tokens:y,state:n.length?n:t}},this.reportError=h.reportError}).call(u.prototype),a.Tokenizer=u}),ace.define("ace/mode/text_highlight_rules",["require","exports","module","ace/lib/lang"],function(e,a,m){var h=e("../lib/lang"),p=function(){this.$rules={start:[{token:"empty_line",regex:"^$"},{defaultToken:"text"}]}};(function(){this.addRules=function(f,n){if(!n){for(var t in f)this.$rules[t]=f[t];return}for(var t in f){for(var o=f[t],l=0;l<o.length;l++){var d=o[l];(d.next||d.onMatch)&&(typeof d.next=="string"&&d.next.indexOf(n)!==0&&(d.next=n+d.next),d.nextState&&d.nextState.indexOf(n)!==0&&(d.nextState=n+d.nextState))}this.$rules[n+t]=o}},this.getRules=function(){return this.$rules},this.embedRules=function(f,n,t,o,l){var d=typeof f=="function"?new f().getRules():f;if(o)for(var v=0;v<o.length;v++)o[v]=n+o[v];else{o=[];for(var y in d)o.push(n+y)}if(this.addRules(d,n),t)for(var x=Array.prototype[l?"push":"unshift"],v=0;v<o.length;v++)x.apply(this.$rules[o[v]],h.deepCopy(t));this.$embeds||(this.$embeds=[]),this.$embeds.push(n)},this.getEmbeds=function(){return this.$embeds};var u=function(f,n){return(f!="start"||n.length)&&n.unshift(this.nextState,f),this.nextState},c=function(f,n){return n.shift(),n.shift()||"start"};this.normalizeRules=function(){var f=0,n=this.$rules;function t(o){var l=n[o];l.processed=!0;for(var d=0;d<l.length;d++){var v=l[d],y=null;Array.isArray(v)&&(y=v,v={}),!v.regex&&v.start&&(v.regex=v.start,v.next||(v.next=[]),v.next.push({defaultToken:v.token},{token:v.token+".end",regex:v.end||v.start,next:"pop"}),v.token=v.token+".start",v.push=!0);var x=v.next||v.push;if(x&&Array.isArray(x)){var E=v.stateName;E||(E=v.token,typeof E!="string"&&(E=E[0]||""),n[E]&&(E+=f++)),n[E]=x,v.next=E,t(E)}else x=="pop"&&(v.next=c);if(v.push&&(v.nextState=v.next||v.push,v.next=u,delete v.push),v.rules)for(var T in v.rules)n[T]?n[T].push&&n[T].push.apply(n[T],v.rules[T]):n[T]=v.rules[T];var k=typeof v=="string"?v:v.include;if(k&&(Array.isArray(k)?y=k.map(function(S){return n[S]}):y=n[k]),y){var b=[d,1].concat(y);v.noEscape&&(b=b.filter(function(S){return!S.next})),l.splice.apply(l,b),d--}v.keywordMap&&(v.token=this.createKeywordMapper(v.keywordMap,v.defaultToken||"text",v.caseInsensitive),delete v.defaultToken)}}Object.keys(n).forEach(t,this)},this.createKeywordMapper=function(f,n,t,o){var l=Object.create(null);return this.$keywordList=[],Object.keys(f).forEach(function(d){for(var v=f[d],y=v.split(o||"|"),x=y.length;x--;){var E=y[x];this.$keywordList.push(E),t&&(E=E.toLowerCase()),l[E]=d}},this),f=null,t?function(d){return l[d.toLowerCase()]||n}:function(d){return l[d]||n}},this.getKeywords=function(){return this.$keywords}}).call(p.prototype),a.TextHighlightRules=p}),ace.define("ace/mode/behaviour",["require","exports","module"],function(e,a,m){var h=function(){this.$behaviours={}};(function(){this.add=function(p,u,c){switch(void 0){case this.$behaviours:this.$behaviours={};case this.$behaviours[p]:this.$behaviours[p]={}}this.$behaviours[p][u]=c},this.addBehaviours=function(p){for(var u in p)for(var c in p[u])this.add(u,c,p[u][c])},this.remove=function(p){this.$behaviours&&this.$behaviours[p]&&delete this.$behaviours[p]},this.inherit=function(p,u){if(typeof p=="function")var c=new p().getBehaviours(u);else var c=p.getBehaviours(u);this.addBehaviours(c)},this.getBehaviours=function(p){if(p){for(var u={},c=0;c<p.length;c++)this.$behaviours[p[c]]&&(u[p[c]]=this.$behaviours[p[c]]);return u}else return this.$behaviours}}).call(h.prototype),a.Behaviour=h}),ace.define("ace/token_iterator",["require","exports","module","ace/range"],function(e,a,m){var h=e("./range").Range,p=function(u,c,f){this.$session=u,this.$row=c,this.$rowTokens=u.getTokens(c);var n=u.getTokenAt(c,f);this.$tokenIndex=n?n.index:-1};(function(){this.stepBackward=function(){for(this.$tokenIndex-=1;this.$tokenIndex<0;){if(this.$row-=1,this.$row<0)return this.$row=0,null;this.$rowTokens=this.$session.getTokens(this.$row),this.$tokenIndex=this.$rowTokens.length-1}return this.$rowTokens[this.$tokenIndex]},this.stepForward=function(){this.$tokenIndex+=1;for(var u;this.$tokenIndex>=this.$rowTokens.length;){if(this.$row+=1,u||(u=this.$session.getLength()),this.$row>=u)return this.$row=u-1,null;this.$rowTokens=this.$session.getTokens(this.$row),this.$tokenIndex=0}return this.$rowTokens[this.$tokenIndex]},this.getCurrentToken=function(){return this.$rowTokens[this.$tokenIndex]},this.getCurrentTokenRow=function(){return this.$row},this.getCurrentTokenColumn=function(){var u=this.$rowTokens,c=this.$tokenIndex,f=u[c].start;if(f!==void 0)return f;for(f=0;c>0;)c-=1,f+=u[c].value.length;return f},this.getCurrentTokenPosition=function(){return{row:this.$row,column:this.getCurrentTokenColumn()}},this.getCurrentTokenRange=function(){var u=this.$rowTokens[this.$tokenIndex],c=this.getCurrentTokenColumn();return new h(this.$row,c,this.$row,c+u.value.length)}}).call(p.prototype),a.TokenIterator=p}),ace.define("ace/mode/behaviour/cstyle",["require","exports","module","ace/lib/oop","ace/mode/behaviour","ace/token_iterator","ace/lib/lang"],function(e,a,m){var h=e("../../lib/oop"),p=e("../behaviour").Behaviour,u=e("../../token_iterator").TokenIterator,c=e("../../lib/lang"),f=["text","paren.rparen","rparen","paren","punctuation.operator"],n=["text","paren.rparen","rparen","paren","punctuation.operator","comment"],t,o={},l={'"':'"',"'":"'"},d=function(x){var E=-1;if(x.multiSelect&&(E=x.selection.index,o.rangeCount!=x.multiSelect.rangeCount&&(o={rangeCount:x.multiSelect.rangeCount})),o[E])return t=o[E];t=o[E]={autoInsertedBrackets:0,autoInsertedRow:-1,autoInsertedLineEnd:"",maybeInsertedBrackets:0,maybeInsertedRow:-1,maybeInsertedLineStart:"",maybeInsertedLineEnd:""}},v=function(x,E,T,k){var b=x.end.row-x.start.row;return{text:T+E+k,selection:[0,x.start.column+1,b,x.end.column+(b?0:1)]}},y=function(x){this.add("braces","insertion",function(E,T,k,b,S){var A=k.getCursorPosition(),C=b.doc.getLine(A.row);if(S=="{"){d(k);var R=k.getSelectionRange(),g=b.doc.getTextRange(R);if(g!==""&&g!=="{"&&k.getWrapBehavioursEnabled())return v(R,g,"{","}");if(y.isSaneInsertion(k,b))return/[\]\}\)]/.test(C[A.column])||k.inMultiSelectMode||x&&x.braces?(y.recordAutoInsert(k,b,"}"),{text:"{}",selection:[1,1]}):(y.recordMaybeInsert(k,b,"{"),{text:"{",selection:[1,1]})}else if(S=="}"){d(k);var w=C.substring(A.column,A.column+1);if(w=="}"){var $=b.$findOpeningBracket("}",{column:A.column+1,row:A.row});if($!==null&&y.isAutoInsertedClosing(A,C,S))return y.popAutoInsertedClosing(),{text:"",selection:[1,1]}}}else if(S==`
`||S==`\r
`){d(k);var L="";y.isMaybeInsertedClosing(A,C)&&(L=c.stringRepeat("}",t.maybeInsertedBrackets),y.clearMaybeInsertedClosing());var w=C.substring(A.column,A.column+1);if(w==="}"){var M=b.findMatchingBracket({row:A.row,column:A.column+1},"}");if(!M)return null;var O=this.$getIndent(b.getLine(M.row))}else if(L)var O=this.$getIndent(C);else{y.clearMaybeInsertedClosing();return}var I=O+b.getTabString();return{text:`
`+I+`
`+O+L,selection:[1,I.length,1,I.length]}}else y.clearMaybeInsertedClosing()}),this.add("braces","deletion",function(E,T,k,b,S){var A=b.doc.getTextRange(S);if(!S.isMultiLine()&&A=="{"){d(k);var C=b.doc.getLine(S.start.row),R=C.substring(S.end.column,S.end.column+1);if(R=="}")return S.end.column++,S;t.maybeInsertedBrackets--}}),this.add("parens","insertion",function(E,T,k,b,S){if(S=="("){d(k);var A=k.getSelectionRange(),C=b.doc.getTextRange(A);if(C!==""&&k.getWrapBehavioursEnabled())return v(A,C,"(",")");if(y.isSaneInsertion(k,b))return y.recordAutoInsert(k,b,")"),{text:"()",selection:[1,1]}}else if(S==")"){d(k);var R=k.getCursorPosition(),g=b.doc.getLine(R.row),w=g.substring(R.column,R.column+1);if(w==")"){var $=b.$findOpeningBracket(")",{column:R.column+1,row:R.row});if($!==null&&y.isAutoInsertedClosing(R,g,S))return y.popAutoInsertedClosing(),{text:"",selection:[1,1]}}}}),this.add("parens","deletion",function(E,T,k,b,S){var A=b.doc.getTextRange(S);if(!S.isMultiLine()&&A=="("){d(k);var C=b.doc.getLine(S.start.row),R=C.substring(S.start.column+1,S.start.column+2);if(R==")")return S.end.column++,S}}),this.add("brackets","insertion",function(E,T,k,b,S){if(S=="["){d(k);var A=k.getSelectionRange(),C=b.doc.getTextRange(A);if(C!==""&&k.getWrapBehavioursEnabled())return v(A,C,"[","]");if(y.isSaneInsertion(k,b))return y.recordAutoInsert(k,b,"]"),{text:"[]",selection:[1,1]}}else if(S=="]"){d(k);var R=k.getCursorPosition(),g=b.doc.getLine(R.row),w=g.substring(R.column,R.column+1);if(w=="]"){var $=b.$findOpeningBracket("]",{column:R.column+1,row:R.row});if($!==null&&y.isAutoInsertedClosing(R,g,S))return y.popAutoInsertedClosing(),{text:"",selection:[1,1]}}}}),this.add("brackets","deletion",function(E,T,k,b,S){var A=b.doc.getTextRange(S);if(!S.isMultiLine()&&A=="["){d(k);var C=b.doc.getLine(S.start.row),R=C.substring(S.start.column+1,S.start.column+2);if(R=="]")return S.end.column++,S}}),this.add("string_dquotes","insertion",function(E,T,k,b,S){var A=b.$mode.$quotes||l;if(S.length==1&&A[S]){if(this.lineCommentStart&&this.lineCommentStart.indexOf(S)!=-1)return;d(k);var C=S,R=k.getSelectionRange(),g=b.doc.getTextRange(R);if(g!==""&&(g.length!=1||!A[g])&&k.getWrapBehavioursEnabled())return v(R,g,C,C);if(!g){var w=k.getCursorPosition(),$=b.doc.getLine(w.row),L=$.substring(w.column-1,w.column),M=$.substring(w.column,w.column+1),O=b.getTokenAt(w.row,w.column),I=b.getTokenAt(w.row,w.column+1);if(L=="\\"&&O&&/escape/.test(O.type))return null;var B=O&&/string|escape/.test(O.type),H=!I||/string|escape/.test(I.type),K;if(M==C)K=B!==H,K&&/string\.end/.test(I.type)&&(K=!1);else{if(B&&!H||B&&H)return null;var j=b.$mode.tokenRe;j.lastIndex=0;var Y=j.test(L);j.lastIndex=0;var Q=j.test(L);if(Y||Q||M&&!/[\s;,.})\]\\]/.test(M))return null;var z=$[w.column-2];if(L==C&&(z==C||j.test(z)))return null;K=!0}return{text:K?C+C:"",selection:[1,1]}}}}),this.add("string_dquotes","deletion",function(E,T,k,b,S){var A=b.$mode.$quotes||l,C=b.doc.getTextRange(S);if(!S.isMultiLine()&&A.hasOwnProperty(C)){d(k);var R=b.doc.getLine(S.start.row),g=R.substring(S.start.column+1,S.start.column+2);if(g==C)return S.end.column++,S}})};y.isSaneInsertion=function(x,E){var T=x.getCursorPosition(),k=new u(E,T.row,T.column);if(!this.$matchTokenType(k.getCurrentToken()||"text",f)){if(/[)}\]]/.test(x.session.getLine(T.row)[T.column]))return!0;var b=new u(E,T.row,T.column+1);if(!this.$matchTokenType(b.getCurrentToken()||"text",f))return!1}return k.stepForward(),k.getCurrentTokenRow()!==T.row||this.$matchTokenType(k.getCurrentToken()||"text",n)},y.$matchTokenType=function(x,E){return E.indexOf(x.type||x)>-1},y.recordAutoInsert=function(x,E,T){var k=x.getCursorPosition(),b=E.doc.getLine(k.row);this.isAutoInsertedClosing(k,b,t.autoInsertedLineEnd[0])||(t.autoInsertedBrackets=0),t.autoInsertedRow=k.row,t.autoInsertedLineEnd=T+b.substr(k.column),t.autoInsertedBrackets++},y.recordMaybeInsert=function(x,E,T){var k=x.getCursorPosition(),b=E.doc.getLine(k.row);this.isMaybeInsertedClosing(k,b)||(t.maybeInsertedBrackets=0),t.maybeInsertedRow=k.row,t.maybeInsertedLineStart=b.substr(0,k.column)+T,t.maybeInsertedLineEnd=b.substr(k.column),t.maybeInsertedBrackets++},y.isAutoInsertedClosing=function(x,E,T){return t.autoInsertedBrackets>0&&x.row===t.autoInsertedRow&&T===t.autoInsertedLineEnd[0]&&E.substr(x.column)===t.autoInsertedLineEnd},y.isMaybeInsertedClosing=function(x,E){return t.maybeInsertedBrackets>0&&x.row===t.maybeInsertedRow&&E.substr(x.column)===t.maybeInsertedLineEnd&&E.substr(0,x.column)==t.maybeInsertedLineStart},y.popAutoInsertedClosing=function(){t.autoInsertedLineEnd=t.autoInsertedLineEnd.substr(1),t.autoInsertedBrackets--},y.clearMaybeInsertedClosing=function(){t&&(t.maybeInsertedBrackets=0,t.maybeInsertedRow=-1)},h.inherits(y,p),a.CstyleBehaviour=y}),ace.define("ace/unicode",["require","exports","module"],function(e,a,m){for(var h=[48,9,8,25,5,0,2,25,48,0,11,0,5,0,6,22,2,30,2,457,5,11,15,4,8,0,2,0,18,116,2,1,3,3,9,0,2,2,2,0,2,19,2,82,2,138,2,4,3,155,12,37,3,0,8,38,10,44,2,0,2,1,2,1,2,0,9,26,6,2,30,10,7,61,2,9,5,101,2,7,3,9,2,18,3,0,17,58,3,100,15,53,5,0,6,45,211,57,3,18,2,5,3,11,3,9,2,1,7,6,2,2,2,7,3,1,3,21,2,6,2,0,4,3,3,8,3,1,3,3,9,0,5,1,2,4,3,11,16,2,2,5,5,1,3,21,2,6,2,1,2,1,2,1,3,0,2,4,5,1,3,2,4,0,8,3,2,0,8,15,12,2,2,8,2,2,2,21,2,6,2,1,2,4,3,9,2,2,2,2,3,0,16,3,3,9,18,2,2,7,3,1,3,21,2,6,2,1,2,4,3,8,3,1,3,2,9,1,5,1,2,4,3,9,2,0,17,1,2,5,4,2,2,3,4,1,2,0,2,1,4,1,4,2,4,11,5,4,4,2,2,3,3,0,7,0,15,9,18,2,2,7,2,2,2,22,2,9,2,4,4,7,2,2,2,3,8,1,2,1,7,3,3,9,19,1,2,7,2,2,2,22,2,9,2,4,3,8,2,2,2,3,8,1,8,0,2,3,3,9,19,1,2,7,2,2,2,22,2,15,4,7,2,2,2,3,10,0,9,3,3,9,11,5,3,1,2,17,4,23,2,8,2,0,3,6,4,0,5,5,2,0,2,7,19,1,14,57,6,14,2,9,40,1,2,0,3,1,2,0,3,0,7,3,2,6,2,2,2,0,2,0,3,1,2,12,2,2,3,4,2,0,2,5,3,9,3,1,35,0,24,1,7,9,12,0,2,0,2,0,5,9,2,35,5,19,2,5,5,7,2,35,10,0,58,73,7,77,3,37,11,42,2,0,4,328,2,3,3,6,2,0,2,3,3,40,2,3,3,32,2,3,3,6,2,0,2,3,3,14,2,56,2,3,3,66,5,0,33,15,17,84,13,619,3,16,2,25,6,74,22,12,2,6,12,20,12,19,13,12,2,2,2,1,13,51,3,29,4,0,5,1,3,9,34,2,3,9,7,87,9,42,6,69,11,28,4,11,5,11,11,39,3,4,12,43,5,25,7,10,38,27,5,62,2,28,3,10,7,9,14,0,89,75,5,9,18,8,13,42,4,11,71,55,9,9,4,48,83,2,2,30,14,230,23,280,3,5,3,37,3,5,3,7,2,0,2,0,2,0,2,30,3,52,2,6,2,0,4,2,2,6,4,3,3,5,5,12,6,2,2,6,67,1,20,0,29,0,14,0,17,4,60,12,5,0,4,11,18,0,5,0,3,9,2,0,4,4,7,0,2,0,2,0,2,3,2,10,3,3,6,4,5,0,53,1,2684,46,2,46,2,132,7,6,15,37,11,53,10,0,17,22,10,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,31,48,0,470,1,36,5,2,4,6,1,5,85,3,1,3,2,2,89,2,3,6,40,4,93,18,23,57,15,513,6581,75,20939,53,1164,68,45,3,268,4,27,21,31,3,13,13,1,2,24,9,69,11,1,38,8,3,102,3,1,111,44,25,51,13,68,12,9,7,23,4,0,5,45,3,35,13,28,4,64,15,10,39,54,10,13,3,9,7,22,4,1,5,66,25,2,227,42,2,1,3,9,7,11171,13,22,5,48,8453,301,3,61,3,105,39,6,13,4,6,11,2,12,2,4,2,0,2,1,2,1,2,107,34,362,19,63,3,53,41,11,5,15,17,6,13,1,25,2,33,4,2,134,20,9,8,25,5,0,2,25,12,88,4,5,3,5,3,5,3,2],p=0,u=[],c=0;c<h.length;c+=2)u.push(p+=h[c]),h[c+1]&&u.push(45,p+=h[c+1]);a.wordChars=String.fromCharCode.apply(null,u)}),ace.define("ace/mode/text",["require","exports","module","ace/config","ace/tokenizer","ace/mode/text_highlight_rules","ace/mode/behaviour/cstyle","ace/unicode","ace/lib/lang","ace/token_iterator","ace/range"],function(e,a,m){var h=e("../config"),p=e("../tokenizer").Tokenizer,u=e("./text_highlight_rules").TextHighlightRules,c=e("./behaviour/cstyle").CstyleBehaviour,f=e("../unicode"),n=e("../lib/lang"),t=e("../token_iterator").TokenIterator,o=e("../range").Range,l=function(){this.HighlightRules=u};(function(){this.$defaultBehaviour=new c,this.tokenRe=new RegExp("^["+f.wordChars+"\\$_]+","g"),this.nonTokenRe=new RegExp("^(?:[^"+f.wordChars+"\\$_]|\\s])+","g"),this.getTokenizer=function(){return this.$tokenizer||(this.$highlightRules=this.$highlightRules||new this.HighlightRules(this.$highlightRuleConfig),this.$tokenizer=new p(this.$highlightRules.getRules())),this.$tokenizer},this.lineCommentStart="",this.blockComment="",this.toggleCommentLines=function(d,v,y,x){var E=v.doc,T=!0,k=!0,b=1/0,S=v.getTabSize(),A=!1;if(this.lineCommentStart){if(Array.isArray(this.lineCommentStart))var g=this.lineCommentStart.map(n.escapeRegExp).join("|"),C=this.lineCommentStart[0];else var g=n.escapeRegExp(this.lineCommentStart),C=this.lineCommentStart;g=new RegExp("^(\\s*)(?:"+g+") ?"),A=v.getUseSoftTabs();var L=function(Q,z){var V=Q.match(g);if(V){var X=V[1].length,ie=V[0].length;!I(Q,X,ie)&&V[0][ie-1]==" "&&ie--,E.removeInLine(z,X,ie)}},O=C+" ",$=function(Q,z){(!T||/\S/.test(Q))&&(I(Q,b,b)?E.insertInLine({row:z,column:b},O):E.insertInLine({row:z,column:b},C))},M=function(Q,z){return g.test(Q)},I=function(Q,z,V){for(var X=0;z--&&Q.charAt(z)==" ";)X++;if(X%S!=0)return!1;for(var X=0;Q.charAt(V++)==" ";)X++;return S>2?X%S!=S-1:X%S==0}}else{if(!this.blockComment)return!1;var C=this.blockComment.start,R=this.blockComment.end,g=new RegExp("^(\\s*)(?:"+n.escapeRegExp(C)+")"),w=new RegExp("(?:"+n.escapeRegExp(R)+")\\s*$"),$=function(K,j){M(K,j)||(!T||/\S/.test(K))&&(E.insertInLine({row:j,column:K.length},R),E.insertInLine({row:j,column:b},C))},L=function(K,j){var Y;(Y=K.match(w))&&E.removeInLine(j,K.length-Y[0].length,K.length),(Y=K.match(g))&&E.removeInLine(j,Y[1].length,Y[0].length)},M=function(K,j){if(g.test(K))return!0;for(var Y=v.getTokens(j),Q=0;Q<Y.length;Q++)if(Y[Q].type==="comment")return!0}}function B(K){for(var j=y;j<=x;j++)K(E.getLine(j),j)}var H=1/0;B(function(K,j){var Y=K.search(/\S/);Y!==-1?(Y<b&&(b=Y),k&&!M(K,j)&&(k=!1)):H>K.length&&(H=K.length)}),b==1/0&&(b=H,T=!1,k=!1),A&&b%S!=0&&(b=Math.floor(b/S)*S),B(k?L:$)},this.toggleBlockComment=function(d,v,y,x){var E=this.blockComment;if(E){!E.start&&E[0]&&(E=E[0]);var T=new t(v,x.row,x.column),k=T.getCurrentToken();v.selection;var b=v.selection.toOrientedRange(),S,A;if(k&&/comment/.test(k.type)){for(var C,R;k&&/comment/.test(k.type);){var g=k.value.indexOf(E.start);if(g!=-1){var w=T.getCurrentTokenRow(),$=T.getCurrentTokenColumn()+g;C=new o(w,$,w,$+E.start.length);break}k=T.stepBackward()}for(var T=new t(v,x.row,x.column),k=T.getCurrentToken();k&&/comment/.test(k.type);){var g=k.value.indexOf(E.end);if(g!=-1){var w=T.getCurrentTokenRow(),$=T.getCurrentTokenColumn()+g;R=new o(w,$,w,$+E.end.length);break}k=T.stepForward()}R&&v.remove(R),C&&(v.remove(C),S=C.start.row,A=-E.start.length)}else A=E.start.length,S=y.start.row,v.insert(y.end,E.end),v.insert(y.start,E.start);b.start.row==S&&(b.start.column+=A),b.end.row==S&&(b.end.column+=A),v.selection.fromOrientedRange(b)}},this.getNextLineIndent=function(d,v,y){return this.$getIndent(v)},this.checkOutdent=function(d,v,y){return!1},this.autoOutdent=function(d,v,y){},this.$getIndent=function(d){return d.match(/^\s*/)[0]},this.createWorker=function(d){return null},this.createModeDelegates=function(d){this.$embeds=[],this.$modes={};for(var v in d)if(d[v]){var y=d[v],x=y.prototype.$id,E=h.$modes[x];E||(h.$modes[x]=E=new y),h.$modes[v]||(h.$modes[v]=E),this.$embeds.push(v),this.$modes[v]=E}for(var T=["toggleBlockComment","toggleCommentLines","getNextLineIndent","checkOutdent","autoOutdent","transformAction","getCompletions"],v=0;v<T.length;v++)(function(b){var S=T[v],A=b[S];b[T[v]]=function(){return this.$delegator(S,arguments,A)}})(this)},this.$delegator=function(d,v,y){var x=v[0]||"start";if(typeof x!="string"){if(Array.isArray(x[2])){var E=x[2][x[2].length-1],T=this.$modes[E];if(T)return T[d].apply(T,[x[1]].concat([].slice.call(v,1)))}x=x[0]||"start"}for(var k=0;k<this.$embeds.length;k++)if(this.$modes[this.$embeds[k]]){var b=x.split(this.$embeds[k]);if(!b[0]&&b[1]){v[0]=b[1];var T=this.$modes[this.$embeds[k]];return T[d].apply(T,v)}}var S=y.apply(this,v);return y?S:void 0},this.transformAction=function(d,v,y,x,E){if(this.$behaviour){var T=this.$behaviour.getBehaviours();for(var k in T)if(T[k][v]){var b=T[k][v].apply(this,arguments);if(b)return b}}},this.getKeywords=function(d){if(!this.completionKeywords){var v=this.$tokenizer.rules,y=[];for(var x in v)for(var E=v[x],T=0,k=E.length;T<k;T++)if(typeof E[T].token=="string")/keyword|support|storage/.test(E[T].token)&&y.push(E[T].regex);else if(typeof E[T].token=="object"){for(var b=0,S=E[T].token.length;b<S;b++)if(/keyword|support|storage/.test(E[T].token[b])){var x=E[T].regex.match(/\(.+?\)/g)[b];y.push(x.substr(1,x.length-2))}}this.completionKeywords=y}return d?y.concat(this.$keywordList||[]):this.$keywordList},this.$createKeywordList=function(){return this.$highlightRules||this.getTokenizer(),this.$keywordList=this.$highlightRules.$keywordList||[]},this.getCompletions=function(d,v,y,x){var E=this.$keywordList||this.$createKeywordList();return E.map(function(T){return{name:T,value:T,score:0,meta:"keyword"}})},this.$id="ace/mode/text"}).call(l.prototype),a.Mode=l}),ace.define("ace/apply_delta",["require","exports","module"],function(e,a,m){a.applyDelta=function(h,p,u){var c=p.start.row,f=p.start.column,n=h[c]||"";switch(p.action){case"insert":var t=p.lines;if(t.length===1)h[c]=n.substring(0,f)+p.lines[0]+n.substring(f);else{var o=[c,1].concat(p.lines);h.splice.apply(h,o),h[c]=n.substring(0,f)+h[c],h[c+p.lines.length-1]+=n.substring(f)}break;case"remove":var l=p.end.column,d=p.end.row;c===d?h[c]=n.substring(0,f)+n.substring(l):h.splice(c,d-c+1,n.substring(0,f)+h[d].substring(l));break}}}),ace.define("ace/anchor",["require","exports","module","ace/lib/oop","ace/lib/event_emitter"],function(e,a,m){var h=e("./lib/oop"),p=e("./lib/event_emitter").EventEmitter,u=a.Anchor=function(c,f,n){this.$onChange=this.onChange.bind(this),this.attach(c),typeof n>"u"?this.setPosition(f.row,f.column):this.setPosition(f,n)};(function(){h.implement(this,p),this.getPosition=function(){return this.$clipPositionToDocument(this.row,this.column)},this.getDocument=function(){return this.document},this.$insertRight=!1,this.onChange=function(n){if(!(n.start.row==n.end.row&&n.start.row!=this.row)&&!(n.start.row>this.row)){var t=f(n,{row:this.row,column:this.column},this.$insertRight);this.setPosition(t.row,t.column,!0)}};function c(n,t,o){var l=o?n.column<=t.column:n.column<t.column;return n.row<t.row||n.row==t.row&&l}function f(n,t,o){var l=n.action=="insert",d=(l?1:-1)*(n.end.row-n.start.row),v=(l?1:-1)*(n.end.column-n.start.column),y=n.start,x=l?y:n.end;return c(t,y,o)?{row:t.row,column:t.column}:c(x,t,!o)?{row:t.row+d,column:t.column+(t.row==x.row?v:0)}:{row:y.row,column:y.column}}this.setPosition=function(n,t,o){var l;if(o?l={row:n,column:t}:l=this.$clipPositionToDocument(n,t),!(this.row==l.row&&this.column==l.column)){var d={row:this.row,column:this.column};this.row=l.row,this.column=l.column,this._signal("change",{old:d,value:l})}},this.detach=function(){this.document.off("change",this.$onChange)},this.attach=function(n){this.document=n||this.document,this.document.on("change",this.$onChange)},this.$clipPositionToDocument=function(n,t){var o={};return n>=this.document.getLength()?(o.row=Math.max(0,this.document.getLength()-1),o.column=this.document.getLine(o.row).length):n<0?(o.row=0,o.column=0):(o.row=n,o.column=Math.min(this.document.getLine(o.row).length,Math.max(0,t))),t<0&&(o.column=0),o}}).call(u.prototype)}),ace.define("ace/document",["require","exports","module","ace/lib/oop","ace/apply_delta","ace/lib/event_emitter","ace/range","ace/anchor"],function(e,a,m){var h=e("./lib/oop"),p=e("./apply_delta").applyDelta,u=e("./lib/event_emitter").EventEmitter,c=e("./range").Range,f=e("./anchor").Anchor,n=function(t){this.$lines=[""],t.length===0?this.$lines=[""]:Array.isArray(t)?this.insertMergedLines({row:0,column:0},t):this.insert({row:0,column:0},t)};(function(){h.implement(this,u),this.setValue=function(t){var o=this.getLength()-1;this.remove(new c(0,0,o,this.getLine(o).length)),this.insert({row:0,column:0},t||"")},this.getValue=function(){return this.getAllLines().join(this.getNewLineCharacter())},this.createAnchor=function(t,o){return new f(this,t,o)},"aaa".split(/a/).length===0?this.$split=function(t){return t.replace(/\r\n|\r/g,`
`).split(`
`)}:this.$split=function(t){return t.split(/\r\n|\r|\n/)},this.$detectNewLine=function(t){var o=t.match(/^.*?(\r\n|\r|\n)/m);this.$autoNewLine=o?o[1]:`
`,this._signal("changeNewLineMode")},this.getNewLineCharacter=function(){switch(this.$newLineMode){case"windows":return`\r
`;case"unix":return`
`;default:return this.$autoNewLine||`
`}},this.$autoNewLine="",this.$newLineMode="auto",this.setNewLineMode=function(t){this.$newLineMode!==t&&(this.$newLineMode=t,this._signal("changeNewLineMode"))},this.getNewLineMode=function(){return this.$newLineMode},this.isNewLine=function(t){return t==`\r
`||t=="\r"||t==`
`},this.getLine=function(t){return this.$lines[t]||""},this.getLines=function(t,o){return this.$lines.slice(t,o+1)},this.getAllLines=function(){return this.getLines(0,this.getLength())},this.getLength=function(){return this.$lines.length},this.getTextRange=function(t){return this.getLinesForRange(t).join(this.getNewLineCharacter())},this.getLinesForRange=function(t){var o;if(t.start.row===t.end.row)o=[this.getLine(t.start.row).substring(t.start.column,t.end.column)];else{o=this.getLines(t.start.row,t.end.row),o[0]=(o[0]||"").substring(t.start.column);var l=o.length-1;t.end.row-t.start.row==l&&(o[l]=o[l].substring(0,t.end.column))}return o},this.insertLines=function(t,o){return console.warn("Use of document.insertLines is deprecated. Use the insertFullLines method instead."),this.insertFullLines(t,o)},this.removeLines=function(t,o){return console.warn("Use of document.removeLines is deprecated. Use the removeFullLines method instead."),this.removeFullLines(t,o)},this.insertNewLine=function(t){return console.warn("Use of document.insertNewLine is deprecated. Use insertMergedLines(position, ['', '']) instead."),this.insertMergedLines(t,["",""])},this.insert=function(t,o){return this.getLength()<=1&&this.$detectNewLine(o),this.insertMergedLines(t,this.$split(o))},this.insertInLine=function(t,o){var l=this.clippedPos(t.row,t.column),d=this.pos(t.row,t.column+o.length);return this.applyDelta({start:l,end:d,action:"insert",lines:[o]},!0),this.clonePos(d)},this.clippedPos=function(t,o){var l=this.getLength();t===void 0?t=l:t<0?t=0:t>=l&&(t=l-1,o=void 0);var d=this.getLine(t);return o==null&&(o=d.length),o=Math.min(Math.max(o,0),d.length),{row:t,column:o}},this.clonePos=function(t){return{row:t.row,column:t.column}},this.pos=function(t,o){return{row:t,column:o}},this.$clipPosition=function(t){var o=this.getLength();return t.row>=o?(t.row=Math.max(0,o-1),t.column=this.getLine(o-1).length):(t.row=Math.max(0,t.row),t.column=Math.min(Math.max(t.column,0),this.getLine(t.row).length)),t},this.insertFullLines=function(t,o){t=Math.min(Math.max(t,0),this.getLength());var l=0;t<this.getLength()?(o=o.concat([""]),l=0):(o=[""].concat(o),t--,l=this.$lines[t].length),this.insertMergedLines({row:t,column:l},o)},this.insertMergedLines=function(t,o){var l=this.clippedPos(t.row,t.column),d={row:l.row+o.length-1,column:(o.length==1?l.column:0)+o[o.length-1].length};return this.applyDelta({start:l,end:d,action:"insert",lines:o}),this.clonePos(d)},this.remove=function(t){var o=this.clippedPos(t.start.row,t.start.column),l=this.clippedPos(t.end.row,t.end.column);return this.applyDelta({start:o,end:l,action:"remove",lines:this.getLinesForRange({start:o,end:l})}),this.clonePos(o)},this.removeInLine=function(t,o,l){var d=this.clippedPos(t,o),v=this.clippedPos(t,l);return this.applyDelta({start:d,end:v,action:"remove",lines:this.getLinesForRange({start:d,end:v})},!0),this.clonePos(d)},this.removeFullLines=function(t,o){t=Math.min(Math.max(0,t),this.getLength()-1),o=Math.min(Math.max(0,o),this.getLength()-1);var l=o==this.getLength()-1&&t>0,d=o<this.getLength()-1,v=l?t-1:t,y=l?this.getLine(v).length:0,x=d?o+1:o,E=d?0:this.getLine(x).length,T=new c(v,y,x,E),k=this.$lines.slice(t,o+1);return this.applyDelta({start:T.start,end:T.end,action:"remove",lines:this.getLinesForRange(T)}),k},this.removeNewLine=function(t){t<this.getLength()-1&&t>=0&&this.applyDelta({start:this.pos(t,this.getLine(t).length),end:this.pos(t+1,0),action:"remove",lines:["",""]})},this.replace=function(t,o){if(t instanceof c||(t=c.fromPoints(t.start,t.end)),o.length===0&&t.isEmpty())return t.start;if(o==this.getTextRange(t))return t.end;this.remove(t);var l;return o?l=this.insert(t.start,o):l=t.start,l},this.applyDeltas=function(t){for(var o=0;o<t.length;o++)this.applyDelta(t[o])},this.revertDeltas=function(t){for(var o=t.length-1;o>=0;o--)this.revertDelta(t[o])},this.applyDelta=function(t,o){var l=t.action=="insert";(l?t.lines.length<=1&&!t.lines[0]:!c.comparePoints(t.start,t.end))||(l&&t.lines.length>2e4?this.$splitAndapplyLargeDelta(t,2e4):(p(this.$lines,t,o),this._signal("change",t)))},this.$safeApplyDelta=function(t){var o=this.$lines.length;(t.action=="remove"&&t.start.row<o&&t.end.row<o||t.action=="insert"&&t.start.row<=o)&&this.applyDelta(t)},this.$splitAndapplyLargeDelta=function(t,o){for(var l=t.lines,d=l.length-o+1,v=t.start.row,y=t.start.column,x=0,E=0;x<d;x=E){E+=o-1;var T=l.slice(x,E);T.push(""),this.applyDelta({start:this.pos(v+x,y),end:this.pos(v+E,y=0),action:t.action,lines:T},!0)}t.lines=l.slice(x),t.start.row=v+x,t.start.column=y,this.applyDelta(t,!0)},this.revertDelta=function(t){this.$safeApplyDelta({start:this.clonePos(t.start),end:this.clonePos(t.end),action:t.action=="insert"?"remove":"insert",lines:t.lines.slice()})},this.indexToPosition=function(t,o){for(var l=this.$lines||this.getAllLines(),d=this.getNewLineCharacter().length,v=o||0,y=l.length;v<y;v++)if(t-=l[v].length+d,t<0)return{row:v,column:t+l[v].length+d};return{row:y-1,column:t+l[y-1].length+d}},this.positionToIndex=function(t,o){for(var l=this.$lines||this.getAllLines(),d=this.getNewLineCharacter().length,v=0,y=Math.min(t.row,l.length),x=o||0;x<y;++x)v+=l[x].length+d;return v+t.column}}).call(n.prototype),a.Document=n}),ace.define("ace/background_tokenizer",["require","exports","module","ace/lib/oop","ace/lib/event_emitter"],function(e,a,m){var h=e("./lib/oop"),p=e("./lib/event_emitter").EventEmitter,u=function(c,f){this.running=!1,this.lines=[],this.states=[],this.currentLine=0,this.tokenizer=c;var n=this;this.$worker=function(){if(n.running){for(var t=new Date,o=n.currentLine,l=-1,d=n.doc,v=o;n.lines[o];)o++;var y=d.getLength(),x=0;for(n.running=!1;o<y;){n.$tokenizeRow(o),l=o;do o++;while(n.lines[o]);if(x++,x%5===0&&new Date-t>20){n.running=setTimeout(n.$worker,20);break}}n.currentLine=o,l==-1&&(l=o),v<=l&&n.fireUpdateEvent(v,l)}}};(function(){h.implement(this,p),this.setTokenizer=function(c){this.tokenizer=c,this.lines=[],this.states=[],this.start(0)},this.setDocument=function(c){this.doc=c,this.lines=[],this.states=[],this.stop()},this.fireUpdateEvent=function(c,f){var n={first:c,last:f};this._signal("update",{data:n})},this.start=function(c){this.currentLine=Math.min(c||0,this.currentLine,this.doc.getLength()),this.lines.splice(this.currentLine,this.lines.length),this.states.splice(this.currentLine,this.states.length),this.stop(),this.running=setTimeout(this.$worker,700)},this.scheduleStart=function(){this.running||(this.running=setTimeout(this.$worker,700))},this.$updateOnChange=function(c){var f=c.start.row,n=c.end.row-f;if(n===0)this.lines[f]=null;else if(c.action=="remove")this.lines.splice(f,n+1,null),this.states.splice(f,n+1,null);else{var t=Array(n+1);t.unshift(f,1),this.lines.splice.apply(this.lines,t),this.states.splice.apply(this.states,t)}this.currentLine=Math.min(f,this.currentLine,this.doc.getLength()),this.stop()},this.stop=function(){this.running&&clearTimeout(this.running),this.running=!1},this.getTokens=function(c){return this.lines[c]||this.$tokenizeRow(c)},this.getState=function(c){return this.currentLine==c&&this.$tokenizeRow(c),this.states[c]||"start"},this.$tokenizeRow=function(c){var f=this.doc.getLine(c),n=this.states[c-1],t=this.tokenizer.getLineTokens(f,n,c);return this.states[c]+""!=t.state+""?(this.states[c]=t.state,this.lines[c+1]=null,this.currentLine>c+1&&(this.currentLine=c+1)):this.currentLine==c&&(this.currentLine=c+1),this.lines[c]=t.tokens},this.cleanup=function(){this.running=!1,this.lines=[],this.states=[],this.currentLine=0,this.removeAllListeners()}}).call(u.prototype),a.BackgroundTokenizer=u}),ace.define("ace/search_highlight",["require","exports","module","ace/lib/lang","ace/lib/oop","ace/range"],function(e,a,m){var h=e("./lib/lang");e("./lib/oop");var p=e("./range").Range,u=function(c,f,n){this.setRegexp(c),this.clazz=f,this.type=n||"text"};(function(){this.MAX_RANGES=500,this.setRegexp=function(c){this.regExp+""!=c+""&&(this.regExp=c,this.cache=[])},this.update=function(c,f,n,t){if(this.regExp)for(var o=t.firstRow,l=t.lastRow,d={},v=o;v<=l;v++){var y=this.cache[v];y==null&&(y=h.getMatchOffsets(n.getLine(v),this.regExp),y.length>this.MAX_RANGES&&(y=y.slice(0,this.MAX_RANGES)),y=y.map(function(k){return new p(v,k.offset,v,k.offset+k.length)}),this.cache[v]=y.length?y:"");for(var x=y.length;x--;){var E=y[x].toScreenRange(n),T=E.toString();d[T]||(d[T]=!0,f.drawSingleLineMarker(c,E,this.clazz,t))}}}}).call(u.prototype),a.SearchHighlight=u}),ace.define("ace/edit_session/fold_line",["require","exports","module","ace/range"],function(e,a,m){var h=e("../range").Range;function p(u,c){this.foldData=u,Array.isArray(c)?this.folds=c:c=this.folds=[c];var f=c[c.length-1];this.range=new h(c[0].start.row,c[0].start.column,f.end.row,f.end.column),this.start=this.range.start,this.end=this.range.end,this.folds.forEach(function(n){n.setFoldLine(this)},this)}(function(){this.shiftRow=function(u){this.start.row+=u,this.end.row+=u,this.folds.forEach(function(c){c.start.row+=u,c.end.row+=u})},this.addFold=function(u){if(u.sameRow){if(u.start.row<this.startRow||u.endRow>this.endRow)throw new Error("Can't add a fold to this FoldLine as it has no connection");this.folds.push(u),this.folds.sort(function(c,f){return-c.range.compareEnd(f.start.row,f.start.column)}),this.range.compareEnd(u.start.row,u.start.column)>0?(this.end.row=u.end.row,this.end.column=u.end.column):this.range.compareStart(u.end.row,u.end.column)<0&&(this.start.row=u.start.row,this.start.column=u.start.column)}else if(u.start.row==this.end.row)this.folds.push(u),this.end.row=u.end.row,this.end.column=u.end.column;else if(u.end.row==this.start.row)this.folds.unshift(u),this.start.row=u.start.row,this.start.column=u.start.column;else throw new Error("Trying to add fold to FoldRow that doesn't have a matching row");u.foldLine=this},this.containsRow=function(u){return u>=this.start.row&&u<=this.end.row},this.walk=function(u,c,f){var n=0,t=this.folds,o,l,d,v=!0;c==null&&(c=this.end.row,f=this.end.column);for(var y=0;y<t.length;y++){if(o=t[y],l=o.range.compareStart(c,f),l==-1){u(null,c,f,n,v);return}if(d=u(null,o.start.row,o.start.column,n,v),d=!d&&u(o.placeholder,o.start.row,o.start.column,n),d||l===0)return;v=!o.sameRow,n=o.end.column}u(null,c,f,n,v)},this.getNextFoldTo=function(u,c){for(var f,n,t=0;t<this.folds.length;t++){if(f=this.folds[t],n=f.range.compareEnd(u,c),n==-1)return{fold:f,kind:"after"};if(n===0)return{fold:f,kind:"inside"}}return null},this.addRemoveChars=function(u,c,f){var n=this.getNextFoldTo(u,c),t,o;if(n){if(t=n.fold,n.kind=="inside"&&t.start.column!=c&&t.start.row!=u)window.console&&window.console.log(u,c,t);else if(t.start.row==u){o=this.folds;var l=o.indexOf(t);for(l===0&&(this.start.column+=f),l;l<o.length;l++){if(t=o[l],t.start.column+=f,!t.sameRow)return;t.end.column+=f}this.end.column+=f}}},this.split=function(u,c){var f=this.getNextFoldTo(u,c);if(!f||f.kind=="inside")return null;var n=f.fold,t=this.folds,o=this.foldData,l=t.indexOf(n),d=t[l-1];this.end.row=d.end.row,this.end.column=d.end.column,t=t.splice(l,t.length-l);var v=new p(o,t);return o.splice(o.indexOf(this)+1,0,v),v},this.merge=function(u){for(var c=u.folds,f=0;f<c.length;f++)this.addFold(c[f]);var n=this.foldData;n.splice(n.indexOf(u),1)},this.toString=function(){var u=[this.range.toString()+": ["];return this.folds.forEach(function(c){u.push("  "+c.toString())}),u.push("]"),u.join(`
`)},this.idxToPosition=function(u){for(var c=0,f=0;f<this.folds.length;f++){var n=this.folds[f];if(u-=n.start.column-c,u<0)return{row:n.start.row,column:n.start.column+u};if(u-=n.placeholder.length,u<0)return n.start;c=n.end.column}return{row:this.end.row,column:this.end.column+u}}}).call(p.prototype),a.FoldLine=p}),ace.define("ace/range_list",["require","exports","module","ace/range"],function(e,a,m){var h=e("./range").Range,p=h.comparePoints,u=function(){this.ranges=[],this.$bias=1};(function(){this.comparePoints=p,this.pointIndex=function(c,f,n){for(var t=this.ranges,o=n||0;o<t.length;o++){var l=t[o],d=p(c,l.end);if(!(d>0)){var v=p(c,l.start);return d===0?f&&v!==0?-o-2:o:v>0||v===0&&!f?o:-o-1}}return-o-1},this.add=function(c){var f=!c.isEmpty(),n=this.pointIndex(c.start,f);n<0&&(n=-n-1);var t=this.pointIndex(c.end,f,n);return t<0?t=-t-1:t++,this.ranges.splice(n,t-n,c)},this.addList=function(c){for(var f=[],n=c.length;n--;)f.push.apply(f,this.add(c[n]));return f},this.substractPoint=function(c){var f=this.pointIndex(c);if(f>=0)return this.ranges.splice(f,1)},this.merge=function(){var c=[],f=this.ranges;f=f.sort(function(d,v){return p(d.start,v.start)});for(var n=f[0],t,o=1;o<f.length;o++){t=n,n=f[o];var l=p(t.end,n.start);l<0||l==0&&!t.isEmpty()&&!n.isEmpty()||(p(t.end,n.end)<0&&(t.end.row=n.end.row,t.end.column=n.end.column),f.splice(o,1),c.push(n),n=t,o--)}return this.ranges=f,c},this.contains=function(c,f){return this.pointIndex({row:c,column:f})>=0},this.containsPoint=function(c){return this.pointIndex(c)>=0},this.rangeAtPoint=function(c){var f=this.pointIndex(c);if(f>=0)return this.ranges[f]},this.clipRows=function(c,f){var n=this.ranges;if(n[0].start.row>f||n[n.length-1].start.row<c)return[];var t=this.pointIndex({row:c,column:0});t<0&&(t=-t-1);var o=this.pointIndex({row:f,column:0},t);o<0&&(o=-o-1);for(var l=[],d=t;d<o;d++)l.push(n[d]);return l},this.removeAll=function(){return this.ranges.splice(0,this.ranges.length)},this.attach=function(c){this.session&&this.detach(),this.session=c,this.onChange=this.$onChange.bind(this),this.session.on("change",this.onChange)},this.detach=function(){this.session&&(this.session.removeListener("change",this.onChange),this.session=null)},this.$onChange=function(c){for(var f=c.start,n=c.end,t=f.row,o=n.row,l=this.ranges,d=0,v=l.length;d<v;d++){var y=l[d];if(y.end.row>=t)break}if(c.action=="insert")for(var x=o-t,E=-f.column+n.column;d<v;d++){var y=l[d];if(y.start.row>t)break;if(y.start.row==t&&y.start.column>=f.column&&(y.start.column==f.column&&this.$bias<=0||(y.start.column+=E,y.start.row+=x)),y.end.row==t&&y.end.column>=f.column){if(y.end.column==f.column&&this.$bias<0)continue;y.end.column==f.column&&E>0&&d<v-1&&y.end.column>y.start.column&&y.end.column==l[d+1].start.column&&(y.end.column-=E),y.end.column+=E,y.end.row+=x}}else for(var x=t-o,E=f.column-n.column;d<v;d++){var y=l[d];if(y.start.row>o)break;y.end.row<o&&(t<y.end.row||t==y.end.row&&f.column<y.end.column)?(y.end.row=t,y.end.column=f.column):y.end.row==o?y.end.column<=n.column?(x||y.end.column>f.column)&&(y.end.column=f.column,y.end.row=f.row):(y.end.column+=E,y.end.row+=x):y.end.row>o&&(y.end.row+=x),y.start.row<o&&(t<y.start.row||t==y.start.row&&f.column<y.start.column)?(y.start.row=t,y.start.column=f.column):y.start.row==o?y.start.column<=n.column?(x||y.start.column>f.column)&&(y.start.column=f.column,y.start.row=f.row):(y.start.column+=E,y.start.row+=x):y.start.row>o&&(y.start.row+=x)}if(x!=0&&d<v)for(;d<v;d++){var y=l[d];y.start.row+=x,y.end.row+=x}}}).call(u.prototype),a.RangeList=u}),ace.define("ace/edit_session/fold",["require","exports","module","ace/range_list","ace/lib/oop"],function(e,a,m){var h=e("../range_list").RangeList,p=e("../lib/oop"),u=a.Fold=function(o,l){this.foldLine=null,this.placeholder=l,this.range=o,this.start=o.start,this.end=o.end,this.sameRow=o.start.row==o.end.row,this.subFolds=this.ranges=[]};p.inherits(u,h),function(){this.toString=function(){return'"'+this.placeholder+'" '+this.range.toString()},this.setFoldLine=function(o){this.foldLine=o,this.subFolds.forEach(function(l){l.setFoldLine(o)})},this.clone=function(){var o=this.range.clone(),l=new u(o,this.placeholder);return this.subFolds.forEach(function(d){l.subFolds.push(d.clone())}),l.collapseChildren=this.collapseChildren,l},this.addSubFold=function(o){if(!this.range.isEqual(o)){f(o,this.start);for(var x=o.start.row,E=o.start.column,l=0,d=-1;l<this.subFolds.length&&(d=this.subFolds[l].range.compare(x,E),d==1);l++);var v=this.subFolds[l],y=0;if(d==0){if(v.range.containsRange(o))return v.addSubFold(o);y=1}for(var x=o.range.end.row,E=o.range.end.column,T=l,d=-1;T<this.subFolds.length&&(d=this.subFolds[T].range.compare(x,E),d==1);T++);d==0&&T++;for(var k=this.subFolds.splice(l,T-l,o),b=d==0?k.length-1:k.length,S=y;S<b;S++)o.addSubFold(k[S]);return o.setFoldLine(this.foldLine),o}},this.restoreRange=function(o){return t(o,this.start)}}.call(u.prototype);function c(o,l){o.row-=l.row,o.row==0&&(o.column-=l.column)}function f(o,l){c(o.start,l),c(o.end,l)}function n(o,l){o.row==0&&(o.column+=l.column),o.row+=l.row}function t(o,l){n(o.start,l),n(o.end,l)}}),ace.define("ace/edit_session/folding",["require","exports","module","ace/range","ace/edit_session/fold_line","ace/edit_session/fold","ace/token_iterator"],function(e,a,m){var h=e("../range").Range,p=e("./fold_line").FoldLine,u=e("./fold").Fold,c=e("../token_iterator").TokenIterator;function f(){this.getFoldAt=function(n,t,o){var l=this.getFoldLine(n);if(!l)return null;for(var d=l.folds,v=0;v<d.length;v++){var y=d[v].range;if(y.contains(n,t)){if(o==1&&y.isEnd(n,t)&&!y.isEmpty())continue;if(o==-1&&y.isStart(n,t)&&!y.isEmpty())continue;return d[v]}}},this.getFoldsInRange=function(n){var t=n.start,o=n.end,l=this.$foldData,d=[];t.column+=1,o.column-=1;for(var v=0;v<l.length;v++){var y=l[v].range.compareRange(n);if(y!=2){if(y==-2)break;for(var x=l[v].folds,E=0;E<x.length;E++){var T=x[E];if(y=T.range.compareRange(n),y==-2)break;if(y==2)continue;if(y==42)break;d.push(T)}}}return t.column-=1,o.column+=1,d},this.getFoldsInRangeList=function(n){if(Array.isArray(n)){var t=[];n.forEach(function(o){t=t.concat(this.getFoldsInRange(o))},this)}else var t=this.getFoldsInRange(n);return t},this.getAllFolds=function(){for(var n=[],t=this.$foldData,o=0;o<t.length;o++)for(var l=0;l<t[o].folds.length;l++)n.push(t[o].folds[l]);return n},this.getFoldStringAt=function(n,t,o,l){if(l=l||this.getFoldLine(n),!l)return null;for(var d={end:{column:0}},v,y,x=0;x<l.folds.length;x++){y=l.folds[x];var E=y.range.compareEnd(n,t);if(E==-1){v=this.getLine(y.start.row).substring(d.end.column,y.start.column);break}else if(E===0)return null;d=y}return v||(v=this.getLine(y.start.row).substring(d.end.column)),o==-1?v.substring(0,t-d.end.column):o==1?v.substring(t-d.end.column):v},this.getFoldLine=function(n,t){var o=this.$foldData,l=0;for(t&&(l=o.indexOf(t)),l==-1&&(l=0),l;l<o.length;l++){var d=o[l];if(d.start.row<=n&&d.end.row>=n)return d;if(d.end.row>n)return null}return null},this.getNextFoldLine=function(n,t){var o=this.$foldData,l=0;for(t&&(l=o.indexOf(t)),l==-1&&(l=0),l;l<o.length;l++){var d=o[l];if(d.end.row>=n)return d}return null},this.getFoldedRowCount=function(n,t){for(var o=this.$foldData,l=t-n+1,d=0;d<o.length;d++){var v=o[d],y=v.end.row,x=v.start.row;if(y>=t){x<t&&(x>=n?l-=t-x:l=0);break}else y>=n&&(x>=n?l-=y-x:l-=y-n+1)}return l},this.$addFoldLine=function(n){return this.$foldData.push(n),this.$foldData.sort(function(t,o){return t.start.row-o.start.row}),n},this.addFold=function(n,t){var o=this.$foldData,l=!1,d;n instanceof u?d=n:(d=new u(t,n),d.collapseChildren=t.collapseChildren),this.$clipRangeToDocument(d.range);var v=d.start.row,y=d.start.column,x=d.end.row,E=d.end.column,T=this.getFoldAt(v,y,1),k=this.getFoldAt(x,E,-1);if(T&&k==T)return T.addSubFold(d);T&&!T.range.isStart(v,y)&&this.removeFold(T),k&&!k.range.isEnd(x,E)&&this.removeFold(k);var b=this.getFoldsInRange(d.range);b.length>0&&(this.removeFolds(b),d.collapseChildren||b.forEach(function(R){d.addSubFold(R)}));for(var S=0;S<o.length;S++){var A=o[S];if(x==A.start.row){A.addFold(d),l=!0;break}else if(v==A.end.row){if(A.addFold(d),l=!0,!d.sameRow){var C=o[S+1];if(C&&C.start.row==x){A.merge(C);break}}break}else if(x<=A.start.row)break}return l||(A=this.$addFoldLine(new p(this.$foldData,d))),this.$useWrapMode?this.$updateWrapData(A.start.row,A.start.row):this.$updateRowLengthCache(A.start.row,A.start.row),this.$modified=!0,this._signal("changeFold",{data:d,action:"add"}),d},this.addFolds=function(n){n.forEach(function(t){this.addFold(t)},this)},this.removeFold=function(n){var t=n.foldLine,o=t.start.row,l=t.end.row,d=this.$foldData,v=t.folds;if(v.length==1)d.splice(d.indexOf(t),1);else if(t.range.isEnd(n.end.row,n.end.column))v.pop(),t.end.row=v[v.length-1].end.row,t.end.column=v[v.length-1].end.column;else if(t.range.isStart(n.start.row,n.start.column))v.shift(),t.start.row=v[0].start.row,t.start.column=v[0].start.column;else if(n.sameRow)v.splice(v.indexOf(n),1);else{var y=t.split(n.start.row,n.start.column);v=y.folds,v.shift(),y.start.row=v[0].start.row,y.start.column=v[0].start.column}this.$updating||(this.$useWrapMode?this.$updateWrapData(o,l):this.$updateRowLengthCache(o,l)),this.$modified=!0,this._signal("changeFold",{data:n,action:"remove"})},this.removeFolds=function(n){for(var t=[],o=0;o<n.length;o++)t.push(n[o]);t.forEach(function(l){this.removeFold(l)},this),this.$modified=!0},this.expandFold=function(n){this.removeFold(n),n.subFolds.forEach(function(t){n.restoreRange(t),this.addFold(t)},this),n.collapseChildren>0&&this.foldAll(n.start.row+1,n.end.row,n.collapseChildren-1),n.subFolds=[]},this.expandFolds=function(n){n.forEach(function(t){this.expandFold(t)},this)},this.unfold=function(n,t){var o,l;if(n==null)o=new h(0,0,this.getLength(),0),t==null&&(t=!0);else if(typeof n=="number")o=new h(n,0,n,this.getLine(n).length);else if("row"in n)o=h.fromPoints(n,n);else{if(Array.isArray(n))return l=[],n.forEach(function(v){l=l.concat(this.unfold(v))},this),l;o=n}l=this.getFoldsInRangeList(o);for(var d=l;l.length==1&&h.comparePoints(l[0].start,o.start)<0&&h.comparePoints(l[0].end,o.end)>0;)this.expandFolds(l),l=this.getFoldsInRangeList(o);if(t!=!1?this.removeFolds(l):this.expandFolds(l),d.length)return d},this.isRowFolded=function(n,t){return!!this.getFoldLine(n,t)},this.getRowFoldEnd=function(n,t){var o=this.getFoldLine(n,t);return o?o.end.row:n},this.getRowFoldStart=function(n,t){var o=this.getFoldLine(n,t);return o?o.start.row:n},this.getFoldDisplayLine=function(n,t,o,l,d){l==null&&(l=n.start.row),d==null&&(d=0),t==null&&(t=n.end.row),o==null&&(o=this.getLine(t).length);var v=this.doc,y="";return n.walk(function(x,E,T,k){if(!(E<l)){if(E==l){if(T<d)return;k=Math.max(d,k)}x!=null?y+=x:y+=v.getLine(E).substring(k,T)}},t,o),y},this.getDisplayLine=function(n,t,o,l){var d=this.getFoldLine(n);if(d)return this.getFoldDisplayLine(d,n,t,o,l);var v;return v=this.doc.getLine(n),v.substring(l||0,t||v.length)},this.$cloneFoldData=function(){var n=[];return n=this.$foldData.map(function(t){var o=t.folds.map(function(l){return l.clone()});return new p(n,o)}),n},this.toggleFold=function(n){var t=this.selection,o=t.getRange(),l,d;if(o.isEmpty()){var v=o.start;if(l=this.getFoldAt(v.row,v.column),l){this.expandFold(l);return}else(d=this.findMatchingBracket(v))?o.comparePoint(d)==1?o.end=d:(o.start=d,o.start.column++,o.end.column--):(d=this.findMatchingBracket({row:v.row,column:v.column+1}))?(o.comparePoint(d)==1?o.end=d:o.start=d,o.start.column++):o=this.getCommentFoldRange(v.row,v.column)||o}else{var y=this.getFoldsInRange(o);if(n&&y.length){this.expandFolds(y);return}else y.length==1&&(l=y[0])}if(l||(l=this.getFoldAt(o.start.row,o.start.column)),l&&l.range.toString()==o.toString()){this.expandFold(l);return}var x="...";if(!o.isMultiLine()){if(x=this.getTextRange(o),x.length<4)return;x=x.trim().substring(0,2)+".."}this.addFold(x,o)},this.getCommentFoldRange=function(n,t,o){var l=new c(this,n,t),d=l.getCurrentToken(),v=d&&d.type;if(d&&/^comment|string/.test(v)){v=v.match(/comment|string/)[0],v=="comment"&&(v+="|doc-start");var y=new RegExp(v),x=new h;if(o!=1){do d=l.stepBackward();while(d&&y.test(d.type)&&!/^comment.end/.test(d.type));d=l.stepForward()}if(x.start.row=l.getCurrentTokenRow(),x.start.column=l.getCurrentTokenColumn()+(/^comment.start/.test(d.type)?d.value.length:2),l=new c(this,n,t),o!=-1){var E=-1;do if(d=l.stepForward(),E==-1){var T=this.getState(l.$row);y.test(T)||(E=l.$row)}else if(l.$row>E)break;while(d&&y.test(d.type)&&!/^comment.start/.test(d.type));d=l.stepBackward()}else d=l.getCurrentToken();return x.end.row=l.getCurrentTokenRow(),x.end.column=l.getCurrentTokenColumn(),/^comment.end/.test(d.type)||(x.end.column+=d.value.length-2),x}},this.foldAll=function(n,t,o,l){o==null&&(o=1e5);var d=this.foldWidgets;if(d){t=t||this.getLength(),n=n||0;for(var v=n;v<t;v++)if(d[v]==null&&(d[v]=this.getFoldWidget(v)),d[v]=="start"&&!(l&&!l(v))){var y=this.getFoldWidgetRange(v);y&&y.isMultiLine()&&y.end.row<=t&&y.start.row>=n&&(v=y.end.row,y.collapseChildren=o,this.addFold("...",y))}}},this.foldToLevel=function(n){for(this.foldAll();n-- >0;)this.unfold(null,!1)},this.foldAllComments=function(){var n=this;this.foldAll(null,null,null,function(t){for(var o=n.getTokens(t),l=0;l<o.length;l++){var d=o[l];if(!(d.type=="text"&&/^\s+$/.test(d.value)))return!!/comment/.test(d.type)}})},this.$foldStyles={manual:1,markbegin:1,markbeginend:1},this.$foldStyle="markbegin",this.setFoldStyle=function(n){if(!this.$foldStyles[n])throw new Error("invalid fold style: "+n+"["+Object.keys(this.$foldStyles).join(", ")+"]");if(this.$foldStyle!=n){this.$foldStyle=n,n=="manual"&&this.unfold();var t=this.$foldMode;this.$setFolding(null),this.$setFolding(t)}},this.$setFolding=function(n){if(this.$foldMode!=n){if(this.$foldMode=n,this.off("change",this.$updateFoldWidgets),this.off("tokenizerUpdate",this.$tokenizerUpdateFoldWidgets),this._signal("changeAnnotation"),!n||this.$foldStyle=="manual"){this.foldWidgets=null;return}this.foldWidgets=[],this.getFoldWidget=n.getFoldWidget.bind(n,this,this.$foldStyle),this.getFoldWidgetRange=n.getFoldWidgetRange.bind(n,this,this.$foldStyle),this.$updateFoldWidgets=this.updateFoldWidgets.bind(this),this.$tokenizerUpdateFoldWidgets=this.tokenizerUpdateFoldWidgets.bind(this),this.on("change",this.$updateFoldWidgets),this.on("tokenizerUpdate",this.$tokenizerUpdateFoldWidgets)}},this.getParentFoldRangeData=function(n,t){var o=this.foldWidgets;if(!o||t&&o[n])return{};for(var l=n-1,d;l>=0;){var v=o[l];if(v==null&&(v=o[l]=this.getFoldWidget(l)),v=="start"){var y=this.getFoldWidgetRange(l);if(d||(d=y),y&&y.end.row>=n)break}l--}return{range:l!==-1&&y,firstRange:d}},this.onFoldWidgetClick=function(n,t){t=t.domEvent;var o={children:t.shiftKey,all:t.ctrlKey||t.metaKey,siblings:t.altKey},l=this.$toggleFoldWidget(n,o);if(!l){var d=t.target||t.srcElement;d&&/ace_fold-widget/.test(d.className)&&(d.className+=" ace_invalid")}},this.$toggleFoldWidget=function(n,t){if(this.getFoldWidget){var o=this.getFoldWidget(n),l=this.getLine(n),d=o==="end"?-1:1,v=this.getFoldAt(n,d===-1?0:l.length,d);if(v)return t.children||t.all?this.removeFold(v):this.expandFold(v),v;var y=this.getFoldWidgetRange(n,!0);if(y&&!y.isMultiLine()&&(v=this.getFoldAt(y.start.row,y.start.column,1),v&&y.isEqual(v.range)))return this.removeFold(v),v;if(t.siblings){var x=this.getParentFoldRangeData(n);if(x.range)var E=x.range.start.row+1,T=x.range.end.row;this.foldAll(E,T,t.all?1e4:0)}else t.children?(T=y?y.end.row:this.getLength(),this.foldAll(n+1,T,t.all?1e4:0)):y&&(t.all&&(y.collapseChildren=1e4),this.addFold("...",y));return y}},this.toggleFoldWidget=function(n){var t=this.selection.getCursor().row;t=this.getRowFoldStart(t);var o=this.$toggleFoldWidget(t,{});if(!o){var l=this.getParentFoldRangeData(t,!0);if(o=l.range||l.firstRange,o){t=o.start.row;var d=this.getFoldAt(t,this.getLine(t).length,1);d?this.removeFold(d):this.addFold("...",o)}}},this.updateFoldWidgets=function(n){var t=n.start.row,o=n.end.row-t;if(o===0)this.foldWidgets[t]=null;else if(n.action=="remove")this.foldWidgets.splice(t,o+1,null);else{var l=Array(o+1);l.unshift(t,1),this.foldWidgets.splice.apply(this.foldWidgets,l)}},this.tokenizerUpdateFoldWidgets=function(n){var t=n.data;t.first!=t.last&&this.foldWidgets.length>t.first&&this.foldWidgets.splice(t.first,this.foldWidgets.length)}}a.Folding=f}),ace.define("ace/edit_session/bracket_match",["require","exports","module","ace/token_iterator","ace/range"],function(e,a,m){var h=e("../token_iterator").TokenIterator,p=e("../range").Range;function u(){this.findMatchingBracket=function(c,f){if(c.column==0)return null;var n=f||this.getLine(c.row).charAt(c.column-1);if(n=="")return null;var t=n.match(/([\(\[\{])|([\)\]\}])/);return t?t[1]?this.$findClosingBracket(t[1],c):this.$findOpeningBracket(t[2],c):null},this.getBracketRange=function(c){var f=this.getLine(c.row),n=!0,t,o=f.charAt(c.column-1),l=o&&o.match(/([\(\[\{])|([\)\]\}])/);if(l||(o=f.charAt(c.column),c={row:c.row,column:c.column+1},l=o&&o.match(/([\(\[\{])|([\)\]\}])/),n=!1),!l)return null;if(l[1]){var d=this.$findClosingBracket(l[1],c);if(!d)return null;t=p.fromPoints(c,d),n||(t.end.column++,t.start.column--),t.cursor=t.end}else{var d=this.$findOpeningBracket(l[2],c);if(!d)return null;t=p.fromPoints(d,c),n||(t.start.column++,t.end.column--),t.cursor=t.start}return t},this.getMatchingBracketRanges=function(c,f){var n=this.getLine(c.row),t=/([\(\[\{])|([\)\]\}])/,o=!f&&n.charAt(c.column-1),l=o&&o.match(t);if(l||(o=(f===void 0||f)&&n.charAt(c.column),c={row:c.row,column:c.column+1},l=o&&o.match(t)),!l)return null;var d=new p(c.row,c.column-1,c.row,c.column),v=l[1]?this.$findClosingBracket(l[1],c):this.$findOpeningBracket(l[2],c);if(!v)return[d];var y=new p(v.row,v.column,v.row,v.column+1);return[d,y]},this.$brackets={")":"(","(":")","]":"[","[":"]","{":"}","}":"{","<":">",">":"<"},this.$findOpeningBracket=function(c,f,n){var t=this.$brackets[c],o=1,l=new h(this,f.row,f.column),d=l.getCurrentToken();if(d||(d=l.stepForward()),!!d){n||(n=new RegExp("(\\.?"+d.type.replace(".","\\.").replace("rparen",".paren").replace(/\b(?:end)\b/,"(?:start|begin|end)")+")+"));for(var v=f.column-l.getCurrentTokenColumn()-2,y=d.value;;){for(;v>=0;){var x=y.charAt(v);if(x==t){if(o-=1,o==0)return{row:l.getCurrentTokenRow(),column:v+l.getCurrentTokenColumn()}}else x==c&&(o+=1);v-=1}do d=l.stepBackward();while(d&&!n.test(d.type));if(d==null)break;y=d.value,v=y.length-1}return null}},this.$findClosingBracket=function(c,f,n){var t=this.$brackets[c],o=1,l=new h(this,f.row,f.column),d=l.getCurrentToken();if(d||(d=l.stepForward()),!!d){n||(n=new RegExp("(\\.?"+d.type.replace(".","\\.").replace("lparen",".paren").replace(/\b(?:start|begin)\b/,"(?:start|begin|end)")+")+"));for(var v=f.column-l.getCurrentTokenColumn();;){for(var y=d.value,x=y.length;v<x;){var E=y.charAt(v);if(E==t){if(o-=1,o==0)return{row:l.getCurrentTokenRow(),column:v+l.getCurrentTokenColumn()}}else E==c&&(o+=1);v+=1}do d=l.stepForward();while(d&&!n.test(d.type));if(d==null)break;v=0}return null}},this.getMatchingTags=function(c){var f=new h(this,c.row,c.column),n=this.$findTagName(f);if(n){var t=f.stepBackward();return t.value==="<"?this.$findClosingTag(f,n):this.$findOpeningTag(f,n)}},this.$findTagName=function(c){var f=c.getCurrentToken(),n=!1,t=!1;if(f&&f.type.indexOf("tag-name")===-1)do t?f=c.stepBackward():f=c.stepForward(),f&&(f.value==="/>"?t=!0:f.type.indexOf("tag-name")!==-1&&(n=!0));while(f&&!n);return f},this.$findClosingTag=function(c,f){var n,t=f.value,o=f.value,l=0,d=new p(c.getCurrentTokenRow(),c.getCurrentTokenColumn(),c.getCurrentTokenRow(),c.getCurrentTokenColumn()+1);f=c.stepForward();var v=new p(c.getCurrentTokenRow(),c.getCurrentTokenColumn(),c.getCurrentTokenRow(),c.getCurrentTokenColumn()+f.value.length),y=!1;do if(n=f,f=c.stepForward(),f){if(f.value===">"&&!y){var x=new p(c.getCurrentTokenRow(),c.getCurrentTokenColumn(),c.getCurrentTokenRow(),c.getCurrentTokenColumn()+1);y=!0}if(f.type.indexOf("tag-name")!==-1){if(t=f.value,o===t){if(n.value==="<")l++;else if(n.value==="</"&&(l--,l<0)){c.stepBackward();var E=new p(c.getCurrentTokenRow(),c.getCurrentTokenColumn(),c.getCurrentTokenRow(),c.getCurrentTokenColumn()+2);f=c.stepForward();var T=new p(c.getCurrentTokenRow(),c.getCurrentTokenColumn(),c.getCurrentTokenRow(),c.getCurrentTokenColumn()+f.value.length);if(f=c.stepForward(),f&&f.value===">")var k=new p(c.getCurrentTokenRow(),c.getCurrentTokenColumn(),c.getCurrentTokenRow(),c.getCurrentTokenColumn()+1);else return}}}else if(o===t&&f.value==="/>"&&(l--,l<0))var E=new p(c.getCurrentTokenRow(),c.getCurrentTokenColumn(),c.getCurrentTokenRow(),c.getCurrentTokenColumn()+2),T=E,k=T,x=new p(v.end.row,v.end.column,v.end.row,v.end.column+1)}while(f&&l>=0);if(d&&x&&E&&k&&v&&T)return{openTag:new p(d.start.row,d.start.column,x.end.row,x.end.column),closeTag:new p(E.start.row,E.start.column,k.end.row,k.end.column),openTagName:v,closeTagName:T}},this.$findOpeningTag=function(c,f){var n=c.getCurrentToken(),t=f.value,o=0,l=c.getCurrentTokenRow(),d=c.getCurrentTokenColumn(),v=d+2,y=new p(l,d,l,v);c.stepForward();var x=new p(c.getCurrentTokenRow(),c.getCurrentTokenColumn(),c.getCurrentTokenRow(),c.getCurrentTokenColumn()+f.value.length);if(f=c.stepForward(),!(!f||f.value!==">")){var E=new p(c.getCurrentTokenRow(),c.getCurrentTokenColumn(),c.getCurrentTokenRow(),c.getCurrentTokenColumn()+1);c.stepBackward(),c.stepBackward();do if(f=n,l=c.getCurrentTokenRow(),d=c.getCurrentTokenColumn(),v=d+f.value.length,n=c.stepBackward(),f){if(f.type.indexOf("tag-name")!==-1){if(t===f.value)if(n.value==="<"){if(o++,o>0){var T=new p(l,d,l,v),k=new p(c.getCurrentTokenRow(),c.getCurrentTokenColumn(),c.getCurrentTokenRow(),c.getCurrentTokenColumn()+1);do f=c.stepForward();while(f&&f.value!==">");var b=new p(c.getCurrentTokenRow(),c.getCurrentTokenColumn(),c.getCurrentTokenRow(),c.getCurrentTokenColumn()+1)}}else n.value==="</"&&o--}else if(f.value==="/>"){for(var S=0,A=n;A;){if(A.type.indexOf("tag-name")!==-1&&A.value===t){o--;break}else if(A.value==="<")break;A=c.stepBackward(),S++}for(var C=0;C<S;C++)c.stepForward()}}while(n&&o<=0);if(k&&b&&y&&E&&T&&x)return{openTag:new p(k.start.row,k.start.column,b.end.row,b.end.column),closeTag:new p(y.start.row,y.start.column,E.end.row,E.end.column),openTagName:T,closeTagName:x}}}}a.BracketMatch=u}),ace.define("ace/edit_session",["require","exports","module","ace/lib/oop","ace/lib/lang","ace/bidihandler","ace/config","ace/lib/event_emitter","ace/selection","ace/mode/text","ace/range","ace/document","ace/background_tokenizer","ace/search_highlight","ace/edit_session/folding","ace/edit_session/bracket_match"],function(e,a,m){var h=e("./lib/oop"),p=e("./lib/lang"),u=e("./bidihandler").BidiHandler,c=e("./config"),f=e("./lib/event_emitter").EventEmitter,n=e("./selection").Selection,t=e("./mode/text").Mode,o=e("./range").Range,l=e("./document").Document,d=e("./background_tokenizer").BackgroundTokenizer,v=e("./search_highlight").SearchHighlight,y=function(x,E){this.$breakpoints=[],this.$decorations=[],this.$frontMarkers={},this.$backMarkers={},this.$markerId=1,this.$undoSelect=!0,this.$foldData=[],this.id="session"+ ++y.$uid,this.$foldData.toString=function(){return this.join(`
`)},this.bgTokenizer=new d(new t().getTokenizer(),this);var T=this;this.bgTokenizer.on("update",function(k){T._signal("tokenizerUpdate",k)}),this.on("changeFold",this.onChangeFold.bind(this)),this.$onChange=this.onChange.bind(this),(typeof x!="object"||!x.getLine)&&(x=new l(x)),this.setDocument(x),this.selection=new n(this),this.$bidiHandler=new u(this),c.resetOptions(this),this.setMode(E),c._signal("session",this),this.destroyed=!1};y.$uid=0,function(){h.implement(this,f),this.setDocument=function(g){this.doc&&this.doc.off("change",this.$onChange),this.doc=g,g.on("change",this.$onChange,!0),this.bgTokenizer.setDocument(this.getDocument()),this.resetCaches()},this.getDocument=function(){return this.doc},this.$resetRowCache=function(g){if(!g){this.$docRowCache=[],this.$screenRowCache=[];return}var w=this.$docRowCache.length,$=this.$getRowCacheIndex(this.$docRowCache,g)+1;w>$&&(this.$docRowCache.splice($,w),this.$screenRowCache.splice($,w))},this.$getRowCacheIndex=function(g,w){for(var $=0,L=g.length-1;$<=L;){var M=$+L>>1,O=g[M];if(w>O)$=M+1;else if(w<O)L=M-1;else return M}return $-1},this.resetCaches=function(){this.$modified=!0,this.$wrapData=[],this.$rowLengthCache=[],this.$resetRowCache(0),this.destroyed||this.bgTokenizer.start(0)},this.onChangeFold=function(g){var w=g.data;this.$resetRowCache(w.start.row)},this.onChange=function(g){this.$modified=!0,this.$bidiHandler.onChange(g),this.$resetRowCache(g.start.row);var w=this.$updateInternalDataOnChange(g);!this.$fromUndo&&this.$undoManager&&(w&&w.length&&(this.$undoManager.add({action:"removeFolds",folds:w},this.mergeUndoDeltas),this.mergeUndoDeltas=!0),this.$undoManager.add(g,this.mergeUndoDeltas),this.mergeUndoDeltas=!0,this.$informUndoManager.schedule()),this.bgTokenizer.$updateOnChange(g),this._signal("change",g)},this.setValue=function(g){this.doc.setValue(g),this.selection.moveTo(0,0),this.$resetRowCache(0),this.setUndoManager(this.$undoManager),this.getUndoManager().reset()},this.getValue=this.toString=function(){return this.doc.getValue()},this.getSelection=function(){return this.selection},this.getState=function(g){return this.bgTokenizer.getState(g)},this.getTokens=function(g){return this.bgTokenizer.getTokens(g)},this.getTokenAt=function(g,w){var $=this.bgTokenizer.getTokens(g),L,M=0;if(w==null){var O=$.length-1;M=this.getLine(g).length}else for(var O=0;O<$.length&&(M+=$[O].value.length,!(M>=w));O++);return L=$[O],L?(L.index=O,L.start=M-L.value.length,L):null},this.setUndoManager=function(g){if(this.$undoManager=g,this.$informUndoManager&&this.$informUndoManager.cancel(),g){var w=this;g.addSession(this),this.$syncInformUndoManager=function(){w.$informUndoManager.cancel(),w.mergeUndoDeltas=!1},this.$informUndoManager=p.delayedCall(this.$syncInformUndoManager)}else this.$syncInformUndoManager=function(){}},this.markUndoGroup=function(){this.$syncInformUndoManager&&this.$syncInformUndoManager()},this.$defaultUndoManager={undo:function(){},redo:function(){},hasUndo:function(){},hasRedo:function(){},reset:function(){},add:function(){},addSelection:function(){},startNewGroup:function(){},addSession:function(){}},this.getUndoManager=function(){return this.$undoManager||this.$defaultUndoManager},this.getTabString=function(){return this.getUseSoftTabs()?p.stringRepeat(" ",this.getTabSize()):"	"},this.setUseSoftTabs=function(g){this.setOption("useSoftTabs",g)},this.getUseSoftTabs=function(){return this.$useSoftTabs&&!this.$mode.$indentWithTabs},this.setTabSize=function(g){this.setOption("tabSize",g)},this.getTabSize=function(){return this.$tabSize},this.isTabStop=function(g){return this.$useSoftTabs&&g.column%this.$tabSize===0},this.setNavigateWithinSoftTabs=function(g){this.setOption("navigateWithinSoftTabs",g)},this.getNavigateWithinSoftTabs=function(){return this.$navigateWithinSoftTabs},this.$overwrite=!1,this.setOverwrite=function(g){this.setOption("overwrite",g)},this.getOverwrite=function(){return this.$overwrite},this.toggleOverwrite=function(){this.setOverwrite(!this.$overwrite)},this.addGutterDecoration=function(g,w){this.$decorations[g]||(this.$decorations[g]=""),this.$decorations[g]+=" "+w,this._signal("changeBreakpoint",{})},this.removeGutterDecoration=function(g,w){this.$decorations[g]=(this.$decorations[g]||"").replace(" "+w,""),this._signal("changeBreakpoint",{})},this.getBreakpoints=function(){return this.$breakpoints},this.setBreakpoints=function(g){this.$breakpoints=[];for(var w=0;w<g.length;w++)this.$breakpoints[g[w]]="ace_breakpoint";this._signal("changeBreakpoint",{})},this.clearBreakpoints=function(){this.$breakpoints=[],this._signal("changeBreakpoint",{})},this.setBreakpoint=function(g,w){w===void 0&&(w="ace_breakpoint"),w?this.$breakpoints[g]=w:delete this.$breakpoints[g],this._signal("changeBreakpoint",{})},this.clearBreakpoint=function(g){delete this.$breakpoints[g],this._signal("changeBreakpoint",{})},this.addMarker=function(g,w,$,L){var M=this.$markerId++,O={range:g,type:$||"line",renderer:typeof $=="function"?$:null,clazz:w,inFront:!!L,id:M};return L?(this.$frontMarkers[M]=O,this._signal("changeFrontMarker")):(this.$backMarkers[M]=O,this._signal("changeBackMarker")),M},this.addDynamicMarker=function(g,w){if(g.update){var $=this.$markerId++;return g.id=$,g.inFront=!!w,w?(this.$frontMarkers[$]=g,this._signal("changeFrontMarker")):(this.$backMarkers[$]=g,this._signal("changeBackMarker")),g}},this.removeMarker=function(g){var w=this.$frontMarkers[g]||this.$backMarkers[g];if(w){var $=w.inFront?this.$frontMarkers:this.$backMarkers;delete $[g],this._signal(w.inFront?"changeFrontMarker":"changeBackMarker")}},this.getMarkers=function(g){return g?this.$frontMarkers:this.$backMarkers},this.highlight=function(g){if(!this.$searchHighlight){var w=new v(null,"ace_selected-word","text");this.$searchHighlight=this.addDynamicMarker(w)}this.$searchHighlight.setRegexp(g)},this.highlightLines=function(g,w,$,L){typeof w!="number"&&($=w,w=g),$||($="ace_step");var M=new o(g,0,w,1/0);return M.id=this.addMarker(M,$,"fullLine",L),M},this.setAnnotations=function(g){this.$annotations=g,this._signal("changeAnnotation",{})},this.getAnnotations=function(){return this.$annotations||[]},this.clearAnnotations=function(){this.setAnnotations([])},this.$detectNewLine=function(g){var w=g.match(/^.*?(\r?\n)/m);w?this.$autoNewLine=w[1]:this.$autoNewLine=`
`},this.getWordRange=function(g,w){var $=this.getLine(g),L=!1;if(w>0&&(L=!!$.charAt(w-1).match(this.tokenRe)),L||(L=!!$.charAt(w).match(this.tokenRe)),L)var M=this.tokenRe;else if(/^\s+$/.test($.slice(w-1,w+1)))var M=/\s/;else var M=this.nonTokenRe;var O=w;if(O>0){do O--;while(O>=0&&$.charAt(O).match(M));O++}for(var I=w;I<$.length&&$.charAt(I).match(M);)I++;return new o(g,O,g,I)},this.getAWordRange=function(g,w){for(var $=this.getWordRange(g,w),L=this.getLine($.end.row);L.charAt($.end.column).match(/[ \t]/);)$.end.column+=1;return $},this.setNewLineMode=function(g){this.doc.setNewLineMode(g)},this.getNewLineMode=function(){return this.doc.getNewLineMode()},this.setUseWorker=function(g){this.setOption("useWorker",g)},this.getUseWorker=function(){return this.$useWorker},this.onReloadTokenizer=function(g){var w=g.data;this.bgTokenizer.start(w.first),this._signal("tokenizerUpdate",g)},this.$modes=c.$modes,this.$mode=null,this.$modeId=null,this.setMode=function(g,w){if(g&&typeof g=="object"){if(g.getTokenizer)return this.$onChangeMode(g);var $=g,L=$.path}else L=g||"ace/mode/text";if(this.$modes["ace/mode/text"]||(this.$modes["ace/mode/text"]=new t),this.$modes[L]&&!$){this.$onChangeMode(this.$modes[L]),w&&w();return}this.$modeId=L,c.loadModule(["mode",L],function(M){if(this.$modeId!==L)return w&&w();this.$modes[L]&&!$?this.$onChangeMode(this.$modes[L]):M&&M.Mode&&(M=new M.Mode($),$||(this.$modes[L]=M,M.$id=L),this.$onChangeMode(M)),w&&w()}.bind(this)),this.$mode||this.$onChangeMode(this.$modes["ace/mode/text"],!0)},this.$onChangeMode=function(g,w){if(w||(this.$modeId=g.$id),this.$mode!==g){var $=this.$mode;this.$mode=g,this.$stopWorker(),this.$useWorker&&this.$startWorker();var L=g.getTokenizer();if(L.on!==void 0){var M=this.onReloadTokenizer.bind(this);L.on("update",M)}this.bgTokenizer.setTokenizer(L),this.bgTokenizer.setDocument(this.getDocument()),this.tokenRe=g.tokenRe,this.nonTokenRe=g.nonTokenRe,w||(g.attachToSession&&g.attachToSession(this),this.$options.wrapMethod.set.call(this,this.$wrapMethod),this.$setFolding(g.foldingRules),this.bgTokenizer.start(0),this._emit("changeMode",{oldMode:$,mode:g}))}},this.$stopWorker=function(){this.$worker&&(this.$worker.terminate(),this.$worker=null)},this.$startWorker=function(){try{this.$worker=this.$mode.createWorker(this)}catch(g){c.warn("Could not load worker",g),this.$worker=null}},this.getMode=function(){return this.$mode},this.$scrollTop=0,this.setScrollTop=function(g){this.$scrollTop===g||isNaN(g)||(this.$scrollTop=g,this._signal("changeScrollTop",g))},this.getScrollTop=function(){return this.$scrollTop},this.$scrollLeft=0,this.setScrollLeft=function(g){this.$scrollLeft===g||isNaN(g)||(this.$scrollLeft=g,this._signal("changeScrollLeft",g))},this.getScrollLeft=function(){return this.$scrollLeft},this.getScreenWidth=function(){return this.$computeWidth(),this.lineWidgets?Math.max(this.getLineWidgetMaxWidth(),this.screenWidth):this.screenWidth},this.getLineWidgetMaxWidth=function(){if(this.lineWidgetsWidth!=null)return this.lineWidgetsWidth;var g=0;return this.lineWidgets.forEach(function(w){w&&w.screenWidth>g&&(g=w.screenWidth)}),this.lineWidgetWidth=g},this.$computeWidth=function(g){if(this.$modified||g){if(this.$modified=!1,this.$useWrapMode)return this.screenWidth=this.$wrapLimit;for(var w=this.doc.getAllLines(),$=this.$rowLengthCache,L=0,M=0,O=this.$foldData[M],I=O?O.start.row:1/0,B=w.length,H=0;H<B;H++){if(H>I){if(H=O.end.row+1,H>=B)break;O=this.$foldData[M++],I=O?O.start.row:1/0}$[H]==null&&($[H]=this.$getStringScreenWidth(w[H])[0]),$[H]>L&&(L=$[H])}this.screenWidth=L}},this.getLine=function(g){return this.doc.getLine(g)},this.getLines=function(g,w){return this.doc.getLines(g,w)},this.getLength=function(){return this.doc.getLength()},this.getTextRange=function(g){return this.doc.getTextRange(g||this.selection.getRange())},this.insert=function(g,w){return this.doc.insert(g,w)},this.remove=function(g){return this.doc.remove(g)},this.removeFullLines=function(g,w){return this.doc.removeFullLines(g,w)},this.undoChanges=function(g,w){if(g.length){this.$fromUndo=!0;for(var $=g.length-1;$!=-1;$--){var L=g[$];L.action=="insert"||L.action=="remove"?this.doc.revertDelta(L):L.folds&&this.addFolds(L.folds)}!w&&this.$undoSelect&&(g.selectionBefore?this.selection.fromJSON(g.selectionBefore):this.selection.setRange(this.$getUndoSelection(g,!0))),this.$fromUndo=!1}},this.redoChanges=function(g,w){if(g.length){this.$fromUndo=!0;for(var $=0;$<g.length;$++){var L=g[$];(L.action=="insert"||L.action=="remove")&&this.doc.$safeApplyDelta(L)}!w&&this.$undoSelect&&(g.selectionAfter?this.selection.fromJSON(g.selectionAfter):this.selection.setRange(this.$getUndoSelection(g,!1))),this.$fromUndo=!1}},this.setUndoSelect=function(g){this.$undoSelect=g},this.$getUndoSelection=function(g,w){function $(B){return w?B.action!=="insert":B.action==="insert"}for(var L,M,O=0;O<g.length;O++){var I=g[O];if(I.start){if(!L){$(I)?L=o.fromPoints(I.start,I.end):L=o.fromPoints(I.start,I.start);continue}$(I)?(M=I.start,L.compare(M.row,M.column)==-1&&L.setStart(M),M=I.end,L.compare(M.row,M.column)==1&&L.setEnd(M)):(M=I.start,L.compare(M.row,M.column)==-1&&(L=o.fromPoints(I.start,I.start)))}}return L},this.replace=function(g,w){return this.doc.replace(g,w)},this.moveText=function(g,w,$){var L=this.getTextRange(g),M=this.getFoldsInRange(g),O=o.fromPoints(w,w);if(!$){this.remove(g);var I=g.start.row-g.end.row,B=I?-g.end.column:g.start.column-g.end.column;B&&(O.start.row==g.end.row&&O.start.column>g.end.column&&(O.start.column+=B),O.end.row==g.end.row&&O.end.column>g.end.column&&(O.end.column+=B)),I&&O.start.row>=g.end.row&&(O.start.row+=I,O.end.row+=I)}if(O.end=this.insert(O.start,L),M.length){var H=g.start,K=O.start,I=K.row-H.row,B=K.column-H.column;this.addFolds(M.map(function(Q){return Q=Q.clone(),Q.start.row==H.row&&(Q.start.column+=B),Q.end.row==H.row&&(Q.end.column+=B),Q.start.row+=I,Q.end.row+=I,Q}))}return O},this.indentRows=function(g,w,$){$=$.replace(/\t/g,this.getTabString());for(var L=g;L<=w;L++)this.doc.insertInLine({row:L,column:0},$)},this.outdentRows=function(g){for(var w=g.collapseRows(),$=new o(0,0,0,0),L=this.getTabSize(),M=w.start.row;M<=w.end.row;++M){var O=this.getLine(M);$.start.row=M,$.end.row=M;for(var I=0;I<L&&O.charAt(I)==" ";++I);I<L&&O.charAt(I)=="	"?($.start.column=I,$.end.column=I+1):($.start.column=0,$.end.column=I),this.remove($)}},this.$moveLines=function(g,w,$){if(g=this.getRowFoldStart(g),w=this.getRowFoldEnd(w),$<0){var L=this.getRowFoldStart(g+$);if(L<0)return 0;var M=L-g}else if($>0){var L=this.getRowFoldEnd(w+$);if(L>this.doc.getLength()-1)return 0;var M=L-w}else{g=this.$clipRowToDocument(g),w=this.$clipRowToDocument(w);var M=w-g+1}var O=new o(g,0,w,Number.MAX_VALUE),I=this.getFoldsInRange(O).map(function(H){return H=H.clone(),H.start.row+=M,H.end.row+=M,H}),B=$==0?this.doc.getLines(g,w):this.doc.removeFullLines(g,w);return this.doc.insertFullLines(g+M,B),I.length&&this.addFolds(I),M},this.moveLinesUp=function(g,w){return this.$moveLines(g,w,-1)},this.moveLinesDown=function(g,w){return this.$moveLines(g,w,1)},this.duplicateLines=function(g,w){return this.$moveLines(g,w,0)},this.$clipRowToDocument=function(g){return Math.max(0,Math.min(g,this.doc.getLength()-1))},this.$clipColumnToRow=function(g,w){return w<0?0:Math.min(this.doc.getLine(g).length,w)},this.$clipPositionToDocument=function(g,w){if(w=Math.max(0,w),g<0)g=0,w=0;else{var $=this.doc.getLength();g>=$?(g=$-1,w=this.doc.getLine($-1).length):w=Math.min(this.doc.getLine(g).length,w)}return{row:g,column:w}},this.$clipRangeToDocument=function(g){g.start.row<0?(g.start.row=0,g.start.column=0):g.start.column=this.$clipColumnToRow(g.start.row,g.start.column);var w=this.doc.getLength()-1;return g.end.row>w?(g.end.row=w,g.end.column=this.doc.getLine(w).length):g.end.column=this.$clipColumnToRow(g.end.row,g.end.column),g},this.$wrapLimit=80,this.$useWrapMode=!1,this.$wrapLimitRange={min:null,max:null},this.setUseWrapMode=function(g){if(g!=this.$useWrapMode){if(this.$useWrapMode=g,this.$modified=!0,this.$resetRowCache(0),g){var w=this.getLength();this.$wrapData=Array(w),this.$updateWrapData(0,w-1)}this._signal("changeWrapMode")}},this.getUseWrapMode=function(){return this.$useWrapMode},this.setWrapLimitRange=function(g,w){(this.$wrapLimitRange.min!==g||this.$wrapLimitRange.max!==w)&&(this.$wrapLimitRange={min:g,max:w},this.$modified=!0,this.$bidiHandler.markAsDirty(),this.$useWrapMode&&this._signal("changeWrapMode"))},this.adjustWrapLimit=function(g,w){var $=this.$wrapLimitRange;$.max<0&&($={min:w,max:w});var L=this.$constrainWrapLimit(g,$.min,$.max);return L!=this.$wrapLimit&&L>1?(this.$wrapLimit=L,this.$modified=!0,this.$useWrapMode&&(this.$updateWrapData(0,this.getLength()-1),this.$resetRowCache(0),this._signal("changeWrapLimit")),!0):!1},this.$constrainWrapLimit=function(g,w,$){return w&&(g=Math.max(w,g)),$&&(g=Math.min($,g)),g},this.getWrapLimit=function(){return this.$wrapLimit},this.setWrapLimit=function(g){this.setWrapLimitRange(g,g)},this.getWrapLimitRange=function(){return{min:this.$wrapLimitRange.min,max:this.$wrapLimitRange.max}},this.$updateInternalDataOnChange=function(g){var w=this.$useWrapMode,$=g.action,L=g.start,M=g.end,O=L.row,I=M.row,B=I-O,H=null;if(this.$updating=!0,B!=0)if($==="remove"){this[w?"$wrapData":"$rowLengthCache"].splice(O,B);var K=this.$foldData;H=this.getFoldsInRange(g),this.removeFolds(H);var j=this.getFoldLine(M.row),Y=0;if(j){j.addRemoveChars(M.row,M.column,L.column-M.column),j.shiftRow(-B);var Q=this.getFoldLine(O);Q&&Q!==j&&(Q.merge(j),j=Q),Y=K.indexOf(j)+1}for(Y;Y<K.length;Y++){var j=K[Y];j.start.row>=M.row&&j.shiftRow(-B)}I=O}else{var z=Array(B);z.unshift(O,0);var V=w?this.$wrapData:this.$rowLengthCache;V.splice.apply(V,z);var K=this.$foldData,j=this.getFoldLine(O),Y=0;if(j){var X=j.range.compareInside(L.row,L.column);X==0?(j=j.split(L.row,L.column),j&&(j.shiftRow(B),j.addRemoveChars(I,0,M.column-L.column))):X==-1&&(j.addRemoveChars(O,0,M.column-L.column),j.shiftRow(B)),Y=K.indexOf(j)+1}for(Y;Y<K.length;Y++){var j=K[Y];j.start.row>=O&&j.shiftRow(B)}}else{B=Math.abs(g.start.column-g.end.column),$==="remove"&&(H=this.getFoldsInRange(g),this.removeFolds(H),B=-B);var j=this.getFoldLine(O);j&&j.addRemoveChars(O,L.column,B)}return w&&this.$wrapData.length!=this.doc.getLength()&&console.error("doc.getLength() and $wrapData.length have to be the same!"),this.$updating=!1,w?this.$updateWrapData(O,I):this.$updateRowLengthCache(O,I),H},this.$updateRowLengthCache=function(g,w,$){this.$rowLengthCache[g]=null,this.$rowLengthCache[w]=null},this.$updateWrapData=function(g,w){var $=this.doc.getAllLines(),L=this.getTabSize(),M=this.$wrapData,O=this.$wrapLimit,I,B,H=g;for(w=Math.min(w,$.length-1);H<=w;)B=this.getFoldLine(H,B),B?(I=[],B.walk(function(K,j,Y,Q){var z;if(K!=null){z=this.$getDisplayTokens(K,I.length),z[0]=T;for(var V=1;V<z.length;V++)z[V]=k}else z=this.$getDisplayTokens($[j].substring(Q,Y),I.length);I=I.concat(z)}.bind(this),B.end.row,$[B.end.row].length+1),M[B.start.row]=this.$computeWrapSplits(I,O,L),H=B.end.row+1):(I=this.$getDisplayTokens($[H]),M[H]=this.$computeWrapSplits(I,O,L),H++)};var x=1,E=2,T=3,k=4,b=9,S=10,A=11,C=12;this.$computeWrapSplits=function(g,w,$){if(g.length==0)return[];var L=[],M=g.length,O=0,I=0,B=this.$wrapAsCode,H=this.$indentedSoftWrap,K=w<=Math.max(2*$,8)||H===!1?0:Math.floor(w/2);function j(){var X=0;if(K===0)return X;if(H)for(var ie=0;ie<g.length;ie++){var se=g[ie];if(se==S)X+=1;else if(se==A)X+=$;else{if(se==C)continue;break}}return B&&H!==!1&&(X+=$),Math.min(X,K)}function Y(X){for(var ie=X-O,se=O;se<X;se++){var ee=g[se];(ee===12||ee===2)&&(ie-=1)}L.length||(Q=j(),L.indent=Q),I+=ie,L.push(I),O=X}for(var Q=0;M-O>w-Q;){var z=O+w-Q;if(g[z-1]>=S&&g[z]>=S){Y(z);continue}if(g[z]==T||g[z]==k){for(z;z!=O-1&&g[z]!=T;z--);if(z>O){Y(z);continue}for(z=O+w,z;z<g.length&&g[z]==k;z++);if(z==g.length)break;Y(z);continue}for(var V=Math.max(z-(w-(w>>2)),O-1);z>V&&g[z]<T;)z--;if(B){for(;z>V&&g[z]<T;)z--;for(;z>V&&g[z]==b;)z--}else for(;z>V&&g[z]<S;)z--;if(z>V){Y(++z);continue}z=O+w,g[z]==E&&z--,Y(z-Q)}return L},this.$getDisplayTokens=function(g,w){var $=[],L;w=w||0;for(var M=0;M<g.length;M++){var O=g.charCodeAt(M);if(O==9){L=this.getScreenTabSize($.length+w),$.push(A);for(var I=1;I<L;I++)$.push(C)}else O==32?$.push(S):O>39&&O<48||O>57&&O<64?$.push(b):O>=4352&&R(O)?$.push(x,E):$.push(x)}return $},this.$getStringScreenWidth=function(g,w,$){if(w==0)return[0,0];w==null&&(w=1/0),$=$||0;var L,M;for(M=0;M<g.length&&(L=g.charCodeAt(M),L==9?$+=this.getScreenTabSize($):L>=4352&&R(L)?$+=2:$+=1,!($>w));M++);return[$,M]},this.lineWidgets=null,this.getRowLength=function(g){var w=1;return this.lineWidgets&&(w+=this.lineWidgets[g]&&this.lineWidgets[g].rowCount||0),!this.$useWrapMode||!this.$wrapData[g]?w:this.$wrapData[g].length+w},this.getRowLineCount=function(g){return!this.$useWrapMode||!this.$wrapData[g]?1:this.$wrapData[g].length+1},this.getRowWrapIndent=function(g){if(this.$useWrapMode){var w=this.screenToDocumentPosition(g,Number.MAX_VALUE),$=this.$wrapData[w.row];return $.length&&$[0]<w.column?$.indent:0}else return 0},this.getScreenLastRowColumn=function(g){var w=this.screenToDocumentPosition(g,Number.MAX_VALUE);return this.documentToScreenColumn(w.row,w.column)},this.getDocumentLastRowColumn=function(g,w){var $=this.documentToScreenRow(g,w);return this.getScreenLastRowColumn($)},this.getDocumentLastRowColumnPosition=function(g,w){var $=this.documentToScreenRow(g,w);return this.screenToDocumentPosition($,Number.MAX_VALUE/10)},this.getRowSplitData=function(g){if(this.$useWrapMode)return this.$wrapData[g]},this.getScreenTabSize=function(g){return this.$tabSize-(g%this.$tabSize|0)},this.screenToDocumentRow=function(g,w){return this.screenToDocumentPosition(g,w).row},this.screenToDocumentColumn=function(g,w){return this.screenToDocumentPosition(g,w).column},this.screenToDocumentPosition=function(g,w,$){if(g<0)return{row:0,column:0};var L,M=0,O=0,I,B=0,H=0,K=this.$screenRowCache,j=this.$getRowCacheIndex(K,g),Y=K.length;if(Y&&j>=0)var B=K[j],M=this.$docRowCache[j],Q=g>K[Y-1];else var Q=!Y;for(var z=this.getLength()-1,V=this.getNextFoldLine(M),X=V?V.start.row:1/0;B<=g&&(H=this.getRowLength(M),!(B+H>g||M>=z));)B+=H,M++,M>X&&(M=V.end.row+1,V=this.getNextFoldLine(M,V),X=V?V.start.row:1/0),Q&&(this.$docRowCache.push(M),this.$screenRowCache.push(B));if(V&&V.start.row<=M)L=this.getFoldDisplayLine(V),M=V.start.row;else{if(B+H<=g||M>z)return{row:z,column:this.getLine(z).length};L=this.getLine(M),V=null}var ie=0,se=Math.floor(g-B);if(this.$useWrapMode){var ee=this.$wrapData[M];ee&&(I=ee[se],se>0&&ee.length&&(ie=ee.indent,O=ee[se-1]||ee[ee.length-1],L=L.substring(O)))}return $!==void 0&&this.$bidiHandler.isBidiRow(B+se,M,se)&&(w=this.$bidiHandler.offsetToCol($)),O+=this.$getStringScreenWidth(L,w-ie)[1],this.$useWrapMode&&O>=I&&(O=I-1),V?V.idxToPosition(O):{row:M,column:O}},this.documentToScreenPosition=function(g,w){if(typeof w>"u")var $=this.$clipPositionToDocument(g.row,g.column);else $=this.$clipPositionToDocument(g,w);g=$.row,w=$.column;var L=0,M=null,O=null;O=this.getFoldAt(g,w,1),O&&(g=O.start.row,w=O.start.column);var I,B=0,H=this.$docRowCache,K=this.$getRowCacheIndex(H,g),j=H.length;if(j&&K>=0)var B=H[K],L=this.$screenRowCache[K],Y=g>H[j-1];else var Y=!j;for(var Q=this.getNextFoldLine(B),z=Q?Q.start.row:1/0;B<g;){if(B>=z){if(I=Q.end.row+1,I>g)break;Q=this.getNextFoldLine(I,Q),z=Q?Q.start.row:1/0}else I=B+1;L+=this.getRowLength(B),B=I,Y&&(this.$docRowCache.push(B),this.$screenRowCache.push(L))}var V="";Q&&B>=z?(V=this.getFoldDisplayLine(Q,g,w),M=Q.start.row):(V=this.getLine(g).substring(0,w),M=g);var X=0;if(this.$useWrapMode){var ie=this.$wrapData[M];if(ie){for(var se=0;V.length>=ie[se];)L++,se++;V=V.substring(ie[se-1]||0,V.length),X=se>0?ie.indent:0}}return this.lineWidgets&&this.lineWidgets[B]&&this.lineWidgets[B].rowsAbove&&(L+=this.lineWidgets[B].rowsAbove),{row:L,column:X+this.$getStringScreenWidth(V)[0]}},this.documentToScreenColumn=function(g,w){return this.documentToScreenPosition(g,w).column},this.documentToScreenRow=function(g,w){return this.documentToScreenPosition(g,w).row},this.getScreenLength=function(){var g=0,w=null;if(this.$useWrapMode)for(var M=this.$wrapData.length,O=0,L=0,w=this.$foldData[L++],I=w?w.start.row:1/0;O<M;){var B=this.$wrapData[O];g+=B?B.length+1:1,O++,O>I&&(O=w.end.row+1,w=this.$foldData[L++],I=w?w.start.row:1/0)}else{g=this.getLength();for(var $=this.$foldData,L=0;L<$.length;L++)w=$[L],g-=w.end.row-w.start.row}return this.lineWidgets&&(g+=this.$getWidgetScreenLength()),g},this.$setFontMetrics=function(g){this.$enableVarChar&&(this.$getStringScreenWidth=function(w,$,L){if($===0)return[0,0];$||($=1/0),L=L||0;var M,O;for(O=0;O<w.length&&(M=w.charAt(O),M==="	"?L+=this.getScreenTabSize(L):L+=g.getCharacterWidth(M),!(L>$));O++);return[L,O]})},this.destroy=function(){this.destroyed||(this.bgTokenizer.setDocument(null),this.bgTokenizer.cleanup(),this.destroyed=!0),this.$stopWorker(),this.removeAllListeners(),this.doc&&this.doc.off("change",this.$onChange),this.selection.detach()},this.isFullWidth=R;function R(g){return g<4352?!1:g>=4352&&g<=4447||g>=4515&&g<=4519||g>=4602&&g<=4607||g>=9001&&g<=9002||g>=11904&&g<=11929||g>=11931&&g<=12019||g>=12032&&g<=12245||g>=12272&&g<=12283||g>=12288&&g<=12350||g>=12353&&g<=12438||g>=12441&&g<=12543||g>=12549&&g<=12589||g>=12593&&g<=12686||g>=12688&&g<=12730||g>=12736&&g<=12771||g>=12784&&g<=12830||g>=12832&&g<=12871||g>=12880&&g<=13054||g>=13056&&g<=19903||g>=19968&&g<=42124||g>=42128&&g<=42182||g>=43360&&g<=43388||g>=44032&&g<=55203||g>=55216&&g<=55238||g>=55243&&g<=55291||g>=63744&&g<=64255||g>=65040&&g<=65049||g>=65072&&g<=65106||g>=65108&&g<=65126||g>=65128&&g<=65131||g>=65281&&g<=65376||g>=65504&&g<=65510}}.call(y.prototype),e("./edit_session/folding").Folding.call(y.prototype),e("./edit_session/bracket_match").BracketMatch.call(y.prototype),c.defineOptions(y.prototype,"session",{wrap:{set:function(x){if(!x||x=="off"?x=!1:x=="free"?x=!0:x=="printMargin"?x=-1:typeof x=="string"&&(x=parseInt(x,10)||!1),this.$wrap!=x)if(this.$wrap=x,!x)this.setUseWrapMode(!1);else{var E=typeof x=="number"?x:null;this.setWrapLimitRange(E,E),this.setUseWrapMode(!0)}},get:function(){return this.getUseWrapMode()?this.$wrap==-1?"printMargin":this.getWrapLimitRange().min?this.$wrap:"free":"off"},handlesSet:!0},wrapMethod:{set:function(x){x=x=="auto"?this.$mode.type!="text":x!="text",x!=this.$wrapAsCode&&(this.$wrapAsCode=x,this.$useWrapMode&&(this.$useWrapMode=!1,this.setUseWrapMode(!0)))},initialValue:"auto"},indentedSoftWrap:{set:function(){this.$useWrapMode&&(this.$useWrapMode=!1,this.setUseWrapMode(!0))},initialValue:!0},firstLineNumber:{set:function(){this._signal("changeBreakpoint")},initialValue:1},useWorker:{set:function(x){this.$useWorker=x,this.$stopWorker(),x&&this.$startWorker()},initialValue:!0},useSoftTabs:{initialValue:!0},tabSize:{set:function(x){x=parseInt(x),x>0&&this.$tabSize!==x&&(this.$modified=!0,this.$rowLengthCache=[],this.$tabSize=x,this._signal("changeTabSize"))},initialValue:4,handlesSet:!0},navigateWithinSoftTabs:{initialValue:!1},foldStyle:{set:function(x){this.setFoldStyle(x)},handlesSet:!0},overwrite:{set:function(x){this._signal("changeOverwrite")},initialValue:!1},newLineMode:{set:function(x){this.doc.setNewLineMode(x)},get:function(){return this.doc.getNewLineMode()},handlesSet:!0},mode:{set:function(x){this.setMode(x)},get:function(){return this.$modeId},handlesSet:!0}}),a.EditSession=y}),ace.define("ace/search",["require","exports","module","ace/lib/lang","ace/lib/oop","ace/range"],function(e,a,m){var h=e("./lib/lang"),p=e("./lib/oop"),u=e("./range").Range,c=function(){this.$options={}};(function(){this.set=function(n){return p.mixin(this.$options,n),this},this.getOptions=function(){return h.copyObject(this.$options)},this.setOptions=function(n){this.$options=n},this.find=function(n){var t=this.$options,o=this.$matchIterator(n,t);if(!o)return!1;var l=null;return o.forEach(function(d,v,y,x){return l=new u(d,v,y,x),v==x&&t.start&&t.start.start&&t.skipCurrent!=!1&&l.isEqual(t.start)?(l=null,!1):!0}),l},this.findAll=function(n){var t=this.$options;if(!t.needle)return[];this.$assembleRegExp(t);var o=t.range,l=o?n.getLines(o.start.row,o.end.row):n.doc.getAllLines(),d=[],v=t.re;if(t.$isMultiLine){var y=v.length,x=l.length-y,E;e:for(var T=v.offset||0;T<=x;T++){for(var k=0;k<y;k++)if(l[T+k].search(v[k])==-1)continue e;var b=l[T],S=l[T+y-1],A=b.length-b.match(v[0])[0].length,C=S.match(v[y-1])[0].length;E&&E.end.row===T&&E.end.column>A||(d.push(E=new u(T,A,T+y-1,C)),y>2&&(T=T+y-2))}}else for(var R=0;R<l.length;R++)for(var g=h.getMatchOffsets(l[R],v),k=0;k<g.length;k++){var w=g[k];d.push(new u(R,w.offset,R,w.offset+w.length))}if(o){for(var $=o.start.column,L=o.end.column,R=0,k=d.length-1;R<k&&d[R].start.column<$&&d[R].start.row==0;)R++;for(var M=o.end.row-o.start.row;R<k&&d[k].end.column>L&&d[k].end.row==M;)k--;for(d=d.slice(R,k+1),R=0,k=d.length;R<k;R++)d[R].start.row+=o.start.row,d[R].end.row+=o.start.row}return d},this.replace=function(n,t){var o=this.$options,l=this.$assembleRegExp(o);if(o.$isMultiLine)return t;if(l){var d=l.exec(n);if(!d||d[0].length!=n.length)return null;if(t=n.replace(l,t),o.preserveCase){t=t.split("");for(var v=Math.min(n.length,n.length);v--;){var y=n[v];y&&y.toLowerCase()!=y?t[v]=t[v].toUpperCase():t[v]=t[v].toLowerCase()}t=t.join("")}return t}},this.$assembleRegExp=function(n,t){if(n.needle instanceof RegExp)return n.re=n.needle;var o=n.needle;if(!n.needle)return n.re=!1;n.regExp||(o=h.escapeRegExp(o)),n.wholeWord&&(o=f(o,n));var l=n.caseSensitive?"gm":"gmi";if(n.$isMultiLine=!t&&/[\n\r]/.test(o),n.$isMultiLine)return n.re=this.$assembleMultilineRegExp(o,l);try{var d=new RegExp(o,l)}catch{d=!1}return n.re=d},this.$assembleMultilineRegExp=function(n,t){for(var o=n.replace(/\r\n|\r|\n/g,`$
^`).split(`
`),l=[],d=0;d<o.length;d++)try{l.push(new RegExp(o[d],t))}catch{return!1}return l},this.$matchIterator=function(n,t){var o=this.$assembleRegExp(t);if(!o)return!1;var l=t.backwards==!0,d=t.skipCurrent!=!1,v=t.range,y=t.start;y||(y=v?v[l?"end":"start"]:n.selection.getRange()),y.start&&(y=y[d!=l?"end":"start"]);var x=v?v.start.row:0,E=v?v.end.row:n.getLength()-1;if(l)var T=function(S){var A=y.row;if(!b(A,y.column,S)){for(A--;A>=x;A--)if(b(A,Number.MAX_VALUE,S))return;if(t.wrap!=!1){for(A=E,x=y.row;A>=x;A--)if(b(A,Number.MAX_VALUE,S))return}}};else var T=function(A){var C=y.row;if(!b(C,y.column,A)){for(C=C+1;C<=E;C++)if(b(C,0,A))return;if(t.wrap!=!1){for(C=x,E=y.row;C<=E;C++)if(b(C,0,A))return}}};if(t.$isMultiLine)var k=o.length,b=function(S,A,C){var R=l?S-k+1:S;if(!(R<0||R+k>n.getLength())){var g=n.getLine(R),w=g.search(o[0]);if(!(!l&&w<A||w===-1)){for(var $=1;$<k;$++)if(g=n.getLine(R+$),g.search(o[$])==-1)return;var L=g.match(o[k-1])[0].length;if(!(l&&L>A)&&C(R,w,R+k-1,L))return!0}}};else if(l)var b=function(A,C,R){var g=n.getLine(A),w=[],$,L=0;for(o.lastIndex=0;$=o.exec(g);){var M=$[0].length;if(L=$.index,!M){if(L>=g.length)break;o.lastIndex=L+=1}if($.index+M>C)break;w.push($.index,M)}for(var O=w.length-1;O>=0;O-=2){var I=w[O-1],M=w[O];if(R(A,I,A,I+M))return!0}};else var b=function(A,C,R){var g=n.getLine(A),w,$;for(o.lastIndex=C;$=o.exec(g);){var L=$[0].length;if(w=$.index,R(A,w,A,w+L))return!0;if(!L&&(o.lastIndex=w+=1,w>=g.length))return!1}};return{forEach:T}}}).call(c.prototype);function f(n,t){function o(l){return/\w/.test(l)||t.regExp?"\\b":""}return o(n[0])+n+o(n[n.length-1])}a.Search=c}),ace.define("ace/keyboard/hash_handler",["require","exports","module","ace/lib/keys","ace/lib/useragent"],function(e,a,m){var h=e("../lib/keys"),p=e("../lib/useragent"),u=h.KEY_MODS;function c(n,t){this.platform=t||(p.isMac?"mac":"win"),this.commands={},this.commandKeyBinding={},this.addCommands(n),this.$singleCommand=!0}function f(n,t){c.call(this,n,t),this.$singleCommand=!1}f.prototype=c.prototype,function(){this.addCommand=function(t){this.commands[t.name]&&this.removeCommand(t),this.commands[t.name]=t,t.bindKey&&this._buildKeyHash(t)},this.removeCommand=function(t,o){var l=t&&(typeof t=="string"?t:t.name);t=this.commands[l],o||delete this.commands[l];var d=this.commandKeyBinding;for(var v in d){var y=d[v];if(y==t)delete d[v];else if(Array.isArray(y)){var x=y.indexOf(t);x!=-1&&(y.splice(x,1),y.length==1&&(d[v]=y[0]))}}},this.bindKey=function(t,o,l){if(typeof t=="object"&&t&&(l==null&&(l=t.position),t=t[this.platform]),!!t){if(typeof o=="function")return this.addCommand({exec:o,bindKey:t,name:o.name||t});t.split("|").forEach(function(d){var v="";if(d.indexOf(" ")!=-1){var y=d.split(/\s+/);d=y.pop(),y.forEach(function(T){var k=this.parseKeys(T),b=u[k.hashId]+k.key;v+=(v?" ":"")+b,this._addCommandToBinding(v,"chainKeys")},this),v+=" "}var x=this.parseKeys(d),E=u[x.hashId]+x.key;this._addCommandToBinding(v+E,o,l)},this)}};function n(t){return typeof t=="object"&&t.bindKey&&t.bindKey.position||(t.isDefault?-100:0)}this._addCommandToBinding=function(t,o,l){var d=this.commandKeyBinding,v;if(!o)delete d[t];else if(!d[t]||this.$singleCommand)d[t]=o;else{Array.isArray(d[t])?(v=d[t].indexOf(o))!=-1&&d[t].splice(v,1):d[t]=[d[t]],typeof l!="number"&&(l=n(o));var y=d[t];for(v=0;v<y.length;v++){var x=y[v],E=n(x);if(E>l)break}y.splice(v,0,o)}},this.addCommands=function(t){t&&Object.keys(t).forEach(function(o){var l=t[o];if(l){if(typeof l=="string")return this.bindKey(l,o);typeof l=="function"&&(l={exec:l}),typeof l=="object"&&(l.name||(l.name=o),this.addCommand(l))}},this)},this.removeCommands=function(t){Object.keys(t).forEach(function(o){this.removeCommand(t[o])},this)},this.bindKeys=function(t){Object.keys(t).forEach(function(o){this.bindKey(o,t[o])},this)},this._buildKeyHash=function(t){this.bindKey(t.bindKey,t)},this.parseKeys=function(t){var o=t.toLowerCase().split(/[\-\+]([\-\+])?/).filter(function(E){return E}),l=o.pop(),d=h[l];if(h.FUNCTION_KEYS[d])l=h.FUNCTION_KEYS[d].toLowerCase();else if(o.length){if(o.length==1&&o[0]=="shift")return{key:l.toUpperCase(),hashId:-1}}else return{key:l,hashId:-1};for(var v=0,y=o.length;y--;){var x=h.KEY_MODS[o[y]];if(x==null)return typeof console<"u"&&console.error("invalid modifier "+o[y]+" in "+t),!1;v|=x}return{key:l,hashId:v}},this.findKeyCommand=function(o,l){var d=u[o]+l;return this.commandKeyBinding[d]},this.handleKeyboard=function(t,o,l,d){if(!(d<0)){var v=u[o]+l,y=this.commandKeyBinding[v];return t.$keyChain&&(t.$keyChain+=" "+v,y=this.commandKeyBinding[t.$keyChain]||y),y&&(y=="chainKeys"||y[y.length-1]=="chainKeys")?(t.$keyChain=t.$keyChain||v,{command:"null"}):(t.$keyChain&&((!o||o==4)&&l.length==1?t.$keyChain=t.$keyChain.slice(0,-v.length-1):(o==-1||d>0)&&(t.$keyChain="")),{command:y})}},this.getStatusText=function(t,o){return o.$keyChain||""}}.call(c.prototype),a.HashHandler=c,a.MultiHashHandler=f}),ace.define("ace/commands/command_manager",["require","exports","module","ace/lib/oop","ace/keyboard/hash_handler","ace/lib/event_emitter"],function(e,a,m){var h=e("../lib/oop"),p=e("../keyboard/hash_handler").MultiHashHandler,u=e("../lib/event_emitter").EventEmitter,c=function(f,n){p.call(this,n,f),this.byName=this.commands,this.setDefaultHandler("exec",function(t){return t.args?t.command.exec(t.editor,t.args,t.event,!1):t.command.exec(t.editor,{},t.event,!0)})};h.inherits(c,p),function(){h.implement(this,u),this.exec=function(f,n,t){if(Array.isArray(f)){for(var o=f.length;o--;)if(this.exec(f[o],n,t))return!0;return!1}if(typeof f=="string"&&(f=this.commands[f]),!f||n&&n.$readOnly&&!f.readOnly||this.$checkCommandState!=!1&&f.isAvailable&&!f.isAvailable(n))return!1;var l={editor:n,command:f,args:t};return l.returnValue=this._emit("exec",l),this._signal("afterExec",l),l.returnValue!==!1},this.toggleRecording=function(f){if(!this.$inReplay)return f&&f._emit("changeStatus"),this.recording?(this.macro.pop(),this.off("exec",this.$addCommandToMacro),this.macro.length||(this.macro=this.oldMacro),this.recording=!1):(this.$addCommandToMacro||(this.$addCommandToMacro=function(n){this.macro.push([n.command,n.args])}.bind(this)),this.oldMacro=this.macro,this.macro=[],this.on("exec",this.$addCommandToMacro),this.recording=!0)},this.replay=function(f){if(!(this.$inReplay||!this.macro)){if(this.recording)return this.toggleRecording(f);try{this.$inReplay=!0,this.macro.forEach(function(n){typeof n=="string"?this.exec(n,f):this.exec(n[0],f,n[1])},this)}finally{this.$inReplay=!1}}},this.trimMacro=function(f){return f.map(function(n){return typeof n[0]!="string"&&(n[0]=n[0].name),n[1]||(n=n[0]),n})}}.call(c.prototype),a.CommandManager=c}),ace.define("ace/commands/default_commands",["require","exports","module","ace/lib/lang","ace/config","ace/range"],function(e,a,m){var h=e("../lib/lang"),p=e("../config"),u=e("../range").Range;function c(n,t){return{win:n,mac:t}}a.commands=[{name:"showSettingsMenu",description:"Show settings menu",bindKey:c("Ctrl-,","Command-,"),exec:function(n){p.loadModule("ace/ext/settings_menu",function(t){t.init(n),n.showSettingsMenu()})},readOnly:!0},{name:"goToNextError",description:"Go to next error",bindKey:c("Alt-E","F4"),exec:function(n){p.loadModule("ace/ext/error_marker",function(t){t.showErrorMarker(n,1)})},scrollIntoView:"animate",readOnly:!0},{name:"goToPreviousError",description:"Go to previous error",bindKey:c("Alt-Shift-E","Shift-F4"),exec:function(n){p.loadModule("ace/ext/error_marker",function(t){t.showErrorMarker(n,-1)})},scrollIntoView:"animate",readOnly:!0},{name:"selectall",description:"Select all",bindKey:c("Ctrl-A","Command-A"),exec:function(n){n.selectAll()},readOnly:!0},{name:"centerselection",description:"Center selection",bindKey:c(null,"Ctrl-L"),exec:function(n){n.centerSelection()},readOnly:!0},{name:"gotoline",description:"Go to line...",bindKey:c("Ctrl-L","Command-L"),exec:function(n,t){typeof t=="number"&&!isNaN(t)&&n.gotoLine(t),n.prompt({$type:"gotoLine"})},readOnly:!0},{name:"fold",bindKey:c("Alt-L|Ctrl-F1","Command-Alt-L|Command-F1"),exec:function(n){n.session.toggleFold(!1)},multiSelectAction:"forEach",scrollIntoView:"center",readOnly:!0},{name:"unfold",bindKey:c("Alt-Shift-L|Ctrl-Shift-F1","Command-Alt-Shift-L|Command-Shift-F1"),exec:function(n){n.session.toggleFold(!0)},multiSelectAction:"forEach",scrollIntoView:"center",readOnly:!0},{name:"toggleFoldWidget",description:"Toggle fold widget",bindKey:c("F2","F2"),exec:function(n){n.session.toggleFoldWidget()},multiSelectAction:"forEach",scrollIntoView:"center",readOnly:!0},{name:"toggleParentFoldWidget",description:"Toggle parent fold widget",bindKey:c("Alt-F2","Alt-F2"),exec:function(n){n.session.toggleFoldWidget(!0)},multiSelectAction:"forEach",scrollIntoView:"center",readOnly:!0},{name:"foldall",description:"Fold all",bindKey:c(null,"Ctrl-Command-Option-0"),exec:function(n){n.session.foldAll()},scrollIntoView:"center",readOnly:!0},{name:"foldAllComments",description:"Fold all comments",bindKey:c(null,"Ctrl-Command-Option-0"),exec:function(n){n.session.foldAllComments()},scrollIntoView:"center",readOnly:!0},{name:"foldOther",description:"Fold other",bindKey:c("Alt-0","Command-Option-0"),exec:function(n){n.session.foldAll(),n.session.unfold(n.selection.getAllRanges())},scrollIntoView:"center",readOnly:!0},{name:"unfoldall",description:"Unfold all",bindKey:c("Alt-Shift-0","Command-Option-Shift-0"),exec:function(n){n.session.unfold()},scrollIntoView:"center",readOnly:!0},{name:"findnext",description:"Find next",bindKey:c("Ctrl-K","Command-G"),exec:function(n){n.findNext()},multiSelectAction:"forEach",scrollIntoView:"center",readOnly:!0},{name:"findprevious",description:"Find previous",bindKey:c("Ctrl-Shift-K","Command-Shift-G"),exec:function(n){n.findPrevious()},multiSelectAction:"forEach",scrollIntoView:"center",readOnly:!0},{name:"selectOrFindNext",description:"Select or find next",bindKey:c("Alt-K","Ctrl-G"),exec:function(n){n.selection.isEmpty()?n.selection.selectWord():n.findNext()},readOnly:!0},{name:"selectOrFindPrevious",description:"Select or find previous",bindKey:c("Alt-Shift-K","Ctrl-Shift-G"),exec:function(n){n.selection.isEmpty()?n.selection.selectWord():n.findPrevious()},readOnly:!0},{name:"find",description:"Find",bindKey:c("Ctrl-F","Command-F"),exec:function(n){p.loadModule("ace/ext/searchbox",function(t){t.Search(n)})},readOnly:!0},{name:"overwrite",description:"Overwrite",bindKey:"Insert",exec:function(n){n.toggleOverwrite()},readOnly:!0},{name:"selecttostart",description:"Select to start",bindKey:c("Ctrl-Shift-Home","Command-Shift-Home|Command-Shift-Up"),exec:function(n){n.getSelection().selectFileStart()},multiSelectAction:"forEach",readOnly:!0,scrollIntoView:"animate",aceCommandGroup:"fileJump"},{name:"gotostart",description:"Go to start",bindKey:c("Ctrl-Home","Command-Home|Command-Up"),exec:function(n){n.navigateFileStart()},multiSelectAction:"forEach",readOnly:!0,scrollIntoView:"animate",aceCommandGroup:"fileJump"},{name:"selectup",description:"Select up",bindKey:c("Shift-Up","Shift-Up|Ctrl-Shift-P"),exec:function(n){n.getSelection().selectUp()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"golineup",description:"Go line up",bindKey:c("Up","Up|Ctrl-P"),exec:function(n,t){n.navigateUp(t.times)},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selecttoend",description:"Select to end",bindKey:c("Ctrl-Shift-End","Command-Shift-End|Command-Shift-Down"),exec:function(n){n.getSelection().selectFileEnd()},multiSelectAction:"forEach",readOnly:!0,scrollIntoView:"animate",aceCommandGroup:"fileJump"},{name:"gotoend",description:"Go to end",bindKey:c("Ctrl-End","Command-End|Command-Down"),exec:function(n){n.navigateFileEnd()},multiSelectAction:"forEach",readOnly:!0,scrollIntoView:"animate",aceCommandGroup:"fileJump"},{name:"selectdown",description:"Select down",bindKey:c("Shift-Down","Shift-Down|Ctrl-Shift-N"),exec:function(n){n.getSelection().selectDown()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"golinedown",description:"Go line down",bindKey:c("Down","Down|Ctrl-N"),exec:function(n,t){n.navigateDown(t.times)},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectwordleft",description:"Select word left",bindKey:c("Ctrl-Shift-Left","Option-Shift-Left"),exec:function(n){n.getSelection().selectWordLeft()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotowordleft",description:"Go to word left",bindKey:c("Ctrl-Left","Option-Left"),exec:function(n){n.navigateWordLeft()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selecttolinestart",description:"Select to line start",bindKey:c("Alt-Shift-Left","Command-Shift-Left|Ctrl-Shift-A"),exec:function(n){n.getSelection().selectLineStart()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotolinestart",description:"Go to line start",bindKey:c("Alt-Left|Home","Command-Left|Home|Ctrl-A"),exec:function(n){n.navigateLineStart()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectleft",description:"Select left",bindKey:c("Shift-Left","Shift-Left|Ctrl-Shift-B"),exec:function(n){n.getSelection().selectLeft()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotoleft",description:"Go to left",bindKey:c("Left","Left|Ctrl-B"),exec:function(n,t){n.navigateLeft(t.times)},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectwordright",description:"Select word right",bindKey:c("Ctrl-Shift-Right","Option-Shift-Right"),exec:function(n){n.getSelection().selectWordRight()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotowordright",description:"Go to word right",bindKey:c("Ctrl-Right","Option-Right"),exec:function(n){n.navigateWordRight()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selecttolineend",description:"Select to line end",bindKey:c("Alt-Shift-Right","Command-Shift-Right|Shift-End|Ctrl-Shift-E"),exec:function(n){n.getSelection().selectLineEnd()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotolineend",description:"Go to line end",bindKey:c("Alt-Right|End","Command-Right|End|Ctrl-E"),exec:function(n){n.navigateLineEnd()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectright",description:"Select right",bindKey:c("Shift-Right","Shift-Right"),exec:function(n){n.getSelection().selectRight()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotoright",description:"Go to right",bindKey:c("Right","Right|Ctrl-F"),exec:function(n,t){n.navigateRight(t.times)},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectpagedown",description:"Select page down",bindKey:"Shift-PageDown",exec:function(n){n.selectPageDown()},readOnly:!0},{name:"pagedown",description:"Page down",bindKey:c(null,"Option-PageDown"),exec:function(n){n.scrollPageDown()},readOnly:!0},{name:"gotopagedown",description:"Go to page down",bindKey:c("PageDown","PageDown|Ctrl-V"),exec:function(n){n.gotoPageDown()},readOnly:!0},{name:"selectpageup",description:"Select page up",bindKey:"Shift-PageUp",exec:function(n){n.selectPageUp()},readOnly:!0},{name:"pageup",description:"Page up",bindKey:c(null,"Option-PageUp"),exec:function(n){n.scrollPageUp()},readOnly:!0},{name:"gotopageup",description:"Go to page up",bindKey:"PageUp",exec:function(n){n.gotoPageUp()},readOnly:!0},{name:"scrollup",description:"Scroll up",bindKey:c("Ctrl-Up",null),exec:function(n){n.renderer.scrollBy(0,-2*n.renderer.layerConfig.lineHeight)},readOnly:!0},{name:"scrolldown",description:"Scroll down",bindKey:c("Ctrl-Down",null),exec:function(n){n.renderer.scrollBy(0,2*n.renderer.layerConfig.lineHeight)},readOnly:!0},{name:"selectlinestart",description:"Select line start",bindKey:"Shift-Home",exec:function(n){n.getSelection().selectLineStart()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectlineend",description:"Select line end",bindKey:"Shift-End",exec:function(n){n.getSelection().selectLineEnd()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"togglerecording",description:"Toggle recording",bindKey:c("Ctrl-Alt-E","Command-Option-E"),exec:function(n){n.commands.toggleRecording(n)},readOnly:!0},{name:"replaymacro",description:"Replay macro",bindKey:c("Ctrl-Shift-E","Command-Shift-E"),exec:function(n){n.commands.replay(n)},readOnly:!0},{name:"jumptomatching",description:"Jump to matching",bindKey:c("Ctrl-\\|Ctrl-P","Command-\\"),exec:function(n){n.jumpToMatching()},multiSelectAction:"forEach",scrollIntoView:"animate",readOnly:!0},{name:"selecttomatching",description:"Select to matching",bindKey:c("Ctrl-Shift-\\|Ctrl-Shift-P","Command-Shift-\\"),exec:function(n){n.jumpToMatching(!0)},multiSelectAction:"forEach",scrollIntoView:"animate",readOnly:!0},{name:"expandToMatching",description:"Expand to matching",bindKey:c("Ctrl-Shift-M","Ctrl-Shift-M"),exec:function(n){n.jumpToMatching(!0,!0)},multiSelectAction:"forEach",scrollIntoView:"animate",readOnly:!0},{name:"passKeysToBrowser",description:"Pass keys to browser",bindKey:c(null,null),exec:function(){},passEvent:!0,readOnly:!0},{name:"copy",description:"Copy",exec:function(n){},readOnly:!0},{name:"cut",description:"Cut",exec:function(n){var t=n.$copyWithEmptySelection&&n.selection.isEmpty(),o=t?n.selection.getLineRange():n.selection.getRange();n._emit("cut",o),o.isEmpty()||n.session.remove(o),n.clearSelection()},scrollIntoView:"cursor",multiSelectAction:"forEach"},{name:"paste",description:"Paste",exec:function(n,t){n.$handlePaste(t)},scrollIntoView:"cursor"},{name:"removeline",description:"Remove line",bindKey:c("Ctrl-D","Command-D"),exec:function(n){n.removeLines()},scrollIntoView:"cursor",multiSelectAction:"forEachLine"},{name:"duplicateSelection",description:"Duplicate selection",bindKey:c("Ctrl-Shift-D","Command-Shift-D"),exec:function(n){n.duplicateSelection()},scrollIntoView:"cursor",multiSelectAction:"forEach"},{name:"sortlines",description:"Sort lines",bindKey:c("Ctrl-Alt-S","Command-Alt-S"),exec:function(n){n.sortLines()},scrollIntoView:"selection",multiSelectAction:"forEachLine"},{name:"togglecomment",description:"Toggle comment",bindKey:c("Ctrl-/","Command-/"),exec:function(n){n.toggleCommentLines()},multiSelectAction:"forEachLine",scrollIntoView:"selectionPart"},{name:"toggleBlockComment",description:"Toggle block comment",bindKey:c("Ctrl-Shift-/","Command-Shift-/"),exec:function(n){n.toggleBlockComment()},multiSelectAction:"forEach",scrollIntoView:"selectionPart"},{name:"modifyNumberUp",description:"Modify number up",bindKey:c("Ctrl-Shift-Up","Alt-Shift-Up"),exec:function(n){n.modifyNumber(1)},scrollIntoView:"cursor",multiSelectAction:"forEach"},{name:"modifyNumberDown",description:"Modify number down",bindKey:c("Ctrl-Shift-Down","Alt-Shift-Down"),exec:function(n){n.modifyNumber(-1)},scrollIntoView:"cursor",multiSelectAction:"forEach"},{name:"replace",description:"Replace",bindKey:c("Ctrl-H","Command-Option-F"),exec:function(n){p.loadModule("ace/ext/searchbox",function(t){t.Search(n,!0)})}},{name:"undo",description:"Undo",bindKey:c("Ctrl-Z","Command-Z"),exec:function(n){n.undo()}},{name:"redo",description:"Redo",bindKey:c("Ctrl-Shift-Z|Ctrl-Y","Command-Shift-Z|Command-Y"),exec:function(n){n.redo()}},{name:"copylinesup",description:"Copy lines up",bindKey:c("Alt-Shift-Up","Command-Option-Up"),exec:function(n){n.copyLinesUp()},scrollIntoView:"cursor"},{name:"movelinesup",description:"Move lines up",bindKey:c("Alt-Up","Option-Up"),exec:function(n){n.moveLinesUp()},scrollIntoView:"cursor"},{name:"copylinesdown",description:"Copy lines down",bindKey:c("Alt-Shift-Down","Command-Option-Down"),exec:function(n){n.copyLinesDown()},scrollIntoView:"cursor"},{name:"movelinesdown",description:"Move lines down",bindKey:c("Alt-Down","Option-Down"),exec:function(n){n.moveLinesDown()},scrollIntoView:"cursor"},{name:"del",description:"Delete",bindKey:c("Delete","Delete|Ctrl-D|Shift-Delete"),exec:function(n){n.remove("right")},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"backspace",description:"Backspace",bindKey:c("Shift-Backspace|Backspace","Ctrl-Backspace|Shift-Backspace|Backspace|Ctrl-H"),exec:function(n){n.remove("left")},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"cut_or_delete",description:"Cut or delete",bindKey:c("Shift-Delete",null),exec:function(n){if(n.selection.isEmpty())n.remove("left");else return!1},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removetolinestart",description:"Remove to line start",bindKey:c("Alt-Backspace","Command-Backspace"),exec:function(n){n.removeToLineStart()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removetolineend",description:"Remove to line end",bindKey:c("Alt-Delete","Ctrl-K|Command-Delete"),exec:function(n){n.removeToLineEnd()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removetolinestarthard",description:"Remove to line start hard",bindKey:c("Ctrl-Shift-Backspace",null),exec:function(n){var t=n.selection.getRange();t.start.column=0,n.session.remove(t)},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removetolineendhard",description:"Remove to line end hard",bindKey:c("Ctrl-Shift-Delete",null),exec:function(n){var t=n.selection.getRange();t.end.column=Number.MAX_VALUE,n.session.remove(t)},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removewordleft",description:"Remove word left",bindKey:c("Ctrl-Backspace","Alt-Backspace|Ctrl-Alt-Backspace"),exec:function(n){n.removeWordLeft()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removewordright",description:"Remove word right",bindKey:c("Ctrl-Delete","Alt-Delete"),exec:function(n){n.removeWordRight()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"outdent",description:"Outdent",bindKey:c("Shift-Tab","Shift-Tab"),exec:function(n){n.blockOutdent()},multiSelectAction:"forEach",scrollIntoView:"selectionPart"},{name:"indent",description:"Indent",bindKey:c("Tab","Tab"),exec:function(n){n.indent()},multiSelectAction:"forEach",scrollIntoView:"selectionPart"},{name:"blockoutdent",description:"Block outdent",bindKey:c("Ctrl-[","Ctrl-["),exec:function(n){n.blockOutdent()},multiSelectAction:"forEachLine",scrollIntoView:"selectionPart"},{name:"blockindent",description:"Block indent",bindKey:c("Ctrl-]","Ctrl-]"),exec:function(n){n.blockIndent()},multiSelectAction:"forEachLine",scrollIntoView:"selectionPart"},{name:"insertstring",description:"Insert string",exec:function(n,t){n.insert(t)},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"inserttext",description:"Insert text",exec:function(n,t){n.insert(h.stringRepeat(t.text||"",t.times||1))},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"splitline",description:"Split line",bindKey:c(null,"Ctrl-O"),exec:function(n){n.splitLine()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"transposeletters",description:"Transpose letters",bindKey:c("Alt-Shift-X","Ctrl-T"),exec:function(n){n.transposeLetters()},multiSelectAction:function(n){n.transposeSelections(1)},scrollIntoView:"cursor"},{name:"touppercase",description:"To uppercase",bindKey:c("Ctrl-U","Ctrl-U"),exec:function(n){n.toUpperCase()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"tolowercase",description:"To lowercase",bindKey:c("Ctrl-Shift-U","Ctrl-Shift-U"),exec:function(n){n.toLowerCase()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"autoindent",description:"Auto Indent",bindKey:c(null,null),exec:function(n){n.autoIndent()},multiSelectAction:"forEachLine",scrollIntoView:"animate"},{name:"expandtoline",description:"Expand to line",bindKey:c("Ctrl-Shift-L","Command-Shift-L"),exec:function(n){var t=n.selection.getRange();t.start.column=t.end.column=0,t.end.row++,n.selection.setRange(t,!1)},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"openlink",bindKey:c("Ctrl+F3","F3"),exec:function(n){n.openLink()}},{name:"joinlines",description:"Join lines",bindKey:c(null,null),exec:function(n){for(var t=n.selection.isBackwards(),o=t?n.selection.getSelectionLead():n.selection.getSelectionAnchor(),l=t?n.selection.getSelectionAnchor():n.selection.getSelectionLead(),d=n.session.doc.getLine(o.row).length,v=n.session.doc.getTextRange(n.selection.getRange()),y=v.replace(/\n\s*/," ").length,x=n.session.doc.getLine(o.row),E=o.row+1;E<=l.row+1;E++){var T=h.stringTrimLeft(h.stringTrimRight(n.session.doc.getLine(E)));T.length!==0&&(T=" "+T),x+=T}l.row+1<n.session.doc.getLength()-1&&(x+=n.session.doc.getNewLineCharacter()),n.clearSelection(),n.session.doc.replace(new u(o.row,0,l.row+2,0),x),y>0?(n.selection.moveCursorTo(o.row,o.column),n.selection.selectTo(o.row,o.column+y)):(d=n.session.doc.getLine(o.row).length>d?d+1:d,n.selection.moveCursorTo(o.row,d))},multiSelectAction:"forEach",readOnly:!0},{name:"invertSelection",description:"Invert selection",bindKey:c(null,null),exec:function(n){var t=n.session.doc.getLength()-1,o=n.session.doc.getLine(t).length,l=n.selection.rangeList.ranges,d=[];l.length<1&&(l=[n.selection.getRange()]);for(var v=0;v<l.length;v++)v==l.length-1&&(l[v].end.row===t&&l[v].end.column===o||d.push(new u(l[v].end.row,l[v].end.column,t,o))),v===0?l[v].start.row===0&&l[v].start.column===0||d.push(new u(0,0,l[v].start.row,l[v].start.column)):d.push(new u(l[v-1].end.row,l[v-1].end.column,l[v].start.row,l[v].start.column));n.exitMultiSelectMode(),n.clearSelection();for(var v=0;v<d.length;v++)n.selection.addRange(d[v],!1)},readOnly:!0,scrollIntoView:"none"},{name:"addLineAfter",description:"Add new line after the current line",exec:function(n){n.selection.clearSelection(),n.navigateLineEnd(),n.insert(`
`)},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"addLineBefore",description:"Add new line before the current line",exec:function(n){n.selection.clearSelection();var t=n.getCursorPosition();n.selection.moveTo(t.row-1,Number.MAX_VALUE),n.insert(`
`),t.row===0&&n.navigateUp()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"openCommandPallete",description:"Open command palette",bindKey:c("F1","F1"),exec:function(n){n.prompt({$type:"commands"})},readOnly:!0},{name:"modeSelect",description:"Change language mode...",bindKey:c(null,null),exec:function(n){n.prompt({$type:"modes"})},readOnly:!0}];for(var f=1;f<9;f++)a.commands.push({name:"foldToLevel"+f,description:"Fold To Level "+f,level:f,exec:function(n){n.session.foldToLevel(this.level)},scrollIntoView:"center",readOnly:!0})}),ace.define("ace/line_widgets",["require","exports","module","ace/lib/dom"],function(e,a,m){var h=e("./lib/dom");function p(u){this.session=u,this.session.widgetManager=this,this.session.getRowLength=this.getRowLength,this.session.$getWidgetScreenLength=this.$getWidgetScreenLength,this.updateOnChange=this.updateOnChange.bind(this),this.renderWidgets=this.renderWidgets.bind(this),this.measureWidgets=this.measureWidgets.bind(this),this.session._changedWidgets=[],this.$onChangeEditor=this.$onChangeEditor.bind(this),this.session.on("change",this.updateOnChange),this.session.on("changeFold",this.updateOnFold),this.session.on("changeEditor",this.$onChangeEditor)}(function(){this.getRowLength=function(u){var c;return this.lineWidgets?c=this.lineWidgets[u]&&this.lineWidgets[u].rowCount||0:c=0,!this.$useWrapMode||!this.$wrapData[u]?1+c:this.$wrapData[u].length+1+c},this.$getWidgetScreenLength=function(){var u=0;return this.lineWidgets.forEach(function(c){c&&c.rowCount&&!c.hidden&&(u+=c.rowCount)}),u},this.$onChangeEditor=function(u){this.attach(u.editor)},this.attach=function(u){u&&u.widgetManager&&u.widgetManager!=this&&u.widgetManager.detach(),this.editor!=u&&(this.detach(),this.editor=u,u&&(u.widgetManager=this,u.renderer.on("beforeRender",this.measureWidgets),u.renderer.on("afterRender",this.renderWidgets)))},this.detach=function(u){var c=this.editor;if(c){this.editor=null,c.widgetManager=null,c.renderer.off("beforeRender",this.measureWidgets),c.renderer.off("afterRender",this.renderWidgets);var f=this.session.lineWidgets;f&&f.forEach(function(n){n&&n.el&&n.el.parentNode&&(n._inDocument=!1,n.el.parentNode.removeChild(n.el))})}},this.updateOnFold=function(u,c){var f=c.lineWidgets;if(!(!f||!u.action)){for(var n=u.data,t=n.start.row,o=n.end.row,l=u.action=="add",d=t+1;d<o;d++)f[d]&&(f[d].hidden=l);f[o]&&(l?f[t]?f[o].hidden=l:f[t]=f[o]:(f[t]==f[o]&&(f[t]=void 0),f[o].hidden=l))}},this.updateOnChange=function(u){var c=this.session.lineWidgets;if(c){var f=u.start.row,n=u.end.row-f;if(n!==0)if(u.action=="remove"){var t=c.splice(f+1,n);!c[f]&&t[t.length-1]&&(c[f]=t.pop()),t.forEach(function(l){l&&this.removeLineWidget(l)},this),this.$updateRows()}else{var o=new Array(n);c[f]&&c[f].column!=null&&u.start.column>c[f].column&&f++,o.unshift(f,0),c.splice.apply(c,o),this.$updateRows()}}},this.$updateRows=function(){var u=this.session.lineWidgets;if(u){var c=!0;u.forEach(function(f,n){if(f)for(c=!1,f.row=n;f.$oldWidget;)f.$oldWidget.row=n,f=f.$oldWidget}),c&&(this.session.lineWidgets=null)}},this.$registerLineWidget=function(u){this.session.lineWidgets||(this.session.lineWidgets=new Array(this.session.getLength()));var c=this.session.lineWidgets[u.row];return c&&(u.$oldWidget=c,c.el&&c.el.parentNode&&(c.el.parentNode.removeChild(c.el),c._inDocument=!1)),this.session.lineWidgets[u.row]=u,u},this.addLineWidget=function(u){if(this.$registerLineWidget(u),u.session=this.session,!this.editor)return u;var c=this.editor.renderer;u.html&&!u.el&&(u.el=h.createElement("div"),u.el.innerHTML=u.html),u.text&&!u.el&&(u.el=h.createElement("div"),u.el.textContent=u.text),u.el&&(h.addCssClass(u.el,"ace_lineWidgetContainer"),u.className&&h.addCssClass(u.el,u.className),u.el.style.position="absolute",u.el.style.zIndex=5,c.container.appendChild(u.el),u._inDocument=!0,u.coverGutter||(u.el.style.zIndex=3),u.pixelHeight==null&&(u.pixelHeight=u.el.offsetHeight)),u.rowCount==null&&(u.rowCount=u.pixelHeight/c.layerConfig.lineHeight);var f=this.session.getFoldAt(u.row,0);if(u.$fold=f,f){var n=this.session.lineWidgets;u.row==f.end.row&&!n[f.start.row]?n[f.start.row]=u:u.hidden=!0}return this.session._emit("changeFold",{data:{start:{row:u.row}}}),this.$updateRows(),this.renderWidgets(null,c),this.onWidgetChanged(u),u},this.removeLineWidget=function(u){if(u._inDocument=!1,u.session=null,u.el&&u.el.parentNode&&u.el.parentNode.removeChild(u.el),u.editor&&u.editor.destroy)try{u.editor.destroy()}catch{}if(this.session.lineWidgets){var c=this.session.lineWidgets[u.row];if(c==u)this.session.lineWidgets[u.row]=u.$oldWidget,u.$oldWidget&&this.onWidgetChanged(u.$oldWidget);else for(;c;){if(c.$oldWidget==u){c.$oldWidget=u.$oldWidget;break}c=c.$oldWidget}}this.session._emit("changeFold",{data:{start:{row:u.row}}}),this.$updateRows()},this.getWidgetsAtRow=function(u){for(var c=this.session.lineWidgets,f=c&&c[u],n=[];f;)n.push(f),f=f.$oldWidget;return n},this.onWidgetChanged=function(u){this.session._changedWidgets.push(u),this.editor&&this.editor.renderer.updateFull()},this.measureWidgets=function(u,c){var f=this.session._changedWidgets,n=c.layerConfig;if(!(!f||!f.length)){for(var t=1/0,o=0;o<f.length;o++){var l=f[o];if(!(!l||!l.el)&&l.session==this.session){if(!l._inDocument){if(this.session.lineWidgets[l.row]!=l)continue;l._inDocument=!0,c.container.appendChild(l.el)}l.h=l.el.offsetHeight,l.fixedWidth||(l.w=l.el.offsetWidth,l.screenWidth=Math.ceil(l.w/n.characterWidth));var d=l.h/n.lineHeight;l.coverLine&&(d-=this.session.getRowLineCount(l.row),d<0&&(d=0)),l.rowCount!=d&&(l.rowCount=d,l.row<t&&(t=l.row))}}t!=1/0&&(this.session._emit("changeFold",{data:{start:{row:t}}}),this.session.lineWidgetWidth=null),this.session._changedWidgets=[]}},this.renderWidgets=function(u,c){var f=c.layerConfig,n=this.session.lineWidgets;if(n){for(var t=Math.min(this.firstRow,f.firstRow),o=Math.max(this.lastRow,f.lastRow,n.length);t>0&&!n[t];)t--;this.firstRow=f.firstRow,this.lastRow=f.lastRow,c.$cursorLayer.config=f;for(var l=t;l<=o;l++){var d=n[l];if(!(!d||!d.el)){if(d.hidden){d.el.style.top=-100-(d.pixelHeight||0)+"px";continue}d._inDocument||(d._inDocument=!0,c.container.appendChild(d.el));var v=c.$cursorLayer.getPixelPosition({row:l,column:0},!0).top;d.coverLine||(v+=f.lineHeight*this.session.getRowLineCount(d.row)),d.el.style.top=v-f.offset+"px";var y=d.coverGutter?0:c.gutterWidth;d.fixedWidth||(y-=c.scrollLeft),d.el.style.left=y+"px",d.fullWidth&&d.screenWidth&&(d.el.style.minWidth=f.width+2*f.padding+"px"),d.fixedWidth?d.el.style.right=c.scrollBar.getWidth()+"px":d.el.style.right=""}}}}}).call(p.prototype),a.LineWidgets=p}),ace.define("ace/editor",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/lib/lang","ace/lib/useragent","ace/keyboard/textinput","ace/mouse/mouse_handler","ace/mouse/fold_handler","ace/keyboard/keybinding","ace/edit_session","ace/search","ace/range","ace/lib/event_emitter","ace/commands/command_manager","ace/commands/default_commands","ace/config","ace/token_iterator","ace/line_widgets","ace/clipboard"],function(e,a,m){var h=this&&this.__values||function(g){var w=typeof Symbol=="function"&&Symbol.iterator,$=w&&g[w],L=0;if($)return $.call(g);if(g&&typeof g.length=="number")return{next:function(){return g&&L>=g.length&&(g=void 0),{value:g&&g[L++],done:!g}}};throw new TypeError(w?"Object is not iterable.":"Symbol.iterator is not defined.")},p=e("./lib/oop"),u=e("./lib/dom"),c=e("./lib/lang"),f=e("./lib/useragent"),n=e("./keyboard/textinput").TextInput,t=e("./mouse/mouse_handler").MouseHandler,o=e("./mouse/fold_handler").FoldHandler,l=e("./keyboard/keybinding").KeyBinding,d=e("./edit_session").EditSession,v=e("./search").Search,y=e("./range").Range,x=e("./lib/event_emitter").EventEmitter,E=e("./commands/command_manager").CommandManager,T=e("./commands/default_commands").commands,k=e("./config"),b=e("./token_iterator").TokenIterator,S=e("./line_widgets").LineWidgets,A=e("./clipboard"),C=function(g,w,$){this.$toDestroy=[];var L=g.getContainerElement();this.container=L,this.renderer=g,this.id="editor"+ ++C.$uid,this.commands=new E(f.isMac?"mac":"win",T),typeof document=="object"&&(this.textInput=new n(g.getTextAreaContainer(),this),this.renderer.textarea=this.textInput.getElement(),this.$mouseHandler=new t(this),new o(this)),this.keyBinding=new l(this),this.$search=new v().set({wrap:!0}),this.$historyTracker=this.$historyTracker.bind(this),this.commands.on("exec",this.$historyTracker),this.$initOperationListeners(),this._$emitInputEvent=c.delayedCall(function(){this._signal("input",{}),this.session&&!this.session.destroyed&&this.session.bgTokenizer.scheduleStart()}.bind(this)),this.on("change",function(M,O){O._$emitInputEvent.schedule(31)}),this.setSession(w||$&&$.session||new d("")),k.resetOptions(this),$&&this.setOptions($),k._signal("editor",this)};C.$uid=0,function(){p.implement(this,x),this.$initOperationListeners=function(){this.commands.on("exec",this.startOperation.bind(this),!0),this.commands.on("afterExec",this.endOperation.bind(this),!0),this.$opResetTimer=c.delayedCall(this.endOperation.bind(this,!0)),this.on("change",function(){this.curOp||(this.startOperation(),this.curOp.selectionBefore=this.$lastSel),this.curOp.docChanged=!0}.bind(this),!0),this.on("changeSelection",function(){this.curOp||(this.startOperation(),this.curOp.selectionBefore=this.$lastSel),this.curOp.selectionChanged=!0}.bind(this),!0)},this.curOp=null,this.prevOp={},this.startOperation=function(g){if(this.curOp){if(!g||this.curOp.command)return;this.prevOp=this.curOp}g||(this.previousCommand=null,g={}),this.$opResetTimer.schedule(),this.curOp=this.session.curOp={command:g.command||{},args:g.args,scrollTop:this.renderer.scrollTop},this.curOp.selectionBefore=this.selection.toJSON()},this.endOperation=function(g){if(this.curOp&&this.session){if(g&&g.returnValue===!1||!this.session)return this.curOp=null;if(g==!0&&this.curOp.command&&this.curOp.command.name=="mouse"||(this._signal("beforeEndOperation"),!this.curOp))return;var w=this.curOp.command,$=w&&w.scrollIntoView;if($){switch($){case"center-animate":$="animate";case"center":this.renderer.scrollCursorIntoView(null,.5);break;case"animate":case"cursor":this.renderer.scrollCursorIntoView();break;case"selectionPart":var L=this.selection.getRange(),M=this.renderer.layerConfig;(L.start.row>=M.lastRow||L.end.row<=M.firstRow)&&this.renderer.scrollSelectionIntoView(this.selection.anchor,this.selection.lead);break}$=="animate"&&this.renderer.animateScrolling(this.curOp.scrollTop)}var O=this.selection.toJSON();this.curOp.selectionAfter=O,this.$lastSel=this.selection.toJSON(),this.session.getUndoManager().addSelection(O),this.prevOp=this.curOp,this.curOp=null}},this.$mergeableCommands=["backspace","del","insertstring"],this.$historyTracker=function(g){if(this.$mergeUndoDeltas){var w=this.prevOp,$=this.$mergeableCommands,L=w.command&&g.command.name==w.command.name;if(g.command.name=="insertstring"){var M=g.args;this.mergeNextCommand===void 0&&(this.mergeNextCommand=!0),L=L&&this.mergeNextCommand&&(!/\s/.test(M)||/\s/.test(w.args)),this.mergeNextCommand=!0}else L=L&&$.indexOf(g.command.name)!==-1;this.$mergeUndoDeltas!="always"&&Date.now()-this.sequenceStartTime>2e3&&(L=!1),L?this.session.mergeUndoDeltas=!0:$.indexOf(g.command.name)!==-1&&(this.sequenceStartTime=Date.now())}},this.setKeyboardHandler=function(g,w){if(g&&typeof g=="string"&&g!="ace"){this.$keybindingId=g;var $=this;k.loadModule(["keybinding",g],function(L){$.$keybindingId==g&&$.keyBinding.setKeyboardHandler(L&&L.handler),w&&w()})}else this.$keybindingId=null,this.keyBinding.setKeyboardHandler(g),w&&w()},this.getKeyboardHandler=function(){return this.keyBinding.getKeyboardHandler()},this.setSession=function(g){if(this.session!=g){this.curOp&&this.endOperation(),this.curOp={};var w=this.session;if(w){this.session.off("change",this.$onDocumentChange),this.session.off("changeMode",this.$onChangeMode),this.session.off("tokenizerUpdate",this.$onTokenizerUpdate),this.session.off("changeTabSize",this.$onChangeTabSize),this.session.off("changeWrapLimit",this.$onChangeWrapLimit),this.session.off("changeWrapMode",this.$onChangeWrapMode),this.session.off("changeFold",this.$onChangeFold),this.session.off("changeFrontMarker",this.$onChangeFrontMarker),this.session.off("changeBackMarker",this.$onChangeBackMarker),this.session.off("changeBreakpoint",this.$onChangeBreakpoint),this.session.off("changeAnnotation",this.$onChangeAnnotation),this.session.off("changeOverwrite",this.$onCursorChange),this.session.off("changeScrollTop",this.$onScrollTopChange),this.session.off("changeScrollLeft",this.$onScrollLeftChange);var $=this.session.getSelection();$.off("changeCursor",this.$onCursorChange),$.off("changeSelection",this.$onSelectionChange)}this.session=g,g?(this.$onDocumentChange=this.onDocumentChange.bind(this),g.on("change",this.$onDocumentChange),this.renderer.setSession(g),this.$onChangeMode=this.onChangeMode.bind(this),g.on("changeMode",this.$onChangeMode),this.$onTokenizerUpdate=this.onTokenizerUpdate.bind(this),g.on("tokenizerUpdate",this.$onTokenizerUpdate),this.$onChangeTabSize=this.renderer.onChangeTabSize.bind(this.renderer),g.on("changeTabSize",this.$onChangeTabSize),this.$onChangeWrapLimit=this.onChangeWrapLimit.bind(this),g.on("changeWrapLimit",this.$onChangeWrapLimit),this.$onChangeWrapMode=this.onChangeWrapMode.bind(this),g.on("changeWrapMode",this.$onChangeWrapMode),this.$onChangeFold=this.onChangeFold.bind(this),g.on("changeFold",this.$onChangeFold),this.$onChangeFrontMarker=this.onChangeFrontMarker.bind(this),this.session.on("changeFrontMarker",this.$onChangeFrontMarker),this.$onChangeBackMarker=this.onChangeBackMarker.bind(this),this.session.on("changeBackMarker",this.$onChangeBackMarker),this.$onChangeBreakpoint=this.onChangeBreakpoint.bind(this),this.session.on("changeBreakpoint",this.$onChangeBreakpoint),this.$onChangeAnnotation=this.onChangeAnnotation.bind(this),this.session.on("changeAnnotation",this.$onChangeAnnotation),this.$onCursorChange=this.onCursorChange.bind(this),this.session.on("changeOverwrite",this.$onCursorChange),this.$onScrollTopChange=this.onScrollTopChange.bind(this),this.session.on("changeScrollTop",this.$onScrollTopChange),this.$onScrollLeftChange=this.onScrollLeftChange.bind(this),this.session.on("changeScrollLeft",this.$onScrollLeftChange),this.selection=g.getSelection(),this.selection.on("changeCursor",this.$onCursorChange),this.$onSelectionChange=this.onSelectionChange.bind(this),this.selection.on("changeSelection",this.$onSelectionChange),this.onChangeMode(),this.onCursorChange(),this.onScrollTopChange(),this.onScrollLeftChange(),this.onSelectionChange(),this.onChangeFrontMarker(),this.onChangeBackMarker(),this.onChangeBreakpoint(),this.onChangeAnnotation(),this.session.getUseWrapMode()&&this.renderer.adjustWrapLimit(),this.renderer.updateFull()):(this.selection=null,this.renderer.setSession(g)),this._signal("changeSession",{session:g,oldSession:w}),this.curOp=null,w&&w._signal("changeEditor",{oldEditor:this}),g&&g._signal("changeEditor",{editor:this}),g&&!g.destroyed&&g.bgTokenizer.scheduleStart()}},this.getSession=function(){return this.session},this.setValue=function(g,w){return this.session.doc.setValue(g),w?w==1?this.navigateFileEnd():w==-1&&this.navigateFileStart():this.selectAll(),g},this.getValue=function(){return this.session.getValue()},this.getSelection=function(){return this.selection},this.resize=function(g){this.renderer.onResize(g)},this.setTheme=function(g,w){this.renderer.setTheme(g,w)},this.getTheme=function(){return this.renderer.getTheme()},this.setStyle=function(g){this.renderer.setStyle(g)},this.unsetStyle=function(g){this.renderer.unsetStyle(g)},this.getFontSize=function(){return this.getOption("fontSize")||u.computedStyle(this.container).fontSize},this.setFontSize=function(g){this.setOption("fontSize",g)},this.$highlightBrackets=function(){if(!this.$highlightPending){var g=this;this.$highlightPending=!0,setTimeout(function(){g.$highlightPending=!1;var w=g.session;if(!(!w||w.destroyed)){w.$bracketHighlight&&(w.$bracketHighlight.markerIds.forEach(function(j){w.removeMarker(j)}),w.$bracketHighlight=null);var $=g.getCursorPosition(),L=g.getKeyboardHandler(),M=L&&L.$getDirectionForHighlight&&L.$getDirectionForHighlight(g),O=w.getMatchingBracketRanges($,M);if(!O){var I=new b(w,$.row,$.column),B=I.getCurrentToken();if(B&&/\b(?:tag-open|tag-name)/.test(B.type)){var H=w.getMatchingTags($);H&&(O=[H.openTagName,H.closeTagName])}}if(!O&&w.$mode.getMatching&&(O=w.$mode.getMatching(g.session)),!O){g.getHighlightIndentGuides()&&g.renderer.$textLayer.$highlightIndentGuide();return}var K="ace_bracket";Array.isArray(O)?O.length==1&&(K="ace_error_bracket"):O=[O],O.length==2&&(y.comparePoints(O[0].end,O[1].start)==0?O=[y.fromPoints(O[0].start,O[1].end)]:y.comparePoints(O[0].start,O[1].end)==0&&(O=[y.fromPoints(O[1].start,O[0].end)])),w.$bracketHighlight={ranges:O,markerIds:O.map(function(j){return w.addMarker(j,K,"text")})},g.getHighlightIndentGuides()&&g.renderer.$textLayer.$highlightIndentGuide()}},50)}},this.focus=function(){this.textInput.focus()},this.isFocused=function(){return this.textInput.isFocused()},this.blur=function(){this.textInput.blur()},this.onFocus=function(g){this.$isFocused||(this.$isFocused=!0,this.renderer.showCursor(),this.renderer.visualizeFocus(),this._emit("focus",g))},this.onBlur=function(g){this.$isFocused&&(this.$isFocused=!1,this.renderer.hideCursor(),this.renderer.visualizeBlur(),this._emit("blur",g))},this.$cursorChange=function(){this.renderer.updateCursor(),this.$highlightBrackets(),this.$updateHighlightActiveLine()},this.onDocumentChange=function(g){var w=this.session.$useWrapMode,$=g.start.row==g.end.row?g.end.row:1/0;this.renderer.updateLines(g.start.row,$,w),this._signal("change",g),this.$cursorChange()},this.onTokenizerUpdate=function(g){var w=g.data;this.renderer.updateLines(w.first,w.last)},this.onScrollTopChange=function(){this.renderer.scrollToY(this.session.getScrollTop())},this.onScrollLeftChange=function(){this.renderer.scrollToX(this.session.getScrollLeft())},this.onCursorChange=function(){this.$cursorChange(),this._signal("changeSelection")},this.$updateHighlightActiveLine=function(){var g=this.getSession(),w;if(this.$highlightActiveLine&&((this.$selectionStyle!="line"||!this.selection.isMultiLine())&&(w=this.getCursorPosition()),this.renderer.theme&&this.renderer.theme.$selectionColorConflict&&!this.selection.isEmpty()&&(w=!1),this.renderer.$maxLines&&this.session.getLength()===1&&!(this.renderer.$minLines>1)&&(w=!1)),g.$highlightLineMarker&&!w)g.removeMarker(g.$highlightLineMarker.id),g.$highlightLineMarker=null;else if(!g.$highlightLineMarker&&w){var $=new y(w.row,w.column,w.row,1/0);$.id=g.addMarker($,"ace_active-line","screenLine"),g.$highlightLineMarker=$}else w&&(g.$highlightLineMarker.start.row=w.row,g.$highlightLineMarker.end.row=w.row,g.$highlightLineMarker.start.column=w.column,g._signal("changeBackMarker"))},this.onSelectionChange=function(g){var w=this.session;if(w.$selectionMarker&&w.removeMarker(w.$selectionMarker),w.$selectionMarker=null,this.selection.isEmpty())this.$updateHighlightActiveLine();else{var $=this.selection.getRange(),L=this.getSelectionStyle();w.$selectionMarker=w.addMarker($,"ace_selection",L)}var M=this.$highlightSelectedWord&&this.$getSelectionHighLightRegexp();this.session.highlight(M),this._signal("changeSelection")},this.$getSelectionHighLightRegexp=function(){var g=this.session,w=this.getSelectionRange();if(!(w.isEmpty()||w.isMultiLine())){var $=w.start.column,L=w.end.column,M=g.getLine(w.start.row),O=M.substring($,L);if(!(O.length>5e3||!/[\w\d]/.test(O))){var I=this.$search.$assembleRegExp({wholeWord:!0,caseSensitive:!0,needle:O}),B=M.substring($-1,L+1);if(I.test(B))return I}}},this.onChangeFrontMarker=function(){this.renderer.updateFrontMarkers()},this.onChangeBackMarker=function(){this.renderer.updateBackMarkers()},this.onChangeBreakpoint=function(){this.renderer.updateBreakpoints()},this.onChangeAnnotation=function(){this.renderer.setAnnotations(this.session.getAnnotations())},this.onChangeMode=function(g){this.renderer.updateText(),this._emit("changeMode",g)},this.onChangeWrapLimit=function(){this.renderer.updateFull()},this.onChangeWrapMode=function(){this.renderer.onResize(!0)},this.onChangeFold=function(){this.$updateHighlightActiveLine(),this.renderer.updateFull()},this.getSelectedText=function(){return this.session.getTextRange(this.getSelectionRange())},this.getCopyText=function(){var g=this.getSelectedText(),w=this.session.doc.getNewLineCharacter(),$=!1;if(!g&&this.$copyWithEmptySelection){$=!0;for(var L=this.selection.getAllRanges(),M=0;M<L.length;M++){var O=L[M];M&&L[M-1].start.row==O.start.row||(g+=this.session.getLine(O.start.row)+w)}}var I={text:g};return this._signal("copy",I),A.lineMode=$?I.text:!1,I.text},this.onCopy=function(){this.commands.exec("copy",this)},this.onCut=function(){this.commands.exec("cut",this)},this.onPaste=function(g,w){var $={text:g,event:w};this.commands.exec("paste",this,$)},this.$handlePaste=function(g){typeof g=="string"&&(g={text:g}),this._signal("paste",g);var w=g.text,$=w===A.lineMode,L=this.session;if(!this.inMultiSelectMode||this.inVirtualSelectionMode)$?L.insert({row:this.selection.lead.row,column:0},w):this.insert(w);else if($)this.selection.rangeList.ranges.forEach(function(K){L.insert({row:K.start.row,column:0},w)});else{var M=w.split(/\r\n|\r|\n/),O=this.selection.rangeList.ranges,I=M.length==2&&(!M[0]||!M[1]);if(M.length!=O.length||I)return this.commands.exec("insertstring",this,w);for(var B=O.length;B--;){var H=O[B];H.isEmpty()||L.remove(H),L.insert(H.start,M[B])}}},this.execCommand=function(g,w){return this.commands.exec(g,this,w)},this.insert=function(g,w){var $=this.session,L=$.getMode(),M=this.getCursorPosition();if(this.getBehavioursEnabled()&&!w){var O=L.transformAction($.getState(M.row),"insertion",this,$,g);O&&(g!==O.text&&(this.inVirtualSelectionMode||(this.session.mergeUndoDeltas=!1,this.mergeNextCommand=!1)),g=O.text)}if(g=="	"&&(g=this.session.getTabString()),this.selection.isEmpty()){if(this.session.getOverwrite()&&g.indexOf(`
`)==-1){var I=new y.fromPoints(M,M);I.end.column+=g.length,this.session.remove(I)}}else{var I=this.getSelectionRange();M=this.session.remove(I),this.clearSelection()}if(g==`
`||g==`\r
`){var j=$.getLine(M.row);if(M.column>j.search(/\S|$/)){var B=j.substr(M.column).search(/\S|$/);$.doc.removeInLine(M.row,M.column,M.column+B)}}this.clearSelection();var H=M.column,K=$.getState(M.row),j=$.getLine(M.row),Y=L.checkOutdent(K,j,g);if($.insert(M,g),O&&O.selection&&(O.selection.length==2?this.selection.setSelectionRange(new y(M.row,H+O.selection[0],M.row,H+O.selection[1])):this.selection.setSelectionRange(new y(M.row+O.selection[0],O.selection[1],M.row+O.selection[2],O.selection[3]))),this.$enableAutoIndent){if($.getDocument().isNewLine(g)){var Q=L.getNextLineIndent(K,j.slice(0,M.column),$.getTabString());$.insert({row:M.row+1,column:0},Q)}Y&&L.autoOutdent(K,$,M.row)}},this.autoIndent=function(){var g=this.session,w=g.getMode(),$,L;if(this.selection.isEmpty())$=0,L=g.doc.getLength()-1;else{var M=this.getSelectionRange();$=M.start.row,L=M.end.row}for(var O="",I="",B="",H,K,j,Y=g.getTabString(),Q=$;Q<=L;Q++)Q>0&&(O=g.getState(Q-1),I=g.getLine(Q-1),B=w.getNextLineIndent(O,I,Y)),H=g.getLine(Q),K=w.$getIndent(H),B!==K&&(K.length>0&&(j=new y(Q,0,Q,K.length),g.remove(j)),B.length>0&&g.insert({row:Q,column:0},B)),w.autoOutdent(O,g,Q)},this.onTextInput=function(g,w){if(!w)return this.keyBinding.onTextInput(g);this.startOperation({command:{name:"insertstring"}});var $=this.applyComposition.bind(this,g,w);this.selection.rangeCount?this.forEachSelection($):$(),this.endOperation()},this.applyComposition=function(g,w){if(w.extendLeft||w.extendRight){var $=this.selection.getRange();$.start.column-=w.extendLeft,$.end.column+=w.extendRight,$.start.column<0&&($.start.row--,$.start.column+=this.session.getLine($.start.row).length+1),this.selection.setRange($),!g&&!$.isEmpty()&&this.remove()}if((g||!this.selection.isEmpty())&&this.insert(g,!0),w.restoreStart||w.restoreEnd){var $=this.selection.getRange();$.start.column-=w.restoreStart,$.end.column-=w.restoreEnd,this.selection.setRange($)}},this.onCommandKey=function(g,w,$){return this.keyBinding.onCommandKey(g,w,$)},this.setOverwrite=function(g){this.session.setOverwrite(g)},this.getOverwrite=function(){return this.session.getOverwrite()},this.toggleOverwrite=function(){this.session.toggleOverwrite()},this.setScrollSpeed=function(g){this.setOption("scrollSpeed",g)},this.getScrollSpeed=function(){return this.getOption("scrollSpeed")},this.setDragDelay=function(g){this.setOption("dragDelay",g)},this.getDragDelay=function(){return this.getOption("dragDelay")},this.setSelectionStyle=function(g){this.setOption("selectionStyle",g)},this.getSelectionStyle=function(){return this.getOption("selectionStyle")},this.setHighlightActiveLine=function(g){this.setOption("highlightActiveLine",g)},this.getHighlightActiveLine=function(){return this.getOption("highlightActiveLine")},this.setHighlightGutterLine=function(g){this.setOption("highlightGutterLine",g)},this.getHighlightGutterLine=function(){return this.getOption("highlightGutterLine")},this.setHighlightSelectedWord=function(g){this.setOption("highlightSelectedWord",g)},this.getHighlightSelectedWord=function(){return this.$highlightSelectedWord},this.setAnimatedScroll=function(g){this.renderer.setAnimatedScroll(g)},this.getAnimatedScroll=function(){return this.renderer.getAnimatedScroll()},this.setShowInvisibles=function(g){this.renderer.setShowInvisibles(g)},this.getShowInvisibles=function(){return this.renderer.getShowInvisibles()},this.setDisplayIndentGuides=function(g){this.renderer.setDisplayIndentGuides(g)},this.getDisplayIndentGuides=function(){return this.renderer.getDisplayIndentGuides()},this.setHighlightIndentGuides=function(g){this.renderer.setHighlightIndentGuides(g)},this.getHighlightIndentGuides=function(){return this.renderer.getHighlightIndentGuides()},this.setShowPrintMargin=function(g){this.renderer.setShowPrintMargin(g)},this.getShowPrintMargin=function(){return this.renderer.getShowPrintMargin()},this.setPrintMarginColumn=function(g){this.renderer.setPrintMarginColumn(g)},this.getPrintMarginColumn=function(){return this.renderer.getPrintMarginColumn()},this.setReadOnly=function(g){this.setOption("readOnly",g)},this.getReadOnly=function(){return this.getOption("readOnly")},this.setBehavioursEnabled=function(g){this.setOption("behavioursEnabled",g)},this.getBehavioursEnabled=function(){return this.getOption("behavioursEnabled")},this.setWrapBehavioursEnabled=function(g){this.setOption("wrapBehavioursEnabled",g)},this.getWrapBehavioursEnabled=function(){return this.getOption("wrapBehavioursEnabled")},this.setShowFoldWidgets=function(g){this.setOption("showFoldWidgets",g)},this.getShowFoldWidgets=function(){return this.getOption("showFoldWidgets")},this.setFadeFoldWidgets=function(g){this.setOption("fadeFoldWidgets",g)},this.getFadeFoldWidgets=function(){return this.getOption("fadeFoldWidgets")},this.remove=function(g){this.selection.isEmpty()&&(g=="left"?this.selection.selectLeft():this.selection.selectRight());var w=this.getSelectionRange();if(this.getBehavioursEnabled()){var $=this.session,L=$.getState(w.start.row),M=$.getMode().transformAction(L,"deletion",this,$,w);if(w.end.column===0){var O=$.getTextRange(w);if(O[O.length-1]==`
`){var I=$.getLine(w.end.row);/^\s+$/.test(I)&&(w.end.column=I.length)}}M&&(w=M)}this.session.remove(w),this.clearSelection()},this.removeWordRight=function(){this.selection.isEmpty()&&this.selection.selectWordRight(),this.session.remove(this.getSelectionRange()),this.clearSelection()},this.removeWordLeft=function(){this.selection.isEmpty()&&this.selection.selectWordLeft(),this.session.remove(this.getSelectionRange()),this.clearSelection()},this.removeToLineStart=function(){this.selection.isEmpty()&&this.selection.selectLineStart(),this.selection.isEmpty()&&this.selection.selectLeft(),this.session.remove(this.getSelectionRange()),this.clearSelection()},this.removeToLineEnd=function(){this.selection.isEmpty()&&this.selection.selectLineEnd();var g=this.getSelectionRange();g.start.column==g.end.column&&g.start.row==g.end.row&&(g.end.column=0,g.end.row++),this.session.remove(g),this.clearSelection()},this.splitLine=function(){this.selection.isEmpty()||(this.session.remove(this.getSelectionRange()),this.clearSelection());var g=this.getCursorPosition();this.insert(`
`),this.moveCursorToPosition(g)},this.setGhostText=function(g,w){this.session.widgetManager||(this.session.widgetManager=new S(this.session),this.session.widgetManager.attach(this)),this.renderer.setGhostText(g,w)},this.removeGhostText=function(){this.session.widgetManager&&this.renderer.removeGhostText()},this.transposeLetters=function(){if(this.selection.isEmpty()){var g=this.getCursorPosition(),w=g.column;if(w!==0){var $=this.session.getLine(g.row),L,M;w<$.length?(L=$.charAt(w)+$.charAt(w-1),M=new y(g.row,w-1,g.row,w+1)):(L=$.charAt(w-1)+$.charAt(w-2),M=new y(g.row,w-2,g.row,w)),this.session.replace(M,L),this.session.selection.moveToPosition(M.end)}}},this.toLowerCase=function(){var g=this.getSelectionRange();this.selection.isEmpty()&&this.selection.selectWord();var w=this.getSelectionRange(),$=this.session.getTextRange(w);this.session.replace(w,$.toLowerCase()),this.selection.setSelectionRange(g)},this.toUpperCase=function(){var g=this.getSelectionRange();this.selection.isEmpty()&&this.selection.selectWord();var w=this.getSelectionRange(),$=this.session.getTextRange(w);this.session.replace(w,$.toUpperCase()),this.selection.setSelectionRange(g)},this.indent=function(){var g=this.session,w=this.getSelectionRange();if(w.start.row<w.end.row){var $=this.$getSelectedRows();g.indentRows($.first,$.last,"	");return}else if(w.start.column<w.end.column){var L=g.getTextRange(w);if(!/^\s+$/.test(L)){var $=this.$getSelectedRows();g.indentRows($.first,$.last,"	");return}}var M=g.getLine(w.start.row),O=w.start,I=g.getTabSize(),B=g.documentToScreenColumn(O.row,O.column);if(this.session.getUseSoftTabs())var H=I-B%I,K=c.stringRepeat(" ",H);else{for(var H=B%I;M[w.start.column-1]==" "&&H;)w.start.column--,H--;this.selection.setSelectionRange(w),K="	"}return this.insert(K)},this.blockIndent=function(){var g=this.$getSelectedRows();this.session.indentRows(g.first,g.last,"	")},this.blockOutdent=function(){var g=this.session.getSelection();this.session.outdentRows(g.getRange())},this.sortLines=function(){for(var g=this.$getSelectedRows(),w=this.session,$=[],L=g.first;L<=g.last;L++)$.push(w.getLine(L));$.sort(function(I,B){return I.toLowerCase()<B.toLowerCase()?-1:I.toLowerCase()>B.toLowerCase()?1:0});for(var M=new y(0,0,0,0),L=g.first;L<=g.last;L++){var O=w.getLine(L);M.start.row=L,M.end.row=L,M.end.column=O.length,w.replace(M,$[L-g.first])}},this.toggleCommentLines=function(){var g=this.session.getState(this.getCursorPosition().row),w=this.$getSelectedRows();this.session.getMode().toggleCommentLines(g,this.session,w.first,w.last)},this.toggleBlockComment=function(){var g=this.getCursorPosition(),w=this.session.getState(g.row),$=this.getSelectionRange();this.session.getMode().toggleBlockComment(w,this.session,$,g)},this.getNumberAt=function(g,w){var $=/[\-]?[0-9]+(?:\.[0-9]+)?/g;$.lastIndex=0;for(var L=this.session.getLine(g);$.lastIndex<w;){var M=$.exec(L);if(M.index<=w&&M.index+M[0].length>=w){var O={value:M[0],start:M.index,end:M.index+M[0].length};return O}}return null},this.modifyNumber=function(g){var w=this.selection.getCursor().row,$=this.selection.getCursor().column,L=new y(w,$-1,w,$),M=this.session.getTextRange(L);if(!isNaN(parseFloat(M))&&isFinite(M)){var O=this.getNumberAt(w,$);if(O){var I=O.value.indexOf(".")>=0?O.start+O.value.indexOf(".")+1:O.end,B=O.start+O.value.length-I,H=parseFloat(O.value);H*=Math.pow(10,B),I!==O.end&&$<I?g*=Math.pow(10,O.end-$-1):g*=Math.pow(10,O.end-$),H+=g,H/=Math.pow(10,B);var K=H.toFixed(B),j=new y(w,O.start,w,O.end);this.session.replace(j,K),this.moveCursorTo(w,Math.max(O.start+1,$+K.length-O.value.length))}}else this.toggleWord()},this.$toggleWordPairs=[["first","last"],["true","false"],["yes","no"],["width","height"],["top","bottom"],["right","left"],["on","off"],["x","y"],["get","set"],["max","min"],["horizontal","vertical"],["show","hide"],["add","remove"],["up","down"],["before","after"],["even","odd"],["in","out"],["inside","outside"],["next","previous"],["increase","decrease"],["attach","detach"],["&&","||"],["==","!="]],this.toggleWord=function(){var g=this.selection.getCursor().row,w=this.selection.getCursor().column;this.selection.selectWord();var $=this.getSelectedText(),L=this.selection.getWordRange().start.column,M=$.replace(/([a-z]+|[A-Z]+)(?=[A-Z_]|$)/g,"$1 ").split(/\s/),O=w-L-1;O<0&&(O=0);var I=0,B=0,H=this;$.match(/[A-Za-z0-9_]+/)&&M.forEach(function(se,ee){B=I+se.length,O>=I&&O<=B&&($=se,H.selection.clearSelection(),H.moveCursorTo(g,I+L),H.selection.selectTo(g,B+L)),I=B});for(var K=this.$toggleWordPairs,j,Y=0;Y<K.length;Y++)for(var Q=K[Y],z=0;z<=1;z++){var V=+!z,X=$.match(new RegExp("^\\s?_?("+c.escapeRegExp(Q[z])+")\\s?$","i"));if(X){var ie=$.match(new RegExp("([_]|^|\\s)("+c.escapeRegExp(X[1])+")($|\\s)","g"));ie&&(j=$.replace(new RegExp(c.escapeRegExp(Q[z]),"i"),function(se){var ee=Q[V];return se.toUpperCase()==se?ee=ee.toUpperCase():se.charAt(0).toUpperCase()==se.charAt(0)&&(ee=ee.substr(0,0)+Q[V].charAt(0).toUpperCase()+ee.substr(1)),ee}),this.insert(j),j="")}}},this.findLinkAt=function(g,w){var $,L,M=this.session.getLine(g),O=M.split(/((?:https?|ftp):\/\/[\S]+)/),I=w;I<0&&(I=0);var B=0,H=0,K;try{for(var j=h(O),Y=j.next();!Y.done;Y=j.next()){var Q=Y.value;if(H=B+Q.length,I>=B&&I<=H&&Q.match(/((?:https?|ftp):\/\/[\S]+)/)){K=Q.replace(/[\s:.,'";}\]]+$/,"");break}B=H}}catch(z){$={error:z}}finally{try{Y&&!Y.done&&(L=j.return)&&L.call(j)}finally{if($)throw $.error}}return K},this.openLink=function(){var g=this.selection.getCursor(),w=this.findLinkAt(g.row,g.column);return w&&window.open(w,"_blank"),w!=null},this.removeLines=function(){var g=this.$getSelectedRows();this.session.removeFullLines(g.first,g.last),this.clearSelection()},this.duplicateSelection=function(){var g=this.selection,w=this.session,$=g.getRange(),L=g.isBackwards();if($.isEmpty()){var M=$.start.row;w.duplicateLines(M,M)}else{var O=L?$.start:$.end,I=w.insert(O,w.getTextRange($),!1);$.start=O,$.end=I,g.setSelectionRange($,L)}},this.moveLinesDown=function(){this.$moveLines(1,!1)},this.moveLinesUp=function(){this.$moveLines(-1,!1)},this.moveText=function(g,w,$){return this.session.moveText(g,w,$)},this.copyLinesUp=function(){this.$moveLines(-1,!0)},this.copyLinesDown=function(){this.$moveLines(1,!0)},this.$moveLines=function(g,w){var $,L,M=this.selection;if(!M.inMultiSelectMode||this.inVirtualSelectionMode){var O=M.toOrientedRange();$=this.$getSelectedRows(O),L=this.session.$moveLines($.first,$.last,w?0:g),w&&g==-1&&(L=0),O.moveBy(L,0),M.fromOrientedRange(O)}else{var I=M.rangeList.ranges;M.rangeList.detach(this.session),this.inVirtualSelectionMode=!0;for(var B=0,H=0,K=I.length,j=0;j<K;j++){var Y=j;I[j].moveBy(B,0),$=this.$getSelectedRows(I[j]);for(var Q=$.first,z=$.last;++j<K;){H&&I[j].moveBy(H,0);var V=this.$getSelectedRows(I[j]);if(w&&V.first!=z)break;if(!w&&V.first>z+1)break;z=V.last}for(j--,B=this.session.$moveLines(Q,z,w?0:g),w&&g==-1&&(Y=j+1);Y<=j;)I[Y].moveBy(B,0),Y++;w||(B=0),H+=B}M.fromOrientedRange(M.ranges[0]),M.rangeList.attach(this.session),this.inVirtualSelectionMode=!1}},this.$getSelectedRows=function(g){return g=(g||this.getSelectionRange()).collapseRows(),{first:this.session.getRowFoldStart(g.start.row),last:this.session.getRowFoldEnd(g.end.row)}},this.onCompositionStart=function(g){this.renderer.showComposition(g)},this.onCompositionUpdate=function(g){this.renderer.setCompositionText(g)},this.onCompositionEnd=function(){this.renderer.hideComposition()},this.getFirstVisibleRow=function(){return this.renderer.getFirstVisibleRow()},this.getLastVisibleRow=function(){return this.renderer.getLastVisibleRow()},this.isRowVisible=function(g){return g>=this.getFirstVisibleRow()&&g<=this.getLastVisibleRow()},this.isRowFullyVisible=function(g){return g>=this.renderer.getFirstFullyVisibleRow()&&g<=this.renderer.getLastFullyVisibleRow()},this.$getVisibleRowCount=function(){return this.renderer.getScrollBottomRow()-this.renderer.getScrollTopRow()+1},this.$moveByPage=function(g,w){var $=this.renderer,L=this.renderer.layerConfig,M=g*Math.floor(L.height/L.lineHeight);w===!0?this.selection.$moveSelection(function(){this.moveCursorBy(M,0)}):w===!1&&(this.selection.moveCursorBy(M,0),this.selection.clearSelection());var O=$.scrollTop;$.scrollBy(0,M*L.lineHeight),w!=null&&$.scrollCursorIntoView(null,.5),$.animateScrolling(O)},this.selectPageDown=function(){this.$moveByPage(1,!0)},this.selectPageUp=function(){this.$moveByPage(-1,!0)},this.gotoPageDown=function(){this.$moveByPage(1,!1)},this.gotoPageUp=function(){this.$moveByPage(-1,!1)},this.scrollPageDown=function(){this.$moveByPage(1)},this.scrollPageUp=function(){this.$moveByPage(-1)},this.scrollToRow=function(g){this.renderer.scrollToRow(g)},this.scrollToLine=function(g,w,$,L){this.renderer.scrollToLine(g,w,$,L)},this.centerSelection=function(){var g=this.getSelectionRange(),w={row:Math.floor(g.start.row+(g.end.row-g.start.row)/2),column:Math.floor(g.start.column+(g.end.column-g.start.column)/2)};this.renderer.alignCursor(w,.5)},this.getCursorPosition=function(){return this.selection.getCursor()},this.getCursorPositionScreen=function(){return this.session.documentToScreenPosition(this.getCursorPosition())},this.getSelectionRange=function(){return this.selection.getRange()},this.selectAll=function(){this.selection.selectAll()},this.clearSelection=function(){this.selection.clearSelection()},this.moveCursorTo=function(g,w){this.selection.moveCursorTo(g,w)},this.moveCursorToPosition=function(g){this.selection.moveCursorToPosition(g)},this.jumpToMatching=function(g,w){var $=this.getCursorPosition(),L=new b(this.session,$.row,$.column),M=L.getCurrentToken(),O=0;M&&M.type.indexOf("tag-name")!==-1&&(M=L.stepBackward());var I=M||L.stepForward();if(I){var B,H=!1,K={},j=$.column-I.start,Y,Q={")":"(","(":"(","]":"[","[":"[","{":"{","}":"{"};do{if(I.value.match(/[{}()\[\]]/g)){for(;j<I.value.length&&!H;j++)if(Q[I.value[j]])switch(Y=Q[I.value[j]]+"."+I.type.replace("rparen","lparen"),isNaN(K[Y])&&(K[Y]=0),I.value[j]){case"(":case"[":case"{":K[Y]++;break;case")":case"]":case"}":K[Y]--,K[Y]===-1&&(B="bracket",H=!0);break}}else I.type.indexOf("tag-name")!==-1&&(isNaN(K[I.value])&&(K[I.value]=0),M.value==="<"&&O>1?K[I.value]++:M.value==="</"&&K[I.value]--,K[I.value]===-1&&(B="tag",H=!0));H||(M=I,O++,I=L.stepForward(),j=0)}while(I&&!H);if(B){var z,V;if(B==="bracket")z=this.session.getBracketRange($),z||(z=new y(L.getCurrentTokenRow(),L.getCurrentTokenColumn()+j-1,L.getCurrentTokenRow(),L.getCurrentTokenColumn()+j-1),V=z.start,(w||V.row===$.row&&Math.abs(V.column-$.column)<2)&&(z=this.session.getBracketRange(V)));else if(B==="tag"){if(!I||I.type.indexOf("tag-name")===-1)return;if(z=new y(L.getCurrentTokenRow(),L.getCurrentTokenColumn()-2,L.getCurrentTokenRow(),L.getCurrentTokenColumn()-2),z.compare($.row,$.column)===0){var X=this.session.getMatchingTags($);X&&(X.openTag.contains($.row,$.column)?(z=X.closeTag,V=z.start):(z=X.openTag,X.closeTag.start.row===$.row&&X.closeTag.start.column===$.column?V=z.end:V=z.start))}V=V||z.start}V=z&&z.cursor||V,V&&(g?z&&w?this.selection.setRange(z):z&&z.isEqual(this.getSelectionRange())?this.clearSelection():this.selection.selectTo(V.row,V.column):this.selection.moveTo(V.row,V.column))}}},this.gotoLine=function(g,w,$){this.selection.clearSelection(),this.session.unfold({row:g-1,column:w||0}),this.exitMultiSelectMode&&this.exitMultiSelectMode(),this.moveCursorTo(g-1,w||0),this.isRowFullyVisible(g-1)||this.scrollToLine(g-1,!0,$)},this.navigateTo=function(g,w){this.selection.moveTo(g,w)},this.navigateUp=function(g){if(this.selection.isMultiLine()&&!this.selection.isBackwards()){var w=this.selection.anchor.getPosition();return this.moveCursorToPosition(w)}this.selection.clearSelection(),this.selection.moveCursorBy(-g||-1,0)},this.navigateDown=function(g){if(this.selection.isMultiLine()&&this.selection.isBackwards()){var w=this.selection.anchor.getPosition();return this.moveCursorToPosition(w)}this.selection.clearSelection(),this.selection.moveCursorBy(g||1,0)},this.navigateLeft=function(g){if(this.selection.isEmpty())for(g=g||1;g--;)this.selection.moveCursorLeft();else{var w=this.getSelectionRange().start;this.moveCursorToPosition(w)}this.clearSelection()},this.navigateRight=function(g){if(this.selection.isEmpty())for(g=g||1;g--;)this.selection.moveCursorRight();else{var w=this.getSelectionRange().end;this.moveCursorToPosition(w)}this.clearSelection()},this.navigateLineStart=function(){this.selection.moveCursorLineStart(),this.clearSelection()},this.navigateLineEnd=function(){this.selection.moveCursorLineEnd(),this.clearSelection()},this.navigateFileEnd=function(){this.selection.moveCursorFileEnd(),this.clearSelection()},this.navigateFileStart=function(){this.selection.moveCursorFileStart(),this.clearSelection()},this.navigateWordRight=function(){this.selection.moveCursorWordRight(),this.clearSelection()},this.navigateWordLeft=function(){this.selection.moveCursorWordLeft(),this.clearSelection()},this.replace=function(g,w){w&&this.$search.set(w);var $=this.$search.find(this.session),L=0;return $&&(this.$tryReplace($,g)&&(L=1),this.selection.setSelectionRange($),this.renderer.scrollSelectionIntoView($.start,$.end)),L},this.replaceAll=function(g,w){w&&this.$search.set(w);var $=this.$search.findAll(this.session),L=0;if(!$.length)return L;var M=this.getSelectionRange();this.selection.moveTo(0,0);for(var O=$.length-1;O>=0;--O)this.$tryReplace($[O],g)&&L++;return this.selection.setSelectionRange(M),L},this.$tryReplace=function(g,w){var $=this.session.getTextRange(g);return w=this.$search.replace($,w),w!==null?(g.end=this.session.replace(g,w),g):null},this.getLastSearchOptions=function(){return this.$search.getOptions()},this.find=function(g,w,$){w||(w={}),typeof g=="string"||g instanceof RegExp?w.needle=g:typeof g=="object"&&p.mixin(w,g);var L=this.selection.getRange();w.needle==null&&(g=this.session.getTextRange(L)||this.$search.$options.needle,g||(L=this.session.getWordRange(L.start.row,L.start.column),g=this.session.getTextRange(L)),this.$search.set({needle:g})),this.$search.set(w),w.start||this.$search.set({start:L});var M=this.$search.find(this.session);if(w.preventScroll)return M;if(M)return this.revealRange(M,$),M;w.backwards?L.start=L.end:L.end=L.start,this.selection.setRange(L)},this.findNext=function(g,w){this.find({skipCurrent:!0,backwards:!1},g,w)},this.findPrevious=function(g,w){this.find(g,{skipCurrent:!0,backwards:!0},w)},this.revealRange=function(g,w){this.session.unfold(g),this.selection.setSelectionRange(g);var $=this.renderer.scrollTop;this.renderer.scrollSelectionIntoView(g.start,g.end,.5),w!==!1&&this.renderer.animateScrolling($)},this.undo=function(){this.session.getUndoManager().undo(this.session),this.renderer.scrollCursorIntoView(null,.5)},this.redo=function(){this.session.getUndoManager().redo(this.session),this.renderer.scrollCursorIntoView(null,.5)},this.destroy=function(){this.$toDestroy&&(this.$toDestroy.forEach(function(g){g.destroy()}),this.$toDestroy=null),this.$mouseHandler&&this.$mouseHandler.destroy(),this.renderer.destroy(),this._signal("destroy",this),this.session&&this.session.destroy(),this._$emitInputEvent&&this._$emitInputEvent.cancel(),this.removeAllListeners()},this.setAutoScrollEditorIntoView=function(g){if(g){var w,$=this,L=!1;this.$scrollAnchor||(this.$scrollAnchor=document.createElement("div"));var M=this.$scrollAnchor;M.style.cssText="position:absolute",this.container.insertBefore(M,this.container.firstChild);var O=this.on("changeSelection",function(){L=!0}),I=this.renderer.on("beforeRender",function(){L&&(w=$.renderer.container.getBoundingClientRect())}),B=this.renderer.on("afterRender",function(){if(L&&w&&($.isFocused()||$.searchBox&&$.searchBox.isFocused())){var H=$.renderer,K=H.$cursorLayer.$pixelPos,j=H.layerConfig,Y=K.top-j.offset;K.top>=0&&Y+w.top<0?L=!0:K.top<j.height&&K.top+w.top+j.lineHeight>window.innerHeight?L=!1:L=null,L!=null&&(M.style.top=Y+"px",M.style.left=K.left+"px",M.style.height=j.lineHeight+"px",M.scrollIntoView(L)),L=w=null}});this.setAutoScrollEditorIntoView=function(H){H||(delete this.setAutoScrollEditorIntoView,this.off("changeSelection",O),this.renderer.off("afterRender",B),this.renderer.off("beforeRender",I))}}},this.$resetCursorStyle=function(){var g=this.$cursorStyle||"ace",w=this.renderer.$cursorLayer;w&&(w.setSmoothBlinking(/smooth/.test(g)),w.isBlinking=!this.$readOnly&&g!="wide",u.setCssClass(w.element,"ace_slim-cursors",/slim/.test(g)))},this.prompt=function(g,w,$){var L=this;k.loadModule("ace/ext/prompt",function(M){M.prompt(L,g,w,$)})}}.call(C.prototype),k.defineOptions(C.prototype,"editor",{selectionStyle:{set:function(g){this.onSelectionChange(),this._signal("changeSelectionStyle",{data:g})},initialValue:"line"},highlightActiveLine:{set:function(){this.$updateHighlightActiveLine()},initialValue:!0},highlightSelectedWord:{set:function(g){this.$onSelectionChange()},initialValue:!0},readOnly:{set:function(g){this.textInput.setReadOnly(g),this.$resetCursorStyle()},initialValue:!1},copyWithEmptySelection:{set:function(g){this.textInput.setCopyWithEmptySelection(g)},initialValue:!1},cursorStyle:{set:function(g){this.$resetCursorStyle()},values:["ace","slim","smooth","wide"],initialValue:"ace"},mergeUndoDeltas:{values:[!1,!0,"always"],initialValue:!0},behavioursEnabled:{initialValue:!0},wrapBehavioursEnabled:{initialValue:!0},enableAutoIndent:{initialValue:!0},autoScrollEditorIntoView:{set:function(g){this.setAutoScrollEditorIntoView(g)}},keyboardHandler:{set:function(g){this.setKeyboardHandler(g)},get:function(){return this.$keybindingId},handlesSet:!0},value:{set:function(g){this.session.setValue(g)},get:function(){return this.getValue()},handlesSet:!0,hidden:!0},session:{set:function(g){this.setSession(g)},get:function(){return this.session},handlesSet:!0,hidden:!0},showLineNumbers:{set:function(g){this.renderer.$gutterLayer.setShowLineNumbers(g),this.renderer.$loop.schedule(this.renderer.CHANGE_GUTTER),g&&this.$relativeLineNumbers?R.attach(this):R.detach(this)},initialValue:!0},relativeLineNumbers:{set:function(g){this.$showLineNumbers&&g?R.attach(this):R.detach(this)}},placeholder:{set:function(g){this.$updatePlaceholder||(this.$updatePlaceholder=function(){var w=this.session&&(this.renderer.$composition||this.getValue());if(w&&this.renderer.placeholderNode)this.renderer.off("afterRender",this.$updatePlaceholder),u.removeCssClass(this.container,"ace_hasPlaceholder"),this.renderer.placeholderNode.remove(),this.renderer.placeholderNode=null;else if(!w&&!this.renderer.placeholderNode){this.renderer.on("afterRender",this.$updatePlaceholder),u.addCssClass(this.container,"ace_hasPlaceholder");var $=u.createElement("div");$.className="ace_placeholder",$.textContent=this.$placeholder||"",this.renderer.placeholderNode=$,this.renderer.content.appendChild(this.renderer.placeholderNode)}else!w&&this.renderer.placeholderNode&&(this.renderer.placeholderNode.textContent=this.$placeholder||"")}.bind(this),this.on("input",this.$updatePlaceholder)),this.$updatePlaceholder()}},customScrollbar:"renderer",hScrollBarAlwaysVisible:"renderer",vScrollBarAlwaysVisible:"renderer",highlightGutterLine:"renderer",animatedScroll:"renderer",showInvisibles:"renderer",showPrintMargin:"renderer",printMarginColumn:"renderer",printMargin:"renderer",fadeFoldWidgets:"renderer",showFoldWidgets:"renderer",displayIndentGuides:"renderer",highlightIndentGuides:"renderer",showGutter:"renderer",fontSize:"renderer",fontFamily:"renderer",maxLines:"renderer",minLines:"renderer",scrollPastEnd:"renderer",fixedWidthGutter:"renderer",theme:"renderer",hasCssTransforms:"renderer",maxPixelHeight:"renderer",useTextareaForIME:"renderer",scrollSpeed:"$mouseHandler",dragDelay:"$mouseHandler",dragEnabled:"$mouseHandler",focusTimeout:"$mouseHandler",tooltipFollowsMouse:"$mouseHandler",firstLineNumber:"session",overwrite:"session",newLineMode:"session",useWorker:"session",useSoftTabs:"session",navigateWithinSoftTabs:"session",tabSize:"session",wrap:"session",indentedSoftWrap:"session",foldStyle:"session",mode:"session"});var R={getText:function(g,w){return(Math.abs(g.selection.lead.row-w)||w+1+(w<9?"·":""))+""},getWidth:function(g,w,$){return Math.max(w.toString().length,($.lastRow+1).toString().length,2)*$.characterWidth},update:function(g,w){w.renderer.$loop.schedule(w.renderer.CHANGE_GUTTER)},attach:function(g){g.renderer.$gutterLayer.$renderer=this,g.on("changeSelection",this.update),this.update(null,g)},detach:function(g){g.renderer.$gutterLayer.$renderer==this&&(g.renderer.$gutterLayer.$renderer=null),g.off("changeSelection",this.update),this.update(null,g)}};a.Editor=C}),ace.define("ace/undomanager",["require","exports","module","ace/range"],function(e,a,m){var h=function(){this.$maxRev=0,this.$fromUndo=!1,this.$undoDepth=1/0,this.reset()};(function(){this.addSession=function(b){this.$session=b},this.add=function(b,S,A){if(!this.$fromUndo&&b!=this.$lastDelta){if(this.$keepRedoStack||(this.$redoStack.length=0),S===!1||!this.lastDeltas){this.lastDeltas=[];var C=this.$undoStack.length;C>this.$undoDepth-1&&this.$undoStack.splice(0,C-this.$undoDepth+1),this.$undoStack.push(this.lastDeltas),b.id=this.$rev=++this.$maxRev}(b.action=="remove"||b.action=="insert")&&(this.$lastDelta=b),this.lastDeltas.push(b)}},this.addSelection=function(b,S){this.selections.push({value:b,rev:S||this.$rev})},this.startNewGroup=function(){return this.lastDeltas=null,this.$rev},this.markIgnored=function(b,S){S==null&&(S=this.$rev+1);for(var A=this.$undoStack,C=A.length;C--;){var R=A[C][0];if(R.id<=b)break;R.id<S&&(R.ignore=!0)}this.lastDeltas=null},this.getSelection=function(b,S){for(var A=this.selections,C=A.length;C--;){var R=A[C];if(R.rev<b)return S&&(R=A[C+1]),R}},this.getRevision=function(){return this.$rev},this.getDeltas=function(b,S){S==null&&(S=this.$rev+1);for(var A=this.$undoStack,C=null,R=0,g=A.length;g--;){var w=A[g][0];if(w.id<S&&!C&&(C=g+1),w.id<=b){R=g+1;break}}return A.slice(R,C)},this.getChangedRanges=function(b,S){S==null&&(S=this.$rev+1)},this.getChangedLines=function(b,S){S==null&&(S=this.$rev+1)},this.undo=function(b,S){this.lastDeltas=null;var A=this.$undoStack;if(p(A,A.length)){b||(b=this.$session),this.$redoStackBaseRev!==this.$rev&&this.$redoStack.length&&(this.$redoStack=[]),this.$fromUndo=!0;var C=A.pop(),R=null;return C&&(R=b.undoChanges(C,S),this.$redoStack.push(C),this.$syncRev()),this.$fromUndo=!1,R}},this.redo=function(b,S){if(this.lastDeltas=null,b||(b=this.$session),this.$fromUndo=!0,this.$redoStackBaseRev!=this.$rev){var A=this.getDeltas(this.$redoStackBaseRev,this.$rev+1);k(this.$redoStack,A),this.$redoStackBaseRev=this.$rev,this.$redoStack.forEach(function(g){g[0].id=++this.$maxRev},this)}var C=this.$redoStack.pop(),R=null;return C&&(R=b.redoChanges(C,S),this.$undoStack.push(C),this.$syncRev()),this.$fromUndo=!1,R},this.$syncRev=function(){var b=this.$undoStack,S=b[b.length-1],A=S&&S[0].id||0;this.$redoStackBaseRev=A,this.$rev=A},this.reset=function(){this.lastDeltas=null,this.$lastDelta=null,this.$undoStack=[],this.$redoStack=[],this.$rev=0,this.mark=0,this.$redoStackBaseRev=this.$rev,this.selections=[]},this.canUndo=function(){return this.$undoStack.length>0},this.canRedo=function(){return this.$redoStack.length>0},this.bookmark=function(b){b==null&&(b=this.$rev),this.mark=b},this.isAtBookmark=function(){return this.$rev===this.mark},this.toJSON=function(){},this.fromJSON=function(){},this.hasUndo=this.canUndo,this.hasRedo=this.canRedo,this.isClean=this.isAtBookmark,this.markClean=this.bookmark,this.$prettyPrint=function(b){return b?t(b):t(this.$undoStack)+`
---
`+t(this.$redoStack)}}).call(h.prototype);function p(b,S){for(var A=S;A--;){var C=b[A];if(C&&!C[0].ignore){for(;A<S-1;){var R=d(b[A],b[A+1]);b[A]=R[0],b[A+1]=R[1],A++}return!0}}}var u=e("./range").Range,c=u.comparePoints;u.comparePoints;function f(b){return{row:b.row,column:b.column}}function n(b){return{start:f(b.start),end:f(b.end),action:b.action,lines:b.lines.slice()}}function t(b){if(b=b||this,Array.isArray(b))return b.map(t).join(`
`);var S="";return b.action?(S=b.action=="insert"?"+":"-",S+="["+b.lines+"]"):b.value&&(Array.isArray(b.value)?S=b.value.map(o).join(`
`):S=o(b.value)),b.start&&(S+=o(b)),(b.id||b.rev)&&(S+="	("+(b.id||b.rev)+")"),S}function o(b){return b.start.row+":"+b.start.column+"=>"+b.end.row+":"+b.end.column}function l(b,S){var A=b.action=="insert",C=S.action=="insert";if(A&&C)if(c(S.start,b.end)>=0)y(S,b,-1);else if(c(S.start,b.start)<=0)y(b,S,1);else return null;else if(A&&!C)if(c(S.start,b.end)>=0)y(S,b,-1);else if(c(S.end,b.start)<=0)y(b,S,-1);else return null;else if(!A&&C)if(c(S.start,b.start)>=0)y(S,b,1);else if(c(S.start,b.start)<=0)y(b,S,1);else return null;else if(!A&&!C)if(c(S.start,b.start)>=0)y(S,b,1);else if(c(S.end,b.start)<=0)y(b,S,-1);else return null;return[S,b]}function d(b,S){for(var A=b.length;A--;)for(var C=0;C<S.length;C++)if(!l(b[A],S[C])){for(;A<b.length;){for(;C--;)l(S[C],b[A]);C=S.length,A++}return[b,S]}return b.selectionBefore=S.selectionBefore=b.selectionAfter=S.selectionAfter=null,[S,b]}function v(b,S){var A=b.action=="insert",C=S.action=="insert";if(A&&C)c(b.start,S.start)<0?y(S,b,1):y(b,S,1);else if(A&&!C)c(b.start,S.end)>=0?y(b,S,-1):(c(b.start,S.start)<=0||y(b,u.fromPoints(S.start,b.start),-1),y(S,b,1));else if(!A&&C)c(S.start,b.end)>=0?y(S,b,-1):(c(S.start,b.start)<=0||y(S,u.fromPoints(b.start,S.start),-1),y(b,S,1));else if(!A&&!C)if(c(S.start,b.end)>=0)y(S,b,-1);else if(c(S.end,b.start)<=0)y(b,S,-1);else{var R,g;return c(b.start,S.start)<0&&(R=b,b=E(b,S.start)),c(b.end,S.end)>0&&(g=E(b,S.end)),x(S.end,b.start,b.end,-1),g&&!R&&(b.lines=g.lines,b.start=g.start,b.end=g.end,g=b),[S,R,g].filter(Boolean)}return[S,b]}function y(b,S,A){x(b.start,S.start,S.end,A),x(b.end,S.start,S.end,A)}function x(b,S,A,C){b.row==(C==1?S:A).row&&(b.column+=C*(A.column-S.column)),b.row+=C*(A.row-S.row)}function E(b,S){var A=b.lines,C=b.end;b.end=f(S);var R=b.end.row-b.start.row,g=A.splice(R,A.length),w=R?S.column:S.column-b.start.column;A.push(g[0].substring(0,w)),g[0]=g[0].substr(w);var $={start:f(S),end:C,lines:g,action:b.action};return $}function T(b,S){S=n(S);for(var A=b.length;A--;){for(var C=b[A],R=0;R<C.length;R++){var g=C[R],w=v(g,S);S=w[0],w.length!=2&&(w[2]?(C.splice(R+1,1,w[1],w[2]),R++):w[1]||(C.splice(R,1),R--))}C.length||b.splice(A,1)}return b}function k(b,S){for(var A=0;A<S.length;A++)for(var C=S[A],R=0;R<C.length;R++)T(b,C[R])}a.UndoManager=h}),ace.define("ace/layer/lines",["require","exports","module","ace/lib/dom"],function(e,a,m){var h=e("../lib/dom"),p=function(u,c){this.element=u,this.canvasHeight=c||5e5,this.element.style.height=this.canvasHeight*2+"px",this.cells=[],this.cellCache=[],this.$offsetCoefficient=0};(function(){this.moveContainer=function(u){h.translate(this.element,0,-(u.firstRowScreen*u.lineHeight%this.canvasHeight)-u.offset*this.$offsetCoefficient)},this.pageChanged=function(u,c){return Math.floor(u.firstRowScreen*u.lineHeight/this.canvasHeight)!==Math.floor(c.firstRowScreen*c.lineHeight/this.canvasHeight)},this.computeLineTop=function(u,c,f){var n=c.firstRowScreen*c.lineHeight,t=Math.floor(n/this.canvasHeight),o=f.documentToScreenRow(u,0)*c.lineHeight;return o-t*this.canvasHeight},this.computeLineHeight=function(u,c,f){return c.lineHeight*f.getRowLineCount(u)},this.getLength=function(){return this.cells.length},this.get=function(u){return this.cells[u]},this.shift=function(){this.$cacheCell(this.cells.shift())},this.pop=function(){this.$cacheCell(this.cells.pop())},this.push=function(u){if(Array.isArray(u)){this.cells.push.apply(this.cells,u);for(var c=h.createFragment(this.element),f=0;f<u.length;f++)c.appendChild(u[f].element);this.element.appendChild(c)}else this.cells.push(u),this.element.appendChild(u.element)},this.unshift=function(u){if(Array.isArray(u)){this.cells.unshift.apply(this.cells,u);for(var c=h.createFragment(this.element),f=0;f<u.length;f++)c.appendChild(u[f].element);this.element.firstChild?this.element.insertBefore(c,this.element.firstChild):this.element.appendChild(c)}else this.cells.unshift(u),this.element.insertAdjacentElement("afterbegin",u.element)},this.last=function(){return this.cells.length?this.cells[this.cells.length-1]:null},this.$cacheCell=function(u){u&&(u.element.remove(),this.cellCache.push(u))},this.createCell=function(u,c,f,n){var t=this.cellCache.pop();if(!t){var o=h.createElement("div");n&&n(o),this.element.appendChild(o),t={element:o,text:"",row:u}}return t.row=u,t}}).call(p.prototype),a.Lines=p}),ace.define("ace/layer/gutter",["require","exports","module","ace/lib/dom","ace/lib/oop","ace/lib/lang","ace/lib/event_emitter","ace/layer/lines"],function(e,a,m){var h=e("../lib/dom"),p=e("../lib/oop"),u=e("../lib/lang"),c=e("../lib/event_emitter").EventEmitter,f=e("./lines").Lines,n=function(o){this.element=h.createElement("div"),this.element.className="ace_layer ace_gutter-layer",o.appendChild(this.element),this.setShowFoldWidgets(this.$showFoldWidgets),this.gutterWidth=0,this.$annotations=[],this.$updateAnnotations=this.$updateAnnotations.bind(this),this.$lines=new f(this.element),this.$lines.$offsetCoefficient=1};(function(){p.implement(this,c),this.setSession=function(o){this.session&&this.session.off("change",this.$updateAnnotations),this.session=o,o&&o.on("change",this.$updateAnnotations)},this.addGutterDecoration=function(o,l){window.console&&console.warn&&console.warn("deprecated use session.addGutterDecoration"),this.session.addGutterDecoration(o,l)},this.removeGutterDecoration=function(o,l){window.console&&console.warn&&console.warn("deprecated use session.removeGutterDecoration"),this.session.removeGutterDecoration(o,l)},this.setAnnotations=function(o){this.$annotations=[];for(var l=0;l<o.length;l++){var d=o[l],v=d.row,y=this.$annotations[v];y||(y=this.$annotations[v]={text:[]});var x=d.text;x=x?u.escapeHTML(x):d.html||"",y.text.indexOf(x)===-1&&y.text.push(x);var E=d.type,T=d.className;T?y.className=T:E=="error"?y.className=" ace_error":E=="warning"&&y.className!=" ace_error"?y.className=" ace_warning":E=="info"&&!y.className&&(y.className=" ace_info")}},this.$updateAnnotations=function(o){if(this.$annotations.length){var l=o.start.row,d=o.end.row-l;if(d!==0)if(o.action=="remove")this.$annotations.splice(l,d+1,null);else{var v=new Array(d+1);v.unshift(l,1),this.$annotations.splice.apply(this.$annotations,v)}}},this.update=function(o){this.config=o;var l=this.session,d=o.firstRow,v=Math.min(o.lastRow+o.gutterOffset,l.getLength()-1);this.oldLastRow=v,this.config=o,this.$lines.moveContainer(o),this.$updateCursorRow();for(var y=l.getNextFoldLine(d),x=y?y.start.row:1/0,E=null,T=-1,k=d;;){if(k>x&&(k=y.end.row+1,y=l.getNextFoldLine(k,y),x=y?y.start.row:1/0),k>v){for(;this.$lines.getLength()>T+1;)this.$lines.pop();break}E=this.$lines.get(++T),E?E.row=k:(E=this.$lines.createCell(k,o,this.session,t),this.$lines.push(E)),this.$renderCell(E,o,y,k),k++}this._signal("afterRender"),this.$updateGutterWidth(o)},this.$updateGutterWidth=function(o){var l=this.session,d=l.gutterRenderer||this.$renderer,v=l.$firstLineNumber,y=this.$lines.last()?this.$lines.last().text:"";(this.$fixedWidth||l.$useWrapMode)&&(y=l.getLength()+v-1);var x=d?d.getWidth(l,y,o):y.toString().length*o.characterWidth,E=this.$padding||this.$computePadding();x+=E.left+E.right,x!==this.gutterWidth&&!isNaN(x)&&(this.gutterWidth=x,this.element.parentNode.style.width=this.element.style.width=Math.ceil(this.gutterWidth)+"px",this._signal("changeGutterWidth",x))},this.$updateCursorRow=function(){if(this.$highlightGutterLine){var o=this.session.selection.getCursor();this.$cursorRow!==o.row&&(this.$cursorRow=o.row)}},this.updateLineHighlight=function(){if(this.$highlightGutterLine){var o=this.session.selection.cursor.row;if(this.$cursorRow=o,!(this.$cursorCell&&this.$cursorCell.row==o)){this.$cursorCell&&(this.$cursorCell.element.className=this.$cursorCell.element.className.replace("ace_gutter-active-line ",""));var l=this.$lines.cells;this.$cursorCell=null;for(var d=0;d<l.length;d++){var v=l[d];if(v.row>=this.$cursorRow){if(v.row>this.$cursorRow){var y=this.session.getFoldLine(this.$cursorRow);if(d>0&&y&&y.start.row==l[d-1].row)v=l[d-1];else break}v.element.className="ace_gutter-active-line "+v.element.className,this.$cursorCell=v;break}}}}},this.scrollLines=function(o){var l=this.config;if(this.config=o,this.$updateCursorRow(),this.$lines.pageChanged(l,o))return this.update(o);this.$lines.moveContainer(o);var d=Math.min(o.lastRow+o.gutterOffset,this.session.getLength()-1),v=this.oldLastRow;if(this.oldLastRow=d,!l||v<o.firstRow)return this.update(o);if(d<l.firstRow)return this.update(o);if(l.firstRow<o.firstRow)for(var y=this.session.getFoldedRowCount(l.firstRow,o.firstRow-1);y>0;y--)this.$lines.shift();if(v>d)for(var y=this.session.getFoldedRowCount(d+1,v);y>0;y--)this.$lines.pop();o.firstRow<l.firstRow&&this.$lines.unshift(this.$renderLines(o,o.firstRow,l.firstRow-1)),d>v&&this.$lines.push(this.$renderLines(o,v+1,d)),this.updateLineHighlight(),this._signal("afterRender"),this.$updateGutterWidth(o)},this.$renderLines=function(o,l,d){for(var v=[],y=l,x=this.session.getNextFoldLine(y),E=x?x.start.row:1/0;y>E&&(y=x.end.row+1,x=this.session.getNextFoldLine(y,x),E=x?x.start.row:1/0),!(y>d);){var T=this.$lines.createCell(y,o,this.session,t);this.$renderCell(T,o,x,y),v.push(T),y++}return v},this.$renderCell=function(o,l,d,v){var y=o.element,x=this.session,E=y.childNodes[0],T=y.childNodes[1],k=x.$firstLineNumber,b=x.$breakpoints,S=x.$decorations,A=x.gutterRenderer||this.$renderer,C=this.$showFoldWidgets&&x.foldWidgets,R=d?d.start.row:Number.MAX_VALUE,g="ace_gutter-cell ";if(this.$highlightGutterLine&&(v==this.$cursorRow||d&&v<this.$cursorRow&&v>=R&&this.$cursorRow<=d.end.row)&&(g+="ace_gutter-active-line ",this.$cursorCell!=o&&(this.$cursorCell&&(this.$cursorCell.element.className=this.$cursorCell.element.className.replace("ace_gutter-active-line ","")),this.$cursorCell=o)),b[v]&&(g+=b[v]),S[v]&&(g+=S[v]),this.$annotations[v]&&(g+=this.$annotations[v].className),y.className!=g&&(y.className=g),C){var w=C[v];w==null&&(w=C[v]=x.getFoldWidget(v))}if(w){var g="ace_fold-widget ace_"+w;w=="start"&&v==R&&v<d.end.row?g+=" ace_closed":g+=" ace_open",T.className!=g&&(T.className=g);var $=l.lineHeight+"px";h.setStyle(T.style,"height",$),h.setStyle(T.style,"display","inline-block")}else T&&h.setStyle(T.style,"display","none");var L=(A?A.getText(x,v):v+k).toString();return L!==E.data&&(E.data=L),h.setStyle(o.element.style,"height",this.$lines.computeLineHeight(v,l,x)+"px"),h.setStyle(o.element.style,"top",this.$lines.computeLineTop(v,l,x)+"px"),o.text=L,o},this.$fixedWidth=!1,this.$highlightGutterLine=!0,this.$renderer="",this.setHighlightGutterLine=function(o){this.$highlightGutterLine=o},this.$showLineNumbers=!0,this.$renderer="",this.setShowLineNumbers=function(o){this.$renderer=!o&&{getWidth:function(){return 0},getText:function(){return""}}},this.getShowLineNumbers=function(){return this.$showLineNumbers},this.$showFoldWidgets=!0,this.setShowFoldWidgets=function(o){o?h.addCssClass(this.element,"ace_folding-enabled"):h.removeCssClass(this.element,"ace_folding-enabled"),this.$showFoldWidgets=o,this.$padding=null},this.getShowFoldWidgets=function(){return this.$showFoldWidgets},this.$computePadding=function(){if(!this.element.firstChild)return{left:0,right:0};var o=h.computedStyle(this.element.firstChild);return this.$padding={},this.$padding.left=(parseInt(o.borderLeftWidth)||0)+(parseInt(o.paddingLeft)||0)+1,this.$padding.right=(parseInt(o.borderRightWidth)||0)+(parseInt(o.paddingRight)||0),this.$padding},this.getRegion=function(o){var l=this.$padding||this.$computePadding(),d=this.element.getBoundingClientRect();if(o.x<l.left+d.left)return"markers";if(this.$showFoldWidgets&&o.x>d.right-l.right)return"foldWidgets"}}).call(n.prototype);function t(o){var l=document.createTextNode("");o.appendChild(l);var d=h.createElement("span");return o.appendChild(d),o}a.Gutter=n}),ace.define("ace/layer/marker",["require","exports","module","ace/range","ace/lib/dom"],function(e,a,m){var h=e("../range").Range,p=e("../lib/dom"),u=function(c){this.element=p.createElement("div"),this.element.className="ace_layer ace_marker-layer",c.appendChild(this.element)};(function(){this.$padding=0,this.setPadding=function(f){this.$padding=f},this.setSession=function(f){this.session=f},this.setMarkers=function(f){this.markers=f},this.elt=function(f,n){var t=this.i!=-1&&this.element.childNodes[this.i];t?this.i++:(t=document.createElement("div"),this.element.appendChild(t),this.i=-1),t.style.cssText=n,t.className=f},this.update=function(f){if(f){this.config=f,this.i=0;var n;for(var t in this.markers){var o=this.markers[t];if(!o.range){o.update(n,this,this.session,f);continue}var l=o.range.clipRows(f.firstRow,f.lastRow);if(!l.isEmpty())if(l=l.toScreenRange(this.session),o.renderer){var d=this.$getTop(l.start.row,f),v=this.$padding+l.start.column*f.characterWidth;o.renderer(n,l,v,d,f)}else o.type=="fullLine"?this.drawFullLineMarker(n,l,o.clazz,f):o.type=="screenLine"?this.drawScreenLineMarker(n,l,o.clazz,f):l.isMultiLine()?o.type=="text"?this.drawTextMarker(n,l,o.clazz,f):this.drawMultiLineMarker(n,l,o.clazz,f):this.drawSingleLineMarker(n,l,o.clazz+" ace_start ace_br15",f)}if(this.i!=-1)for(;this.i<this.element.childElementCount;)this.element.removeChild(this.element.lastChild)}},this.$getTop=function(f,n){return(f-n.firstRowScreen)*n.lineHeight};function c(f,n,t,o){return(f?1:0)|(n?2:0)|(t?4:0)|(o?8:0)}this.drawTextMarker=function(f,n,t,o,l){for(var d=this.session,v=n.start.row,y=n.end.row,x=v,E=0,T=0,k=d.getScreenLastRowColumn(x),b=new h(x,n.start.column,x,T);x<=y;x++)b.start.row=b.end.row=x,b.start.column=x==v?n.start.column:d.getRowWrapIndent(x),b.end.column=k,E=T,T=k,k=x+1<y?d.getScreenLastRowColumn(x+1):x==y?0:n.end.column,this.drawSingleLineMarker(f,b,t+(x==v?" ace_start":"")+" ace_br"+c(x==v||x==v+1&&n.start.column,E<T,T>k,x==y),o,x==y?0:1,l)},this.drawMultiLineMarker=function(f,n,t,o,l){var d=this.$padding,v=o.lineHeight,y=this.$getTop(n.start.row,o),x=d+n.start.column*o.characterWidth;if(l=l||"",this.session.$bidiHandler.isBidiRow(n.start.row)){var E=n.clone();E.end.row=E.start.row,E.end.column=this.session.getLine(E.start.row).length,this.drawBidiSingleLineMarker(f,E,t+" ace_br1 ace_start",o,null,l)}else this.elt(t+" ace_br1 ace_start","height:"+v+"px;right:0;top:"+y+"px;left:"+x+"px;"+(l||""));if(this.session.$bidiHandler.isBidiRow(n.end.row)){var E=n.clone();E.start.row=E.end.row,E.start.column=0,this.drawBidiSingleLineMarker(f,E,t+" ace_br12",o,null,l)}else{y=this.$getTop(n.end.row,o);var T=n.end.column*o.characterWidth;this.elt(t+" ace_br12","height:"+v+"px;width:"+T+"px;top:"+y+"px;left:"+d+"px;"+(l||""))}if(v=(n.end.row-n.start.row-1)*o.lineHeight,!(v<=0)){y=this.$getTop(n.start.row+1,o);var k=(n.start.column?1:0)|(n.end.column?0:8);this.elt(t+(k?" ace_br"+k:""),"height:"+v+"px;right:0;top:"+y+"px;left:"+d+"px;"+(l||""))}},this.drawSingleLineMarker=function(f,n,t,o,l,d){if(this.session.$bidiHandler.isBidiRow(n.start.row))return this.drawBidiSingleLineMarker(f,n,t,o,l,d);var v=o.lineHeight,y=(n.end.column+(l||0)-n.start.column)*o.characterWidth,x=this.$getTop(n.start.row,o),E=this.$padding+n.start.column*o.characterWidth;this.elt(t,"height:"+v+"px;width:"+y+"px;top:"+x+"px;left:"+E+"px;"+(d||""))},this.drawBidiSingleLineMarker=function(f,n,t,o,l,d){var v=o.lineHeight,y=this.$getTop(n.start.row,o),x=this.$padding,E=this.session.$bidiHandler.getSelections(n.start.column,n.end.column);E.forEach(function(T){this.elt(t,"height:"+v+"px;width:"+(T.width+(l||0))+"px;top:"+y+"px;left:"+(x+T.left)+"px;"+(d||""))},this)},this.drawFullLineMarker=function(f,n,t,o,l){var d=this.$getTop(n.start.row,o),v=o.lineHeight;n.start.row!=n.end.row&&(v+=this.$getTop(n.end.row,o)-d),this.elt(t,"height:"+v+"px;top:"+d+"px;left:0;right:0;"+(l||""))},this.drawScreenLineMarker=function(f,n,t,o,l){var d=this.$getTop(n.start.row,o),v=o.lineHeight;this.elt(t,"height:"+v+"px;top:"+d+"px;left:0;right:0;"+(l||""))}}).call(u.prototype),a.Marker=u}),ace.define("ace/layer/text",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/lib/lang","ace/layer/lines","ace/lib/event_emitter"],function(e,a,m){var h=e("../lib/oop"),p=e("../lib/dom"),u=e("../lib/lang"),c=e("./lines").Lines,f=e("../lib/event_emitter").EventEmitter,n=function(t){this.dom=p,this.element=this.dom.createElement("div"),this.element.className="ace_layer ace_text-layer",t.appendChild(this.element),this.$updateEolChar=this.$updateEolChar.bind(this),this.$lines=new c(this.element)};(function(){h.implement(this,f),this.EOF_CHAR="¶",this.EOL_CHAR_LF="¬",this.EOL_CHAR_CRLF="¤",this.EOL_CHAR=this.EOL_CHAR_LF,this.TAB_CHAR="—",this.SPACE_CHAR="·",this.$padding=0,this.MAX_LINE_LENGTH=1e4,this.$updateEolChar=function(){var t=this.session.doc,o=t.getNewLineCharacter()==`
`&&t.getNewLineMode()!="windows",l=o?this.EOL_CHAR_LF:this.EOL_CHAR_CRLF;if(this.EOL_CHAR!=l)return this.EOL_CHAR=l,!0},this.setPadding=function(t){this.$padding=t,this.element.style.margin="0 "+t+"px"},this.getLineHeight=function(){return this.$fontMetrics.$characterSize.height||0},this.getCharacterWidth=function(){return this.$fontMetrics.$characterSize.width||0},this.$setFontMetrics=function(t){this.$fontMetrics=t,this.$fontMetrics.on("changeCharacterSize",function(o){this._signal("changeCharacterSize",o)}.bind(this)),this.$pollSizeChanges()},this.checkForSizeChanges=function(){this.$fontMetrics.checkForSizeChanges()},this.$pollSizeChanges=function(){return this.$pollSizeChangesTimer=this.$fontMetrics.$pollSizeChanges()},this.setSession=function(t){this.session=t,t&&this.$computeTabString()},this.showInvisibles=!1,this.showSpaces=!1,this.showTabs=!1,this.showEOL=!1,this.setShowInvisibles=function(t){return this.showInvisibles==t?!1:(this.showInvisibles=t,typeof t=="string"?(this.showSpaces=/tab/i.test(t),this.showTabs=/space/i.test(t),this.showEOL=/eol/i.test(t)):this.showSpaces=this.showTabs=this.showEOL=t,this.$computeTabString(),!0)},this.displayIndentGuides=!0,this.setDisplayIndentGuides=function(t){return this.displayIndentGuides==t?!1:(this.displayIndentGuides=t,this.$computeTabString(),!0)},this.$highlightIndentGuides=!0,this.setHighlightIndentGuides=function(t){return this.$highlightIndentGuides===t?!1:(this.$highlightIndentGuides=t,t)},this.$tabStrings=[],this.onChangeTabSize=this.$computeTabString=function(){var t=this.session.getTabSize();this.tabSize=t;for(var o=this.$tabStrings=[0],l=1;l<t+1;l++)if(this.showTabs){var d=this.dom.createElement("span");d.className="ace_invisible ace_invisible_tab",d.textContent=u.stringRepeat(this.TAB_CHAR,l),o.push(d)}else o.push(this.dom.createTextNode(u.stringRepeat(" ",l),this.element));if(this.displayIndentGuides){this.$indentGuideRe=/\s\S| \t|\t |\s$/;var v="ace_indent-guide",y=this.showSpaces?" ace_invisible ace_invisible_space":"",x=this.showSpaces?u.stringRepeat(this.SPACE_CHAR,this.tabSize):u.stringRepeat(" ",this.tabSize),E=this.showTabs?" ace_invisible ace_invisible_tab":"",T=this.showTabs?u.stringRepeat(this.TAB_CHAR,this.tabSize):x,d=this.dom.createElement("span");d.className=v+y,d.textContent=x,this.$tabStrings[" "]=d;var d=this.dom.createElement("span");d.className=v+E,d.textContent=T,this.$tabStrings["	"]=d}},this.updateLines=function(t,o,l){if(this.config.lastRow!=t.lastRow||this.config.firstRow!=t.firstRow)return this.update(t);this.config=t;for(var d=Math.max(o,t.firstRow),v=Math.min(l,t.lastRow),y=this.element.childNodes,x=0,T=t.firstRow;T<d;T++){var k=this.session.getFoldLine(T);if(k)if(k.containsRow(d)){d=k.start.row;break}else T=k.end.row;x++}for(var E=!1,T=d,k=this.session.getNextFoldLine(T),b=k?k.start.row:1/0;T>b&&(T=k.end.row+1,k=this.session.getNextFoldLine(T,k),b=k?k.start.row:1/0),!(T>v);){var S=y[x++];if(S){this.dom.removeChildren(S),this.$renderLine(S,T,T==b?k:!1),E&&(S.style.top=this.$lines.computeLineTop(T,t,this.session)+"px");var A=t.lineHeight*this.session.getRowLength(T)+"px";S.style.height!=A&&(E=!0,S.style.height=A)}T++}if(E)for(;x<this.$lines.cells.length;){var C=this.$lines.cells[x++];C.element.style.top=this.$lines.computeLineTop(C.row,t,this.session)+"px"}},this.scrollLines=function(t){var o=this.config;if(this.config=t,this.$lines.pageChanged(o,t))return this.update(t);this.$lines.moveContainer(t);var l=t.lastRow,d=o?o.lastRow:-1;if(!o||d<t.firstRow)return this.update(t);if(l<o.firstRow)return this.update(t);if(!o||o.lastRow<t.firstRow)return this.update(t);if(t.lastRow<o.firstRow)return this.update(t);if(o.firstRow<t.firstRow)for(var v=this.session.getFoldedRowCount(o.firstRow,t.firstRow-1);v>0;v--)this.$lines.shift();if(o.lastRow>t.lastRow)for(var v=this.session.getFoldedRowCount(t.lastRow+1,o.lastRow);v>0;v--)this.$lines.pop();t.firstRow<o.firstRow&&this.$lines.unshift(this.$renderLinesFragment(t,t.firstRow,o.firstRow-1)),t.lastRow>o.lastRow&&this.$lines.push(this.$renderLinesFragment(t,o.lastRow+1,t.lastRow)),this.$highlightIndentGuide()},this.$renderLinesFragment=function(t,o,l){for(var d=[],v=o,y=this.session.getNextFoldLine(v),x=y?y.start.row:1/0;v>x&&(v=y.end.row+1,y=this.session.getNextFoldLine(v,y),x=y?y.start.row:1/0),!(v>l);){var E=this.$lines.createCell(v,t,this.session),T=E.element;this.dom.removeChildren(T),p.setStyle(T.style,"height",this.$lines.computeLineHeight(v,t,this.session)+"px"),p.setStyle(T.style,"top",this.$lines.computeLineTop(v,t,this.session)+"px"),this.$renderLine(T,v,v==x?y:!1),this.$useLineGroups()?T.className="ace_line_group":T.className="ace_line",d.push(E),v++}return d},this.update=function(t){this.$lines.moveContainer(t),this.config=t;for(var o=t.firstRow,l=t.lastRow,d=this.$lines;d.getLength();)d.pop();d.push(this.$renderLinesFragment(t,o,l))},this.$textToken={text:!0,rparen:!0,lparen:!0},this.$renderToken=function(t,o,l,d){for(var v=this,y=/(\t)|( +)|([\x00-\x1f\x80-\xa0\xad\u1680\u180E\u2000-\u200f\u2028\u2029\u202F\u205F\uFEFF\uFFF9-\uFFFC\u2066\u2067\u2068\u202A\u202B\u202D\u202E\u202C\u2069]+)|(\u3000)|([\u1100-\u115F\u11A3-\u11A7\u11FA-\u11FF\u2329-\u232A\u2E80-\u2E99\u2E9B-\u2EF3\u2F00-\u2FD5\u2FF0-\u2FFB\u3001-\u303E\u3041-\u3096\u3099-\u30FF\u3105-\u312D\u3131-\u318E\u3190-\u31BA\u31C0-\u31E3\u31F0-\u321E\u3220-\u3247\u3250-\u32FE\u3300-\u4DBF\u4E00-\uA48C\uA490-\uA4C6\uA960-\uA97C\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFAFF\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE66\uFE68-\uFE6B\uFF01-\uFF60\uFFE0-\uFFE6]|[\uD800-\uDBFF][\uDC00-\uDFFF])/g,x=this.dom.createFragment(this.element),E,T=0;E=y.exec(d);){var k=E[1],b=E[2],S=E[3],A=E[4],C=E[5];if(!(!v.showSpaces&&b)){var R=T!=E.index?d.slice(T,E.index):"";if(T=E.index+E[0].length,R&&x.appendChild(this.dom.createTextNode(R,this.element)),k){var g=v.session.getScreenTabSize(o+E.index);x.appendChild(v.$tabStrings[g].cloneNode(!0)),o+=g-1}else if(b)if(v.showSpaces){var w=this.dom.createElement("span");w.className="ace_invisible ace_invisible_space",w.textContent=u.stringRepeat(v.SPACE_CHAR,b.length),x.appendChild(w)}else x.appendChild(this.com.createTextNode(b,this.element));else if(S){var w=this.dom.createElement("span");w.className="ace_invisible ace_invisible_space ace_invalid",w.textContent=u.stringRepeat(v.SPACE_CHAR,S.length),x.appendChild(w)}else if(A){o+=1;var w=this.dom.createElement("span");w.style.width=v.config.characterWidth*2+"px",w.className=v.showSpaces?"ace_cjk ace_invisible ace_invisible_space":"ace_cjk",w.textContent=v.showSpaces?v.SPACE_CHAR:A,x.appendChild(w)}else if(C){o+=1;var w=this.dom.createElement("span");w.style.width=v.config.characterWidth*2+"px",w.className="ace_cjk",w.textContent=C,x.appendChild(w)}}}if(x.appendChild(this.dom.createTextNode(T?d.slice(T):d,this.element)),this.$textToken[l.type])t.appendChild(x);else{var $="ace_"+l.type.replace(/\./g," ace_"),w=this.dom.createElement("span");l.type=="fold"&&(w.style.width=l.value.length*this.config.characterWidth+"px"),w.className=$,w.appendChild(x),t.appendChild(w)}return o+d.length},this.renderIndentGuide=function(t,o,l){var d=o.search(this.$indentGuideRe);if(d<=0||d>=l)return o;if(o[0]==" "){d-=d%this.tabSize;for(var v=d/this.tabSize,y=0;y<v;y++)t.appendChild(this.$tabStrings[" "].cloneNode(!0));return this.$highlightIndentGuide(),o.substr(d)}else if(o[0]=="	"){for(var y=0;y<d;y++)t.appendChild(this.$tabStrings["	"].cloneNode(!0));return this.$highlightIndentGuide(),o.substr(d)}return this.$highlightIndentGuide(),o},this.$highlightIndentGuide=function(){if(!(!this.$highlightIndentGuides||!this.displayIndentGuides)){this.$highlightIndentGuideMarker={indentLevel:void 0,start:void 0,end:void 0,dir:void 0};var t=this.session.doc.$lines;if(t){var o=this.session.selection.getCursor(),l=/^\s*/.exec(this.session.doc.getLine(o.row))[0].length,d=Math.floor(l/this.tabSize);this.$highlightIndentGuideMarker={indentLevel:d,start:o.row};var v=this.session.$bracketHighlight;if(v){for(var y=this.session.$bracketHighlight.ranges,x=0;x<y.length;x++)if(o.row!==y[x].start.row){this.$highlightIndentGuideMarker.end=y[x].start.row,o.row>y[x].start.row?this.$highlightIndentGuideMarker.dir=-1:this.$highlightIndentGuideMarker.dir=1;break}}if(!this.$highlightIndentGuideMarker.end&&t[o.row]!==""&&o.column===t[o.row].length){this.$highlightIndentGuideMarker.dir=1;for(var x=o.row+1;x<t.length;x++){var E=t[x],T=/^\s*/.exec(E)[0].length;if(E!==""&&(this.$highlightIndentGuideMarker.end=x,T<=l))break}}this.$renderHighlightIndentGuide()}}},this.$clearActiveIndentGuide=function(){for(var t=this.$lines.cells,o=0;o<t.length;o++){var l=t[o],d=l.element.childNodes;if(d.length>0){for(var v=0;v<d.length;v++)if(d[v].classList&&d[v].classList.contains("ace_indent-guide-active")){d[v].classList.remove("ace_indent-guide-active");break}}}},this.$setIndentGuideActive=function(t,o){var l=this.session.doc.getLine(t.row);if(l!==""){var d=t.element.childNodes;if(d){var v=d[o-1];v&&v.classList&&v.classList.contains("ace_indent-guide")&&v.classList.add("ace_indent-guide-active")}}},this.$renderHighlightIndentGuide=function(){if(this.$lines){var t=this.$lines.cells;this.$clearActiveIndentGuide();var o=this.$highlightIndentGuideMarker.indentLevel;if(o!==0)if(this.$highlightIndentGuideMarker.dir===1)for(var l=0;l<t.length;l++){var d=t[l];if(this.$highlightIndentGuideMarker.end&&d.row>=this.$highlightIndentGuideMarker.start+1){if(d.row>=this.$highlightIndentGuideMarker.end)break;this.$setIndentGuideActive(d,o)}}else for(var l=t.length-1;l>=0;l--){var d=t[l];if(this.$highlightIndentGuideMarker.end&&d.row<this.$highlightIndentGuideMarker.start){if(d.row<=this.$highlightIndentGuideMarker.end)break;this.$setIndentGuideActive(d,o)}}}},this.$createLineElement=function(t){var o=this.dom.createElement("div");return o.className="ace_line",o.style.height=this.config.lineHeight+"px",o},this.$renderWrappedLine=function(t,o,l){var d=0,v=0,y=l[0],x=0,E=this.$createLineElement();t.appendChild(E);for(var T=0;T<o.length;T++){var k=o[T],b=k.value;if(T==0&&this.displayIndentGuides){if(d=b.length,b=this.renderIndentGuide(E,b,y),!b)continue;d-=b.length}if(d+b.length<y)x=this.$renderToken(E,x,k,b),d+=b.length;else{for(;d+b.length>=y;)x=this.$renderToken(E,x,k,b.substring(0,y-d)),b=b.substring(y-d),d=y,E=this.$createLineElement(),t.appendChild(E),E.appendChild(this.dom.createTextNode(u.stringRepeat(" ",l.indent),this.element)),v++,x=0,y=l[v]||Number.MAX_VALUE;b.length!=0&&(d+=b.length,x=this.$renderToken(E,x,k,b))}}l[l.length-1]>this.MAX_LINE_LENGTH&&this.$renderOverflowMessage(E,x,null,"",!0)},this.$renderSimpleLine=function(t,o){for(var l=0,d=0;d<o.length;d++){var v=o[d],y=v.value;if(!(d==0&&this.displayIndentGuides&&(y=this.renderIndentGuide(t,y),!y))){if(l+y.length>this.MAX_LINE_LENGTH)return this.$renderOverflowMessage(t,l,v,y);l=this.$renderToken(t,l,v,y)}}},this.$renderOverflowMessage=function(t,o,l,d,v){l&&this.$renderToken(t,o,l,d.slice(0,this.MAX_LINE_LENGTH-o));var y=this.dom.createElement("span");y.className="ace_inline_button ace_keyword ace_toggle_wrap",y.textContent=v?"<hide>":"<click to see more...>",t.appendChild(y)},this.$renderLine=function(t,o,l){if(!l&&l!=!1&&(l=this.session.getFoldLine(o)),l)var d=this.$getFoldLineTokens(o,l);else var d=this.session.getTokens(o);var v=t;if(d.length){var y=this.session.getRowSplitData(o);if(y&&y.length){this.$renderWrappedLine(t,d,y);var v=t.lastChild}else{var v=t;this.$useLineGroups()&&(v=this.$createLineElement(),t.appendChild(v)),this.$renderSimpleLine(v,d)}}else this.$useLineGroups()&&(v=this.$createLineElement(),t.appendChild(v));if(this.showEOL&&v){l&&(o=l.end.row);var x=this.dom.createElement("span");x.className="ace_invisible ace_invisible_eol",x.textContent=o==this.session.getLength()-1?this.EOF_CHAR:this.EOL_CHAR,v.appendChild(x)}},this.$getFoldLineTokens=function(t,o){var l=this.session,d=[];function v(x,E,T){for(var k=0,b=0;b+x[k].value.length<E;)if(b+=x[k].value.length,k++,k==x.length)return;if(b!=E){var S=x[k].value.substring(E-b);S.length>T-E&&(S=S.substring(0,T-E)),d.push({type:x[k].type,value:S}),b=E+S.length,k+=1}for(;b<T&&k<x.length;){var S=x[k].value;S.length+b>T?d.push({type:x[k].type,value:S.substring(0,T-b)}):d.push(x[k]),b+=S.length,k+=1}}var y=l.getTokens(t);return o.walk(function(x,E,T,k,b){x!=null?d.push({type:"fold",value:x}):(b&&(y=l.getTokens(E)),y.length&&v(y,k,T))},o.end.row,this.session.getLine(o.end.row).length),d},this.$useLineGroups=function(){return this.session.getUseWrapMode()},this.destroy=function(){}}).call(n.prototype),a.Text=n}),ace.define("ace/layer/cursor",["require","exports","module","ace/lib/dom"],function(e,a,m){var h=e("../lib/dom"),p=function(u){this.element=h.createElement("div"),this.element.className="ace_layer ace_cursor-layer",u.appendChild(this.element),this.isVisible=!1,this.isBlinking=!0,this.blinkInterval=1e3,this.smoothBlinking=!1,this.cursors=[],this.cursor=this.addCursor(),h.addCssClass(this.element,"ace_hidden-cursors"),this.$updateCursors=this.$updateOpacity.bind(this)};(function(){this.$updateOpacity=function(u){for(var c=this.cursors,f=c.length;f--;)h.setStyle(c[f].style,"opacity",u?"":"0")},this.$startCssAnimation=function(){for(var u=this.cursors,c=u.length;c--;)u[c].style.animationDuration=this.blinkInterval+"ms";this.$isAnimating=!0,setTimeout(function(){this.$isAnimating&&h.addCssClass(this.element,"ace_animate-blinking")}.bind(this))},this.$stopCssAnimation=function(){this.$isAnimating=!1,h.removeCssClass(this.element,"ace_animate-blinking")},this.$padding=0,this.setPadding=function(u){this.$padding=u},this.setSession=function(u){this.session=u},this.setBlinking=function(u){u!=this.isBlinking&&(this.isBlinking=u,this.restartTimer())},this.setBlinkInterval=function(u){u!=this.blinkInterval&&(this.blinkInterval=u,this.restartTimer())},this.setSmoothBlinking=function(u){u!=this.smoothBlinking&&(this.smoothBlinking=u,h.setCssClass(this.element,"ace_smooth-blinking",u),this.$updateCursors(!0),this.restartTimer())},this.addCursor=function(){var u=h.createElement("div");return u.className="ace_cursor",this.element.appendChild(u),this.cursors.push(u),u},this.removeCursor=function(){if(this.cursors.length>1){var u=this.cursors.pop();return u.parentNode.removeChild(u),u}},this.hideCursor=function(){this.isVisible=!1,h.addCssClass(this.element,"ace_hidden-cursors"),this.restartTimer()},this.showCursor=function(){this.isVisible=!0,h.removeCssClass(this.element,"ace_hidden-cursors"),this.restartTimer()},this.restartTimer=function(){var u=this.$updateCursors;if(clearInterval(this.intervalId),clearTimeout(this.timeoutId),this.$stopCssAnimation(),this.smoothBlinking&&(this.$isSmoothBlinking=!1,h.removeCssClass(this.element,"ace_smooth-blinking")),u(!0),!this.isBlinking||!this.blinkInterval||!this.isVisible){this.$stopCssAnimation();return}if(this.smoothBlinking&&(this.$isSmoothBlinking=!0,setTimeout(function(){this.$isSmoothBlinking&&h.addCssClass(this.element,"ace_smooth-blinking")}.bind(this))),h.HAS_CSS_ANIMATION)this.$startCssAnimation();else{var c=function(){this.timeoutId=setTimeout(function(){u(!1)},.6*this.blinkInterval)}.bind(this);this.intervalId=setInterval(function(){u(!0),c()},this.blinkInterval),c()}},this.getPixelPosition=function(u,c){if(!this.config||!this.session)return{left:0,top:0};u||(u=this.session.selection.getCursor());var f=this.session.documentToScreenPosition(u),n=this.$padding+(this.session.$bidiHandler.isBidiRow(f.row,u.row)?this.session.$bidiHandler.getPosLeft(f.column):f.column*this.config.characterWidth),t=(f.row-(c?this.config.firstRowScreen:0))*this.config.lineHeight;return{left:n,top:t}},this.isCursorInView=function(u,c){return u.top>=0&&u.top<c.maxHeight},this.update=function(u){this.config=u;var c=this.session.$selectionMarkers,f=0,n=0;(c===void 0||c.length===0)&&(c=[{cursor:null}]);for(var f=0,t=c.length;f<t;f++){var o=this.getPixelPosition(c[f].cursor,!0);if(!((o.top>u.height+u.offset||o.top<0)&&f>1)){var l=this.cursors[n++]||this.addCursor(),d=l.style;this.drawCursor?this.drawCursor(l,o,u,c[f],this.session):this.isCursorInView(o,u)?(h.setStyle(d,"display","block"),h.translate(l,o.left,o.top),h.setStyle(d,"width",Math.round(u.characterWidth)+"px"),h.setStyle(d,"height",u.lineHeight+"px")):h.setStyle(d,"display","none")}}for(;this.cursors.length>n;)this.removeCursor();var v=this.session.getOverwrite();this.$setOverwrite(v),this.$pixelPos=o,this.restartTimer()},this.drawCursor=null,this.$setOverwrite=function(u){u!=this.overwrite&&(this.overwrite=u,u?h.addCssClass(this.element,"ace_overwrite-cursors"):h.removeCssClass(this.element,"ace_overwrite-cursors"))},this.destroy=function(){clearInterval(this.intervalId),clearTimeout(this.timeoutId)}}).call(p.prototype),a.Cursor=p}),ace.define("ace/scrollbar",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/lib/event","ace/lib/event_emitter"],function(e,a,m){var h=e("./lib/oop"),p=e("./lib/dom"),u=e("./lib/event"),c=e("./lib/event_emitter").EventEmitter,f=32768,n=function(l){this.element=p.createElement("div"),this.element.className="ace_scrollbar ace_scrollbar"+this.classSuffix,this.inner=p.createElement("div"),this.inner.className="ace_scrollbar-inner",this.inner.textContent=" ",this.element.appendChild(this.inner),l.appendChild(this.element),this.setVisible(!1),this.skipEvent=!1,u.addListener(this.element,"scroll",this.onScroll.bind(this)),u.addListener(this.element,"mousedown",u.preventDefault)};(function(){h.implement(this,c),this.setVisible=function(l){this.element.style.display=l?"":"none",this.isVisible=l,this.coeff=1}}).call(n.prototype);var t=function(l,d){n.call(this,l),this.scrollTop=0,this.scrollHeight=0,d.$scrollbarWidth=this.width=p.scrollbarWidth(l.ownerDocument),this.inner.style.width=this.element.style.width=(this.width||15)+5+"px",this.$minWidth=0};h.inherits(t,n),function(){this.classSuffix="-v",this.onScroll=function(){if(!this.skipEvent){if(this.scrollTop=this.element.scrollTop,this.coeff!=1){var l=this.element.clientHeight/this.scrollHeight;this.scrollTop=this.scrollTop*(1-l)/(this.coeff-l)}this._emit("scroll",{data:this.scrollTop})}this.skipEvent=!1},this.getWidth=function(){return Math.max(this.isVisible?this.width:0,this.$minWidth||0)},this.setHeight=function(l){this.element.style.height=l+"px"},this.setInnerHeight=this.setScrollHeight=function(l){this.scrollHeight=l,l>f?(this.coeff=f/l,l=f):this.coeff!=1&&(this.coeff=1),this.inner.style.height=l+"px"},this.setScrollTop=function(l){this.scrollTop!=l&&(this.skipEvent=!0,this.scrollTop=l,this.element.scrollTop=l*this.coeff)}}.call(t.prototype);var o=function(l,d){n.call(this,l),this.scrollLeft=0,this.height=d.$scrollbarWidth,this.inner.style.height=this.element.style.height=(this.height||15)+5+"px"};h.inherits(o,n),function(){this.classSuffix="-h",this.onScroll=function(){this.skipEvent||(this.scrollLeft=this.element.scrollLeft,this._emit("scroll",{data:this.scrollLeft})),this.skipEvent=!1},this.getHeight=function(){return this.isVisible?this.height:0},this.setWidth=function(l){this.element.style.width=l+"px"},this.setInnerWidth=function(l){this.inner.style.width=l+"px"},this.setScrollWidth=function(l){this.inner.style.width=l+"px"},this.setScrollLeft=function(l){this.scrollLeft!=l&&(this.skipEvent=!0,this.scrollLeft=this.element.scrollLeft=l)}}.call(o.prototype),a.ScrollBar=t,a.ScrollBarV=t,a.ScrollBarH=o,a.VScrollBar=t,a.HScrollBar=o}),ace.define("ace/scrollbar_custom",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/lib/event","ace/lib/event_emitter"],function(e,a,m){var h=e("./lib/oop"),p=e("./lib/dom"),u=e("./lib/event"),c=e("./lib/event_emitter").EventEmitter;p.importCssString(`.ace_editor>.ace_sb-v div, .ace_editor>.ace_sb-h div{
  position: absolute;
  background: rgba(128, 128, 128, 0.6);
  -moz-box-sizing: border-box;
  box-sizing: border-box;
  border: 1px solid #bbb;
  border-radius: 2px;
  z-index: 8;
}
.ace_editor>.ace_sb-v, .ace_editor>.ace_sb-h {
  position: absolute;
  z-index: 6;
  background: none;
  overflow: hidden!important;
}
.ace_editor>.ace_sb-v {
  z-index: 6;
  right: 0;
  top: 0;
  width: 12px;
}
.ace_editor>.ace_sb-v div {
  z-index: 8;
  right: 0;
  width: 100%;
}
.ace_editor>.ace_sb-h {
  bottom: 0;
  left: 0;
  height: 12px;
}
.ace_editor>.ace_sb-h div {
  bottom: 0;
  height: 100%;
}
.ace_editor>.ace_sb_grabbed {
  z-index: 8;
  background: #000;
}`,"ace_scrollbar.css",!1);var f=function(o){this.element=p.createElement("div"),this.element.className="ace_sb"+this.classSuffix,this.inner=p.createElement("div"),this.inner.className="",this.element.appendChild(this.inner),this.VScrollWidth=12,this.HScrollHeight=12,o.appendChild(this.element),this.setVisible(!1),this.skipEvent=!1,u.addMultiMouseDownListener(this.element,[500,300,300],this,"onMouseDown")};(function(){h.implement(this,c),this.setVisible=function(o){this.element.style.display=o?"":"none",this.isVisible=o,this.coeff=1}}).call(f.prototype);var n=function(o,l){f.call(this,o),this.scrollTop=0,this.scrollHeight=0,this.parent=o,this.width=this.VScrollWidth,this.renderer=l,this.inner.style.width=this.element.style.width=(this.width||15)+"px",this.$minWidth=0};h.inherits(n,f),function(){this.classSuffix="-v",h.implement(this,c),this.onMouseDown=function(o,l){if(o==="mousedown"&&!(u.getButton(l)!==0||l.detail===2)){if(l.target===this.inner){var d=this,v=l.clientY,y=function(A){v=A.clientY},x=function(){clearInterval(b)},E=l.clientY,T=this.thumbTop,k=function(){if(v!==void 0){var A=d.scrollTopFromThumbTop(T+v-E);A!==d.scrollTop&&d._emit("scroll",{data:A})}};u.capture(this.inner,y,x);var b=setInterval(k,20);return u.preventDefault(l)}var S=l.clientY-this.element.getBoundingClientRect().top-this.thumbHeight/2;return this._emit("scroll",{data:this.scrollTopFromThumbTop(S)}),u.preventDefault(l)}},this.getHeight=function(){return this.height},this.scrollTopFromThumbTop=function(o){var l=o*(this.pageHeight-this.viewHeight)/(this.slideHeight-this.thumbHeight);return l=l>>0,l<0?l=0:l>this.pageHeight-this.viewHeight&&(l=this.pageHeight-this.viewHeight),l},this.getWidth=function(){return Math.max(this.isVisible?this.width:0,this.$minWidth||0)},this.setHeight=function(o){this.height=Math.max(0,o),this.slideHeight=this.height,this.viewHeight=this.height,this.setScrollHeight(this.pageHeight,!0)},this.setInnerHeight=this.setScrollHeight=function(o,l){this.pageHeight===o&&!l||(this.pageHeight=o,this.thumbHeight=this.slideHeight*this.viewHeight/this.pageHeight,this.thumbHeight>this.slideHeight&&(this.thumbHeight=this.slideHeight),this.thumbHeight<15&&(this.thumbHeight=15),this.inner.style.height=this.thumbHeight+"px",this.scrollTop>this.pageHeight-this.viewHeight&&(this.scrollTop=this.pageHeight-this.viewHeight,this.scrollTop<0&&(this.scrollTop=0),this._emit("scroll",{data:this.scrollTop})))},this.setScrollTop=function(o){this.scrollTop=o,o<0&&(o=0),this.thumbTop=o*(this.slideHeight-this.thumbHeight)/(this.pageHeight-this.viewHeight),this.inner.style.top=this.thumbTop+"px"}}.call(n.prototype);var t=function(o,l){f.call(this,o),this.scrollLeft=0,this.scrollWidth=0,this.height=this.HScrollHeight,this.inner.style.height=this.element.style.height=(this.height||12)+"px",this.renderer=l};h.inherits(t,f),function(){this.classSuffix="-h",h.implement(this,c),this.onMouseDown=function(o,l){if(o==="mousedown"&&!(u.getButton(l)!==0||l.detail===2)){if(l.target===this.inner){var d=this,v=l.clientX,y=function(A){v=A.clientX},x=function(){clearInterval(b)},E=l.clientX,T=this.thumbLeft,k=function(){if(v!==void 0){var A=d.scrollLeftFromThumbLeft(T+v-E);A!==d.scrollLeft&&d._emit("scroll",{data:A})}};u.capture(this.inner,y,x);var b=setInterval(k,20);return u.preventDefault(l)}var S=l.clientX-this.element.getBoundingClientRect().left-this.thumbWidth/2;return this._emit("scroll",{data:this.scrollLeftFromThumbLeft(S)}),u.preventDefault(l)}},this.getHeight=function(){return this.isVisible?this.height:0},this.scrollLeftFromThumbLeft=function(o){var l=o*(this.pageWidth-this.viewWidth)/(this.slideWidth-this.thumbWidth);return l=l>>0,l<0?l=0:l>this.pageWidth-this.viewWidth&&(l=this.pageWidth-this.viewWidth),l},this.setWidth=function(o){this.width=Math.max(0,o),this.element.style.width=this.width+"px",this.slideWidth=this.width,this.viewWidth=this.width,this.setScrollWidth(this.pageWidth,!0)},this.setInnerWidth=this.setScrollWidth=function(o,l){this.pageWidth===o&&!l||(this.pageWidth=o,this.thumbWidth=this.slideWidth*this.viewWidth/this.pageWidth,this.thumbWidth>this.slideWidth&&(this.thumbWidth=this.slideWidth),this.thumbWidth<15&&(this.thumbWidth=15),this.inner.style.width=this.thumbWidth+"px",this.scrollLeft>this.pageWidth-this.viewWidth&&(this.scrollLeft=this.pageWidth-this.viewWidth,this.scrollLeft<0&&(this.scrollLeft=0),this._emit("scroll",{data:this.scrollLeft})))},this.setScrollLeft=function(o){this.scrollLeft=o,o<0&&(o=0),this.thumbLeft=o*(this.slideWidth-this.thumbWidth)/(this.pageWidth-this.viewWidth),this.inner.style.left=this.thumbLeft+"px"}}.call(t.prototype),a.ScrollBar=n,a.ScrollBarV=n,a.ScrollBarH=t,a.VScrollBar=n,a.HScrollBar=t}),ace.define("ace/renderloop",["require","exports","module","ace/lib/event"],function(e,a,m){var h=e("./lib/event"),p=function(u,c){this.onRender=u,this.pending=!1,this.changes=0,this.$recursionLimit=2,this.window=c||window;var f=this;this._flush=function(n){f.pending=!1;var t=f.changes;if(t&&(h.blockIdle(100),f.changes=0,f.onRender(t)),f.changes){if(f.$recursionLimit--<0)return;f.schedule()}else f.$recursionLimit=2}};(function(){this.schedule=function(u){this.changes=this.changes|u,this.changes&&!this.pending&&(h.nextFrame(this._flush),this.pending=!0)},this.clear=function(u){var c=this.changes;return this.changes=0,c}}).call(p.prototype),a.RenderLoop=p}),ace.define("ace/layer/font_metrics",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/lib/lang","ace/lib/event","ace/lib/useragent","ace/lib/event_emitter"],function(e,a,m){var h=e("../lib/oop"),p=e("../lib/dom"),u=e("../lib/lang"),c=e("../lib/event"),f=e("../lib/useragent"),n=e("../lib/event_emitter").EventEmitter,t=512,o=typeof ResizeObserver=="function",l=200,d=a.FontMetrics=function(v){this.el=p.createElement("div"),this.$setMeasureNodeStyles(this.el.style,!0),this.$main=p.createElement("div"),this.$setMeasureNodeStyles(this.$main.style),this.$measureNode=p.createElement("div"),this.$setMeasureNodeStyles(this.$measureNode.style),this.el.appendChild(this.$main),this.el.appendChild(this.$measureNode),v.appendChild(this.el),this.$measureNode.textContent=u.stringRepeat("X",t),this.$characterSize={width:0,height:0},o?this.$addObserver():this.checkForSizeChanges()};(function(){h.implement(this,n),this.$characterSize={width:0,height:0},this.$setMeasureNodeStyles=function(v,y){v.width=v.height="auto",v.left=v.top="0px",v.visibility="hidden",v.position="absolute",v.whiteSpace="pre",f.isIE<8?v["font-family"]="inherit":v.font="inherit",v.overflow=y?"hidden":"visible"},this.checkForSizeChanges=function(v){if(v===void 0&&(v=this.$measureSizes()),v&&(this.$characterSize.width!==v.width||this.$characterSize.height!==v.height)){this.$measureNode.style.fontWeight="bold";var y=this.$measureSizes();this.$measureNode.style.fontWeight="",this.$characterSize=v,this.charSizes=Object.create(null),this.allowBoldFonts=y&&y.width===v.width&&y.height===v.height,this._emit("changeCharacterSize",{data:v})}},this.$addObserver=function(){var v=this;this.$observer=new window.ResizeObserver(function(y){v.checkForSizeChanges()}),this.$observer.observe(this.$measureNode)},this.$pollSizeChanges=function(){if(this.$pollSizeChangesTimer||this.$observer)return this.$pollSizeChangesTimer;var v=this;return this.$pollSizeChangesTimer=c.onIdle(function y(){v.checkForSizeChanges(),c.onIdle(y,500)},500)},this.setPolling=function(v){v?this.$pollSizeChanges():this.$pollSizeChangesTimer&&(clearInterval(this.$pollSizeChangesTimer),this.$pollSizeChangesTimer=0)},this.$measureSizes=function(v){var y={height:(v||this.$measureNode).clientHeight,width:(v||this.$measureNode).clientWidth/t};return y.width===0||y.height===0?null:y},this.$measureCharWidth=function(v){this.$main.textContent=u.stringRepeat(v,t);var y=this.$main.getBoundingClientRect();return y.width/t},this.getCharacterWidth=function(v){var y=this.charSizes[v];return y===void 0&&(y=this.charSizes[v]=this.$measureCharWidth(v)/this.$characterSize.width),y},this.destroy=function(){clearInterval(this.$pollSizeChangesTimer),this.$observer&&this.$observer.disconnect(),this.el&&this.el.parentNode&&this.el.parentNode.removeChild(this.el)},this.$getZoom=function v(y){return!y||!y.parentElement?1:(window.getComputedStyle(y).zoom||1)*v(y.parentElement)},this.$initTransformMeasureNodes=function(){var v=function(y,x){return["div",{style:"position: absolute;top:"+y+"px;left:"+x+"px;"}]};this.els=p.buildDom([v(0,0),v(l,0),v(0,l),v(l,l)],this.el)},this.transformCoordinates=function(v,y){if(v){var x=this.$getZoom(this.el);v=b(1/x,v)}function E(K,j,Y){var Q=K[1]*j[0]-K[0]*j[1];return[(-j[1]*Y[0]+j[0]*Y[1])/Q,(+K[1]*Y[0]-K[0]*Y[1])/Q]}function T(K,j){return[K[0]-j[0],K[1]-j[1]]}function k(K,j){return[K[0]+j[0],K[1]+j[1]]}function b(K,j){return[K*j[0],K*j[1]]}this.els||this.$initTransformMeasureNodes();function S(K){var j=K.getBoundingClientRect();return[j.left,j.top]}var A=S(this.els[0]),C=S(this.els[1]),R=S(this.els[2]),g=S(this.els[3]),w=E(T(g,C),T(g,R),T(k(C,R),k(g,A))),$=b(1+w[0],T(C,A)),L=b(1+w[1],T(R,A));if(y){var M=y,O=w[0]*M[0]/l+w[1]*M[1]/l+1,I=k(b(M[0],$),b(M[1],L));return k(b(1/O/l,I),A)}var B=T(v,A),H=E(T($,b(w[0],B)),T(L,b(w[1],B)),B);return b(l,H)}}).call(d.prototype)}),ace.define("ace/css/editor.css",["require","exports","module"],function(e,a,m){m.exports=`
.ace_br1 {border-top-left-radius    : 3px;}
.ace_br2 {border-top-right-radius   : 3px;}
.ace_br3 {border-top-left-radius    : 3px; border-top-right-radius:    3px;}
.ace_br4 {border-bottom-right-radius: 3px;}
.ace_br5 {border-top-left-radius    : 3px; border-bottom-right-radius: 3px;}
.ace_br6 {border-top-right-radius   : 3px; border-bottom-right-radius: 3px;}
.ace_br7 {border-top-left-radius    : 3px; border-top-right-radius:    3px; border-bottom-right-radius: 3px;}
.ace_br8 {border-bottom-left-radius : 3px;}
.ace_br9 {border-top-left-radius    : 3px; border-bottom-left-radius:  3px;}
.ace_br10{border-top-right-radius   : 3px; border-bottom-left-radius:  3px;}
.ace_br11{border-top-left-radius    : 3px; border-top-right-radius:    3px; border-bottom-left-radius:  3px;}
.ace_br12{border-bottom-right-radius: 3px; border-bottom-left-radius:  3px;}
.ace_br13{border-top-left-radius    : 3px; border-bottom-right-radius: 3px; border-bottom-left-radius:  3px;}
.ace_br14{border-top-right-radius   : 3px; border-bottom-right-radius: 3px; border-bottom-left-radius:  3px;}
.ace_br15{border-top-left-radius    : 3px; border-top-right-radius:    3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px;}


.ace_editor {
    position: relative;
    overflow: hidden;
    padding: 0;
    font: 12px/normal 'Monaco', 'Menlo', 'Ubuntu Mono', 'Consolas', 'source-code-pro', monospace;
    direction: ltr;
    text-align: left;
    -webkit-tap-highlight-color: rgba(0, 0, 0, 0);
}

.ace_scroller {
    position: absolute;
    overflow: hidden;
    top: 0;
    bottom: 0;
    background-color: inherit;
    -ms-user-select: none;
    -moz-user-select: none;
    -webkit-user-select: none;
    user-select: none;
    cursor: text;
}

.ace_content {
    position: absolute;
    box-sizing: border-box;
    min-width: 100%;
    contain: style size layout;
    font-variant-ligatures: no-common-ligatures;
}

.ace_dragging .ace_scroller:before{
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    content: '';
    background: rgba(250, 250, 250, 0.01);
    z-index: 1000;
}
.ace_dragging.ace_dark .ace_scroller:before{
    background: rgba(0, 0, 0, 0.01);
}

.ace_gutter {
    position: absolute;
    overflow : hidden;
    width: auto;
    top: 0;
    bottom: 0;
    left: 0;
    cursor: default;
    z-index: 4;
    -ms-user-select: none;
    -moz-user-select: none;
    -webkit-user-select: none;
    user-select: none;
    contain: style size layout;
}

.ace_gutter-active-line {
    position: absolute;
    left: 0;
    right: 0;
}

.ace_scroller.ace_scroll-left:after {
    content: "";
    position: absolute;
    top: 0;
    right: 0;
    bottom: 0;
    left: 0;
    box-shadow: 17px 0 16px -16px rgba(0, 0, 0, 0.4) inset;
    pointer-events: none;
}

.ace_gutter-cell {
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    padding-left: 19px;
    padding-right: 6px;
    background-repeat: no-repeat;
}

.ace_gutter-cell.ace_error {
    background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAABOFBMVEX/////////QRswFAb/Ui4wFAYwFAYwFAaWGAfDRymzOSH/PxswFAb/SiUwFAYwFAbUPRvjQiDllog5HhHdRybsTi3/Tyv9Tir+Syj/UC3////XurebMBIwFAb/RSHbPx/gUzfdwL3kzMivKBAwFAbbvbnhPx66NhowFAYwFAaZJg8wFAaxKBDZurf/RB6mMxb/SCMwFAYwFAbxQB3+RB4wFAb/Qhy4Oh+4QifbNRcwFAYwFAYwFAb/QRzdNhgwFAYwFAbav7v/Uy7oaE68MBK5LxLewr/r2NXewLswFAaxJw4wFAbkPRy2PyYwFAaxKhLm1tMwFAazPiQwFAaUGAb/QBrfOx3bvrv/VC/maE4wFAbRPBq6MRO8Qynew8Dp2tjfwb0wFAbx6eju5+by6uns4uH9/f36+vr/GkHjAAAAYnRSTlMAGt+64rnWu/bo8eAA4InH3+DwoN7j4eLi4xP99Nfg4+b+/u9B/eDs1MD1mO7+4PHg2MXa347g7vDizMLN4eG+Pv7i5evs/v79yu7S3/DV7/498Yv24eH+4ufQ3Ozu/v7+y13sRqwAAADLSURBVHjaZc/XDsFgGIBhtDrshlitmk2IrbHFqL2pvXf/+78DPokj7+Fz9qpU/9UXJIlhmPaTaQ6QPaz0mm+5gwkgovcV6GZzd5JtCQwgsxoHOvJO15kleRLAnMgHFIESUEPmawB9ngmelTtipwwfASilxOLyiV5UVUyVAfbG0cCPHig+GBkzAENHS0AstVF6bacZIOzgLmxsHbt2OecNgJC83JERmePUYq8ARGkJx6XtFsdddBQgZE2nPR6CICZhawjA4Fb/chv+399kfR+MMMDGOQAAAABJRU5ErkJggg==");
    background-repeat: no-repeat;
    background-position: 2px center;
}

.ace_gutter-cell.ace_warning {
    background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAAAmVBMVEX///8AAAD///8AAAAAAABPSzb/5sAAAAB/blH/73z/ulkAAAAAAAD85pkAAAAAAAACAgP/vGz/rkDerGbGrV7/pkQICAf////e0IsAAAD/oED/qTvhrnUAAAD/yHD/njcAAADuv2r/nz//oTj/p064oGf/zHAAAAA9Nir/tFIAAAD/tlTiuWf/tkIAAACynXEAAAAAAAAtIRW7zBpBAAAAM3RSTlMAABR1m7RXO8Ln31Z36zT+neXe5OzooRDfn+TZ4p3h2hTf4t3k3ucyrN1K5+Xaks52Sfs9CXgrAAAAjklEQVR42o3PbQ+CIBQFYEwboPhSYgoYunIqqLn6/z8uYdH8Vmdnu9vz4WwXgN/xTPRD2+sgOcZjsge/whXZgUaYYvT8QnuJaUrjrHUQreGczuEafQCO/SJTufTbroWsPgsllVhq3wJEk2jUSzX3CUEDJC84707djRc5MTAQxoLgupWRwW6UB5fS++NV8AbOZgnsC7BpEAAAAABJRU5ErkJggg==");
    background-position: 2px center;
}

.ace_gutter-cell.ace_info {
    background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAAAAAA6mKC9AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAAJ0Uk5TAAB2k804AAAAPklEQVQY02NgIB68QuO3tiLznjAwpKTgNyDbMegwisCHZUETUZV0ZqOquBpXj2rtnpSJT1AEnnRmL2OgGgAAIKkRQap2htgAAAAASUVORK5CYII=");
    background-position: 2px center;
}
.ace_dark .ace_gutter-cell.ace_info {
    background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQBAMAAADt3eJSAAAAJFBMVEUAAAChoaGAgIAqKiq+vr6tra1ZWVmUlJSbm5s8PDxubm56enrdgzg3AAAAAXRSTlMAQObYZgAAAClJREFUeNpjYMAPdsMYHegyJZFQBlsUlMFVCWUYKkAZMxZAGdxlDMQBAG+TBP4B6RyJAAAAAElFTkSuQmCC");
}

.ace_scrollbar {
    contain: strict;
    position: absolute;
    right: 0;
    bottom: 0;
    z-index: 6;
}

.ace_scrollbar-inner {
    position: absolute;
    cursor: text;
    left: 0;
    top: 0;
}

.ace_scrollbar-v{
    overflow-x: hidden;
    overflow-y: scroll;
    top: 0;
}

.ace_scrollbar-h {
    overflow-x: scroll;
    overflow-y: hidden;
    left: 0;
}

.ace_print-margin {
    position: absolute;
    height: 100%;
}

.ace_text-input {
    position: absolute;
    z-index: 0;
    width: 0.5em;
    height: 1em;
    opacity: 0;
    background: transparent;
    -moz-appearance: none;
    appearance: none;
    border: none;
    resize: none;
    outline: none;
    overflow: hidden;
    font: inherit;
    padding: 0 1px;
    margin: 0 -1px;
    contain: strict;
    -ms-user-select: text;
    -moz-user-select: text;
    -webkit-user-select: text;
    user-select: text;
    /*with \`pre-line\` chrome inserts &nbsp; instead of space*/
    white-space: pre!important;
}
.ace_text-input.ace_composition {
    background: transparent;
    color: inherit;
    z-index: 1000;
    opacity: 1;
}
.ace_composition_placeholder { color: transparent }
.ace_composition_marker { 
    border-bottom: 1px solid;
    position: absolute;
    border-radius: 0;
    margin-top: 1px;
}

[ace_nocontext=true] {
    transform: none!important;
    filter: none!important;
    clip-path: none!important;
    mask : none!important;
    contain: none!important;
    perspective: none!important;
    mix-blend-mode: initial!important;
    z-index: auto;
}

.ace_layer {
    z-index: 1;
    position: absolute;
    overflow: hidden;
    /* workaround for chrome bug https://github.com/ajaxorg/ace/issues/2312*/
    word-wrap: normal;
    white-space: pre;
    height: 100%;
    width: 100%;
    box-sizing: border-box;
    /* setting pointer-events: auto; on node under the mouse, which changes
        during scroll, will break mouse wheel scrolling in Safari */
    pointer-events: none;
}

.ace_gutter-layer {
    position: relative;
    width: auto;
    text-align: right;
    pointer-events: auto;
    height: 1000000px;
    contain: style size layout;
}

.ace_text-layer {
    font: inherit !important;
    position: absolute;
    height: 1000000px;
    width: 1000000px;
    contain: style size layout;
}

.ace_text-layer > .ace_line, .ace_text-layer > .ace_line_group {
    contain: style size layout;
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
}

.ace_hidpi .ace_text-layer,
.ace_hidpi .ace_gutter-layer,
.ace_hidpi .ace_content,
.ace_hidpi .ace_gutter {
    contain: strict;
    will-change: transform;
}
.ace_hidpi .ace_text-layer > .ace_line, 
.ace_hidpi .ace_text-layer > .ace_line_group {
    contain: strict;
}

.ace_cjk {
    display: inline-block;
    text-align: center;
}

.ace_cursor-layer {
    z-index: 4;
}

.ace_cursor {
    z-index: 4;
    position: absolute;
    box-sizing: border-box;
    border-left: 2px solid;
    /* workaround for smooth cursor repaintng whole screen in chrome */
    transform: translatez(0);
}

.ace_multiselect .ace_cursor {
    border-left-width: 1px;
}

.ace_slim-cursors .ace_cursor {
    border-left-width: 1px;
}

.ace_overwrite-cursors .ace_cursor {
    border-left-width: 0;
    border-bottom: 1px solid;
}

.ace_hidden-cursors .ace_cursor {
    opacity: 0.2;
}

.ace_hasPlaceholder .ace_hidden-cursors .ace_cursor {
    opacity: 0;
}

.ace_smooth-blinking .ace_cursor {
    transition: opacity 0.18s;
}

.ace_animate-blinking .ace_cursor {
    animation-duration: 1000ms;
    animation-timing-function: step-end;
    animation-name: blink-ace-animate;
    animation-iteration-count: infinite;
}

.ace_animate-blinking.ace_smooth-blinking .ace_cursor {
    animation-duration: 1000ms;
    animation-timing-function: ease-in-out;
    animation-name: blink-ace-animate-smooth;
}
    
@keyframes blink-ace-animate {
    from, to { opacity: 1; }
    60% { opacity: 0; }
}

@keyframes blink-ace-animate-smooth {
    from, to { opacity: 1; }
    45% { opacity: 1; }
    60% { opacity: 0; }
    85% { opacity: 0; }
}

.ace_marker-layer .ace_step, .ace_marker-layer .ace_stack {
    position: absolute;
    z-index: 3;
}

.ace_marker-layer .ace_selection {
    position: absolute;
    z-index: 5;
}

.ace_marker-layer .ace_bracket {
    position: absolute;
    z-index: 6;
}

.ace_marker-layer .ace_error_bracket {
    position: absolute;
    border-bottom: 1px solid #DE5555;
    border-radius: 0;
}

.ace_marker-layer .ace_active-line {
    position: absolute;
    z-index: 2;
}

.ace_marker-layer .ace_selected-word {
    position: absolute;
    z-index: 4;
    box-sizing: border-box;
}

.ace_line .ace_fold {
    box-sizing: border-box;

    display: inline-block;
    height: 11px;
    margin-top: -2px;
    vertical-align: middle;

    background-image:
        url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABEAAAAJCAYAAADU6McMAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAJpJREFUeNpi/P//PwOlgAXGYGRklAVSokD8GmjwY1wasKljQpYACtpCFeADcHVQfQyMQAwzwAZI3wJKvCLkfKBaMSClBlR7BOQikCFGQEErIH0VqkabiGCAqwUadAzZJRxQr/0gwiXIal8zQQPnNVTgJ1TdawL0T5gBIP1MUJNhBv2HKoQHHjqNrA4WO4zY0glyNKLT2KIfIMAAQsdgGiXvgnYAAAAASUVORK5CYII="),
        url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAA3CAYAAADNNiA5AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAACJJREFUeNpi+P//fxgTAwPDBxDxD078RSX+YeEyDFMCIMAAI3INmXiwf2YAAAAASUVORK5CYII=");
    background-repeat: no-repeat, repeat-x;
    background-position: center center, top left;
    color: transparent;

    border: 1px solid black;
    border-radius: 2px;

    cursor: pointer;
    pointer-events: auto;
}

.ace_dark .ace_fold {
}

.ace_fold:hover{
    background-image:
        url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABEAAAAJCAYAAADU6McMAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAJpJREFUeNpi/P//PwOlgAXGYGRklAVSokD8GmjwY1wasKljQpYACtpCFeADcHVQfQyMQAwzwAZI3wJKvCLkfKBaMSClBlR7BOQikCFGQEErIH0VqkabiGCAqwUadAzZJRxQr/0gwiXIal8zQQPnNVTgJ1TdawL0T5gBIP1MUJNhBv2HKoQHHjqNrA4WO4zY0glyNKLT2KIfIMAAQsdgGiXvgnYAAAAASUVORK5CYII="),
        url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAA3CAYAAADNNiA5AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAACBJREFUeNpi+P//fz4TAwPDZxDxD5X4i5fLMEwJgAADAEPVDbjNw87ZAAAAAElFTkSuQmCC");
}

.ace_tooltip {
    background-color: #FFF;
    background-image: linear-gradient(to bottom, transparent, rgba(0, 0, 0, 0.1));
    border: 1px solid gray;
    border-radius: 1px;
    box-shadow: 0 1px 2px rgba(0, 0, 0, 0.3);
    color: black;
    max-width: 100%;
    padding: 3px 4px;
    position: fixed;
    z-index: 999999;
    box-sizing: border-box;
    cursor: default;
    white-space: pre;
    word-wrap: break-word;
    line-height: normal;
    font-style: normal;
    font-weight: normal;
    letter-spacing: normal;
    pointer-events: none;
}

.ace_folding-enabled > .ace_gutter-cell {
    padding-right: 13px;
}

.ace_fold-widget {
    box-sizing: border-box;

    margin: 0 -12px 0 1px;
    display: none;
    width: 11px;
    vertical-align: top;

    background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAANElEQVR42mWKsQ0AMAzC8ixLlrzQjzmBiEjp0A6WwBCSPgKAXoLkqSot7nN3yMwR7pZ32NzpKkVoDBUxKAAAAABJRU5ErkJggg==");
    background-repeat: no-repeat;
    background-position: center;

    border-radius: 3px;
    
    border: 1px solid transparent;
    cursor: pointer;
}

.ace_folding-enabled .ace_fold-widget {
    display: inline-block;   
}

.ace_fold-widget.ace_end {
    background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAANElEQVR42m3HwQkAMAhD0YzsRchFKI7sAikeWkrxwScEB0nh5e7KTPWimZki4tYfVbX+MNl4pyZXejUO1QAAAABJRU5ErkJggg==");
}

.ace_fold-widget.ace_closed {
    background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAMAAAAGCAYAAAAG5SQMAAAAOUlEQVR42jXKwQkAMAgDwKwqKD4EwQ26sSOkVWjgIIHAzPiCgaqiqnJHZnKICBERHN194O5b9vbLuAVRL+l0YWnZAAAAAElFTkSuQmCCXA==");
}

.ace_fold-widget:hover {
    border: 1px solid rgba(0, 0, 0, 0.3);
    background-color: rgba(255, 255, 255, 0.2);
    box-shadow: 0 1px 1px rgba(255, 255, 255, 0.7);
}

.ace_fold-widget:active {
    border: 1px solid rgba(0, 0, 0, 0.4);
    background-color: rgba(0, 0, 0, 0.05);
    box-shadow: 0 1px 1px rgba(255, 255, 255, 0.8);
}
/**
 * Dark version for fold widgets
 */
.ace_dark .ace_fold-widget {
    background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAAHklEQVQIW2P4//8/AzoGEQ7oGCaLLAhWiSwB146BAQCSTPYocqT0AAAAAElFTkSuQmCC");
}
.ace_dark .ace_fold-widget.ace_end {
    background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAAH0lEQVQIW2P4//8/AxQ7wNjIAjDMgC4AxjCVKBirIAAF0kz2rlhxpAAAAABJRU5ErkJggg==");
}
.ace_dark .ace_fold-widget.ace_closed {
    background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAMAAAAFCAYAAACAcVaiAAAAHElEQVQIW2P4//+/AxAzgDADlOOAznHAKgPWAwARji8UIDTfQQAAAABJRU5ErkJggg==");
}
.ace_dark .ace_fold-widget:hover {
    box-shadow: 0 1px 1px rgba(255, 255, 255, 0.2);
    background-color: rgba(255, 255, 255, 0.1);
}
.ace_dark .ace_fold-widget:active {
    box-shadow: 0 1px 1px rgba(255, 255, 255, 0.2);
}

.ace_inline_button {
    border: 1px solid lightgray;
    display: inline-block;
    margin: -1px 8px;
    padding: 0 5px;
    pointer-events: auto;
    cursor: pointer;
}
.ace_inline_button:hover {
    border-color: gray;
    background: rgba(200,200,200,0.2);
    display: inline-block;
    pointer-events: auto;
}

.ace_fold-widget.ace_invalid {
    background-color: #FFB4B4;
    border-color: #DE5555;
}

.ace_fade-fold-widgets .ace_fold-widget {
    transition: opacity 0.4s ease 0.05s;
    opacity: 0;
}

.ace_fade-fold-widgets:hover .ace_fold-widget {
    transition: opacity 0.05s ease 0.05s;
    opacity:1;
}

.ace_underline {
    text-decoration: underline;
}

.ace_bold {
    font-weight: bold;
}

.ace_nobold .ace_bold {
    font-weight: normal;
}

.ace_italic {
    font-style: italic;
}


.ace_error-marker {
    background-color: rgba(255, 0, 0,0.2);
    position: absolute;
    z-index: 9;
}

.ace_highlight-marker {
    background-color: rgba(255, 255, 0,0.2);
    position: absolute;
    z-index: 8;
}

.ace_mobile-menu {
    position: absolute;
    line-height: 1.5;
    border-radius: 4px;
    -ms-user-select: none;
    -moz-user-select: none;
    -webkit-user-select: none;
    user-select: none;
    background: white;
    box-shadow: 1px 3px 2px grey;
    border: 1px solid #dcdcdc;
    color: black;
}
.ace_dark > .ace_mobile-menu {
    background: #333;
    color: #ccc;
    box-shadow: 1px 3px 2px grey;
    border: 1px solid #444;

}
.ace_mobile-button {
    padding: 2px;
    cursor: pointer;
    overflow: hidden;
}
.ace_mobile-button:hover {
    background-color: #eee;
    opacity:1;
}
.ace_mobile-button:active {
    background-color: #ddd;
}

.ace_placeholder {
    font-family: arial;
    transform: scale(0.9);
    transform-origin: left;
    white-space: pre;
    opacity: 0.7;
    margin: 0 10px;
}

.ace_ghost_text {
    opacity: 0.5;
    font-style: italic;
}`}),ace.define("ace/layer/decorators",["require","exports","module","ace/lib/dom","ace/lib/oop","ace/lib/event_emitter"],function(e,a,m){var h=e("../lib/dom"),p=e("../lib/oop"),u=e("../lib/event_emitter").EventEmitter,c=function(f,n){this.canvas=h.createElement("canvas"),this.renderer=n,this.pixelRatio=1,this.maxHeight=n.layerConfig.maxHeight,this.lineHeight=n.layerConfig.lineHeight,this.canvasHeight=f.parent.scrollHeight,this.heightRatio=this.canvasHeight/this.maxHeight,this.canvasWidth=f.width,this.minDecorationHeight=2*this.pixelRatio|0,this.halfMinDecorationHeight=this.minDecorationHeight/2|0,this.canvas.width=this.canvasWidth,this.canvas.height=this.canvasHeight,this.canvas.style.top="0px",this.canvas.style.right="0px",this.canvas.style.zIndex="7px",this.canvas.style.position="absolute",this.colors={},this.colors.dark={error:"rgba(255, 18, 18, 1)",warning:"rgba(18, 136, 18, 1)",info:"rgba(18, 18, 136, 1)"},this.colors.light={error:"rgb(255,51,51)",warning:"rgb(32,133,72)",info:"rgb(35,68,138)"},f.element.appendChild(this.canvas)};(function(){p.implement(this,u),this.$updateDecorators=function(f){var n=this.renderer.theme.isDark===!0?this.colors.dark:this.colors.light;if(f){this.maxHeight=f.maxHeight,this.lineHeight=f.lineHeight,this.canvasHeight=f.height;var t=(f.lastRow+1)*this.lineHeight;t<this.canvasHeight?this.heightRatio=1:this.heightRatio=this.canvasHeight/this.maxHeight}var o=this.canvas.getContext("2d");function l(g,w){return g.priority<w.priority?-1:g.priority>w.priority?1:0}var d=this.renderer.session.$annotations;if(o.clearRect(0,0,this.canvas.width,this.canvas.height),d){var v={info:1,warning:2,error:3};d.forEach(function(g){g.priority=v[g.type]||null}),d=d.sort(l);for(var y=this.renderer.session.$foldData,x=0;x<d.length;x++){var E=d[x].row,T=this.compensateFoldRows(E,y),k=Math.round((E-T)*this.lineHeight*this.heightRatio),b=Math.round((E-T)*this.lineHeight*this.heightRatio),S=Math.round(((E-T)*this.lineHeight+this.lineHeight)*this.heightRatio),A=S-b;if(A<this.minDecorationHeight){var C=(b+S)/2|0;C<this.halfMinDecorationHeight?C=this.halfMinDecorationHeight:C+this.halfMinDecorationHeight>this.canvasHeight&&(C=this.canvasHeight-this.halfMinDecorationHeight),b=Math.round(C-this.halfMinDecorationHeight),S=Math.round(C+this.halfMinDecorationHeight)}o.fillStyle=n[d[x].type]||null,o.fillRect(0,k,this.canvasWidth,S-b)}}var R=this.renderer.session.selection.getCursor();if(R){var T=this.compensateFoldRows(R.row,y),k=Math.round((R.row-T)*this.lineHeight*this.heightRatio);o.fillStyle="rgba(0, 0, 0, 0.5)",o.fillRect(0,k,this.canvasWidth,2)}},this.compensateFoldRows=function(f,n){var t=0;if(n&&n.length>0)for(var o=0;o<n.length;o++)f>n[o].start.row&&f<n[o].end.row?t+=f-n[o].start.row:f>=n[o].end.row&&(t+=n[o].end.row-n[o].start.row);return t}}).call(c.prototype),a.Decorator=c}),ace.define("ace/virtual_renderer",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/config","ace/layer/gutter","ace/layer/marker","ace/layer/text","ace/layer/cursor","ace/scrollbar","ace/scrollbar","ace/scrollbar_custom","ace/scrollbar_custom","ace/renderloop","ace/layer/font_metrics","ace/lib/event_emitter","ace/css/editor.css","ace/layer/decorators","ace/lib/useragent"],function(e,a,m){var h=e("./lib/oop"),p=e("./lib/dom"),u=e("./config"),c=e("./layer/gutter").Gutter,f=e("./layer/marker").Marker,n=e("./layer/text").Text,t=e("./layer/cursor").Cursor,o=e("./scrollbar").HScrollBar,l=e("./scrollbar").VScrollBar,d=e("./scrollbar_custom").HScrollBar,v=e("./scrollbar_custom").VScrollBar,y=e("./renderloop").RenderLoop,x=e("./layer/font_metrics").FontMetrics,E=e("./lib/event_emitter").EventEmitter,T=e("./css/editor.css"),k=e("./layer/decorators").Decorator,b=e("./lib/useragent"),S=b.isIE;p.importCssString(T,"ace_editor.css",!1);var A=function(C,R){var g=this;this.container=C||p.createElement("div"),p.addCssClass(this.container,"ace_editor"),p.HI_DPI&&p.addCssClass(this.container,"ace_hidpi"),this.setTheme(R),u.get("useStrictCSP")==null&&u.set("useStrictCSP",!1),this.$gutter=p.createElement("div"),this.$gutter.className="ace_gutter",this.container.appendChild(this.$gutter),this.$gutter.setAttribute("aria-hidden",!0),this.scroller=p.createElement("div"),this.scroller.className="ace_scroller",this.container.appendChild(this.scroller),this.content=p.createElement("div"),this.content.className="ace_content",this.scroller.appendChild(this.content),this.$gutterLayer=new c(this.$gutter),this.$gutterLayer.on("changeGutterWidth",this.onGutterResize.bind(this)),this.$markerBack=new f(this.content);var w=this.$textLayer=new n(this.content);this.canvas=w.element,this.$markerFront=new f(this.content),this.$cursorLayer=new t(this.content),this.$horizScroll=!1,this.$vScroll=!1,this.scrollBar=this.scrollBarV=new l(this.container,this),this.scrollBarH=new o(this.container,this),this.scrollBarV.on("scroll",function($){g.$scrollAnimation||g.session.setScrollTop($.data-g.scrollMargin.top)}),this.scrollBarH.on("scroll",function($){g.$scrollAnimation||g.session.setScrollLeft($.data-g.scrollMargin.left)}),this.scrollTop=0,this.scrollLeft=0,this.cursorPos={row:0,column:0},this.$fontMetrics=new x(this.container),this.$textLayer.$setFontMetrics(this.$fontMetrics),this.$textLayer.on("changeCharacterSize",function($){g.updateCharacterSize(),g.onResize(!0,g.gutterWidth,g.$size.width,g.$size.height),g._signal("changeCharacterSize",$)}),this.$size={width:0,height:0,scrollerHeight:0,scrollerWidth:0,$dirty:!0},this.layerConfig={width:1,padding:0,firstRow:0,firstRowScreen:0,lastRow:0,lineHeight:0,characterWidth:0,minHeight:1,maxHeight:1,offset:0,height:1,gutterOffset:1},this.scrollMargin={left:0,right:0,top:0,bottom:0,v:0,h:0},this.margin={left:0,right:0,top:0,bottom:0,v:0,h:0},this.$keepTextAreaAtCursor=!b.isIOS,this.$loop=new y(this.$renderChanges.bind(this),this.container.ownerDocument.defaultView),this.$loop.schedule(this.CHANGE_FULL),this.updateCharacterSize(),this.setPadding(4),u.resetOptions(this),u._signal("renderer",this)};(function(){this.CHANGE_CURSOR=1,this.CHANGE_MARKER=2,this.CHANGE_GUTTER=4,this.CHANGE_SCROLL=8,this.CHANGE_LINES=16,this.CHANGE_TEXT=32,this.CHANGE_SIZE=64,this.CHANGE_MARKER_BACK=128,this.CHANGE_MARKER_FRONT=256,this.CHANGE_FULL=512,this.CHANGE_H_SCROLL=1024,h.implement(this,E),this.updateCharacterSize=function(){this.$textLayer.allowBoldFonts!=this.$allowBoldFonts&&(this.$allowBoldFonts=this.$textLayer.allowBoldFonts,this.setStyle("ace_nobold",!this.$allowBoldFonts)),this.layerConfig.characterWidth=this.characterWidth=this.$textLayer.getCharacterWidth(),this.layerConfig.lineHeight=this.lineHeight=this.$textLayer.getLineHeight(),this.$updatePrintMargin(),p.setStyle(this.scroller.style,"line-height",this.lineHeight+"px")},this.setSession=function(C){this.session&&this.session.doc.off("changeNewLineMode",this.onChangeNewLineMode),this.session=C,C&&this.scrollMargin.top&&C.getScrollTop()<=0&&C.setScrollTop(-this.scrollMargin.top),this.$cursorLayer.setSession(C),this.$markerBack.setSession(C),this.$markerFront.setSession(C),this.$gutterLayer.setSession(C),this.$textLayer.setSession(C),C&&(this.$loop.schedule(this.CHANGE_FULL),this.session.$setFontMetrics(this.$fontMetrics),this.scrollBarH.scrollLeft=this.scrollBarV.scrollTop=null,this.onChangeNewLineMode=this.onChangeNewLineMode.bind(this),this.onChangeNewLineMode(),this.session.doc.on("changeNewLineMode",this.onChangeNewLineMode))},this.updateLines=function(C,R,g){if(R===void 0&&(R=1/0),this.$changedLines?(this.$changedLines.firstRow>C&&(this.$changedLines.firstRow=C),this.$changedLines.lastRow<R&&(this.$changedLines.lastRow=R)):this.$changedLines={firstRow:C,lastRow:R},this.$changedLines.lastRow<this.layerConfig.firstRow)if(g)this.$changedLines.lastRow=this.layerConfig.lastRow;else return;this.$changedLines.firstRow>this.layerConfig.lastRow||this.$loop.schedule(this.CHANGE_LINES)},this.onChangeNewLineMode=function(){this.$loop.schedule(this.CHANGE_TEXT),this.$textLayer.$updateEolChar(),this.session.$bidiHandler.setEolChar(this.$textLayer.EOL_CHAR)},this.onChangeTabSize=function(){this.$loop.schedule(this.CHANGE_TEXT|this.CHANGE_MARKER),this.$textLayer.onChangeTabSize()},this.updateText=function(){this.$loop.schedule(this.CHANGE_TEXT)},this.updateFull=function(C){C?this.$renderChanges(this.CHANGE_FULL,!0):this.$loop.schedule(this.CHANGE_FULL)},this.updateFontSize=function(){this.$textLayer.checkForSizeChanges()},this.$changes=0,this.$updateSizeAsync=function(){this.$loop.pending?this.$size.$dirty=!0:this.onResize()},this.onResize=function(C,R,g,w){if(!(this.resizing>2)){this.resizing>0?this.resizing++:this.resizing=C?1:0;var $=this.container;w||(w=$.clientHeight||$.scrollHeight),g||(g=$.clientWidth||$.scrollWidth);var L=this.$updateCachedSize(C,R,g,w);if(!this.$size.scrollerHeight||!g&&!w)return this.resizing=0;C&&(this.$gutterLayer.$padding=null),C?this.$renderChanges(L|this.$changes,!0):this.$loop.schedule(L|this.$changes),this.resizing&&(this.resizing=0),this.scrollBarH.scrollLeft=this.scrollBarV.scrollTop=null,this.$customScrollbar&&this.$updateCustomScrollbar(!0)}},this.$updateCachedSize=function(C,R,g,w){w-=this.$extraHeight||0;var $=0,L=this.$size,M={width:L.width,height:L.height,scrollerHeight:L.scrollerHeight,scrollerWidth:L.scrollerWidth};if(w&&(C||L.height!=w)&&(L.height=w,$|=this.CHANGE_SIZE,L.scrollerHeight=L.height,this.$horizScroll&&(L.scrollerHeight-=this.scrollBarH.getHeight()),this.scrollBarV.setHeight(L.scrollerHeight),this.scrollBarV.element.style.bottom=this.scrollBarH.getHeight()+"px",$=$|this.CHANGE_SCROLL),g&&(C||L.width!=g)){$|=this.CHANGE_SIZE,L.width=g,R==null&&(R=this.$showGutter?this.$gutter.offsetWidth:0),this.gutterWidth=R,p.setStyle(this.scrollBarH.element.style,"left",R+"px"),p.setStyle(this.scroller.style,"left",R+this.margin.left+"px"),L.scrollerWidth=Math.max(0,g-R-this.scrollBarV.getWidth()-this.margin.h),p.setStyle(this.$gutter.style,"left",this.margin.left+"px");var O=this.scrollBarV.getWidth()+"px";p.setStyle(this.scrollBarH.element.style,"right",O),p.setStyle(this.scroller.style,"right",O),p.setStyle(this.scroller.style,"bottom",this.scrollBarH.getHeight()),this.scrollBarH.setWidth(L.scrollerWidth),(this.session&&this.session.getUseWrapMode()&&this.adjustWrapLimit()||C)&&($|=this.CHANGE_FULL)}return L.$dirty=!g||!w,$&&this._signal("resize",M),$},this.onGutterResize=function(C){var R=this.$showGutter?C:0;R!=this.gutterWidth&&(this.$changes|=this.$updateCachedSize(!0,R,this.$size.width,this.$size.height)),this.session.getUseWrapMode()&&this.adjustWrapLimit()?this.$loop.schedule(this.CHANGE_FULL):this.$size.$dirty?this.$loop.schedule(this.CHANGE_FULL):this.$computeLayerConfig()},this.adjustWrapLimit=function(){var C=this.$size.scrollerWidth-this.$padding*2,R=Math.floor(C/this.characterWidth);return this.session.adjustWrapLimit(R,this.$showPrintMargin&&this.$printMarginColumn)},this.setAnimatedScroll=function(C){this.setOption("animatedScroll",C)},this.getAnimatedScroll=function(){return this.$animatedScroll},this.setShowInvisibles=function(C){this.setOption("showInvisibles",C),this.session.$bidiHandler.setShowInvisibles(C)},this.getShowInvisibles=function(){return this.getOption("showInvisibles")},this.getDisplayIndentGuides=function(){return this.getOption("displayIndentGuides")},this.setDisplayIndentGuides=function(C){this.setOption("displayIndentGuides",C)},this.getHighlightIndentGuides=function(){return this.getOption("highlightIndentGuides")},this.setHighlightIndentGuides=function(C){this.setOption("highlightIndentGuides",C)},this.setShowPrintMargin=function(C){this.setOption("showPrintMargin",C)},this.getShowPrintMargin=function(){return this.getOption("showPrintMargin")},this.setPrintMarginColumn=function(C){this.setOption("printMarginColumn",C)},this.getPrintMarginColumn=function(){return this.getOption("printMarginColumn")},this.getShowGutter=function(){return this.getOption("showGutter")},this.setShowGutter=function(C){return this.setOption("showGutter",C)},this.getFadeFoldWidgets=function(){return this.getOption("fadeFoldWidgets")},this.setFadeFoldWidgets=function(C){this.setOption("fadeFoldWidgets",C)},this.setHighlightGutterLine=function(C){this.setOption("highlightGutterLine",C)},this.getHighlightGutterLine=function(){return this.getOption("highlightGutterLine")},this.$updatePrintMargin=function(){if(!(!this.$showPrintMargin&&!this.$printMarginEl)){if(!this.$printMarginEl){var C=p.createElement("div");C.className="ace_layer ace_print-margin-layer",this.$printMarginEl=p.createElement("div"),this.$printMarginEl.className="ace_print-margin",C.appendChild(this.$printMarginEl),this.content.insertBefore(C,this.content.firstChild)}var R=this.$printMarginEl.style;R.left=Math.round(this.characterWidth*this.$printMarginColumn+this.$padding)+"px",R.visibility=this.$showPrintMargin?"visible":"hidden",this.session&&this.session.$wrap==-1&&this.adjustWrapLimit()}},this.getContainerElement=function(){return this.container},this.getMouseEventTarget=function(){return this.scroller},this.getTextAreaContainer=function(){return this.container},this.$moveTextAreaToCursor=function(){if(!this.$isMousePressed){var C=this.textarea.style,R=this.$composition;if(!this.$keepTextAreaAtCursor&&!R){p.translate(this.textarea,-100,0);return}var g=this.$cursorLayer.$pixelPos;if(g){R&&R.markerRange&&(g=this.$cursorLayer.getPixelPosition(R.markerRange.start,!0));var w=this.layerConfig,$=g.top,L=g.left;$-=w.offset;var M=R&&R.useTextareaForIME?this.lineHeight:S?0:1;if($<0||$>w.height-M){p.translate(this.textarea,0,0);return}var O=1,I=this.$size.height-M;if(!R)$+=this.lineHeight;else if(R.useTextareaForIME){var B=this.textarea.value;O=this.characterWidth*this.session.$getStringScreenWidth(B)[0]}else $+=this.lineHeight+2;L-=this.scrollLeft,L>this.$size.scrollerWidth-O&&(L=this.$size.scrollerWidth-O),L+=this.gutterWidth+this.margin.left,p.setStyle(C,"height",M+"px"),p.setStyle(C,"width",O+"px"),p.translate(this.textarea,Math.min(L,this.$size.scrollerWidth-O),Math.min($,I))}}},this.getFirstVisibleRow=function(){return this.layerConfig.firstRow},this.getFirstFullyVisibleRow=function(){return this.layerConfig.firstRow+(this.layerConfig.offset===0?0:1)},this.getLastFullyVisibleRow=function(){var C=this.layerConfig,R=C.lastRow,g=this.session.documentToScreenRow(R,0)*C.lineHeight;return g-this.session.getScrollTop()>C.height-C.lineHeight?R-1:R},this.getLastVisibleRow=function(){return this.layerConfig.lastRow},this.$padding=null,this.setPadding=function(C){this.$padding=C,this.$textLayer.setPadding(C),this.$cursorLayer.setPadding(C),this.$markerFront.setPadding(C),this.$markerBack.setPadding(C),this.$loop.schedule(this.CHANGE_FULL),this.$updatePrintMargin()},this.setScrollMargin=function(C,R,g,w){var $=this.scrollMargin;$.top=C|0,$.bottom=R|0,$.right=w|0,$.left=g|0,$.v=$.top+$.bottom,$.h=$.left+$.right,$.top&&this.scrollTop<=0&&this.session&&this.session.setScrollTop(-$.top),this.updateFull()},this.setMargin=function(C,R,g,w){var $=this.margin;$.top=C|0,$.bottom=R|0,$.right=w|0,$.left=g|0,$.v=$.top+$.bottom,$.h=$.left+$.right,this.$updateCachedSize(!0,this.gutterWidth,this.$size.width,this.$size.height),this.updateFull()},this.getHScrollBarAlwaysVisible=function(){return this.$hScrollBarAlwaysVisible},this.setHScrollBarAlwaysVisible=function(C){this.setOption("hScrollBarAlwaysVisible",C)},this.getVScrollBarAlwaysVisible=function(){return this.$vScrollBarAlwaysVisible},this.setVScrollBarAlwaysVisible=function(C){this.setOption("vScrollBarAlwaysVisible",C)},this.$updateScrollBarV=function(){var C=this.layerConfig.maxHeight,R=this.$size.scrollerHeight;!this.$maxLines&&this.$scrollPastEnd&&(C-=(R-this.lineHeight)*this.$scrollPastEnd,this.scrollTop>C-R&&(C=this.scrollTop+R,this.scrollBarV.scrollTop=null)),this.scrollBarV.setScrollHeight(C+this.scrollMargin.v),this.scrollBarV.setScrollTop(this.scrollTop+this.scrollMargin.top)},this.$updateScrollBarH=function(){this.scrollBarH.setScrollWidth(this.layerConfig.width+2*this.$padding+this.scrollMargin.h),this.scrollBarH.setScrollLeft(this.scrollLeft+this.scrollMargin.left)},this.$frozen=!1,this.freeze=function(){this.$frozen=!0},this.unfreeze=function(){this.$frozen=!1},this.$renderChanges=function(C,R){if(this.$changes&&(C|=this.$changes,this.$changes=0),!this.session||!this.container.offsetWidth||this.$frozen||!C&&!R){this.$changes|=C;return}if(this.$size.$dirty)return this.$changes|=C,this.onResize(!0);this.lineHeight||this.$textLayer.checkForSizeChanges(),this._signal("beforeRender",C),this.session&&this.session.$bidiHandler&&this.session.$bidiHandler.updateCharacterWidths(this.$fontMetrics);var g=this.layerConfig;if(C&this.CHANGE_FULL||C&this.CHANGE_SIZE||C&this.CHANGE_TEXT||C&this.CHANGE_LINES||C&this.CHANGE_SCROLL||C&this.CHANGE_H_SCROLL){if(C|=this.$computeLayerConfig()|this.$loop.clear(),g.firstRow!=this.layerConfig.firstRow&&g.firstRowScreen==this.layerConfig.firstRowScreen){var w=this.scrollTop+(g.firstRow-this.layerConfig.firstRow)*this.lineHeight;w>0&&(this.scrollTop=w,C=C|this.CHANGE_SCROLL,C|=this.$computeLayerConfig()|this.$loop.clear())}g=this.layerConfig,this.$updateScrollBarV(),C&this.CHANGE_H_SCROLL&&this.$updateScrollBarH(),p.translate(this.content,-this.scrollLeft,-g.offset);var $=g.width+2*this.$padding+"px",L=g.minHeight+"px";p.setStyle(this.content.style,"width",$),p.setStyle(this.content.style,"height",L)}if(C&this.CHANGE_H_SCROLL&&(p.translate(this.content,-this.scrollLeft,-g.offset),this.scroller.className=this.scrollLeft<=0?"ace_scroller":"ace_scroller ace_scroll-left"),C&this.CHANGE_FULL){this.$changedLines=null,this.$textLayer.update(g),this.$showGutter&&this.$gutterLayer.update(g),this.$customScrollbar&&this.$scrollDecorator.$updateDecorators(g),this.$markerBack.update(g),this.$markerFront.update(g),this.$cursorLayer.update(g),this.$moveTextAreaToCursor(),this._signal("afterRender",C);return}if(C&this.CHANGE_SCROLL){this.$changedLines=null,C&this.CHANGE_TEXT||C&this.CHANGE_LINES?this.$textLayer.update(g):this.$textLayer.scrollLines(g),this.$showGutter&&(C&this.CHANGE_GUTTER||C&this.CHANGE_LINES?this.$gutterLayer.update(g):this.$gutterLayer.scrollLines(g)),this.$customScrollbar&&this.$scrollDecorator.$updateDecorators(g),this.$markerBack.update(g),this.$markerFront.update(g),this.$cursorLayer.update(g),this.$moveTextAreaToCursor(),this._signal("afterRender",C);return}C&this.CHANGE_TEXT?(this.$changedLines=null,this.$textLayer.update(g),this.$showGutter&&this.$gutterLayer.update(g),this.$customScrollbar&&this.$scrollDecorator.$updateDecorators(g)):C&this.CHANGE_LINES?((this.$updateLines()||C&this.CHANGE_GUTTER&&this.$showGutter)&&this.$gutterLayer.update(g),this.$customScrollbar&&this.$scrollDecorator.$updateDecorators(g)):C&this.CHANGE_TEXT||C&this.CHANGE_GUTTER?(this.$showGutter&&this.$gutterLayer.update(g),this.$customScrollbar&&this.$scrollDecorator.$updateDecorators(g)):C&this.CHANGE_CURSOR&&(this.$highlightGutterLine&&this.$gutterLayer.updateLineHighlight(g),this.$customScrollbar&&this.$scrollDecorator.$updateDecorators(g)),C&this.CHANGE_CURSOR&&(this.$cursorLayer.update(g),this.$moveTextAreaToCursor()),C&(this.CHANGE_MARKER|this.CHANGE_MARKER_FRONT)&&this.$markerFront.update(g),C&(this.CHANGE_MARKER|this.CHANGE_MARKER_BACK)&&this.$markerBack.update(g),this._signal("afterRender",C)},this.$autosize=function(){var C=this.session.getScreenLength()*this.lineHeight,R=this.$maxLines*this.lineHeight,g=Math.min(R,Math.max((this.$minLines||1)*this.lineHeight,C))+this.scrollMargin.v+(this.$extraHeight||0);this.$horizScroll&&(g+=this.scrollBarH.getHeight()),this.$maxPixelHeight&&g>this.$maxPixelHeight&&(g=this.$maxPixelHeight);var w=g<=2*this.lineHeight,$=!w&&C>R;if(g!=this.desiredHeight||this.$size.height!=this.desiredHeight||$!=this.$vScroll){$!=this.$vScroll&&(this.$vScroll=$,this.scrollBarV.setVisible($));var L=this.container.clientWidth;this.container.style.height=g+"px",this.$updateCachedSize(!0,this.$gutterWidth,L,g),this.desiredHeight=g,this._signal("autosize")}},this.$computeLayerConfig=function(){var C=this.session,R=this.$size,g=R.height<=2*this.lineHeight,w=this.session.getScreenLength(),$=w*this.lineHeight,L=this.$getLongestLine(),M=!g&&(this.$hScrollBarAlwaysVisible||R.scrollerWidth-L-2*this.$padding<0),O=this.$horizScroll!==M;O&&(this.$horizScroll=M,this.scrollBarH.setVisible(M));var I=this.$vScroll;this.$maxLines&&this.lineHeight>1&&this.$autosize();var B=R.scrollerHeight+this.lineHeight,H=!this.$maxLines&&this.$scrollPastEnd?(R.scrollerHeight-this.lineHeight)*this.$scrollPastEnd:0;$+=H;var K=this.scrollMargin;this.session.setScrollTop(Math.max(-K.top,Math.min(this.scrollTop,$-R.scrollerHeight+K.bottom))),this.session.setScrollLeft(Math.max(-K.left,Math.min(this.scrollLeft,L+2*this.$padding-R.scrollerWidth+K.right)));var j=!g&&(this.$vScrollBarAlwaysVisible||R.scrollerHeight-$+H<0||this.scrollTop>K.top),Y=I!==j;Y&&(this.$vScroll=j,this.scrollBarV.setVisible(j));var Q=this.scrollTop%this.lineHeight,z=Math.ceil(B/this.lineHeight)-1,V=Math.max(0,Math.round((this.scrollTop-Q)/this.lineHeight)),X=V+z,ie,se,ee=this.lineHeight;V=C.screenToDocumentRow(V,0);var re=C.getFoldLine(V);re&&(V=re.start.row),ie=C.documentToScreenRow(V,0),se=C.getRowLength(V)*ee,X=Math.min(C.screenToDocumentRow(X,0),C.getLength()-1),B=R.scrollerHeight+C.getRowLength(X)*ee+se,Q=this.scrollTop-ie*ee;var ae=0;return(this.layerConfig.width!=L||O)&&(ae=this.CHANGE_H_SCROLL),(O||Y)&&(ae|=this.$updateCachedSize(!0,this.gutterWidth,R.width,R.height),this._signal("scrollbarVisibilityChanged"),Y&&(L=this.$getLongestLine())),this.layerConfig={width:L,padding:this.$padding,firstRow:V,firstRowScreen:ie,lastRow:X,lineHeight:ee,characterWidth:this.characterWidth,minHeight:B,maxHeight:$,offset:Q,gutterOffset:ee?Math.max(0,Math.ceil((Q+R.height-R.scrollerHeight)/ee)):0,height:this.$size.scrollerHeight},this.session.$bidiHandler&&this.session.$bidiHandler.setContentWidth(L-this.$padding),ae},this.$updateLines=function(){if(this.$changedLines){var C=this.$changedLines.firstRow,R=this.$changedLines.lastRow;this.$changedLines=null;var g=this.layerConfig;if(!(C>g.lastRow+1)&&!(R<g.firstRow)){if(R===1/0){this.$showGutter&&this.$gutterLayer.update(g),this.$textLayer.update(g);return}return this.$textLayer.updateLines(g,C,R),!0}}},this.$getLongestLine=function(){var C=this.session.getScreenWidth();return this.showInvisibles&&!this.session.$useWrapMode&&(C+=1),this.$textLayer&&C>this.$textLayer.MAX_LINE_LENGTH&&(C=this.$textLayer.MAX_LINE_LENGTH+30),Math.max(this.$size.scrollerWidth-2*this.$padding,Math.round(C*this.characterWidth))},this.updateFrontMarkers=function(){this.$markerFront.setMarkers(this.session.getMarkers(!0)),this.$loop.schedule(this.CHANGE_MARKER_FRONT)},this.updateBackMarkers=function(){this.$markerBack.setMarkers(this.session.getMarkers()),this.$loop.schedule(this.CHANGE_MARKER_BACK)},this.addGutterDecoration=function(C,R){this.$gutterLayer.addGutterDecoration(C,R)},this.removeGutterDecoration=function(C,R){this.$gutterLayer.removeGutterDecoration(C,R)},this.updateBreakpoints=function(C){this.$loop.schedule(this.CHANGE_GUTTER)},this.setAnnotations=function(C){this.$gutterLayer.setAnnotations(C),this.$loop.schedule(this.CHANGE_GUTTER)},this.updateCursor=function(){this.$loop.schedule(this.CHANGE_CURSOR)},this.hideCursor=function(){this.$cursorLayer.hideCursor()},this.showCursor=function(){this.$cursorLayer.showCursor()},this.scrollSelectionIntoView=function(C,R,g){this.scrollCursorIntoView(C,g),this.scrollCursorIntoView(R,g)},this.scrollCursorIntoView=function(C,R,g){if(this.$size.scrollerHeight!==0){var w=this.$cursorLayer.getPixelPosition(C),$=w.left,L=w.top,M=g&&g.top||0,O=g&&g.bottom||0;this.$scrollAnimation&&(this.$stopAnimation=!0);var I=this.$scrollAnimation?this.session.getScrollTop():this.scrollTop;I+M>L?(R&&I+M>L+this.lineHeight&&(L-=R*this.$size.scrollerHeight),L===0&&(L=-this.scrollMargin.top),this.session.setScrollTop(L)):I+this.$size.scrollerHeight-O<L+this.lineHeight&&(R&&I+this.$size.scrollerHeight-O<L-this.lineHeight&&(L+=R*this.$size.scrollerHeight),this.session.setScrollTop(L+this.lineHeight+O-this.$size.scrollerHeight));var B=this.scrollLeft,H=2*this.layerConfig.characterWidth;$-H<B?($-=H,$<this.$padding+H&&($=-this.scrollMargin.left),this.session.setScrollLeft($)):($+=H,B+this.$size.scrollerWidth<$+this.characterWidth?this.session.setScrollLeft(Math.round($+this.characterWidth-this.$size.scrollerWidth)):B<=this.$padding&&$-B<this.characterWidth&&this.session.setScrollLeft(0))}},this.getScrollTop=function(){return this.session.getScrollTop()},this.getScrollLeft=function(){return this.session.getScrollLeft()},this.getScrollTopRow=function(){return this.scrollTop/this.lineHeight},this.getScrollBottomRow=function(){return Math.max(0,Math.floor((this.scrollTop+this.$size.scrollerHeight)/this.lineHeight)-1)},this.scrollToRow=function(C){this.session.setScrollTop(C*this.lineHeight)},this.alignCursor=function(C,R){typeof C=="number"&&(C={row:C,column:0});var g=this.$cursorLayer.getPixelPosition(C),w=this.$size.scrollerHeight-this.lineHeight,$=g.top-w*(R||0);return this.session.setScrollTop($),$},this.STEPS=8,this.$calcSteps=function(C,R){var g=0,w=this.STEPS,$=[],L=function(M,O,I){return I*(Math.pow(M-1,3)+1)+O};for(g=0;g<w;++g)$.push(L(g/this.STEPS,C,R-C));return $},this.scrollToLine=function(C,R,g,w){var $=this.$cursorLayer.getPixelPosition({row:C,column:0}),L=$.top;R&&(L-=this.$size.scrollerHeight/2);var M=this.scrollTop;this.session.setScrollTop(L),g!==!1&&this.animateScrolling(M,w)},this.animateScrolling=function(C,R){var g=this.scrollTop;if(!this.$animatedScroll)return;var w=this;if(C==g)return;if(this.$scrollAnimation){var $=this.$scrollAnimation.steps;if($.length&&(C=$[0],C==g))return}var L=w.$calcSteps(C,g);this.$scrollAnimation={from:C,to:g,steps:L},clearInterval(this.$timer),w.session.setScrollTop(L.shift()),w.session.$scrollTop=g;function M(){w.$timer=clearInterval(w.$timer),w.$scrollAnimation=null,w.$stopAnimation=!1,R&&R()}this.$timer=setInterval(function(){if(w.$stopAnimation){M();return}if(!w.session)return clearInterval(w.$timer);L.length?(w.session.setScrollTop(L.shift()),w.session.$scrollTop=g):g!=null?(w.session.$scrollTop=-1,w.session.setScrollTop(g),g=null):M()},10)},this.scrollToY=function(C){this.scrollTop!==C&&(this.$loop.schedule(this.CHANGE_SCROLL),this.scrollTop=C)},this.scrollToX=function(C){this.scrollLeft!==C&&(this.scrollLeft=C),this.$loop.schedule(this.CHANGE_H_SCROLL)},this.scrollTo=function(C,R){this.session.setScrollTop(R),this.session.setScrollLeft(C)},this.scrollBy=function(C,R){R&&this.session.setScrollTop(this.session.getScrollTop()+R),C&&this.session.setScrollLeft(this.session.getScrollLeft()+C)},this.isScrollableBy=function(C,R){if(R<0&&this.session.getScrollTop()>=1-this.scrollMargin.top||R>0&&this.session.getScrollTop()+this.$size.scrollerHeight-this.layerConfig.maxHeight<-1+this.scrollMargin.bottom||C<0&&this.session.getScrollLeft()>=1-this.scrollMargin.left||C>0&&this.session.getScrollLeft()+this.$size.scrollerWidth-this.layerConfig.width<-1+this.scrollMargin.right)return!0},this.pixelToScreenCoordinates=function(C,R){var g;if(this.$hasCssTransforms){g={top:0,left:0};var w=this.$fontMetrics.transformCoordinates([C,R]);C=w[1]-this.gutterWidth-this.margin.left,R=w[0]}else g=this.scroller.getBoundingClientRect();var $=C+this.scrollLeft-g.left-this.$padding,L=$/this.characterWidth,M=Math.floor((R+this.scrollTop-g.top)/this.lineHeight),O=this.$blockCursor?Math.floor(L):Math.round(L);return{row:M,column:O,side:L-O>0?1:-1,offsetX:$}},this.screenToTextCoordinates=function(C,R){var g;if(this.$hasCssTransforms){g={top:0,left:0};var w=this.$fontMetrics.transformCoordinates([C,R]);C=w[1]-this.gutterWidth-this.margin.left,R=w[0]}else g=this.scroller.getBoundingClientRect();var $=C+this.scrollLeft-g.left-this.$padding,L=$/this.characterWidth,M=this.$blockCursor?Math.floor(L):Math.round(L),O=Math.floor((R+this.scrollTop-g.top)/this.lineHeight);return this.session.screenToDocumentPosition(O,Math.max(M,0),$)},this.textToScreenCoordinates=function(C,R){var g=this.scroller.getBoundingClientRect(),w=this.session.documentToScreenPosition(C,R),$=this.$padding+(this.session.$bidiHandler.isBidiRow(w.row,C)?this.session.$bidiHandler.getPosLeft(w.column):Math.round(w.column*this.characterWidth)),L=w.row*this.lineHeight;return{pageX:g.left+$-this.scrollLeft,pageY:g.top+L-this.scrollTop}},this.visualizeFocus=function(){p.addCssClass(this.container,"ace_focus")},this.visualizeBlur=function(){p.removeCssClass(this.container,"ace_focus")},this.showComposition=function(C){this.$composition=C,C.cssText||(C.cssText=this.textarea.style.cssText),C.useTextareaForIME==null&&(C.useTextareaForIME=this.$useTextareaForIME),this.$useTextareaForIME?(p.addCssClass(this.textarea,"ace_composition"),this.textarea.style.cssText="",this.$moveTextAreaToCursor(),this.$cursorLayer.element.style.display="none"):C.markerId=this.session.addMarker(C.markerRange,"ace_composition_marker","text")},this.setCompositionText=function(C){var R=this.session.selection.cursor;this.addToken(C,"composition_placeholder",R.row,R.column),this.$moveTextAreaToCursor()},this.hideComposition=function(){if(this.$composition){this.$composition.markerId&&this.session.removeMarker(this.$composition.markerId),p.removeCssClass(this.textarea,"ace_composition"),this.textarea.style.cssText=this.$composition.cssText;var C=this.session.selection.cursor;this.removeExtraToken(C.row,C.column),this.$composition=null,this.$cursorLayer.element.style.display=""}},this.setGhostText=function(C,R){var g=this.session.selection.cursor,w=R||{row:g.row,column:g.column};this.removeGhostText();var $=C.split(`
`);this.addToken($[0],"ghost_text",w.row,w.column),this.$ghostText={text:C,position:{row:w.row,column:w.column}},$.length>1&&(this.$ghostTextWidget={text:$.slice(1).join(`
`),row:w.row,column:w.column,className:"ace_ghost_text"},this.session.widgetManager.addLineWidget(this.$ghostTextWidget))},this.removeGhostText=function(){if(this.$ghostText){var C=this.$ghostText.position;this.removeExtraToken(C.row,C.column),this.$ghostTextWidget&&(this.session.widgetManager.removeLineWidget(this.$ghostTextWidget),this.$ghostTextWidget=null),this.$ghostText=null}},this.addToken=function(C,R,g,w){var $=this.session;$.bgTokenizer.lines[g]=null;var L={type:R,value:C},M=$.getTokens(g);if(w==null)M.push(L);else for(var O=0,I=0;I<M.length;I++){var B=M[I];if(O+=B.value.length,w<=O){var H=B.value.length-(O-w),K=B.value.slice(0,H),j=B.value.slice(H);M.splice(I,1,{type:B.type,value:K},L,{type:B.type,value:j});break}}this.updateLines(g,g)},this.removeExtraToken=function(C,R){this.updateLines(C,C)},this.setTheme=function(C,R){var g=this;if(this.$themeId=C,g._dispatchEvent("themeChange",{theme:C}),!C||typeof C=="string"){var w=C||this.$options.theme.initialValue;u.loadModule(["theme",w],$)}else $(C);function $(L){if(g.$themeId!=C)return R&&R();if(!L||!L.cssClass)throw new Error("couldn't load module "+C+" or it didn't call define");L.$id&&(g.$themeId=L.$id),p.importCssString(L.cssText,L.cssClass,g.container),g.theme&&p.removeCssClass(g.container,g.theme.cssClass);var M="padding"in L?L.padding:"padding"in(g.theme||{})?4:g.$padding;g.$padding&&M!=g.$padding&&g.setPadding(M),g.$theme=L.cssClass,g.theme=L,p.addCssClass(g.container,L.cssClass),p.setCssClass(g.container,"ace_dark",L.isDark),g.$size&&(g.$size.width=0,g.$updateSizeAsync()),g._dispatchEvent("themeLoaded",{theme:L}),R&&R()}},this.getTheme=function(){return this.$themeId},this.setStyle=function(C,R){p.setCssClass(this.container,C,R!==!1)},this.unsetStyle=function(C){p.removeCssClass(this.container,C)},this.setCursorStyle=function(C){p.setStyle(this.scroller.style,"cursor",C)},this.setMouseCursor=function(C){p.setStyle(this.scroller.style,"cursor",C)},this.attachToShadowRoot=function(){p.importCssString(T,"ace_editor.css",this.container)},this.destroy=function(){this.freeze(),this.$fontMetrics.destroy(),this.$cursorLayer.destroy(),this.removeAllListeners(),this.container.textContent=""},this.$updateCustomScrollbar=function(C){var R=this;this.$horizScroll=this.$vScroll=null,this.scrollBarV.element.remove(),this.scrollBarH.element.remove(),this.$scrollDecorator&&delete this.$scrollDecorator,C===!0?(this.scrollBarV=new v(this.container,this),this.scrollBarH=new d(this.container,this),this.scrollBarV.setHeight(this.$size.scrollerHeight),this.scrollBarH.setWidth(this.$size.scrollerWidth),this.scrollBarV.addEventListener("scroll",function(g){R.$scrollAnimation||R.session.setScrollTop(g.data-R.scrollMargin.top)}),this.scrollBarH.addEventListener("scroll",function(g){R.$scrollAnimation||R.session.setScrollLeft(g.data-R.scrollMargin.left)}),this.$scrollDecorator=new k(this.scrollBarV,this),this.$scrollDecorator.$updateDecorators()):(this.scrollBarV=new l(this.container,this),this.scrollBarH=new o(this.container,this),this.scrollBarV.addEventListener("scroll",function(g){R.$scrollAnimation||R.session.setScrollTop(g.data-R.scrollMargin.top)}),this.scrollBarH.addEventListener("scroll",function(g){R.$scrollAnimation||R.session.setScrollLeft(g.data-R.scrollMargin.left)}))}}).call(A.prototype),u.defineOptions(A.prototype,"renderer",{animatedScroll:{initialValue:!1},showInvisibles:{set:function(C){this.$textLayer.setShowInvisibles(C)&&this.$loop.schedule(this.CHANGE_TEXT)},initialValue:!1},showPrintMargin:{set:function(){this.$updatePrintMargin()},initialValue:!0},printMarginColumn:{set:function(){this.$updatePrintMargin()},initialValue:80},printMargin:{set:function(C){typeof C=="number"&&(this.$printMarginColumn=C),this.$showPrintMargin=!!C,this.$updatePrintMargin()},get:function(){return this.$showPrintMargin&&this.$printMarginColumn}},showGutter:{set:function(C){this.$gutter.style.display=C?"block":"none",this.$loop.schedule(this.CHANGE_FULL),this.onGutterResize()},initialValue:!0},fadeFoldWidgets:{set:function(C){p.setCssClass(this.$gutter,"ace_fade-fold-widgets",C)},initialValue:!1},showFoldWidgets:{set:function(C){this.$gutterLayer.setShowFoldWidgets(C),this.$loop.schedule(this.CHANGE_GUTTER)},initialValue:!0},displayIndentGuides:{set:function(C){this.$textLayer.setDisplayIndentGuides(C)&&this.$loop.schedule(this.CHANGE_TEXT)},initialValue:!0},highlightIndentGuides:{set:function(C){this.$textLayer.setHighlightIndentGuides(C)==!0?this.$textLayer.$highlightIndentGuide():this.$textLayer.$clearActiveIndentGuide(this.$textLayer.$lines.cells)},initialValue:!0},highlightGutterLine:{set:function(C){this.$gutterLayer.setHighlightGutterLine(C),this.$loop.schedule(this.CHANGE_GUTTER)},initialValue:!0},hScrollBarAlwaysVisible:{set:function(C){(!this.$hScrollBarAlwaysVisible||!this.$horizScroll)&&this.$loop.schedule(this.CHANGE_SCROLL)},initialValue:!1},vScrollBarAlwaysVisible:{set:function(C){(!this.$vScrollBarAlwaysVisible||!this.$vScroll)&&this.$loop.schedule(this.CHANGE_SCROLL)},initialValue:!1},fontSize:{set:function(C){typeof C=="number"&&(C=C+"px"),this.container.style.fontSize=C,this.updateFontSize()},initialValue:12},fontFamily:{set:function(C){this.container.style.fontFamily=C,this.updateFontSize()}},maxLines:{set:function(C){this.updateFull()}},minLines:{set:function(C){this.$minLines<562949953421311||(this.$minLines=0),this.updateFull()}},maxPixelHeight:{set:function(C){this.updateFull()},initialValue:0},scrollPastEnd:{set:function(C){C=+C||0,this.$scrollPastEnd!=C&&(this.$scrollPastEnd=C,this.$loop.schedule(this.CHANGE_SCROLL))},initialValue:0,handlesSet:!0},fixedWidthGutter:{set:function(C){this.$gutterLayer.$fixedWidth=!!C,this.$loop.schedule(this.CHANGE_GUTTER)}},customScrollbar:{set:function(C){this.$updateCustomScrollbar(C)},initialValue:!1},theme:{set:function(C){this.setTheme(C)},get:function(){return this.$themeId||this.theme},initialValue:"./theme/textmate",handlesSet:!0},hasCssTransforms:{},useTextareaForIME:{initialValue:!b.isMobile&&!b.isIE}}),a.VirtualRenderer=A}),ace.define("ace/worker/worker_client",["require","exports","module","ace/lib/oop","ace/lib/net","ace/lib/event_emitter","ace/config"],function(e,a,m){var h=e("../lib/oop"),p=e("../lib/net"),u=e("../lib/event_emitter").EventEmitter,c=e("../config");function f(l){var d="importScripts('"+p.qualifyURL(l)+"');";try{return new Blob([d],{type:"application/javascript"})}catch{var v=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder,y=new v;return y.append(d),y.getBlob("application/javascript")}}function n(l){if(typeof Worker>"u")return{postMessage:function(){},terminate:function(){}};if(c.get("loadWorkerFromBlob")){var d=f(l),v=window.URL||window.webkitURL,y=v.createObjectURL(d);return new Worker(y)}return new Worker(l)}var t=function(l){l.postMessage||(l=this.$createWorkerFromOldConfig.apply(this,arguments)),this.$worker=l,this.$sendDeltaQueue=this.$sendDeltaQueue.bind(this),this.changeListener=this.changeListener.bind(this),this.onMessage=this.onMessage.bind(this),this.callbackId=1,this.callbacks={},this.$worker.onmessage=this.onMessage};(function(){h.implement(this,u),this.$createWorkerFromOldConfig=function(l,d,v,y,x){if(e.nameToUrl&&!e.toUrl&&(e.toUrl=e.nameToUrl),c.get("packaged")||!e.toUrl)y=y||c.moduleUrl(d,"worker");else{var E=this.$normalizePath;y=y||E(e.toUrl("ace/worker/worker.js",null,"_"));var T={};l.forEach(function(k){T[k]=E(e.toUrl(k,null,"_").replace(/(\.js)?(\?.*)?$/,""))})}return this.$worker=n(y),x&&this.send("importScripts",x),this.$worker.postMessage({init:!0,tlns:T,module:d,classname:v}),this.$worker},this.onMessage=function(l){var d=l.data;switch(d.type){case"event":this._signal(d.name,{data:d.data});break;case"call":var v=this.callbacks[d.id];v&&(v(d.data),delete this.callbacks[d.id]);break;case"error":this.reportError(d.data);break;case"log":window.console&&console.log&&console.log.apply(console,d.data);break}},this.reportError=function(l){window.console&&console.error&&console.error(l)},this.$normalizePath=function(l){return p.qualifyURL(l)},this.terminate=function(){this._signal("terminate",{}),this.deltaQueue=null,this.$worker.terminate(),this.$worker=null,this.$doc&&this.$doc.off("change",this.changeListener),this.$doc=null},this.send=function(l,d){this.$worker.postMessage({command:l,args:d})},this.call=function(l,d,v){if(v){var y=this.callbackId++;this.callbacks[y]=v,d.push(y)}this.send(l,d)},this.emit=function(l,d){try{d.data&&d.data.err&&(d.data.err={message:d.data.err.message,stack:d.data.err.stack,code:d.data.err.code}),this.$worker&&this.$worker.postMessage({event:l,data:{data:d.data}})}catch(v){console.error(v.stack)}},this.attachToDocument=function(l){this.$doc&&this.terminate(),this.$doc=l,this.call("setValue",[l.getValue()]),l.on("change",this.changeListener,!0)},this.changeListener=function(l){this.deltaQueue||(this.deltaQueue=[],setTimeout(this.$sendDeltaQueue,0)),l.action=="insert"?this.deltaQueue.push(l.start,l.lines):this.deltaQueue.push(l.start,l.end)},this.$sendDeltaQueue=function(){var l=this.deltaQueue;l&&(this.deltaQueue=null,l.length>50&&l.length>this.$doc.getLength()>>1?this.call("setValue",[this.$doc.getValue()]):this.emit("change",{data:l}))}}).call(t.prototype);var o=function(l,d,v){var y=null,x=!1,E=Object.create(u),T=[],k=new t({messageBuffer:T,terminate:function(){},postMessage:function(S){T.push(S),y&&(x?setTimeout(b):b())}});k.setEmitSync=function(S){x=S};var b=function(){var S=T.shift();S.command?y[S.command].apply(y,S.args):S.event&&E._signal(S.event,S.data)};return E.postMessage=function(S){k.onMessage({data:S})},E.callback=function(S,A){this.postMessage({type:"call",id:A,data:S})},E.emit=function(S,A){this.postMessage({type:"event",name:S,data:A})},c.loadModule(["worker",d],function(S){for(y=new S[v](E);T.length;)b()}),k};a.UIWorkerClient=o,a.WorkerClient=t,a.createWorker=n}),ace.define("ace/placeholder",["require","exports","module","ace/range","ace/lib/event_emitter","ace/lib/oop"],function(e,a,m){var h=e("./range").Range,p=e("./lib/event_emitter").EventEmitter,u=e("./lib/oop"),c=function(f,n,t,o,l,d){var v=this;this.length=n,this.session=f,this.doc=f.getDocument(),this.mainClass=l,this.othersClass=d,this.$onUpdate=this.onUpdate.bind(this),this.doc.on("change",this.$onUpdate,!0),this.$others=o,this.$onCursorChange=function(){setTimeout(function(){v.onCursorChange()})},this.$pos=t;var y=f.getUndoManager().$undoStack||f.getUndoManager().$undostack||{length:-1};this.$undoStackDepth=y.length,this.setup(),f.selection.on("changeCursor",this.$onCursorChange)};(function(){u.implement(this,p),this.setup=function(){var f=this,n=this.doc,t=this.session;this.selectionBefore=t.selection.toJSON(),t.selection.inMultiSelectMode&&t.selection.toSingleRange(),this.pos=n.createAnchor(this.$pos.row,this.$pos.column);var o=this.pos;o.$insertRight=!0,o.detach(),o.markerId=t.addMarker(new h(o.row,o.column,o.row,o.column+this.length),this.mainClass,null,!1),this.others=[],this.$others.forEach(function(l){var d=n.createAnchor(l.row,l.column);d.$insertRight=!0,d.detach(),f.others.push(d)}),t.setUndoSelect(!1)},this.showOtherMarkers=function(){if(!this.othersActive){var f=this.session,n=this;this.othersActive=!0,this.others.forEach(function(t){t.markerId=f.addMarker(new h(t.row,t.column,t.row,t.column+n.length),n.othersClass,null,!1)})}},this.hideOtherMarkers=function(){if(this.othersActive){this.othersActive=!1;for(var f=0;f<this.others.length;f++)this.session.removeMarker(this.others[f].markerId)}},this.onUpdate=function(f){if(this.$updating)return this.updateAnchors(f);var n=f;if(n.start.row===n.end.row&&n.start.row===this.pos.row){this.$updating=!0;var t=f.action==="insert"?n.end.column-n.start.column:n.start.column-n.end.column,o=n.start.column>=this.pos.column&&n.start.column<=this.pos.column+this.length+1,l=n.start.column-this.pos.column;if(this.updateAnchors(f),o&&(this.length+=t),o&&!this.session.$fromUndo){if(f.action==="insert")for(var d=this.others.length-1;d>=0;d--){var v=this.others[d],y={row:v.row,column:v.column+l};this.doc.insertMergedLines(y,f.lines)}else if(f.action==="remove")for(var d=this.others.length-1;d>=0;d--){var v=this.others[d],y={row:v.row,column:v.column+l};this.doc.remove(new h(y.row,y.column,y.row,y.column-t))}}this.$updating=!1,this.updateMarkers()}},this.updateAnchors=function(f){this.pos.onChange(f);for(var n=this.others.length;n--;)this.others[n].onChange(f);this.updateMarkers()},this.updateMarkers=function(){if(!this.$updating){var f=this,n=this.session,t=function(l,d){n.removeMarker(l.markerId),l.markerId=n.addMarker(new h(l.row,l.column,l.row,l.column+f.length),d,null,!1)};t(this.pos,this.mainClass);for(var o=this.others.length;o--;)t(this.others[o],this.othersClass)}},this.onCursorChange=function(f){if(!(this.$updating||!this.session)){var n=this.session.selection.getCursor();n.row===this.pos.row&&n.column>=this.pos.column&&n.column<=this.pos.column+this.length?(this.showOtherMarkers(),this._emit("cursorEnter",f)):(this.hideOtherMarkers(),this._emit("cursorLeave",f))}},this.detach=function(){this.session.removeMarker(this.pos&&this.pos.markerId),this.hideOtherMarkers(),this.doc.off("change",this.$onUpdate),this.session.selection.off("changeCursor",this.$onCursorChange),this.session.setUndoSelect(!0),this.session=null},this.cancel=function(){if(this.$undoStackDepth!==-1){for(var f=this.session.getUndoManager(),n=(f.$undoStack||f.$undostack).length-this.$undoStackDepth,t=0;t<n;t++)f.undo(this.session,!0);this.selectionBefore&&this.session.selection.fromJSON(this.selectionBefore)}}}).call(c.prototype),a.PlaceHolder=c}),ace.define("ace/mouse/multi_select_handler",["require","exports","module","ace/lib/event","ace/lib/useragent"],function(e,a,m){var h=e("../lib/event"),p=e("../lib/useragent");function u(f,n){return f.row==n.row&&f.column==n.column}function c(f){var n=f.domEvent,t=n.altKey,o=n.shiftKey,l=n.ctrlKey,d=f.getAccelKey(),v=f.getButton();if(l&&p.isMac&&(v=n.button),f.editor.inMultiSelectMode&&v==2){f.editor.textInput.onContextMenu(f.domEvent);return}if(!l&&!t&&!d){v===0&&f.editor.inMultiSelectMode&&f.editor.exitMultiSelectMode();return}if(v===0){var y=f.editor,x=y.selection,E=y.inMultiSelectMode,T=f.getDocumentPosition(),k=x.getCursor(),b=f.inSelection()||x.isEmpty()&&u(T,k),S=f.x,A=f.y,C=function(Y){S=Y.clientX,A=Y.clientY},R=y.session,g=y.renderer.pixelToScreenCoordinates(S,A),w=g,$;if(y.$mouseHandler.$enableJumpToDef)l&&t||d&&t?$=o?"block":"add":t&&y.$blockSelectEnabled&&($="block");else if(d&&!t){if($="add",!E&&o)return}else t&&y.$blockSelectEnabled&&($="block");if($&&p.isMac&&n.ctrlKey&&y.$mouseHandler.cancelContextMenu(),$=="add"){if(!E&&b)return;if(!E){var L=x.toOrientedRange();y.addSelectionMarker(L)}var M=x.rangeList.rangeAtPoint(T);y.inVirtualSelectionMode=!0,o&&(M=null,L=x.ranges[0]||L,y.removeSelectionMarker(L)),y.once("mouseup",function(){var Y=x.toOrientedRange();M&&Y.isEmpty()&&u(M.cursor,Y.cursor)?x.substractPoint(Y.cursor):(o?x.substractPoint(L.cursor):L&&(y.removeSelectionMarker(L),x.addRange(L)),x.addRange(Y)),y.inVirtualSelectionMode=!1})}else if($=="block"){f.stop(),y.inVirtualSelectionMode=!0;var O,I=[],B=function(){var Y=y.renderer.pixelToScreenCoordinates(S,A),Q=R.screenToDocumentPosition(Y.row,Y.column,Y.offsetX);u(w,Y)&&u(Q,x.lead)||(w=Y,y.selection.moveToPosition(Q),y.renderer.scrollCursorIntoView(),y.removeSelectionMarkers(I),I=x.rectangularRangeBlock(w,g),y.$mouseHandler.$clickSelection&&I.length==1&&I[0].isEmpty()&&(I[0]=y.$mouseHandler.$clickSelection.clone()),I.forEach(y.addSelectionMarker,y),y.updateSelectionMarkers())};E&&!d?x.toSingleRange():!E&&d&&(O=x.toOrientedRange(),y.addSelectionMarker(O)),o?g=R.documentToScreenPosition(x.lead):x.moveToPosition(T),w={row:-1,column:-1};var H=function(Y){B(),clearInterval(j),y.removeSelectionMarkers(I),I.length||(I=[x.toOrientedRange()]),O&&(y.removeSelectionMarker(O),x.toSingleRange(O));for(var Q=0;Q<I.length;Q++)x.addRange(I[Q]);y.inVirtualSelectionMode=!1,y.$mouseHandler.$clickSelection=null},K=B;h.capture(y.container,C,H);var j=setInterval(function(){K()},20);return f.preventDefault()}}}a.onMouseDown=c}),ace.define("ace/commands/multi_select_commands",["require","exports","module","ace/keyboard/hash_handler"],function(e,a,m){a.defaultCommands=[{name:"addCursorAbove",description:"Add cursor above",exec:function(p){p.selectMoreLines(-1)},bindKey:{win:"Ctrl-Alt-Up",mac:"Ctrl-Alt-Up"},scrollIntoView:"cursor",readOnly:!0},{name:"addCursorBelow",description:"Add cursor below",exec:function(p){p.selectMoreLines(1)},bindKey:{win:"Ctrl-Alt-Down",mac:"Ctrl-Alt-Down"},scrollIntoView:"cursor",readOnly:!0},{name:"addCursorAboveSkipCurrent",description:"Add cursor above (skip current)",exec:function(p){p.selectMoreLines(-1,!0)},bindKey:{win:"Ctrl-Alt-Shift-Up",mac:"Ctrl-Alt-Shift-Up"},scrollIntoView:"cursor",readOnly:!0},{name:"addCursorBelowSkipCurrent",description:"Add cursor below (skip current)",exec:function(p){p.selectMoreLines(1,!0)},bindKey:{win:"Ctrl-Alt-Shift-Down",mac:"Ctrl-Alt-Shift-Down"},scrollIntoView:"cursor",readOnly:!0},{name:"selectMoreBefore",description:"Select more before",exec:function(p){p.selectMore(-1)},bindKey:{win:"Ctrl-Alt-Left",mac:"Ctrl-Alt-Left"},scrollIntoView:"cursor",readOnly:!0},{name:"selectMoreAfter",description:"Select more after",exec:function(p){p.selectMore(1)},bindKey:{win:"Ctrl-Alt-Right",mac:"Ctrl-Alt-Right"},scrollIntoView:"cursor",readOnly:!0},{name:"selectNextBefore",description:"Select next before",exec:function(p){p.selectMore(-1,!0)},bindKey:{win:"Ctrl-Alt-Shift-Left",mac:"Ctrl-Alt-Shift-Left"},scrollIntoView:"cursor",readOnly:!0},{name:"selectNextAfter",description:"Select next after",exec:function(p){p.selectMore(1,!0)},bindKey:{win:"Ctrl-Alt-Shift-Right",mac:"Ctrl-Alt-Shift-Right"},scrollIntoView:"cursor",readOnly:!0},{name:"toggleSplitSelectionIntoLines",description:"Split selection into lines",exec:function(p){p.multiSelect.rangeCount>1?p.multiSelect.joinSelections():p.multiSelect.splitIntoLines()},bindKey:{win:"Ctrl-Alt-L",mac:"Ctrl-Alt-L"},readOnly:!0},{name:"splitSelectionIntoLines",description:"Split into lines",exec:function(p){p.multiSelect.splitIntoLines()},readOnly:!0},{name:"alignCursors",description:"Align cursors",exec:function(p){p.alignCursors()},bindKey:{win:"Ctrl-Alt-A",mac:"Ctrl-Alt-A"},scrollIntoView:"cursor"},{name:"findAll",description:"Find all",exec:function(p){p.findAll()},bindKey:{win:"Ctrl-Alt-K",mac:"Ctrl-Alt-G"},scrollIntoView:"cursor",readOnly:!0}],a.multiSelectCommands=[{name:"singleSelection",description:"Single selection",bindKey:"esc",exec:function(p){p.exitMultiSelectMode()},scrollIntoView:"cursor",readOnly:!0,isAvailable:function(p){return p&&p.inMultiSelectMode}}];var h=e("../keyboard/hash_handler").HashHandler;a.keyboardHandler=new h(a.multiSelectCommands)}),ace.define("ace/multi_select",["require","exports","module","ace/range_list","ace/range","ace/selection","ace/mouse/multi_select_handler","ace/lib/event","ace/lib/lang","ace/commands/multi_select_commands","ace/search","ace/edit_session","ace/editor","ace/config"],function(e,a,m){var h=e("./range_list").RangeList,p=e("./range").Range,u=e("./selection").Selection,c=e("./mouse/multi_select_handler").onMouseDown,f=e("./lib/event"),n=e("./lib/lang"),t=e("./commands/multi_select_commands");a.commands=t.defaultCommands.concat(t.multiSelectCommands);var o=e("./search").Search,l=new o;function d(k,b,S){return l.$options.wrap=!0,l.$options.needle=b,l.$options.backwards=S==-1,l.find(k)}var v=e("./edit_session").EditSession;(function(){this.getSelectionMarkers=function(){return this.$selectionMarkers}}).call(v.prototype),function(){this.ranges=null,this.rangeList=null,this.addRange=function(k,b){if(k){if(!this.inMultiSelectMode&&this.rangeCount===0){var S=this.toOrientedRange();if(this.rangeList.add(S),this.rangeList.add(k),this.rangeList.ranges.length!=2)return this.rangeList.removeAll(),b||this.fromOrientedRange(k);this.rangeList.removeAll(),this.rangeList.add(S),this.$onAddRange(S)}k.cursor||(k.cursor=k.end);var A=this.rangeList.add(k);return this.$onAddRange(k),A.length&&this.$onRemoveRange(A),this.rangeCount>1&&!this.inMultiSelectMode&&(this._signal("multiSelect"),this.inMultiSelectMode=!0,this.session.$undoSelect=!1,this.rangeList.attach(this.session)),b||this.fromOrientedRange(k)}},this.toSingleRange=function(k){k=k||this.ranges[0];var b=this.rangeList.removeAll();b.length&&this.$onRemoveRange(b),k&&this.fromOrientedRange(k)},this.substractPoint=function(k){var b=this.rangeList.substractPoint(k);if(b)return this.$onRemoveRange(b),b[0]},this.mergeOverlappingRanges=function(){var k=this.rangeList.merge();k.length&&this.$onRemoveRange(k)},this.$onAddRange=function(k){this.rangeCount=this.rangeList.ranges.length,this.ranges.unshift(k),this._signal("addRange",{range:k})},this.$onRemoveRange=function(k){if(this.rangeCount=this.rangeList.ranges.length,this.rangeCount==1&&this.inMultiSelectMode){var b=this.rangeList.ranges.pop();k.push(b),this.rangeCount=0}for(var S=k.length;S--;){var A=this.ranges.indexOf(k[S]);this.ranges.splice(A,1)}this._signal("removeRange",{ranges:k}),this.rangeCount===0&&this.inMultiSelectMode&&(this.inMultiSelectMode=!1,this._signal("singleSelect"),this.session.$undoSelect=!0,this.rangeList.detach(this.session)),b=b||this.ranges[0],b&&!b.isEqual(this.getRange())&&this.fromOrientedRange(b)},this.$initRangeList=function(){this.rangeList||(this.rangeList=new h,this.ranges=[],this.rangeCount=0)},this.getAllRanges=function(){return this.rangeCount?this.rangeList.ranges.concat():[this.getRange()]},this.splitIntoLines=function(){for(var k=this.ranges.length?this.ranges:[this.getRange()],b=[],S=0;S<k.length;S++){var A=k[S],C=A.start.row,R=A.end.row;if(C===R)b.push(A.clone());else{for(b.push(new p(C,A.start.column,C,this.session.getLine(C).length));++C<R;)b.push(this.getLineRange(C,!0));b.push(new p(R,0,R,A.end.column))}S==0&&!this.isBackwards()&&(b=b.reverse())}this.toSingleRange();for(var S=b.length;S--;)this.addRange(b[S])},this.joinSelections=function(){var k=this.rangeList.ranges,b=k[k.length-1],S=p.fromPoints(k[0].start,b.end);this.toSingleRange(),this.setSelectionRange(S,b.cursor==b.start)},this.toggleBlockSelection=function(){if(this.rangeCount>1){var k=this.rangeList.ranges,b=k[k.length-1],S=p.fromPoints(k[0].start,b.end);this.toSingleRange(),this.setSelectionRange(S,b.cursor==b.start)}else{var A=this.session.documentToScreenPosition(this.cursor),C=this.session.documentToScreenPosition(this.anchor),R=this.rectangularRangeBlock(A,C);R.forEach(this.addRange,this)}},this.rectangularRangeBlock=function(k,b,S){var A=[],C=k.column<b.column;if(C)var R=k.column,g=b.column,w=k.offsetX,$=b.offsetX;else var R=b.column,g=k.column,w=b.offsetX,$=k.offsetX;var L=k.row<b.row;if(L)var M=k.row,O=b.row;else var M=b.row,O=k.row;R<0&&(R=0),M<0&&(M=0),M==O&&(S=!0);for(var I,B=M;B<=O;B++){var H=p.fromPoints(this.session.screenToDocumentPosition(B,R,w),this.session.screenToDocumentPosition(B,g,$));if(H.isEmpty()){if(I&&x(H.end,I))break;I=H.end}H.cursor=C?H.start:H.end,A.push(H)}if(L&&A.reverse(),!S){for(var K=A.length-1;A[K].isEmpty()&&K>0;)K--;if(K>0)for(var j=0;A[j].isEmpty();)j++;for(var Y=K;Y>=j;Y--)A[Y].isEmpty()&&A.splice(Y,1)}return A}}.call(u.prototype);var y=e("./editor").Editor;(function(){this.updateSelectionMarkers=function(){this.renderer.updateCursor(),this.renderer.updateBackMarkers()},this.addSelectionMarker=function(k){k.cursor||(k.cursor=k.end);var b=this.getSelectionStyle();return k.marker=this.session.addMarker(k,"ace_selection",b),this.session.$selectionMarkers.push(k),this.session.selectionMarkerCount=this.session.$selectionMarkers.length,k},this.removeSelectionMarker=function(k){if(k.marker){this.session.removeMarker(k.marker);var b=this.session.$selectionMarkers.indexOf(k);b!=-1&&this.session.$selectionMarkers.splice(b,1),this.session.selectionMarkerCount=this.session.$selectionMarkers.length}},this.removeSelectionMarkers=function(k){for(var b=this.session.$selectionMarkers,S=k.length;S--;){var A=k[S];if(A.marker){this.session.removeMarker(A.marker);var C=b.indexOf(A);C!=-1&&b.splice(C,1)}}this.session.selectionMarkerCount=b.length},this.$onAddRange=function(k){this.addSelectionMarker(k.range),this.renderer.updateCursor(),this.renderer.updateBackMarkers()},this.$onRemoveRange=function(k){this.removeSelectionMarkers(k.ranges),this.renderer.updateCursor(),this.renderer.updateBackMarkers()},this.$onMultiSelect=function(k){this.inMultiSelectMode||(this.inMultiSelectMode=!0,this.setStyle("ace_multiselect"),this.keyBinding.addKeyboardHandler(t.keyboardHandler),this.commands.setDefaultHandler("exec",this.$onMultiSelectExec),this.renderer.updateCursor(),this.renderer.updateBackMarkers())},this.$onSingleSelect=function(k){this.session.multiSelect.inVirtualMode||(this.inMultiSelectMode=!1,this.unsetStyle("ace_multiselect"),this.keyBinding.removeKeyboardHandler(t.keyboardHandler),this.commands.removeDefaultHandler("exec",this.$onMultiSelectExec),this.renderer.updateCursor(),this.renderer.updateBackMarkers(),this._emit("changeSelection"))},this.$onMultiSelectExec=function(k){var b=k.command,S=k.editor;if(S.multiSelect){if(b.multiSelectAction)b.multiSelectAction=="forEach"?A=S.forEachSelection(b,k.args):b.multiSelectAction=="forEachLine"?A=S.forEachSelection(b,k.args,!0):b.multiSelectAction=="single"?(S.exitMultiSelectMode(),A=b.exec(S,k.args||{})):A=b.multiSelectAction(S,k.args||{});else{var A=b.exec(S,k.args||{});S.multiSelect.addRange(S.multiSelect.toOrientedRange()),S.multiSelect.mergeOverlappingRanges()}return A}},this.forEachSelection=function(k,b,S){if(!this.inVirtualSelectionMode){var A=S&&S.keepOrder,C=S==!0||S&&S.$byLines,R=this.session,g=this.selection,w=g.rangeList,$=(A?g:w).ranges,L;if(!$.length)return k.exec?k.exec(this,b||{}):k(this,b||{});var M=g._eventRegistry;g._eventRegistry={};var O=new u(R);this.inVirtualSelectionMode=!0;for(var I=$.length;I--;){if(C)for(;I>0&&$[I].start.row==$[I-1].end.row;)I--;O.fromOrientedRange($[I]),O.index=I,this.selection=R.selection=O;var B=k.exec?k.exec(this,b||{}):k(this,b||{});!L&&B!==void 0&&(L=B),O.toOrientedRange($[I])}O.detach(),this.selection=R.selection=g,this.inVirtualSelectionMode=!1,g._eventRegistry=M,g.mergeOverlappingRanges(),g.ranges[0]&&g.fromOrientedRange(g.ranges[0]);var H=this.renderer.$scrollAnimation;return this.onCursorChange(),this.onSelectionChange(),H&&H.from==H.to&&this.renderer.animateScrolling(H.from),L}},this.exitMultiSelectMode=function(){!this.inMultiSelectMode||this.inVirtualSelectionMode||this.multiSelect.toSingleRange()},this.getSelectedText=function(){var k="";if(this.inMultiSelectMode&&!this.inVirtualSelectionMode){for(var b=this.multiSelect.rangeList.ranges,S=[],A=0;A<b.length;A++)S.push(this.session.getTextRange(b[A]));var C=this.session.getDocument().getNewLineCharacter();k=S.join(C),k.length==(S.length-1)*C.length&&(k="")}else this.selection.isEmpty()||(k=this.session.getTextRange(this.getSelectionRange()));return k},this.$checkMultiselectChange=function(k,b){if(this.inMultiSelectMode&&!this.inVirtualSelectionMode){var S=this.multiSelect.ranges[0];if(this.multiSelect.isEmpty()&&b==this.multiSelect.anchor)return;var A=b==this.multiSelect.anchor?S.cursor==S.start?S.end:S.start:S.cursor;A.row!=b.row||this.session.$clipPositionToDocument(A.row,A.column).column!=b.column?this.multiSelect.toSingleRange(this.multiSelect.toOrientedRange()):this.multiSelect.mergeOverlappingRanges()}},this.findAll=function(k,b,S){if(b=b||{},b.needle=k||b.needle,b.needle==null){var A=this.selection.isEmpty()?this.selection.getWordRange():this.selection.getRange();b.needle=this.session.getTextRange(A)}this.$search.set(b);var C=this.$search.findAll(this.session);if(!C.length)return 0;var R=this.multiSelect;S||R.toSingleRange(C[0]);for(var g=C.length;g--;)R.addRange(C[g],!0);return A&&R.rangeList.rangeAtPoint(A.start)&&R.addRange(A,!0),C.length},this.selectMoreLines=function(k,b){var S=this.selection.toOrientedRange(),A=S.cursor==S.end,C=this.session.documentToScreenPosition(S.cursor);this.selection.$desiredColumn&&(C.column=this.selection.$desiredColumn);var R=this.session.screenToDocumentPosition(C.row+k,C.column);if(S.isEmpty())var w=R;else var g=this.session.documentToScreenPosition(A?S.end:S.start),w=this.session.screenToDocumentPosition(g.row+k,g.column);if(A){var $=p.fromPoints(R,w);$.cursor=$.start}else{var $=p.fromPoints(w,R);$.cursor=$.end}if($.desiredColumn=C.column,!this.selection.inMultiSelectMode)this.selection.addRange(S);else if(b)var L=S.cursor;this.selection.addRange($),L&&this.selection.substractPoint(L)},this.transposeSelections=function(k){for(var b=this.session,S=b.multiSelect,A=S.ranges,C=A.length;C--;){var R=A[C];if(R.isEmpty()){var g=b.getWordRange(R.start.row,R.start.column);R.start.row=g.start.row,R.start.column=g.start.column,R.end.row=g.end.row,R.end.column=g.end.column}}S.mergeOverlappingRanges();for(var w=[],C=A.length;C--;){var R=A[C];w.unshift(b.getTextRange(R))}k<0?w.unshift(w.pop()):w.push(w.shift());for(var C=A.length;C--;){var R=A[C],g=R.clone();b.replace(R,w[C]),R.start.row=g.start.row,R.start.column=g.start.column}S.fromOrientedRange(S.ranges[0])},this.selectMore=function(k,b,S){var A=this.session,C=A.multiSelect,R=C.toOrientedRange();if(!(R.isEmpty()&&(R=A.getWordRange(R.start.row,R.start.column),R.cursor=k==-1?R.start:R.end,this.multiSelect.addRange(R),S))){var g=A.getTextRange(R),w=d(A,g,k);w&&(w.cursor=k==-1?w.start:w.end,this.session.unfold(w),this.multiSelect.addRange(w),this.renderer.scrollCursorIntoView(null,.5)),b&&this.multiSelect.substractPoint(R.cursor)}},this.alignCursors=function(){var k=this.session,b=k.multiSelect,S=b.ranges,A=-1,C=S.filter(function(K){if(K.cursor.row==A)return!0;A=K.cursor.row});if(!S.length||C.length==S.length-1){var R=this.selection.getRange(),g=R.start.row,w=R.end.row,$=g==w;if($){var L=this.session.getLength(),M;do M=this.session.getLine(w);while(/[=:]/.test(M)&&++w<L);do M=this.session.getLine(g);while(/[=:]/.test(M)&&--g>0);g<0&&(g=0),w>=L&&(w=L-1)}var O=this.session.removeFullLines(g,w);O=this.$reAlignText(O,$),this.session.insert({row:g,column:0},O.join(`
`)+`
`),$||(R.start.column=0,R.end.column=O[O.length-1].length),this.selection.setRange(R)}else{C.forEach(function(K){b.substractPoint(K.cursor)});var I=0,B=1/0,H=S.map(function(K){var j=K.cursor,Y=k.getLine(j.row),Q=Y.substr(j.column).search(/\S/g);return Q==-1&&(Q=0),j.column>I&&(I=j.column),Q<B&&(B=Q),Q});S.forEach(function(K,j){var Y=K.cursor,Q=I-Y.column,z=H[j]-B;Q>z?k.insert(Y,n.stringRepeat(" ",Q-z)):k.remove(new p(Y.row,Y.column,Y.row,Y.column-Q+z)),K.start.column=K.end.column=I,K.start.row=K.end.row=Y.row,K.cursor=K.end}),b.fromOrientedRange(S[0]),this.renderer.updateCursor(),this.renderer.updateBackMarkers()}},this.$reAlignText=function(k,b){var S=!0,A=!0,C,R,g;return k.map(function(O){var I=O.match(/(\s*)(.*?)(\s*)([=:].*)/);return I?C==null?(C=I[1].length,R=I[2].length,g=I[3].length,I):(C+R+g!=I[1].length+I[2].length+I[3].length&&(A=!1),C!=I[1].length&&(S=!1),C>I[1].length&&(C=I[1].length),R<I[2].length&&(R=I[2].length),g>I[3].length&&(g=I[3].length),I):[O]}).map(b?$:S?A?L:$:M);function w(O){return n.stringRepeat(" ",O)}function $(O){return O[2]?w(C)+O[2]+w(R-O[2].length+g)+O[4].replace(/^([=:])\s+/,"$1 "):O[0]}function L(O){return O[2]?w(C+R-O[2].length)+O[2]+w(g)+O[4].replace(/^([=:])\s+/,"$1 "):O[0]}function M(O){return O[2]?w(C)+O[2]+w(g)+O[4].replace(/^([=:])\s+/,"$1 "):O[0]}}}).call(y.prototype);function x(k,b){return k.row==b.row&&k.column==b.column}a.onSessionChange=function(k){var b=k.session;b&&!b.multiSelect&&(b.$selectionMarkers=[],b.selection.$initRangeList(),b.multiSelect=b.selection),this.multiSelect=b&&b.multiSelect;var S=k.oldSession;S&&(S.multiSelect.off("addRange",this.$onAddRange),S.multiSelect.off("removeRange",this.$onRemoveRange),S.multiSelect.off("multiSelect",this.$onMultiSelect),S.multiSelect.off("singleSelect",this.$onSingleSelect),S.multiSelect.lead.off("change",this.$checkMultiselectChange),S.multiSelect.anchor.off("change",this.$checkMultiselectChange)),b&&(b.multiSelect.on("addRange",this.$onAddRange),b.multiSelect.on("removeRange",this.$onRemoveRange),b.multiSelect.on("multiSelect",this.$onMultiSelect),b.multiSelect.on("singleSelect",this.$onSingleSelect),b.multiSelect.lead.on("change",this.$checkMultiselectChange),b.multiSelect.anchor.on("change",this.$checkMultiselectChange)),b&&this.inMultiSelectMode!=b.selection.inMultiSelectMode&&(b.selection.inMultiSelectMode?this.$onMultiSelect():this.$onSingleSelect())};function E(k){k.$multiselectOnSessionChange||(k.$onAddRange=k.$onAddRange.bind(k),k.$onRemoveRange=k.$onRemoveRange.bind(k),k.$onMultiSelect=k.$onMultiSelect.bind(k),k.$onSingleSelect=k.$onSingleSelect.bind(k),k.$multiselectOnSessionChange=a.onSessionChange.bind(k),k.$checkMultiselectChange=k.$checkMultiselectChange.bind(k),k.$multiselectOnSessionChange(k),k.on("changeSession",k.$multiselectOnSessionChange),k.on("mousedown",c),k.commands.addCommands(t.defaultCommands),T(k))}function T(k){if(!k.textInput)return;var b=k.textInput.getElement(),S=!1;f.addListener(b,"keydown",function(C){var R=C.keyCode==18&&!(C.ctrlKey||C.shiftKey||C.metaKey);k.$blockSelectEnabled&&R?S||(k.renderer.setMouseCursor("crosshair"),S=!0):S&&A()},k),f.addListener(b,"keyup",A,k),f.addListener(b,"blur",A,k);function A(C){S&&(k.renderer.setMouseCursor(""),S=!1)}}a.MultiSelect=E,e("./config").defineOptions(y.prototype,"editor",{enableMultiselect:{set:function(k){E(this),k?(this.on("changeSession",this.$multiselectOnSessionChange),this.on("mousedown",c)):(this.off("changeSession",this.$multiselectOnSessionChange),this.off("mousedown",c))},value:!0},enableBlockSelect:{set:function(k){this.$blockSelectEnabled=k},value:!0}})}),ace.define("ace/mode/folding/fold_mode",["require","exports","module","ace/range"],function(e,a,m){var h=e("../../range").Range,p=a.FoldMode=function(){};(function(){this.foldingStartMarker=null,this.foldingStopMarker=null,this.getFoldWidget=function(u,c,f){var n=u.getLine(f);return this.foldingStartMarker.test(n)?"start":c=="markbeginend"&&this.foldingStopMarker&&this.foldingStopMarker.test(n)?"end":""},this.getFoldWidgetRange=function(u,c,f){return null},this.indentationBlock=function(u,c,f){var n=/\S/,t=u.getLine(c),o=t.search(n);if(o!=-1){for(var l=f||t.length,d=u.getLength(),v=c,y=c;++c<d;){var x=u.getLine(c).search(n);if(x!=-1){if(x<=o){var E=u.getTokenAt(c,0);if(!E||E.type!=="string")break}y=c}}if(y>v){var T=u.getLine(y).length;return new h(v,l,y,T)}}},this.openingBracketBlock=function(u,c,f,n,t){var o={row:f,column:n+1},l=u.$findClosingBracket(c,o,t);if(l){var d=u.foldWidgets[l.row];return d==null&&(d=u.getFoldWidget(l.row)),d=="start"&&l.row>o.row&&(l.row--,l.column=u.getLine(l.row).length),h.fromPoints(o,l)}},this.closingBracketBlock=function(u,c,f,n,t){var o={row:f,column:n},l=u.$findOpeningBracket(c,o);if(l)return l.column++,o.column--,h.fromPoints(l,o)}}).call(p.prototype)}),ace.define("ace/ext/error_marker",["require","exports","module","ace/line_widgets","ace/lib/dom","ace/range"],function(e,a,m){var h=e("../line_widgets").LineWidgets,p=e("../lib/dom"),u=e("../range").Range;function c(n,t,o){for(var l=0,d=n.length-1;l<=d;){var v=l+d>>1,y=o(t,n[v]);if(y>0)l=v+1;else if(y<0)d=v-1;else return v}return-(l+1)}function f(n,t,o){var l=n.getAnnotations().sort(u.comparePoints);if(l.length){var d=c(l,{row:t,column:-1},u.comparePoints);d<0&&(d=-d-1),d>=l.length?d=o>0?0:l.length-1:d===0&&o<0&&(d=l.length-1);var v=l[d];if(!(!v||!o)){if(v.row===t){do v=l[d+=o];while(v&&v.row===t);if(!v)return l.slice()}var y=[];t=v.row;do y[o<0?"unshift":"push"](v),v=l[d+=o];while(v&&v.row==t);return y.length&&y}}}a.showErrorMarker=function(n,t){var o=n.session;o.widgetManager||(o.widgetManager=new h(o),o.widgetManager.attach(n));var l=n.getCursorPosition(),d=l.row,v=o.widgetManager.getWidgetsAtRow(d).filter(function(C){return C.type=="errorMarker"})[0];v?v.destroy():d-=t;var y=f(o,d,t),x;if(y){var E=y[0];l.column=(E.pos&&typeof E.column!="number"?E.pos.sc:E.column)||0,l.row=E.row,x=n.renderer.$gutterLayer.$annotations[l.row]}else{if(v)return;x={text:["Looks good!"],className:"ace_ok"}}n.session.unfold(l.row),n.selection.moveToPosition(l);var T={row:l.row,fixedWidth:!0,coverGutter:!0,el:p.createElement("div"),type:"errorMarker"},k=T.el.appendChild(p.createElement("div")),b=T.el.appendChild(p.createElement("div"));b.className="error_widget_arrow "+x.className;var S=n.renderer.$cursorLayer.getPixelPosition(l).left;b.style.left=S+n.renderer.gutterWidth-5+"px",T.el.className="error_widget_wrapper",k.className="error_widget "+x.className,k.innerHTML=x.text.join("<br>"),k.appendChild(p.createElement("div"));var A=function(C,R,g){if(R===0&&(g==="esc"||g==="return"))return T.destroy(),{command:"null"}};T.destroy=function(){n.$mouseHandler.isMousePressed||(n.keyBinding.removeKeyboardHandler(A),o.widgetManager.removeLineWidget(T),n.off("changeSelection",T.destroy),n.off("changeSession",T.destroy),n.off("mouseup",T.destroy),n.off("change",T.destroy))},n.keyBinding.addKeyboardHandler(A),n.on("changeSelection",T.destroy),n.on("changeSession",T.destroy),n.on("mouseup",T.destroy),n.on("change",T.destroy),n.session.widgetManager.addLineWidget(T),T.el.onmousedown=n.focus.bind(n),n.renderer.scrollCursorIntoView(null,.5,{bottom:T.el.offsetHeight})},p.importCssString(`
    .error_widget_wrapper {
        background: inherit;
        color: inherit;
        border:none
    }
    .error_widget {
        border-top: solid 2px;
        border-bottom: solid 2px;
        margin: 5px 0;
        padding: 10px 40px;
        white-space: pre-wrap;
    }
    .error_widget.ace_error, .error_widget_arrow.ace_error{
        border-color: #ff5a5a
    }
    .error_widget.ace_warning, .error_widget_arrow.ace_warning{
        border-color: #F1D817
    }
    .error_widget.ace_info, .error_widget_arrow.ace_info{
        border-color: #5a5a5a
    }
    .error_widget.ace_ok, .error_widget_arrow.ace_ok{
        border-color: #5aaa5a
    }
    .error_widget_arrow {
        position: absolute;
        border: solid 5px;
        border-top-color: transparent!important;
        border-right-color: transparent!important;
        border-left-color: transparent!important;
        top: -5px;
    }
`,"error_marker.css",!1)}),ace.define("ace/ace",["require","exports","module","ace/lib/dom","ace/lib/event","ace/range","ace/editor","ace/edit_session","ace/undomanager","ace/virtual_renderer","ace/worker/worker_client","ace/keyboard/hash_handler","ace/placeholder","ace/multi_select","ace/mode/folding/fold_mode","ace/theme/textmate","ace/ext/error_marker","ace/config","ace/loader_build"],function(e,a,m){e("./loader_build")(a);var h=e("./lib/dom"),p=e("./lib/event"),u=e("./range").Range,c=e("./editor").Editor,f=e("./edit_session").EditSession,n=e("./undomanager").UndoManager,t=e("./virtual_renderer").VirtualRenderer;e("./worker/worker_client"),e("./keyboard/hash_handler"),e("./placeholder"),e("./multi_select"),e("./mode/folding/fold_mode"),e("./theme/textmate"),e("./ext/error_marker"),a.config=e("./config"),a.edit=function(o,l){if(typeof o=="string"){var d=o;if(o=document.getElementById(d),!o)throw new Error("ace.edit can't find div #"+d)}if(o&&o.env&&o.env.editor instanceof c)return o.env.editor;var v="";if(o&&/input|textarea/i.test(o.tagName)){var y=o;v=y.value,o=h.createElement("pre"),y.parentNode.replaceChild(o,y)}else o&&(v=o.textContent,o.innerHTML="");var x=a.createEditSession(v),E=new c(new t(o),x,l),T={document:x,editor:E,onResize:E.resize.bind(E,null)};return y&&(T.textarea=y),p.addListener(window,"resize",T.onResize),E.on("destroy",function(){p.removeListener(window,"resize",T.onResize),T.editor.container.env=null}),E.container.env=E.env=T,E},a.createEditSession=function(o,l){var d=new f(o,l);return d.setUndoManager(new n),d},a.Range=u,a.Editor=c,a.EditSession=f,a.UndoManager=n,a.VirtualRenderer=t,a.version=a.config.version}),function(){ace.require(["ace/ace"],function(e){e&&(e.config.init(!0),e.define=ace.define),window.ace||(window.ace=e);for(var a in e)e.hasOwnProperty(a)&&(window.ace[a]=e[a]);window.ace.default=window.ace,s&&(s.exports=window.ace)})}()})(ace$4);var aceExports=ace$4.exports,index_es={exports:{}};function _typeof(s){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof=function(r){return typeof r}:_typeof=function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},_typeof(s)}function _classCallCheck$1(s,r){if(!(s instanceof r))throw new TypeError("Cannot call a class as a function")}function _defineProperties(s,r){for(var e=0;e<r.length;e++){var a=r[e];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(s,a.key,a)}}function _createClass$1(s,r,e){return r&&_defineProperties(s.prototype,r),e&&_defineProperties(s,e),s}function _defineProperty(s,r,e){return r in s?Object.defineProperty(s,r,{value:e,enumerable:!0,configurable:!0,writable:!0}):s[r]=e,s}function _extends(){return _extends=Object.assign||function(s){for(var r=1;r<arguments.length;r++){var e=arguments[r];for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(s[a]=e[a])}return s},_extends.apply(this,arguments)}function _objectSpread(s){for(var r=1;r<arguments.length;r++){var e=arguments[r]!=null?arguments[r]:{},a=Object.keys(e);typeof Object.getOwnPropertySymbols=="function"&&(a=a.concat(Object.getOwnPropertySymbols(e).filter(function(m){return Object.getOwnPropertyDescriptor(e,m).enumerable}))),a.forEach(function(m){_defineProperty(s,m,e[m])})}return s}function _inherits(s,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");s.prototype=Object.create(r&&r.prototype,{constructor:{value:s,writable:!0,configurable:!0}}),r&&_setPrototypeOf(s,r)}function _getPrototypeOf(s){return _getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},_getPrototypeOf(s)}function _setPrototypeOf(s,r){return _setPrototypeOf=Object.setPrototypeOf||function(a,m){return a.__proto__=m,a},_setPrototypeOf(s,r)}function isNativeReflectConstruct(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function _construct(s,r,e){return isNativeReflectConstruct()?_construct=Reflect.construct:_construct=function(m,h,p){var u=[null];u.push.apply(u,h);var c=Function.bind.apply(m,u),f=new c;return p&&_setPrototypeOf(f,p.prototype),f},_construct.apply(null,arguments)}function _isNativeFunction(s){return Function.toString.call(s).indexOf("[native code]")!==-1}function _wrapNativeSuper(s){var r=typeof Map=="function"?new Map:void 0;return _wrapNativeSuper=function(a){if(a===null||!_isNativeFunction(a))return a;if(typeof a!="function")throw new TypeError("Super expression must either be null or a function");if(typeof r<"u"){if(r.has(a))return r.get(a);r.set(a,m)}function m(){return _construct(a,arguments,_getPrototypeOf(this).constructor)}return m.prototype=Object.create(a.prototype,{constructor:{value:m,enumerable:!1,writable:!0,configurable:!0}}),_setPrototypeOf(m,a)},_wrapNativeSuper(s)}function _objectWithoutPropertiesLoose(s,r){if(s==null)return{};var e={},a=Object.keys(s),m,h;for(h=0;h<a.length;h++)m=a[h],!(r.indexOf(m)>=0)&&(e[m]=s[m]);return e}function _objectWithoutProperties(s,r){if(s==null)return{};var e=_objectWithoutPropertiesLoose(s,r),a,m;if(Object.getOwnPropertySymbols){var h=Object.getOwnPropertySymbols(s);for(m=0;m<h.length;m++)a=h[m],!(r.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(s,a)&&(e[a]=s[a])}return e}function _assertThisInitialized(s){if(s===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return s}function _possibleConstructorReturn(s,r){return r&&(typeof r=="object"||typeof r=="function")?r:_assertThisInitialized(s)}function _superPropBase(s,r){for(;!Object.prototype.hasOwnProperty.call(s,r)&&(s=_getPrototypeOf(s),s!==null););return s}function _get(s,r,e){return typeof Reflect<"u"&&Reflect.get?_get=Reflect.get:_get=function(m,h,p){var u=_superPropBase(m,h);if(u){var c=Object.getOwnPropertyDescriptor(u,h);return c.get?c.get.call(p):c.value}},_get(s,r,e||s)}function _toConsumableArray(s){return _arrayWithoutHoles(s)||_iterableToArray(s)||_nonIterableSpread()}function _arrayWithoutHoles(s){if(Array.isArray(s)){for(var r=0,e=new Array(s.length);r<s.length;r++)e[r]=s[r];return e}}function _iterableToArray(s){if(Symbol.iterator in Object(s)||Object.prototype.toString.call(s)==="[object Arguments]")return Array.from(s)}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function dictionaryFrom(s){var r=1<arguments.length&&arguments[1]!==void 0?arguments[1]:null;return s.reduce(function(e,a){return e[a]=r||{value:a},e},{})}var _defaultConfiguration={logLevel:"warn",defaultKeyEvent:"keydown",defaultComponent:"div",defaultTabIndex:"-1",ignoreTags:["input","select","textarea"],enableHardSequences:!1,ignoreKeymapAndHandlerChangesByDefault:!0,ignoreEventsCondition:function(r){var e=r.target;if(e&&e.tagName){var a=e.tagName.toLowerCase();return Configuration.option("_ignoreTagsDict")[a]||e.isContentEditable}return!1},ignoreRepeatedEventsWhenKeyHeldDown:!0,simulateMissingKeyPressEvents:!0,stopEventPropagationAfterHandling:!0,stopEventPropagationAfterIgnoring:!0,allowCombinationSubmatches:!1,customKeyCodes:{}},_configuration=_objectSpread({},_defaultConfiguration);_configuration._ignoreTagsDict=dictionaryFrom(_configuration.ignoreTags,!0);var Configuration=function(){function s(){_classCallCheck$1(this,s)}return _createClass$1(s,null,[{key:"init",value:function(e){var a=this,m=e.ignoreTags,h=e.customKeyCodes;m&&(e._ignoreTagsDict=dictionaryFrom(e.ignoreTags)),h&&(e._customKeyNamesDict=dictionaryFrom(Object.values(e.customKeyCodes))),["verbose","debug","info"].indexOf(e.logLevel)!==-1&&console.warn("React HotKeys: You have requested log level '".concat(e.logLevel,"' but for performance reasons, logging below severity level 'warning' is disabled in production. Please use the development build for complete logs.")),Object.keys(e).forEach(function(p){a.set(p,e[p])})}},{key:"set",value:function(e,a){_configuration[e]=a}},{key:"reset",value:function(e){_configuration[e]=_defaultConfiguration[e]}},{key:"option",value:function(e){return _configuration[e]}}]),s}(),Logger$2=function(){function s(){var r=this,e=0<arguments.length&&arguments[0]!==void 0?arguments[0]:"warn";if(_classCallCheck$1(this,s),_defineProperty(this,"verbose",this.noop),_defineProperty(this,"debug",this.noop),_defineProperty(this,"info",this.noop),_defineProperty(this,"warn",this.noop),_defineProperty(this,"error",this.noop),this.logLevel=this.constructor.levels[e],this.logLevel>=this.constructor.levels.error)this.error=console.error;else return;if(this.logLevel>=this.constructor.levels.warn)this.warn=console.warn;else return;["info","debug","verbose"].some(function(a){return!(r.logLevel>=r.constructor.levels[a])||(r[a]=console.log,!1)})}return _createClass$1(s,[{key:"noop",value:function(){}}]),s}();_defineProperty(Logger$2,"logIcons",["📕","📗","📘","📙"]),_defineProperty(Logger$2,"componentIcons",["🔺","⭐️","🔷","🔶","⬛️"]),_defineProperty(Logger$2,"eventIcons",["❤️","💚","💙","💛","💜","🧡"]),_defineProperty(Logger$2,"levels",{none:0,error:1,warn:2,info:3,debug:4,verbose:5});var KeyEventType={keydown:0,keypress:1,keyup:2},ModifierFlagsDictionary={Shift:["shiftKey"],Meta:["metaKey"],Control:["ctrlKey"],Alt:["altKey"]},ShiftedKeysDictionary={"`":["~"],1:["!"],2:["@",'"'],3:["#","£"],4:["$"],5:["%"],6:["^"],7:["&"],8:["*"],9:["("],0:[")"],"-":["_"],"=":["plus"],";":[":"],"'":['"',"@"],",":["<"],".":[">"],"/":["?"],"\\":["|"],"[":["{"],"]":["}"],"#":["~"]};function resolveShiftedAlias(s){return ShiftedKeysDictionary[s]||[s.length===1?s.toUpperCase():s]}function hasKey(s,r){return s.hasOwnProperty(r)}function invertArrayDictionary(s){var r=1<arguments.length&&arguments[1]!==void 0?arguments[1]:{};return Object.keys(s).reduce(function(e,a){var m=s[a];return m.forEach(function(h){hasKey(e,h)||(e[h]=[]),e[h].push(a)}),r.includeOriginal&&(!hasKey(e,a)&&(e[a]=[]),e[a]=[].concat(_toConsumableArray(e[a]),_toConsumableArray(m))),e},{})}var UnshiftedKeysDictionary=invertArrayDictionary(ShiftedKeysDictionary);function resolveUnshiftedAlias(s){return UnshiftedKeysDictionary[s]||[s.length===1?s.toLowerCase():s]}var KeyOSAndLayoutAliasesDictionary={},KeyOSAndLayoutAliasesDictionary$1=invertArrayDictionary(KeyOSAndLayoutAliasesDictionary,{includeOriginal:!0});function isString(s){return typeof s=="string"}function stripSuperfluousWhitespace(s){return isString(s)?s.trim().replace(/\s+/g," "):s}var MousetrapToReactKeyNamesDictionary={tab:"Tab",capslock:"CapsLock",shift:"Shift",meta:"Meta",alt:"Alt",ctrl:"Control",space:" ",spacebar:" ",escape:"Escape",esc:"Escape",left:"ArrowLeft",right:"ArrowRight",up:"ArrowUp",down:"ArrowDown",return:"Enter",del:"Delete",command:"Meta",option:"Alt",enter:"Enter",backspace:"Backspace",ins:"Insert",pageup:"PageUp",pagedown:"PageDown",end:"End",home:"Home",contextmenu:"ContextMenu",numlock:"Clear"},KeyShorthandDictionary={cmd:"Meta"};function standardizeKeyName(s){var r=s.toLowerCase();return MousetrapToReactKeyNamesDictionary[r]||KeyShorthandDictionary[r]||(s.match(/^f\d+$/)?s.toUpperCase():s)}var translateToKey={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},NonPrintableKeysDictionary=dictionaryFrom(Object.values(translateToKey),!0);function isNonPrintableKeyName(s){return!!NonPrintableKeysDictionary[s]}function isCustomKeyName(s){return Configuration.option("_customKeyNamesDict")[s]}function isValidKey(s){return isNonPrintableKeyName(s)||String.fromCharCode(s.charCodeAt(0))===s||isCustomKeyName(s)}var InvalidKeyNameError=function(s){function r(){var e,a;_classCallCheck$1(this,r);for(var m=arguments.length,h=Array(m),p=0;p<m;p++)h[p]=arguments[p];return a=_possibleConstructorReturn(this,(e=_getPrototypeOf(r)).call.apply(e,[this].concat(h))),_defineProperty(_assertThisInitialized(_assertThisInitialized(a)),"name","InvalidKeyNameError"),a}return _inherits(r,s),r}(_wrapNativeSuper(Error));function normalizedCombinationId(s){return s.sort().join("+")}var KeySequenceParser=function(){function s(){_classCallCheck$1(this,s)}return _createClass$1(s,null,[{key:"parse",value:function(e){var a=1<arguments.length&&arguments[1]!==void 0?arguments[1]:{},m=stripSuperfluousWhitespace(e),h=m.split(" ");try{var p=h.slice(0,h.length-1),u=h[h.length-1],c=p.map(function(o){var l=parseCombination(o,a);return normalizedCombinationId(Object.keys(l))}).join(" "),f=parseCombination(u,a),n=normalizedCombinationId(Object.keys(f)),t={id:n,keyDictionary:f,keyEventType:a.keyEventType,size:Object.keys(f).length};return{sequence:{prefix:c,size:p.length+1},combination:t}}catch{return{sequence:null,combination:null}}}}]),s}();function parseCombination(s){var r=1<arguments.length&&arguments[1]!==void 0?arguments[1]:{};return s.replace(/^\+|(\s|[^+]\+)\+/,"$1plus").split("+").reduce(function(e,a){var m=standardizeKeyName(a);if(r.ensureValidKeys&&!isValidKey(m))throw new InvalidKeyNameError;return e[m]=!0,e},{})}var AltedKeysDictionary={"`":["`"],1:["¡"],2:["™"],3:["£"],4:["¢"],5:["∞"],6:["§"],7:["¶"],8:["•"],9:["ª"],0:["º"],"-":["–"],"=":["≠"],a:["å"],b:["∫"],c:["ç"],d:["∂"],e:["´"],f:["ƒ"],g:["©"],h:["˙"],i:["ˆ"],j:["∆"],k:["˚"],l:["¬"],m:["µ"],n:["˜"],o:["ø"],p:["π"],q:["œ"],r:["®"],s:["ß"],t:["†"],u:["¨"],v:["√"],w:["∑"],x:["≈"],y:["¥"],z:["Ω"],"[":["“"],"]":["‘"],"\\":["«"],"'":["æ"],";":["…"],",":["≤"],".":["≥"],"/":["÷"]},UnaltedKeysDictionary=invertArrayDictionary(AltedKeysDictionary);function resolveUnaltedAlias(s){return UnaltedKeysDictionary[s]||[s]}function resolveAltedAlias(s){return AltedKeysDictionary[s]||[s]}var AltShiftedKeysDictionary={"`":["`"],1:["⁄"],2:["€"],3:["‹"],4:["›"],5:["ﬁ"],6:["ﬂ"],7:["‡"],8:["°"],9:["·"],0:["‚"],"-":["—"],"=":["±"],a:["Å"],b:["ı"],c:["Ç"],d:["Î"],e:["´"],f:["Ï"],g:["˝"],h:["Ó"],i:["ˆ"],j:["Ô"],k:[""],l:["Ò"],m:["Â"],n:["˜"],o:["Ø"],p:["π"],q:["Œ"],r:["‰"],s:["Í"],t:["Î"],u:["¨"],v:["◊"],w:["„"],x:["˛"],y:["Á"],z:["¸"],"[":["”"],"]":["’"],"\\":["»"],"'":["Æ"],";":["Ú"],",":["¯"],".":["˘"]},UnaltShiftedKeysDictionary=invertArrayDictionary(AltShiftedKeysDictionary);function resolveUnaltShiftedAlias(s){return UnaltShiftedKeysDictionary[s]||resolveUnshiftedAlias(s)}function resolveAltShiftedAlias(s){return AltShiftedKeysDictionary[s]||[s]}var KeyCombinationSerializer=function(){function s(){_classCallCheck$1(this,s)}return _createClass$1(s,null,[{key:"serialize",value:function(e){var a=e.Shift,m=e.Alt,h={},p=Object.keys(e).sort();return p.forEach(function(u){var c=[];if(a)if(m){var f=resolveUnaltShiftedAlias(u),n=resolveAltShiftedAlias(u);c=[].concat(_toConsumableArray(c),[u],_toConsumableArray(f),_toConsumableArray(n))}else{var t=resolveUnshiftedAlias(u),o=resolveShiftedAlias(u);c=[].concat(_toConsumableArray(c),[u],_toConsumableArray(t),_toConsumableArray(o))}else if(m){var l=resolveUnaltedAlias(u),d=resolveAltedAlias(u);c=[].concat(_toConsumableArray(c),[u],_toConsumableArray(l),_toConsumableArray(d))}else{c.push(u);var v=KeyOSAndLayoutAliasesDictionary$1[u];v&&(c=[].concat(_toConsumableArray(c),_toConsumableArray(v)))}var y=Object.keys(h);0<y.length?y.forEach(function(x){c.forEach(function(E){h[x+"+".concat(E)]=_objectSpread({},h[x],_defineProperty({},E,!0))}),delete h[x]}):c.forEach(function(x){h[x]=_defineProperty({},x,!0)})}),Object.values(h).map(function(u){return Object.keys(u).sort().join("+")})}},{key:"isValidKeySerialization",value:function(e){return 0<e.length&&!!KeySequenceParser.parse(e,{ensureValidKeys:!0}).combination}}]),s}(),KeyEventSequenceIndex={previous:0,current:1};function resolveKeyAlias(s){return KeyOSAndLayoutAliasesDictionary$1[s]||[s]}function applicableAliasFunctions(s){if(s.Shift)return s.Alt?[resolveAltShiftedAlias,resolveUnaltShiftedAlias]:[resolveShiftedAlias,resolveUnshiftedAlias];if(s.Alt)return[resolveAltedAlias,resolveUnaltedAlias];var r=function(e){return[e]};return[r,r]}function isUndefined(s){return typeof s>"u"}var KeyEventState={unseen:0,seen:1,simulated:2},KeyEventStateArrayManager=function(){function s(){_classCallCheck$1(this,s)}return _createClass$1(s,null,[{key:"newRecord",value:function(e,a){var m=[KeyEventState.unseen,KeyEventState.unseen,KeyEventState.unseen];if(!isUndefined(e))for(var h=0;h<=e;h++)m[h]=a;return m}},{key:"setBit",value:function(e,a,m){return e[a]=m,e}},{key:"clone",value:function(e){for(var a=this.newRecord(),m=0;m<e.length;m++)a[m]=e[m];return a}}]),s}();function isObject$2(s){return!Array.isArray(s)&&_typeof(s)==="object"&&s!==null}function isEmpty(s){return isObject$2(s)?Object.keys(s).length===0:!s||s.length===0}function size(s){return isObject$2(s)?Object.keys(s).length:s.length}var KeyCombination=function(){function s(){var r=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{};_classCallCheck$1(this,s),this._keys=r,this._includesKeyUp=!1,this._update()}return _createClass$1(s,[{key:"getIds",value:function(){return this._ids}},{key:"getKeyAliases",value:function(){return this._keyAliases}},{key:"getNormalizedKeyName",value:function(e){var a=this._keys[e];if(a)return e;var m=this._keyAliases[e];return m||e}},{key:"getNumberOfKeys",value:function(){return size(this._keys)}},{key:"any",value:function(){return 0<Object.keys(this._getKeyStates()).length}},{key:"isEnding",value:function(){return this._includesKeyUp}},{key:"hasEnded",value:function(){return isEmpty(this.keysStillPressedDict())}},{key:"addKey",value:function(e,a){this._setKeyState(e,[KeyEventStateArrayManager.newRecord(),KeyEventStateArrayManager.newRecord(KeyEventType.keydown,a)])}},{key:"setKeyState",value:function(e,a,m){var h=this._getKeyState(e);if(this.isKeyIncluded(e)){var p=KeyEventStateArrayManager.clone(h[1]),u=KeyEventStateArrayManager.clone(p);KeyEventStateArrayManager.setBit(u,a,m),this._setKeyState(e,[p,u])}else this.addKey(e,m);a===KeyEventType.keyup&&(this._includesKeyUp=!0)}},{key:"forEachKey",value:function(e){return Object.keys(this._keys).forEach(e)}},{key:"some",value:function(e){return Object.keys(this._keys).some(e)}},{key:"getKeyDictionary",value:function(){return dictionaryFrom(Object.keys(this._getKeyStates()),!0)}},{key:"keysStillPressedDict",value:function(){var e=this;return Object.keys(this._keys).reduce(function(a,m){return e.isKeyStillPressed(m)&&(a[m]=e._getKeyState(m)),a},{})}},{key:"isKeyIncluded",value:function(e){return!!this._getKeyState(e)}},{key:"isKeyStillPressed",value:function(e){return this.isEventTriggered(e,KeyEventType.keypress)&&!this.isKeyReleased(e)}},{key:"isKeyReleased",value:function(e){return this.isEventTriggered(e,KeyEventType.keyup)}},{key:"isEventTriggered",value:function(e,a){return this._getKeyStateType(e,KeyEventSequenceIndex.current,a)}},{key:"wasEventPreviouslyTriggered",value:function(e,a){return this._getKeyStateType(e,KeyEventSequenceIndex.previous,a)}},{key:"isKeyPressSimulated",value:function(e){return this._isKeyEventSimulated(e,KeyEventType.keypress)}},{key:"isKeyUpSimulated",value:function(e){return this._isKeyEventSimulated(e,KeyEventType.keyup)}},{key:"describe",value:function(){return this.getIds()[0]}},{key:"toJSON",value:function(){return{keys:this._getKeyStates(),ids:this.getIds(),keyAliases:this.getKeyAliases()}}},{key:"_getKeyStateType",value:function(e,a,m){var h=this._getKeyState(e);return h&&h[a][m]}},{key:"_update",value:function(){this._ids=KeyCombinationSerializer.serialize(this._keys),this._keyAliases=buildKeyAliases(this._keys)}},{key:"_isKeyEventSimulated",value:function(e,a){return this.isEventTriggered(e,a)===KeyEventState.simulated}},{key:"_getKeyStates",value:function(){return this._keys}},{key:"_getKeyState",value:function(e){var a=this._keys[e];if(a)return a;var m=this._keyAliases[e];if(m)return this._keys[m]}},{key:"_setKeyState",value:function(e,a){var m=this.getNormalizedKeyName(e);this._keys[m]=a,this._update()}}]),s}();function buildKeyAliases(s){return Object.keys(s).reduce(function(r,e){return resolveKeyAlias(e).forEach(function(a){applicableAliasFunctions(s).forEach(function(m){m(a).forEach(function(h){(h!==e||e!==a)&&(r[h]=e)})})}),r},{})}var KeyHistory=function(){function s(r){var e=r.maxLength,a=1<arguments.length&&arguments[1]!==void 0?arguments[1]:null;_classCallCheck$1(this,s),this._records=[],this._maxLength=e,a?this._push(a):this._push(new KeyCombination)}return _createClass$1(s,[{key:"getMostRecentCombinations",value:function(e){return this._records.slice(-e,-1)}},{key:"any",value:function(){return this._records.some(function(e){return e.any()})}},{key:"getLength",value:function(){return this._records.length}},{key:"getCurrentCombination",value:function(){return this._records[this.getLength()-1]}},{key:"addKeyToCurrentCombination",value:function(e,a,m){this._ensureInitialKeyCombination(),this.getCurrentCombination().setKeyState(e,a,m)}},{key:"setMaxLength",value:function(e){this._maxLength=e,this._trimHistory()}},{key:"startNewKeyCombination",value:function(e,a){this._ensureInitialKeyCombination();var m=new KeyCombination(this.getCurrentCombination().keysStillPressedDict());m.addKey(e,a),this._push(m)}},{key:"toJSON",value:function(){return this._records.map(function(e){return e.toJSON()})}},{key:"_ensureInitialKeyCombination",value:function(){this.getLength()===0&&this._push(new KeyCombination)}},{key:"_push",value:function(e){this._trimHistory(),this._records.push(e)}},{key:"_trimHistory",value:function(){for(;this.getLength()>this._maxLength;)this._shift()}},{key:"_shift",value:function(){this._records.shift()}}]),s}(),Registry=function(){function s(){_classCallCheck$1(this,s),this._registry={}}return _createClass$1(s,[{key:"get",value:function(e){return this._registry[e]}},{key:"set",value:function(e,a){this._registry[e]=a}},{key:"remove",value:function(e){delete this._registry[e]}},{key:"toJSON",value:function(){return this._registry}}]),s}();function arrayFrom(s){return Array.isArray(s)?s:s?[s]:[]}function without(s){var r=1<arguments.length&&arguments[1]!==void 0?arguments[1]:[],e=2<arguments.length&&arguments[2]!==void 0?arguments[2]:{},a=dictionaryFrom(arrayFrom(r));return Array.isArray(s)?s.reduce(function(m,h){return a[h]&&(e.stringifyFirst||a[h].value===h)||m.push(h),m},[]):isObject$2(s)?Object.keys(s).reduce(function(m,h){return a[h]||(m[h]=s[h]),m},{}):s}var ComponentTree=function(s){function r(){return _classCallCheck$1(this,r),_possibleConstructorReturn(this,_getPrototypeOf(r).apply(this,arguments))}return _inherits(r,s),_createClass$1(r,[{key:"add",value:function(a,m){_get(_getPrototypeOf(r.prototype),"set",this).call(this,a,{childIds:[],parentId:null,keyMap:m})}},{key:"update",value:function(a,m){var h=_get(_getPrototypeOf(r.prototype),"get",this).call(this,a);_get(_getPrototypeOf(r.prototype),"set",this).call(this,a,_objectSpread({},h,{keyMap:m}))}},{key:"setParent",value:function(a,m){this.get(a).parentId=m,this._addChildId(m,a)}},{key:"remove",value:function(a){var m=this._getParentId(a);this._removeChildId(m,a),_get(_getPrototypeOf(r.prototype),"remove",this).call(this,a)}},{key:"_getParentId",value:function(a){var m=this.get(a);return m&&m.parentId}},{key:"_addChildId",value:function(a,m){this.get(a).childIds.push(m)}},{key:"_removeChildId",value:function(a,m){var h=this.get(a);h&&(h.childIds=without(h.childIds,m))}}]),r}(Registry);function removeAtIndex(s,r){return[].concat(_toConsumableArray(s.slice(0,r)),_toConsumableArray(s.slice(r+1)))}var ComponentOptionsListIterator=function(){function s(r){_classCallCheck$1(this,s),this._list=r,this._position=-1}return _createClass$1(s,[{key:"getPosition",value:function(){return this._position}},{key:"getComponent",value:function(){return this._list.getAtPosition(this.getPosition())}},{key:"next",value:function(){return this.getPosition()+1<this._list.getLength()?(this._position++,this.getComponent()):null}}]),s}(),ComponentOptionsList=function(){function s(){_classCallCheck$1(this,s),this._list=[],this._idToIndex={},this._longestSequence=1,this._longestSequenceComponentId=null,this._keyMapEventRecord=KeyEventStateArrayManager.newRecord()}return _createClass$1(s,[{key:"getNewIterator",value:function(){return new ComponentOptionsListIterator(this)}},{key:"add",value:function(e,a,m,h){if(this.containsId(e))return this.update(e,a,m,h);var p=this._build(e,a,m,h);this._list.push(p);var u=this._getLastIndex();return this._idToIndex[e]=u}},{key:"containsId",value:function(e){return!!this.get(e)}},{key:"get",value:function(e){return this.getAtPosition(this.getIndexById(e))}},{key:"getIndexById",value:function(e){return this._idToIndex[e]}},{key:"update",value:function(e,a,m,h){var p=this._isUpdatingComponentWithLongestSequence(e),u=this.getLongestSequence(),c=this._build(e,a,m,h);p&&c.sequenceLength!==u&&(c.sequenceLength>u?this._longestSequence=c.sequenceLength:this._recalculateLongestSequence()),this._list[this.getIndexById(e)]=c}},{key:"remove",value:function(e){var a=this._isUpdatingComponentWithLongestSequence(e);this.removeAtPosition(this.getIndexById(e)),a&&this._recalculateLongestSequence()}},{key:"any",value:function(){return this.getLength()!==0}},{key:"isRoot",value:function(e){return this.getIndexById(e)>=this.getLength()-1}},{key:"getLongestSequence",value:function(){return this._longestSequence}},{key:"anyActionsForEventType",value:function(e){return!!this._keyMapEventRecord[e]}},{key:"getLength",value:function(){return this._list.length}},{key:"getAtPosition",value:function(e){return this._list[e]}},{key:"removeAtPosition",value:function(e){this._list=removeAtIndex(this._list,e);for(var a=e;a<this.getLength();)this._idToIndex[this.getAtPosition(a).componentId]=a,a++}},{key:"toJSON",value:function(){return this._list}},{key:"_getLastIndex",value:function(){return this.getLength()-1}},{key:"_build",value:function(e,a,m,h){var p=this._applyHardSequences(a,m),u=p.keyMap,c=p.handlers,f=this._buildActionDictionary(_objectSpread({},a,u),h,e);return{actions:f,handlers:c,componentId:e,options:h}}},{key:"_isUpdatingComponentWithLongestSequence",value:function(e){return e===this._getLongestSequenceComponentId()}},{key:"_getLongestSequenceComponentId",value:function(){return this._longestSequenceComponentId}},{key:"_recalculateLongestSequence",value:function(){for(var e=this.getNewIterator();e.next();){var a=e.getComponent(),m=a.longestSequence,h=a.componentId;m>this.getLongestSequence()&&(this._longestSequenceComponentId=h,this._longestSequence=m)}}},{key:"_applyHardSequences",value:function(e,a){return Configuration.option("enableHardSequences")?Object.keys(a).reduce(function(m,h){var p=!!e[h];return!p&&KeyCombinationSerializer.isValidKeySerialization(h)&&(m.keyMap[h]=h),m.handlers[h]=a[h],m},{keyMap:{},handlers:{}}):{keyMap:e,handlers:a}}},{key:"_buildActionDictionary",value:function(e,a,m){var h=this;return Object.keys(e).reduce(function(p,u){var c=e[u],f=function(){return isObject$2(c)&&hasKey(c,"sequences")?arrayFrom(c.sequences):arrayFrom(c)}();return f.forEach(function(n){var t=normalizeActionOptions(n,a),o=t.keySequence,l=t.keyEventType;h._addActionOptions(p,m,u,o,l)}),p},{})}},{key:"_addActionOptions",value:function(e,a,m,h,p){var u=KeySequenceParser.parse(h,{keyEventType:p}),c=u.sequence,f=u.combination;c.size>this.getLongestSequence()&&(this._longestSequence=c.size,this._longestSequenceComponentId=a),this._keyMapEventRecord[p]=KeyEventState.seen,e[m]||(e[m]=[]),e[m].push(_objectSpread({prefix:c.prefix,actionName:m,sequenceLength:c.size},f))}}]),s}();function normalizeActionOptions(s,r){if(isObject$2(s)){var e=s.sequence,a=s.action;return{keySequence:e,keyEventType:isUndefined(a)?KeyEventType[r.defaultKeyEvent]:KeyEventType[a]}}return{keySequence:s,keyEventType:KeyEventType[r.defaultKeyEvent]}}function indexFromEnd(s,r){return s[s.length-(r+1)]}for(var KeysWithKeyUpHiddenByCmd={Enter:!0,Backspace:!0,ArrowRight:!0,ArrowLeft:!0,ArrowUp:!0,ArrowDown:!0,CapsLock:!0},i=1;13>i;i++)KeysWithKeyUpHiddenByCmd["F".concat(i)]=!0;function keyupIsHiddenByCmd(s){return s.length===1||hasKey(KeysWithKeyUpHiddenByCmd,s)}var KeyCombinationMatcher=function(){function s(){_classCallCheck$1(this,s),this._actionConfigs={},this._order=null}return _createClass$1(s,[{key:"addMatch",value:function(e,a){if(this._includesMatcherForCombination(e.id)){var m=e.keyEventType,h=e.actionName,p=e.id;this._addHandlerToActionConfig(p,{keyEventType:m,actionName:h,handler:a})}else this._addNewActionConfig(e,a)}},{key:"findMatch",value:function(e,a,m){this._order||this._setOrder();var h=!0,p=!1,u=void 0;try{for(var c,f=this._order[Symbol.iterator]();!(h=(c=f.next()).done);h=!0){var n=c.value,t=this._actionConfigs[n];if(this._matchesActionConfig(e,a,m,t))return t}}catch(o){p=!0,u=o}finally{try{h||f.return==null||f.return()}finally{if(p)throw u}}return null}},{key:"toJSON",value:function(){return{actionConfigs:this._actionConfigs,order:this._order}}},{key:"_matchesActionConfig",value:function(e,a,m,h){if(!canBeMatched(e,h))return!1;var p=h.events[m];if(!p)return!1;var u=!1,c=Object.keys(h.keyDictionary).every(function(f){return!!e.isEventTriggered(f,m)&&(a&&a===e.getNormalizedKeyName(f)&&(u=!e.wasEventPreviouslyTriggered(f,m)),!0)});return c&&u}},{key:"_setOrder",value:function(){var e=Object.values(this._actionConfigs).reduce(function(a,m){var h=m.id,p=m.size;return a[p]||(a[p]=[]),a[p].push(h),a},{});this._order=Object.keys(e).sort(function(a,m){return m-a}).reduce(function(a,m){return a.concat(e[m])},[])}},{key:"_addNewActionConfig",value:function(e,a){var m=e.prefix,h=e.sequenceLength,p=e.id,u=e.keyDictionary,c=e.size,f=e.keyEventType,n=e.actionName;this._setCombinationMatcher(p,{prefix:m,sequenceLength:h,id:p,keyDictionary:u,size:c,events:{}}),this._addHandlerToActionConfig(p,{keyEventType:f,actionName:n,handler:a})}},{key:"_addHandlerToActionConfig",value:function(e,a){var m=a.keyEventType,h=a.actionName,p=a.handler,u=this._getCombinationMatcher(e);this._setCombinationMatcher(e,_objectSpread({},u,{events:_objectSpread({},u.events,_defineProperty({},m,{actionName:h,handler:p}))}))}},{key:"_setCombinationMatcher",value:function(e,a){this._actionConfigs[e]=a}},{key:"_getCombinationMatcher",value:function(e){return this._actionConfigs[e]}},{key:"_includesMatcherForCombination",value:function(e){return!!this._getCombinationMatcher(e)}}]),s}();function canBeMatched(s,r){var e=size(r.keyDictionary);return Configuration.option("allowCombinationSubmatches")||keyUpIsBeingHidden(s)?s.getNumberOfKeys()>=e:s.getNumberOfKeys()===e}function keyUpIsBeingHidden(s){return!!s.isKeyStillPressed("Meta")&&s.some(function(r){return keyupIsHiddenByCmd(r)})}var KeyHistoryMatcher=function(){function s(){_classCallCheck$1(this,s),this._combinationMatchers={},this._eventRecord=KeyEventStateArrayManager.newRecord()}return _createClass$1(s,[{key:"addMatch",value:function(e,a){var m=this._getOrCreateCombinationMatcher(e.prefix);m.addMatch(e,a),KeyEventStateArrayManager.setBit(this._eventRecord,e.keyEventType,KeyEventState.seen),(!this._longestSequence||this._longestSequence<e.sequenceLength)&&(this._longestSequence=e.sequenceLength)}},{key:"findMatch",value:function(e,a,m){var h=this._findCombinationMatcher(e);return h?h.findMatch(e.getCurrentCombination(),e.getCurrentCombination().getNormalizedKeyName(a),m):null}},{key:"hasMatchesForEventType",value:function(e){return!!this._eventRecord[e]}},{key:"getLongestSequence",value:function(){return this._longestSequence}},{key:"toJSON",value:function(){var e=this;return Object.keys(this._combinationMatchers).reduce(function(a,m){var h=e._combinationMatchers[m];return a[m]=h.toJSON(),a},{})}},{key:"_getOrCreateCombinationMatcher",value:function(e){return this._combinationMatchers[e]||(this._combinationMatchers[e]=new KeyCombinationMatcher),this._combinationMatchers[e]}},{key:"_findCombinationMatcher",value:function(e){var a=e.getMostRecentCombinations(this.getLongestSequence());if(a.length===0)return this._combinationMatchers[""];for(var m=a.map(function(d){return d.getIds()}),h=m.map(function(d){return d.length}),p=Array(m.length).fill(0),u=!1;!u;){var c=p.map(function(d,v){return m[v][d]}),f=c.join(" ");if(this._combinationMatchers[f])return this._combinationMatchers[f];for(var n=0,t=!0;t&&n<p.length;){var o=indexFromEnd(p,n),l=(o+1)%(indexFromEnd(h,n)||1);p[p.length-(n+1)]=l,t=l==0,t&&n++}u=n===p.length}}}]),s}(),ActionResolver=function(){function s(r){_classCallCheck$1(this,s),this._keyMapMatchers=[],this._unmatchedHandlerStatus=[],this._handlersDictionary={},this._keySequencesDictionary={};for(var e=r.getNewIterator();e.next();){var a=e.getComponent(),m=a.handlers;this._unmatchedHandlerStatus.push([Object.keys(m).length,{}]),this._keyMapMatchers.push(new KeyHistoryMatcher)}this._componentList=r,this._componentListIterator=r.getNewIterator()}return _createClass$1(s,[{key:"getKeyHistoryMatcher",value:function(e){if(this._componentHasUnmatchedHandlers(e))for(;this._componentListIterator.next();)this._addHandlersFromComponent(),this._addActionsFromComponent();return this._getKeyHistoryMatcher(e)}},{key:"componentHasActionsBoundToEventType",value:function(e,a){return this.getKeyHistoryMatcher(e).hasMatchesForEventType(a)}},{key:"findMatchingKeySequenceInComponent",value:function(e,a,m,h){return this.componentHasActionsBoundToEventType(e,h)?this.getKeyHistoryMatcher(e).findMatch(a,m,h):null}},{key:"_getKeyHistoryMatcher",value:function(e){return this._keyMapMatchers[e]}},{key:"_addActionsFromComponent",value:function(){var e=this,a=this._componentListIterator.getComponent(),m=a.actions;Object.keys(m).forEach(function(h){var p=e._getHandlers(h);if(p){var u=p[0],c=e._componentList.getAtPosition(u).handlers[h],f=e._getKeyHistoryMatcher(u),n=m[h];n.forEach(function(t){var o=[t.prefix,t.id].join(" ");e._isClosestHandlerFound(o,t)||(f.addMatch(t,c),e._addKeySequence(o,[u,t.keyEventType]))}),p.forEach(function(t){var o=e._getUnmatchedHandlerStatus(t);o[1][h]||(o[1][h]=!0,o[0]--)})}})}},{key:"_getHandlers",value:function(e){return this._handlersDictionary[e]}},{key:"_addHandlersFromComponent",value:function(){var e=this,a=this._componentListIterator.getComponent(),m=a.handlers;Object.keys(m).forEach(function(h){e._addHandler(h)})}},{key:"_addHandler",value:function(e){this._handlersDictionary[e]||(this._handlersDictionary[e]=[]),this._handlersDictionary[e].push(this._componentListIterator.getPosition())}},{key:"_addKeySequence",value:function(e,a){this._keySequencesDictionary[e]||(this._keySequencesDictionary[e]=[]),this._keySequencesDictionary[e].push(a)}},{key:"_componentHasUnmatchedHandlers",value:function(e){return 0<this._getUnmatchedHandlerStatus(e)[0]}},{key:"_getUnmatchedHandlerStatus",value:function(e){return this._unmatchedHandlerStatus[e]}},{key:"_isClosestHandlerFound",value:function(e,a){return this._keySequencesDictionary[e]&&this._keySequencesDictionary[e].some(function(m){return m[1]===a.keyEventType})}}]),s}();function copyAttributes(s,r,e){return e.forEach(function(a){hasKey(s,a)&&(r[a]=s[a])}),r}function describeKeyEventType(s){switch(parseInt(s,10)){case 0:return"keydown";case 1:return"keypress";default:return"keyup"}}function hasKeyPressEvent(s){return!isNonPrintableKeyName(s)}function stateFromEvent(s){return s.simulated?KeyEventState.simulated:KeyEventState.seen}var SEQUENCE_ATTRIBUTES=["sequence","action"],KEYMAP_ATTRIBUTES=["name","description","group"],AbstractKeyEventStrategy=function(){function s(){var r=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{},e=1<arguments.length?arguments[1]:void 0;_classCallCheck$1(this,s),this.logger=r.logger||new Logger$2("warn"),this.componentId=-1,this.keyEventManager=e,this._componentTree=new ComponentTree,this.rootComponentId=null,this._reset(),this.resetKeyHistory()}return _createClass$1(s,[{key:"_reset",value:function(){this.componentList=new ComponentOptionsList,this._initHandlerResolutionState()}},{key:"_newKeyHistory",value:function(){return new KeyHistory({maxLength:this.componentList.getLongestSequence()})}},{key:"getKeyHistory",value:function(){return this._keyHistory?this._keyHistory:(this._keyHistory=this._newKeyHistory(),this._keyHistory)}},{key:"_initHandlerResolutionState",value:function(){this._actionResolver=null}},{key:"resetKeyHistory",value:function(){var e=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{};this.keypressEventsToSimulate=[],this.keyupEventsToSimulate=[],this._keyHistory=this.getKeyHistory().any()&&!e.force?new KeyHistory({maxLength:this.componentList.getLongestSequence()},new KeyCombination(this.getCurrentCombination().keysStillPressedDict())):this._newKeyHistory()}},{key:"getApplicationKeyMap",value:function(){return this.rootComponentId===null?{}:this._buildApplicationKeyMap([this.rootComponentId],{})}},{key:"_buildApplicationKeyMap",value:function(e,a){var m=this;return e.forEach(function(h){var p=m._componentTree.get(h),u=p.childIds,c=p.keyMap;c&&Object.keys(c).forEach(function(f){var n=c[f];a[f]={},isObject$2(n)?hasKey(n,"sequences")?(copyAttributes(n,a[f],KEYMAP_ATTRIBUTES),a[f].sequences=m._createSequenceFromConfig(n.sequences)):(copyAttributes(n,a[f],KEYMAP_ATTRIBUTES),a[f].sequences=[copyAttributes(n,{},SEQUENCE_ATTRIBUTES)]):a[f].sequences=m._createSequenceFromConfig(n)}),m._buildApplicationKeyMap(u,a)}),a}},{key:"_createSequenceFromConfig",value:function(e){return arrayFrom(e).map(function(a){return isObject$2(a)?copyAttributes(a,{},SEQUENCE_ATTRIBUTES):{sequence:a}})}},{key:"registerKeyMap",value:function(e){return this.componentId+=1,this._componentTree.add(this.componentId,e),this.componentId}},{key:"reregisterKeyMap",value:function(e,a){this._componentTree.update(e,a)}},{key:"registerComponentMount",value:function(e,a){isUndefined(a)?this.rootComponentId=e:this._componentTree.setParent(e,a)}},{key:"deregisterKeyMap",value:function(e){this._componentTree.remove(e),e===this.rootComponentId&&(this.rootComponentId=null)}},{key:"_addComponent",value:function(e){var a=1<arguments.length&&arguments[1]!==void 0?arguments[1]:{},m=2<arguments.length&&arguments[2]!==void 0?arguments[2]:{},h=3<arguments.length?arguments[3]:void 0;this.componentList.add(e,a,m,h),this.getKeyHistory().setMaxLength(this.componentList.getLongestSequence())}},{key:"_allKeysAreReleased",value:function(){return this.getCurrentCombination().hasEnded()}},{key:"getCurrentCombination",value:function(){return this.getKeyHistory().getCurrentCombination()}},{key:"_shouldSimulate",value:function(e,a){var m=hasKeyPressEvent(a),h=this.getCurrentCombination();return e===KeyEventType.keypress?!m||m&&h.isKeyStillPressed("Meta"):e===KeyEventType.keyup&&keyupIsHiddenByCmd(a)&&h.isKeyReleased("Meta")}},{key:"_cloneAndMergeEvent",value:function(e,a){var m=Object.keys(ModifierFlagsDictionary).reduce(function(h,p){return h[p]=e[p],h},{});return _objectSpread({},m,a)}},{key:"_callClosestMatchingHandler",value:function(e,a,m,h,p){for(this._actionResolver||(this._actionResolver=new ActionResolver(this.componentList));p<=h;){this._actionResolver.getKeyHistoryMatcher(p);var u=this._actionResolver.findMatchingKeySequenceInComponent(p,this.getKeyHistory(),a,m);if(this.getCurrentCombination(),u){var c=u.events[m];return Configuration.option("allowCombinationSubmatches")&&KeyCombinationSerializer.serialize(u.keyDictionary),c.handler(e),this._stopEventPropagationAfterHandlingIfEnabled(e,p),!0}this._actionResolver.componentHasActionsBoundToEventType(p,m),p++}}},{key:"_stopEventPropagationAfterHandlingIfEnabled",value:function(e,a){return!!Configuration.option("stopEventPropagationAfterHandling")&&(this._stopEventPropagation(e,a),!0)}},{key:"_stopEventPropagation",value:function(){throw new Error("_stopEventPropagation must be overridden by a subclass")}},{key:"_checkForModifierFlagDiscrepancies",value:function(e,a,m){var h=this;Object.keys(ModifierFlagsDictionary).forEach(function(p){if(a!==p||m!==KeyEventType.keyup){var u=h.getCurrentCombination(),c=u.isKeyStillPressed(p);ModifierFlagsDictionary[p].forEach(function(f){e[f]===!1&&c&&u.setKeyState(p,KeyEventType.keyup,stateFromEvent(e))})}})}},{key:"_logPrefix",value:function(){}}]),s}(),KeyEventCounter=function(){function s(){_classCallCheck$1(this,s)}return _createClass$1(s,null,[{key:"getId",value:function(){return isUndefined(this._id)&&(this._id=0),this._id}},{key:"incrementId",value:function(){this._id=this.getId()+1}}]),s}();function getEventCharCode(s){var r,e=s.keyCode;return"charCode"in s?(r=s.charCode,r===0&&e===13&&(r=13)):r=e,r===10&&(r=13),32<=r||r===13?r:0}var normalizeKey={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"};function reactsGetEventKey(s){if(s.key){var r=normalizeKey[s.key]||s.key;if(r!=="Unidentified")return r}if(s.type==="keypress"){var e=getEventCharCode(s);return e===13?"Enter":String.fromCharCode(e)}return s.type==="keydown"||s.type==="keyup"?translateToKey[s.keyCode]||"Unidentified":""}function getKeyName(s){var r=function(){var e=Configuration.option("customKeyCodes"),a=s.keyCode||s.charCode;return hasKey(e,a)?e[a]:s.nativeEvent?s.key:reactsGetEventKey(s)}();return r==="+"?"plus":r}function isCmdKey(s){return s==="Meta"}var EventResponse={unseen:0,ignored:1,seen:2,recorded:3,handled:4},EventPropagator=function(){function s(r,e){var a=e.logger,m=e.logPrefix;_classCallCheck$1(this,s),this._componentList=r,this._previousPropagation=null,this.logger=a,this._logPrefix=m,this._reset()}return _createClass$1(s,[{key:"_reset",value:function(){this._previousPosition=-1,this._position=-1,this._actionHandled=!1,this._ignoreEvent=!1,this._observeIgnoredEvents=!1,this._stopping=!1,this._componentId=null,this._key=null,this._type=null}},{key:"isFirstPropagationStep",value:function(){var e=this.getPreviousPosition();return e===-1||e>=this._position}},{key:"isForKey",value:function(e){return this._key===e}},{key:"isForEventType",value:function(e){return this._type===e}},{key:"startNewPropagationStep",value:function(e,a,m,h){return this._position=this._componentList.getIndexById(e),this._componentId=e,this.isFirstPropagationStep()&&(KeyEventCounter.incrementId(),this._key=a.key,this._type=h),!(a.repeat&&Configuration.option("ignoreRepeatedEventsWhenKeyHeldDown"))||(this.ignoreEvent(a),!1)}},{key:"finishPropagationStep",value:function(){this.isStopped()||this._componentList.isRoot(this._componentId)?(this._previousPropagation=this._clone(),this._reset()):this._previousPosition=this._position}},{key:"getPreviousPropagation",value:function(){return this._previousPropagation||(this._previousPropagation=this._clone({copyState:!1})),this._previousPropagation}},{key:"getPreviousPosition",value:function(){return this._previousPosition}},{key:"observeIgnoredEvents",value:function(){this._observeIgnoredEvents=!0}},{key:"ignoreEvent",value:function(e){return this.setIgnoreEvent(!0),!!(this.isIgnoringEvent()&&Configuration.option("stopEventPropagationAfterIgnoring"))&&(this.stop(e),this.finishPropagationStep(),!0)}},{key:"setIgnoreEvent",value:function(e){this._ignoreEvent=e}},{key:"isIgnoringEvent",value:function(){return!this._observeIgnoredEvents&&this._ignoreEvent}},{key:"isStopped",value:function(){return this._stopping}},{key:"stop",value:function(e){return!this.isStopped()&&(this._stopping=!0,e.simulated||e.stopPropagation(),!0)}},{key:"isPendingPropagation",value:function(){var e=this.getPreviousPosition();return e!==-1&&e+1<this._position}},{key:"isHandled",value:function(){return this._actionHandled}},{key:"setHandled",value:function(){this._actionHandled=!0}},{key:"_clone",value:function(){var e=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{},a=e.copyState,m=new s(this._componentList,{logger:this.logger,logPrefix:this._logPrefix});return(a===void 0||a)&&Object.assign(m,this),m}}]),s}(),FocusOnlyKeyEventStrategy=function(s){function r(){var e,a=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{},m=1<arguments.length?arguments[1]:void 0;return _classCallCheck$1(this,r),e=_possibleConstructorReturn(this,_getPrototypeOf(r).call(this,a,m)),e.focusTreeId=0,e}return _inherits(r,s),_createClass$1(r,[{key:"_reset",value:function(){_get(_getPrototypeOf(r.prototype),"_reset",this).call(this),this.keypressEventsToSimulate=[],this.focusTreeId+=1,this.eventPropagator=new EventPropagator(this.componentList,{logger:this.logger,logPrefix:this._logPrefix.bind(this)})}},{key:"enableHotKeys",value:function(a){var m=1<arguments.length&&arguments[1]!==void 0?arguments[1]:{},h=2<arguments.length&&arguments[2]!==void 0?arguments[2]:{},p=3<arguments.length?arguments[3]:void 0;if(this.resetOnNextFocus&&(this._reset(),this.resetOnNextFocus=!1),!this.componentList.containsId(a))return this._addComponent(a,m,h,p),this.focusTreeId}},{key:"updateEnabledHotKeys",value:function(a,m){var h=2<arguments.length&&arguments[2]!==void 0?arguments[2]:{},p=3<arguments.length&&arguments[3]!==void 0?arguments[3]:{},u=4<arguments.length?arguments[4]:void 0;a===this.focusTreeId&&this.componentList.containsId(m)&&(this.componentList.update(m,h,p,u),this.getKeyHistory().setMaxLength(this.componentList.getLongestSequence()),this._initHandlerResolutionState())}},{key:"disableHotKeys",value:function(a,m){this.resetOnNextFocus||(this.resetOnNextFocus=!0);var h=this.eventPropagator.isPendingPropagation();return h}},{key:"handleKeydown",value:function(a,m,h){var p=3<arguments.length&&arguments[3]!==void 0?arguments[3]:{},u=getKeyName(a);if(m!==this.focusTreeId)return this.eventPropagator.ignoreEvent(a),!0;var c=this.eventPropagator.startNewPropagationStep(h,a,u,KeyEventType.keydown);if(c){var f=this._howToHandleKeyEvent(a,m,h,u,p,KeyEventType.keydown);if(f===EventResponse.handled){var n=stateFromEvent(a),t=this.getCurrentCombination();t.isKeyIncluded(u)||t.isEnding()?this._startAndLogNewKeyCombination(u,m,h,n):this._addToAndLogCurrentKeyCombination(u,KeyEventType.keydown,m,h,n),this._callHandlerIfActionNotHandled(a,u,KeyEventType.keydown,h,m)}return this._simulateKeyPressForNonPrintableKeys(a,u,m,h,p),this.eventPropagator.finishPropagationStep(),!1}}},{key:"_howToHandleKeyEvent",value:function(a,m,h,p,u,c){if(this.eventPropagator.isFirstPropagationStep()){if(u.ignoreEventsCondition(a)&&this.eventPropagator.ignoreEvent(a))return this._eventIsToBeIgnored(a,h,p,c);this._checkForModifierFlagDiscrepancies(a,p,c)}else if(this.eventPropagator.isIgnoringEvent())return this._eventIsToBeIgnored(a,h,p,c);return EventResponse.handled}},{key:"_eventIsToBeIgnored",value:function(a,m,h,p){return EventResponse.ignored}},{key:"handleKeyPress",value:function(a,m,h,p){var u=getKeyName(a),c=this.getCurrentCombination();if(c.isKeyPressSimulated(u))return this.eventPropagator.ignoreEvent(a),!0;var f=this.eventPropagator.startNewPropagationStep(h,a,u,KeyEventType.keypress);if(f){var n=m!==this.focusTreeId,t=this._howToHandleKeyEvent(a,m,h,u,p,KeyEventType.keypress);return this.eventPropagator.isFirstPropagationStep(h)&&c.isKeyIncluded(u)&&this._addToAndLogCurrentKeyCombination(u,KeyEventType.keypress,m,h,stateFromEvent(a)),t===EventResponse.handled&&this._callHandlerIfActionNotHandled(a,u,KeyEventType.keypress,h,m),this.eventPropagator.finishPropagationStep(),n}}},{key:"handleKeyUp",value:function(a,m,h,p){var u=getKeyName(a),c=this.getCurrentCombination();if(c.isKeyUpSimulated(u))return this.eventPropagator.ignoreEvent(a),!0;var f=this.eventPropagator.startNewPropagationStep(h,a,u,KeyEventType.keyup);if(f){var n=m!==this.focusTreeId,t=this._howToHandleKeyEvent(a,m,h,u,p,KeyEventType.keyup);return this.eventPropagator.isFirstPropagationStep(h)&&c.isKeyIncluded(u)&&this._addToAndLogCurrentKeyCombination(u,KeyEventType.keyup,m,h,stateFromEvent(a)),t===EventResponse.handled&&this._callHandlerIfActionNotHandled(a,u,KeyEventType.keyup,h,m),this._simulateKeyUpEventsHiddenByCmd(a,u,m,h,p),this.eventPropagator.finishPropagationStep(),n}}},{key:"closeHangingKeyCombination",value:function(a,m){var h=this.getCurrentCombination();h.isKeyIncluded(a)&&!h.isEventTriggered(a,m)&&h.setKeyState(a,m,KeyEventState.simulated)}},{key:"_simulateKeyPressForNonPrintableKeys",value:function(a,m,h,p,u){this._handleEventSimulation("keypressEventsToSimulate","simulatePendingKeyPressEvents",this._shouldSimulate(KeyEventType.keypress,m),{event:a,key:m,focusTreeId:h,componentId:p,options:u})}},{key:"_simulateKeyUpEventsHiddenByCmd",value:function(a,m,h,p,u){var c=this;isCmdKey(m)&&this.getCurrentCombination().forEachKey(function(f){isCmdKey(f)||c._handleEventSimulation("keyupEventsToSimulate","simulatePendingKeyUpEvents",c._shouldSimulate(KeyEventType.keyup,f),{event:a,key:f,focusTreeId:h,componentId:p,options:u})})}},{key:"_stopEventPropagation",value:function(a,m){this.eventPropagator.stop(a)}},{key:"getEventPropagator",value:function(){return this.eventPropagator}},{key:"_startAndLogNewKeyCombination",value:function(a,m,h,p){this.getKeyHistory().startNewKeyCombination(a,p)}},{key:"_addToAndLogCurrentKeyCombination",value:function(a,m,h,p,u){this.getKeyHistory().addKeyToCurrentCombination(a,m,u)}},{key:"_handleEventSimulation",value:function(a,m,h,p){var u=p.event,c=p.key,f=p.focusTreeId,n=p.componentId,t=p.options;if(h&&Configuration.option("simulateMissingKeyPressEvents")){var o=this._cloneAndMergeEvent(u,{key:c,simulated:!0});this[a].push({event:o,focusTreeId:f,componentId:n,options:t})}(this.componentList.isRoot(n)||this.eventPropagator.isStopped())&&!this.keyEventManager.isGlobalListenersBound()&&this[m]()}},{key:"simulatePendingKeyPressEvents",value:function(){this._simulatePendingKeyEvents("keypressEventsToSimulate","handleKeyPress")}},{key:"simulatePendingKeyUpEvents",value:function(){this._simulatePendingKeyEvents("keyupEventsToSimulate","handleKeyUp")}},{key:"_simulatePendingKeyEvents",value:function(a,m){var h=this;0<this[a].length&&KeyEventCounter.incrementId(),this[a].forEach(function(p){var u=p.event,c=p.focusTreeId,f=p.componentId,n=p.options;h[m](u,c,f,n)}),this[a]=[]}},{key:"_callHandlerIfActionNotHandled",value:function(a,m,h,p,u){if(this.getCurrentCombination().describe(),!!this.componentList.anyActionsForEventType(h)&&!this.eventPropagator.isHandled()){var c=this.eventPropagator.getPreviousPosition(),f=this.componentList.getIndexById(p),n=this._callClosestMatchingHandler(a,m,h,f,c===-1?0:c);n&&this.eventPropagator.setHandled()}}},{key:"_logPrefix",value:function(a){var m=1<arguments.length&&arguments[1]!==void 0?arguments[1]:{},h=Logger$2.logIcons,p=Logger$2.eventIcons,u=Logger$2.componentIcons,c="HotKeys (";if(m.focusTreeId!==!1){var f=isUndefined(m.focusTreeId)?this.focusTreeId:m.focusTreeId;c+="F".concat(f).concat(h[f%h.length],"-")}if(m.eventId!==!1){var n=isUndefined(m.eventId)?KeyEventCounter.getId():m.eventId;c+="E".concat(n).concat(p[n%p.length],"-")}c+="C".concat(a).concat(u[a%u.length]);var t=this.componentList.getIndexById(a);return isUndefined(t)||(c+="-P".concat(t).concat(u[t%u.length],":")),"".concat(c,")")}}]),r}(AbstractKeyEventStrategy);function contains(s,r){var e=2<arguments.length&&arguments[2]!==void 0?arguments[2]:{};return Array.isArray(s)||isString(s)?e.stringifyFirst?!isUndefined(s.find(function(a){return a.toString()===r.toString()})):s.indexOf(r)!==-1:isObject$2(s)?hasKey(s,r):e.stringifyFirst?s.toString()===r.toString():s===r}function capitalize(s){return s.replace(/\b\w/g,function(r){return r.toUpperCase()})}function normalizeEventName(s){return"".concat(capitalize(s.slice(0,3))).concat(capitalize(s.slice(3)))}var GlobalKeyEventStrategy=function(s){function r(){var e,a=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{},m=1<arguments.length?arguments[1]:void 0;return _classCallCheck$1(this,r),e=_possibleConstructorReturn(this,_getPrototypeOf(r).call(this,a,m)),e.listenersBound=!1,e.eventOptions={ignoreEventsCondition:Configuration.option("ignoreEventsCondition")},e.listeners={},e}return _inherits(r,s),_createClass$1(r,[{key:"enableHotKeys",value:function(a){var m=1<arguments.length&&arguments[1]!==void 0?arguments[1]:{},h=2<arguments.length&&arguments[2]!==void 0?arguments[2]:{},p=3<arguments.length?arguments[3]:void 0,u=4<arguments.length?arguments[4]:void 0;this.eventOptions=u,this._addComponent(a,m,h,p),this._updateDocumentHandlers(),this._initHandlerResolutionState()}},{key:"updateEnabledHotKeys",value:function(a){var m=1<arguments.length&&arguments[1]!==void 0?arguments[1]:{},h=2<arguments.length&&arguments[2]!==void 0?arguments[2]:{},p=3<arguments.length?arguments[3]:void 0,u=4<arguments.length?arguments[4]:void 0;this.eventOptions=u,this.componentList.update(a,m,h,p),this.getKeyHistory().setMaxLength(this.componentList.getLongestSequence()),this._updateDocumentHandlers(),this._initHandlerResolutionState()}},{key:"disableHotKeys",value:function(a){this.componentList.remove(a),this.getKeyHistory().setMaxLength(this.componentList.getLongestSequence()),this._updateDocumentHandlers(),this._initHandlerResolutionState()}},{key:"_updateDocumentHandlers",value:function(){var a=this,m=this._listenersShouldBeBound();!this.listenersBound&&m?(Object.values(KeyEventType).forEach(function(h){var p=describeKeyEventType(h);document["on".concat(p)]=function(u){a.keyEventManager["handleGlobal".concat(normalizeEventName(p))](u)}}),this.listenersBound=!0):this.listenersBound&&!m&&(Object.values(KeyEventType).forEach(function(h){var p=describeKeyEventType(h);delete document["on".concat(p)]}),this.listenersBound=!1)}},{key:"_listenersShouldBeBound",value:function(){return this.componentList.any()||this.listeners.keyCombination}},{key:"handleKeydown",value:function(a){var m=getKeyName(a);if(a.repeat&&Configuration.option("ignoreRepeatedEventsWhenKeyHeldDown"))return!0;this._checkForModifierFlagDiscrepancies(a,m,KeyEventType.keydown);var h=this._howReactAppRespondedTo(a,m,KeyEventType.keydown);if(!(h===EventResponse.unseen&&this.eventOptions.ignoreEventsCondition(a))){if(h!==EventResponse.ignored){var p=stateFromEvent(a),u=this.getCurrentCombination();u.isKeyIncluded(m)||u.isEnding()?this._startAndLogNewKeyCombination(m,p):this._addToAndLogCurrentKeyCombination(m,KeyEventType.keydown,p)}contains([EventResponse.ignored,EventResponse.handled],h)||this._callHandlerIfExists(a,m,KeyEventType.keydown),this._simulateKeyPressForNonPrintableKeys(a,m)}}},{key:"_howReactAppRespondedTo",value:function(a,m,h){var p=this.keyEventManager.reactAppHistoryWithEvent(m,h);return p===EventResponse.handled||p===EventResponse.ignored||p===EventResponse.seen||KeyEventCounter.incrementId(),p}},{key:"handleKeyPress",value:function(a){var m=getKeyName(a);if(a.repeat&&Configuration.option("ignoreRepeatedEventsWhenKeyHeldDown"))return!0;var h=this.getCurrentCombination();if(h.isKeyPressSimulated(m))return!0;var p=this._howReactAppRespondedTo(a,m,KeyEventType.keypress);return h.isKeyIncluded(m)&&this._addToAndLogCurrentKeyCombination(m,KeyEventType.keypress,stateFromEvent(a)),p===EventResponse.unseen&&(this.keyEventManager.closeHangingKeyCombination(m,KeyEventType.keypress),this.eventOptions.ignoreEventsCondition(a))?void 0:void(!contains([EventResponse.ignored,EventResponse.handled],p)&&this._callHandlerIfExists(a,m,KeyEventType.keypress))}},{key:"handleKeyUp",value:function(a){var m=getKeyName(a),h=this.getCurrentCombination();if(h.isKeyUpSimulated(m))return!0;var p=this._howReactAppRespondedTo(a,m,KeyEventType.keyup);h.isKeyIncluded(m)&&this._addToAndLogCurrentKeyCombination(m,KeyEventType.keyup,stateFromEvent(a)),p===EventResponse.unseen?(this.keyEventManager.closeHangingKeyCombination(m,KeyEventType.keyup),this.eventOptions.ignoreEventsCondition(a)||!contains([EventResponse.ignored,EventResponse.handled],p)&&this._callHandlerIfExists(a,m,KeyEventType.keyup)):!contains([EventResponse.ignored,EventResponse.handled],p)&&this._callHandlerIfExists(a,m,KeyEventType.keyup),this._simulateKeyUpEventsHiddenByCmd(a,m),this.listeners.keyCombination&&this._allKeysAreReleased()&&this.listeners.keyCombination({keys:h.getKeyDictionary(),id:h.describe()})}},{key:"_simulateKeyPressForNonPrintableKeys",value:function(a,m){this.keyEventManager.simulatePendingKeyPressEvents(),this._handleEventSimulation("handleKeyPress",this._shouldSimulate(KeyEventType.keypress,m),{event:a,key:m})}},{key:"_simulateKeyUpEventsHiddenByCmd",value:function(a,m){var h=this;isCmdKey(m)&&(this.keyEventManager.simulatePendingKeyUpEvents(),this.getCurrentCombination().forEachKey(function(p){isCmdKey(p)||h._handleEventSimulation("handleKeyUp",h._shouldSimulate(KeyEventType.keyup,p),{event:a,key:p})}))}},{key:"_startAndLogNewKeyCombination",value:function(a,m){this.getKeyHistory().startNewKeyCombination(a,m)}},{key:"_addToAndLogCurrentKeyCombination",value:function(a,m,h){this.getKeyHistory().addKeyToCurrentCombination(a,m,h)}},{key:"_handleEventSimulation",value:function(a,m,h){var p=h.event,u=h.key;if(m&&Configuration.option("simulateMissingKeyPressEvents")){var c=this._cloneAndMergeEvent(p,{key:u,simulated:!0});this[a](c)}}},{key:"_callHandlerIfExists",value:function(a,m,h){return this.getCurrentCombination().describe(),this.componentList.anyActionsForEventType(h)?void this._callClosestMatchingHandler(a,m,h):void 0}},{key:"_callClosestMatchingHandler",value:function(a,m,h){for(var p,u=this.componentList.getNewIterator();u.next();)if(p=_get(_getPrototypeOf(r.prototype),"_callClosestMatchingHandler",this).call(this,a,m,h,u.getPosition(),0),p)return}},{key:"_stopEventPropagation",value:function(a,m){a.simulated||a.stopPropagation()}},{key:"addKeyCombinationListener",value:function(a){var m=this,h=function(){delete m.listeners.keyCombination};return this.listeners.keyCombination=function(p){a(p),h()},this._updateDocumentHandlers(),h}},{key:"_logPrefix",value:function(a){var m=1<arguments.length&&arguments[1]!==void 0?arguments[1]:{},h=Logger$2.eventIcons,p=Logger$2.componentIcons,u="HotKeys (GLOBAL";if(m.eventId!==!1){var c=isUndefined(m.eventId)?KeyEventCounter.getId():m.eventId;u="".concat(u,"-E").concat(c).concat(h[c%h.length])}return isUndefined(a)?"".concat(u,"):"):"".concat(u,"-C").concat(a).concat(p[a%p.length],"):")}}]),r}(AbstractKeyEventStrategy);function isFromFocusOnlyComponent(s){return!isUndefined(s)}var KeyEventManager=function(){function s(){var r=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{};_classCallCheck$1(this,s),this.logger=r.logger||new Logger$2(Configuration.option("logLevel")),this._focusOnlyEventStrategy=new FocusOnlyKeyEventStrategy({configuration:r,logger:this.logger},this),this._globalEventStrategy=new GlobalKeyEventStrategy({configuration:r,logger:this.logger},this),this.mountedComponentsCount=0}return _createClass$1(s,null,[{key:"getInstance",value:function(){var e=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{};return this.instance||(this.instance=new s(e)),this.instance}},{key:"clear",value:function(){delete this.instance}}]),_createClass$1(s,[{key:"getApplicationKeyMap",value:function(){return Object.assign(this._globalEventStrategy.getApplicationKeyMap(),this._focusOnlyEventStrategy.getApplicationKeyMap())}},{key:"registerKeyMap",value:function(){var e=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{};return this._focusOnlyEventStrategy.registerKeyMap(e)}},{key:"reregisterKeyMap",value:function(e){var a=1<arguments.length&&arguments[1]!==void 0?arguments[1]:{};this._focusOnlyEventStrategy.reregisterKeyMap(e,a)}},{key:"deregisterKeyMap",value:function(e){this._focusOnlyEventStrategy.deregisterKeyMap(e)}},{key:"registerComponentMount",value:function(e,a){return this._incrementComponentCount(),this._focusOnlyEventStrategy.registerComponentMount(e,a)}},{key:"registerComponentUnmount",value:function(){this._decrementComponentCount()}},{key:"_incrementComponentCount",value:function(){var e=this,a=this.mountedComponentsCount;this.mountedComponentsCount+=1,a===0&&this.mountedComponentsCount===1&&(window.onblur=function(){return e._clearKeyHistory()})}},{key:"_decrementComponentCount",value:function(){var e=this.mountedComponentsCount;this.mountedComponentsCount-=1,e===1&&this.mountedComponentsCount===0&&delete window.onblur}},{key:"_clearKeyHistory",value:function(){this._focusOnlyEventStrategy.resetKeyHistory({force:!0}),this._globalEventStrategy.resetKeyHistory({force:!0})}},{key:"registerGlobalKeyMap",value:function(){var e=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{};return this._globalEventStrategy.registerKeyMap(e)}},{key:"registerGlobalComponentUnmount",value:function(){this._decrementComponentCount()}},{key:"registerGlobalComponentMount",value:function(e,a){return this._incrementComponentCount(),this._globalEventStrategy.registerComponentMount(e,a)}},{key:"reregisterGlobalKeyMap",value:function(e,a){this._globalEventStrategy.reregisterKeyMap(e,a)}},{key:"deregisterGlobalKeyMap",value:function(e){this._globalEventStrategy.deregisterKeyMap(e)}},{key:"addKeyCombinationListener",value:function(e){return this._globalEventStrategy.addKeyCombinationListener(e)}},{key:"enableHotKeys",value:function(e){var a=1<arguments.length&&arguments[1]!==void 0?arguments[1]:{},m=2<arguments.length&&arguments[2]!==void 0?arguments[2]:{},h=3<arguments.length?arguments[3]:void 0;return this._focusOnlyEventStrategy.enableHotKeys(e,a,m,h)}},{key:"updateEnabledHotKeys",value:function(e,a){var m=2<arguments.length&&arguments[2]!==void 0?arguments[2]:{},h=3<arguments.length&&arguments[3]!==void 0?arguments[3]:{},p=4<arguments.length?arguments[4]:void 0;return this._focusOnlyEventStrategy.updateEnabledHotKeys(e,a,m,h,p)}},{key:"disableHotKeys",value:function(e,a){return this._focusOnlyEventStrategy.disableHotKeys(e,a)}},{key:"handleKeydown",value:function(e,a,m,h){if(isFromFocusOnlyComponent(a))return this._focusOnlyEventStrategy.handleKeydown(e,a,m,h)}},{key:"handleKeyPress",value:function(e,a,m,h){if(isFromFocusOnlyComponent(a))return this._focusOnlyEventStrategy.handleKeyPress(e,a,m,h)}},{key:"handleKeyUp",value:function(e,a,m,h){if(isFromFocusOnlyComponent(a))return this._focusOnlyEventStrategy.handleKeyUp(e,a,m,h)}},{key:"enableGlobalHotKeys",value:function(e){var a=1<arguments.length&&arguments[1]!==void 0?arguments[1]:{},m=2<arguments.length&&arguments[2]!==void 0?arguments[2]:{},h=3<arguments.length?arguments[3]:void 0,p=4<arguments.length?arguments[4]:void 0;return this._globalEventStrategy.enableHotKeys(e,a,m,h,p)}},{key:"updateEnabledGlobalHotKeys",value:function(e){var a=1<arguments.length&&arguments[1]!==void 0?arguments[1]:{},m=2<arguments.length&&arguments[2]!==void 0?arguments[2]:{},h=3<arguments.length?arguments[3]:void 0,p=4<arguments.length?arguments[4]:void 0;return this._globalEventStrategy.updateEnabledHotKeys(e,a,m,h,p)}},{key:"disableGlobalHotKeys",value:function(e){return this._globalEventStrategy.disableHotKeys(e)}},{key:"handleGlobalKeyDown",value:function(e){return this._globalEventStrategy.handleKeydown(e)}},{key:"handleGlobalKeyPress",value:function(e){return this._globalEventStrategy.handleKeyPress(e)}},{key:"handleGlobalKeyUp",value:function(e){return this._globalEventStrategy.handleKeyUp(e)}},{key:"ignoreEvent",value:function(e){this._focusOnlyEventStrategy.getEventPropagator().ignoreEvent(e)}},{key:"observeIgnoredEvents",value:function(e){this._focusOnlyEventStrategy.getEventPropagator().observeIgnoredEvents(e)}},{key:"closeHangingKeyCombination",value:function(e,a){this._focusOnlyEventStrategy.closeHangingKeyCombination(e,a)}},{key:"reactAppHistoryWithEvent",value:function(e,a){var m=this._focusOnlyEventStrategy.eventPropagator.getPreviousPropagation();return m.isForKey(e)&&m.isForEventType(a)?m.isHandled()?EventResponse.handled:m.isIgnoringEvent()?EventResponse.ignored:EventResponse.seen:EventResponse.unseen}},{key:"simulatePendingKeyPressEvents",value:function(){this._focusOnlyEventStrategy.simulatePendingKeyPressEvents()}},{key:"simulatePendingKeyUpEvents",value:function(){this._focusOnlyEventStrategy.simulatePendingKeyUpEvents()}},{key:"isGlobalListenersBound",value:function(){return this._globalEventStrategy.listenersBound}}]),s}();function backwardsCompatibleContext(s,r){var e=r.deprecatedAPI,a=e.contextTypes,m=e.childContextTypes,h=r.newAPI.contextType;if(typeof React$3.createContext>"u")s.contextTypes=a,s.childContextTypes=m,s.prototype.getChildContext=function(){return this._childContext};else{var p=React$3.createContext(h);s.contextType=p,s.prototype._originalRender=s.prototype.render,s.prototype.render=function(){var u=this._originalRender();return u?React$3.createElement(p.Provider,{value:this._childContext},u):null}}return s}function withHotKeys(s){function r(p,u){return _objectSpread({},m[p]||{},u[p]||{})}function e(p){return r("handlers",p)}function a(p){return r("keyMap",p)}var m=1<arguments.length&&arguments[1]!==void 0?arguments[1]:{},h=function(p){function u(c){var f;return _classCallCheck$1(this,u),f=_possibleConstructorReturn(this,_getPrototypeOf(u).call(this,c)),f._handleFocus=f._handleFocus.bind(_assertThisInitialized(_assertThisInitialized(f))),f._handleBlur=f._handleBlur.bind(_assertThisInitialized(_assertThisInitialized(f))),f._handleKeyDown=f._handleKeyDown.bind(_assertThisInitialized(_assertThisInitialized(f))),f._handleKeyPress=f._handleKeyPress.bind(_assertThisInitialized(_assertThisInitialized(f))),f._handleKeyUp=f._handleKeyUp.bind(_assertThisInitialized(_assertThisInitialized(f))),f._componentIsFocused=f._componentIsFocused.bind(_assertThisInitialized(_assertThisInitialized(f))),f._id=KeyEventManager.getInstance().registerKeyMap(c.keyMap),f._childContext={hotKeysParentId:f._id},f}return _inherits(u,p),_createClass$1(u,[{key:"render",value:function(){var f=this.props;f.keyMap,f.handlers,f.allowChanges,f.root;var n=_objectWithoutProperties(f,["keyMap","handlers","allowChanges","root"]),t={onFocus:this._wrapFunction("onFocus",this._handleFocus),onBlur:this._wrapFunction("onBlur",this._handleBlur),tabIndex:Configuration.option("defaultTabIndex")};return this._shouldBindKeyListeners()&&(t.onKeyDown=this._handleKeyDown,t.onKeyPress=this._handleKeyPress,t.onKeyUp=this._handleKeyUp),React$3.createElement(s,_extends({hotKeys:t},n))}},{key:"_shouldBindKeyListeners",value:function(){var f=a(this.props);return!isEmpty(f)||this.props.root||Configuration.option("enableHardSequences")&&this._handlersIncludeHardSequences(f,e(this.props))}},{key:"_handlersIncludeHardSequences",value:function(f,n){return Object.keys(n).some(function(t){return!f[t]&&KeyCombinationSerializer.isValidKeySerialization(t)})}},{key:"_wrapFunction",value:function(f,n){var t=this;return typeof this.props[f]=="function"?function(o){t.props[f](o),n(o)}:n}},{key:"_focusTreeIdsPush",value:function(f){this._focusTreeIds||(this._focusTreeIds=[]),this._focusTreeIds.push(f)}},{key:"_focusTreeIdsShift",value:function(){this._focusTreeIds&&this._focusTreeIds.shift()}},{key:"_getFocusTreeId",value:function(){if(this._focusTreeIds)return this._focusTreeIds[0]}},{key:"componentDidUpdate",value:function(){var f=KeyEventManager.getInstance();if(f.reregisterKeyMap(this._id,this.props.keyMap),this._componentIsFocused()&&(this.props.allowChanges||!Configuration.option("ignoreKeymapAndHandlerChangesByDefault"))){var n=this.props,t=n.keyMap,o=n.handlers;f.updateEnabledHotKeys(this._getFocusTreeId(),this._id,t,o,this._getComponentOptions())}}},{key:"_componentIsFocused",value:function(){return this._focused===!0}},{key:"componentDidMount",value:function(){var f=KeyEventManager.getInstance(),n=this.context.hotKeysParentId;f.registerComponentMount(this._id,n)}},{key:"_handleFocus",value:function(){if(this.props.onFocus){var f;(f=this.props).onFocus.apply(f,arguments)}var n=KeyEventManager.getInstance().enableHotKeys(this._id,a(this.props),e(this.props),this._getComponentOptions());isUndefined(n)||this._focusTreeIdsPush(n),this._focused=!0}},{key:"componentWillUnmount",value:function(){var f=KeyEventManager.getInstance();f.deregisterKeyMap(this._id),f.registerComponentUnmount(),this._handleBlur()}},{key:"_handleBlur",value:function(){if(this.props.onBlur){var f;(f=this.props).onBlur.apply(f,arguments)}var n=KeyEventManager.getInstance().disableHotKeys(this._getFocusTreeId(),this._id);n||this._focusTreeIdsShift(),this._focused=!1}},{key:"_handleKeyDown",value:function(f){var n=KeyEventManager.getInstance().handleKeydown(f,this._getFocusTreeId(),this._id,this._getEventOptions());n&&this._focusTreeIdsShift()}},{key:"_handleKeyPress",value:function(f){var n=KeyEventManager.getInstance().handleKeyPress(f,this._getFocusTreeId(),this._id,this._getEventOptions());n&&this._focusTreeIdsShift()}},{key:"_handleKeyUp",value:function(f){var n=KeyEventManager.getInstance().handleKeyUp(f,this._getFocusTreeId(),this._id,this._getEventOptions());n&&this._focusTreeIdsShift()}},{key:"_getComponentOptions",value:function(){return{defaultKeyEvent:Configuration.option("defaultKeyEvent")}}},{key:"_getEventOptions",value:function(){return{ignoreEventsCondition:Configuration.option("ignoreEventsCondition")}}}]),u}(reactExports.PureComponent);return _defineProperty(h,"propTypes",{keyMap:PropTypes$3.object,handlers:PropTypes$3.object,onFocus:PropTypes$3.func,onBlur:PropTypes$3.func,allowChanges:PropTypes$3.bool,root:PropTypes$3.bool}),backwardsCompatibleContext(h,{deprecatedAPI:{contextTypes:{hotKeysParentId:PropTypes$3.number},childContextTypes:{hotKeysParentId:PropTypes$3.number}},newAPI:{contextType:{hotKeysParentId:void 0}}})}var HotKeysWrapper=function(s){function r(){return _classCallCheck$1(this,r),_possibleConstructorReturn(this,_getPrototypeOf(r).apply(this,arguments))}return _inherits(r,s),_createClass$1(r,[{key:"render",value:function(){var a=this.props,m=a.hotKeys,h=a.innerRef,p=a.component,u=_objectWithoutProperties(a,["hotKeys","innerRef","component"]),c=p||Configuration.option("defaultComponent");return React$3.createElement(c,_objectSpread({},m,{ref:h},u))}}]),r}(reactExports.Component),HotKeys=withHotKeys(HotKeysWrapper);HotKeys.propTypes={innerRef:PropTypes$3.oneOfType([PropTypes$3.object,PropTypes$3.func])};var GlobalHotKeys=function(s){function r(e){var a;return _classCallCheck$1(this,r),a=_possibleConstructorReturn(this,_getPrototypeOf(r).call(this,e)),a._id=KeyEventManager.getInstance().registerGlobalKeyMap(e.keyMap),a._childContext={globalHotKeysParentId:a._id},a}return _inherits(r,s),_createClass$1(r,[{key:"render",value:function(){return this.props.children||null}},{key:"componentDidUpdate",value:function(){var a=KeyEventManager.getInstance();if(a.reregisterGlobalKeyMap(this._id,this.props.keyMap),this.props.allowChanges||!Configuration.option("ignoreKeymapAndHandlerChangesByDefault")){var m=this.props,h=m.keyMap,p=m.handlers;a.updateEnabledGlobalHotKeys(this._id,h,p,this._getComponentOptions(),this._getEventOptions())}}},{key:"componentDidMount",value:function(){var a=this.props,m=a.keyMap,h=a.handlers,p=this.context.globalHotKeysParentId,u=KeyEventManager.getInstance();u.registerGlobalComponentMount(this._id,p),u.enableGlobalHotKeys(this._id,m,h,this._getComponentOptions(),this._getEventOptions())}},{key:"componentWillUnmount",value:function(){var a=KeyEventManager.getInstance();a.deregisterGlobalKeyMap(this._id),a.disableGlobalHotKeys(this._id),a.registerGlobalComponentUnmount()}},{key:"_getComponentOptions",value:function(){return{defaultKeyEvent:Configuration.option("defaultKeyEvent")}}},{key:"_getEventOptions",value:function(){return{ignoreEventsCondition:Configuration.option("ignoreEventsCondition")}}}]),r}(reactExports.Component);_defineProperty(GlobalHotKeys,"propTypes",{keyMap:PropTypes$3.object,handlers:PropTypes$3.object,allowChanges:PropTypes$3.bool});var GlobalHotKeys$1=backwardsCompatibleContext(GlobalHotKeys,{deprecatedAPI:{contextTypes:{globalHotKeysParentId:PropTypes$3.number},childContextTypes:{globalHotKeysParentId:PropTypes$3.number}},newAPI:{contextType:{globalHotKeysParentId:void 0}}});function withHotKeysIgnoreOverride(s){var r,e,a=1<arguments.length&&arguments[1]!==void 0?arguments[1]:{only:[],except:[]},m=2<arguments.length?arguments[2]:void 0;return e=r=function(h){function p(u){var c;return _classCallCheck$1(this,p),c=_possibleConstructorReturn(this,_getPrototypeOf(p).call(this,u)),c._handleKeyEvent=c._handleKeyEvent.bind(_assertThisInitialized(_assertThisInitialized(c))),c._reloadDictionaries=c._reloadDictionaries.bind(_assertThisInitialized(_assertThisInitialized(c))),c}return _inherits(p,h),_createClass$1(p,[{key:"render",value:function(){var c=this.props;c.only,c.except;var f=_objectWithoutProperties(c,["only","except"]),n={onKeyDown:this._handleKeyEvent,onKeyPress:this._handleKeyEvent,onKeyUp:this._handleKeyEvent,onFocus:this._reloadDictionaries};return React$3.createElement(s,_extends({hotKeys:n},f))}},{key:"_reloadDictionaries",value:function(){var c=this.props,f=c.only,n=c.except;this._onlyDict=keyDictionary(f),this._exceptDict=keyDictionary(n)}},{key:"_shouldIgnoreEvent",value:function(c){var f=c.key;return isEmpty(this._onlyDict)?!!isEmpty(this._exceptDict)||!hasKey(this._exceptDict,f):isEmpty(this._exceptDict)?hasKey(this._onlyDict,f):hasKey(this._onlyDict,f)&&!hasKey(this._exceptDict,f)}},{key:"_handleKeyEvent",value:function(c){this._shouldIgnoreEvent(c)&&KeyEventManager.getInstance()[m](c)}}]),p}(reactExports.PureComponent),_defineProperty(r,"propTypes",{only:PropTypes$3.oneOfType([PropTypes$3.string,PropTypes$3.arrayOf(PropTypes$3.string)]),except:PropTypes$3.oneOfType([PropTypes$3.string,PropTypes$3.arrayOf(PropTypes$3.string)])}),_defineProperty(r,"defaultProps",a),e}function keyDictionary(s){return arrayFrom(s).reduce(function(r,e){var a=standardizeKeyName(e);if(!isValidKey(a))throw new InvalidKeyNameError(e);return[resolveAltShiftedAlias,resolveUnaltShiftedAlias,resolveShiftedAlias,resolveUnshiftedAlias,resolveAltedAlias,resolveUnaltedAlias].forEach(function(m){r[m(a)]=!0}),r},{})}var IgnoreKeys=function(s){function r(){return _classCallCheck$1(this,r),_possibleConstructorReturn(this,_getPrototypeOf(r).apply(this,arguments))}return _inherits(r,s),_createClass$1(r,[{key:"render",value:function(){var a=this.props,m=a.hotKeys,h=_objectWithoutProperties(a,["hotKeys"]),p=h.component||Configuration.option("defaultComponent");return React$3.createElement(p,_objectSpread({},m,h))}}]),r}(reactExports.Component),IgnoreKeys$1=withHotKeysIgnoreOverride(IgnoreKeys,{},"ignoreEvent"),ObserveKeys=function(s){function r(){return _classCallCheck$1(this,r),_possibleConstructorReturn(this,_getPrototypeOf(r).apply(this,arguments))}return _inherits(r,s),_createClass$1(r,[{key:"render",value:function(){var a=this.props,m=a.hotKeys,h=_objectWithoutProperties(a,["hotKeys"]),p=h.component||Configuration.option("defaultComponent");return React$3.createElement(p,_objectSpread({},m,h))}}]),r}(reactExports.Component),ObserveKeys$1=withHotKeysIgnoreOverride(ObserveKeys,{},"observeIgnoredEvents");function withIgnoreKeys(s){var r=1<arguments.length&&arguments[1]!==void 0?arguments[1]:{only:[],except:[]};return withHotKeysIgnoreOverride(s,r,"ignoreEvent")}function withObserveKeys(s){var r=1<arguments.length&&arguments[1]!==void 0?arguments[1]:{only:[],except:[]};return withHotKeysIgnoreOverride(s,r,"observeIgnoredEvents")}function configure(){var s=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{};Configuration.init(s)}function getApplicationKeyMap(){return KeyEventManager.getInstance().getApplicationKeyMap()}function recordKeyCombination(s){var r=KeyEventManager.getInstance();return r.addKeyCombinationListener(s)}const reactHotkeys_production_min=Object.freeze(Object.defineProperty({__proto__:null,GlobalHotKeys:GlobalHotKeys$1,HotKeys,IgnoreKeys:IgnoreKeys$1,ObserveKeys:ObserveKeys$1,configure,getApplicationKeyMap,recordKeyCombination,withHotKeys,withIgnoreKeys,withObserveKeys},Symbol.toStringTag,{value:"Module"})),require$$0$1=getAugmentedNamespace(reactHotkeys_production_min);index_es.exports=require$$0$1;var index_esExports=index_es.exports;const ControlBarRunButton=s=>{const r=s.isEntrypointFileDefined?"...or press shift-enter in the editor":"Open a file to evaluate the program with the file as the entrypoint";return jsxRuntimeExports.jsx(Tooltip2,{content:r,placement:Position.TOP,children:jsxRuntimeExports.jsx(ControlButton,{label:"Run",icon:IconNames.PLAY,onClick:s.handleEditorEval,options:{iconColor:s.color,className:s.className},isDisabled:!s.isEntrypointFileDefined})})},ControlBarClearButton=({handleReplOutputClear:s})=>jsxRuntimeExports.jsx(ControlButton,{label:"Clear",icon:IconNames.REMOVE,onClick:s}),ControlBarEvalButton=({handleReplEval:s,isRunning:r})=>r?null:jsxRuntimeExports.jsx(Tooltip2,{content:"...or press shift-enter in the REPL",children:jsxRuntimeExports.jsx(ControlButton,{label:"Eval",icon:IconNames.CODE,onClick:s})}),protocolMap={"http:":"ws:","https:":"wss:"};function getSessionUrl(s,r){const e=new URL(s,Constants.sharedbBackendUrl);return r&&(e.protocol=protocolMap[e.protocol]),e.toString()}async function checkSessionIdExists(s){const r=await fetch(getSessionUrl(s));return r&&r.ok}async function createNewSession(s){const r=await fetch(Constants.sharedbBackendUrl,{method:"POST",body:s,headers:{"Content-Type":"text/plain"}});if(!r||!r.ok)throw new Error(r?`Could not create new session: ${await r.text()}`:"Unknown error creating session");return r.text()}var extSearchbox={exports:{}};(function(s,r){ace.define("ace/ext/searchbox.css",["require","exports","module"],function(e,a,m){m.exports=`

/* ------------------------------------------------------------------------------------------
 * Editor Search Form
 * --------------------------------------------------------------------------------------- */
.ace_search {
    background-color: #ddd;
    color: #666;
    border: 1px solid #cbcbcb;
    border-top: 0 none;
    overflow: hidden;
    margin: 0;
    padding: 4px 6px 0 4px;
    position: absolute;
    top: 0;
    z-index: 99;
    white-space: normal;
}
.ace_search.left {
    border-left: 0 none;
    border-radius: 0px 0px 5px 0px;
    left: 0;
}
.ace_search.right {
    border-radius: 0px 0px 0px 5px;
    border-right: 0 none;
    right: 0;
}

.ace_search_form, .ace_replace_form {
    margin: 0 20px 4px 0;
    overflow: hidden;
    line-height: 1.9;
}
.ace_replace_form {
    margin-right: 0;
}
.ace_search_form.ace_nomatch {
    outline: 1px solid red;
}

.ace_search_field {
    border-radius: 3px 0 0 3px;
    background-color: white;
    color: black;
    border: 1px solid #cbcbcb;
    border-right: 0 none;
    outline: 0;
    padding: 0;
    font-size: inherit;
    margin: 0;
    line-height: inherit;
    padding: 0 6px;
    min-width: 17em;
    vertical-align: top;
    min-height: 1.8em;
    box-sizing: content-box;
}
.ace_searchbtn {
    border: 1px solid #cbcbcb;
    line-height: inherit;
    display: inline-block;
    padding: 0 6px;
    background: #fff;
    border-right: 0 none;
    border-left: 1px solid #dcdcdc;
    cursor: pointer;
    margin: 0;
    position: relative;
    color: #666;
}
.ace_searchbtn:last-child {
    border-radius: 0 3px 3px 0;
    border-right: 1px solid #cbcbcb;
}
.ace_searchbtn:disabled {
    background: none;
    cursor: default;
}
.ace_searchbtn:hover {
    background-color: #eef1f6;
}
.ace_searchbtn.prev, .ace_searchbtn.next {
     padding: 0px 0.7em
}
.ace_searchbtn.prev:after, .ace_searchbtn.next:after {
     content: "";
     border: solid 2px #888;
     width: 0.5em;
     height: 0.5em;
     border-width:  2px 0 0 2px;
     display:inline-block;
     transform: rotate(-45deg);
}
.ace_searchbtn.next:after {
     border-width: 0 2px 2px 0 ;
}
.ace_searchbtn_close {
    background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAAcCAYAAABRVo5BAAAAZ0lEQVR42u2SUQrAMAhDvazn8OjZBilCkYVVxiis8H4CT0VrAJb4WHT3C5xU2a2IQZXJjiQIRMdkEoJ5Q2yMqpfDIo+XY4k6h+YXOyKqTIj5REaxloNAd0xiKmAtsTHqW8sR2W5f7gCu5nWFUpVjZwAAAABJRU5ErkJggg==) no-repeat 50% 0;
    border-radius: 50%;
    border: 0 none;
    color: #656565;
    cursor: pointer;
    font: 16px/16px Arial;
    padding: 0;
    height: 14px;
    width: 14px;
    top: 9px;
    right: 7px;
    position: absolute;
}
.ace_searchbtn_close:hover {
    background-color: #656565;
    background-position: 50% 100%;
    color: white;
}

.ace_button {
    margin-left: 2px;
    cursor: pointer;
    -webkit-user-select: none;
    -moz-user-select: none;
    -o-user-select: none;
    -ms-user-select: none;
    user-select: none;
    overflow: hidden;
    opacity: 0.7;
    border: 1px solid rgba(100,100,100,0.23);
    padding: 1px;
    box-sizing:    border-box!important;
    color: black;
}

.ace_button:hover {
    background-color: #eee;
    opacity:1;
}
.ace_button:active {
    background-color: #ddd;
}

.ace_button.checked {
    border-color: #3399ff;
    opacity:1;
}

.ace_search_options{
    margin-bottom: 3px;
    text-align: right;
    -webkit-user-select: none;
    -moz-user-select: none;
    -o-user-select: none;
    -ms-user-select: none;
    user-select: none;
    clear: both;
}

.ace_search_counter {
    float: left;
    font-family: arial;
    padding: 0 8px;
}`}),ace.define("ace/ext/searchbox",["require","exports","module","ace/lib/dom","ace/lib/lang","ace/lib/event","ace/ext/searchbox.css","ace/keyboard/hash_handler","ace/lib/keys"],function(e,a,m){var h=e("../lib/dom"),p=e("../lib/lang"),u=e("../lib/event"),c=e("./searchbox.css"),f=e("../keyboard/hash_handler").HashHandler,n=e("../lib/keys"),t=999;h.importCssString(c,"ace_searchbox",!1);var o=function(l,d,v){var y=h.createElement("div");h.buildDom(["div",{class:"ace_search right"},["span",{action:"hide",class:"ace_searchbtn_close"}],["div",{class:"ace_search_form"},["input",{class:"ace_search_field",placeholder:"Search for",spellcheck:"false"}],["span",{action:"findPrev",class:"ace_searchbtn prev"},"​"],["span",{action:"findNext",class:"ace_searchbtn next"},"​"],["span",{action:"findAll",class:"ace_searchbtn",title:"Alt-Enter"},"All"]],["div",{class:"ace_replace_form"},["input",{class:"ace_search_field",placeholder:"Replace with",spellcheck:"false"}],["span",{action:"replaceAndFindNext",class:"ace_searchbtn"},"Replace"],["span",{action:"replaceAll",class:"ace_searchbtn"},"All"]],["div",{class:"ace_search_options"},["span",{action:"toggleReplace",class:"ace_button",title:"Toggle Replace mode",style:"float:left;margin-top:-2px;padding:0 5px;"},"+"],["span",{class:"ace_search_counter"}],["span",{action:"toggleRegexpMode",class:"ace_button",title:"RegExp Search"},".*"],["span",{action:"toggleCaseSensitive",class:"ace_button",title:"CaseSensitive Search"},"Aa"],["span",{action:"toggleWholeWords",class:"ace_button",title:"Whole Word Search"},"\\b"],["span",{action:"searchInSelection",class:"ace_button",title:"Search In Selection"},"S"]]],y),this.element=y.firstChild,this.setSession=this.setSession.bind(this),this.$init(),this.setEditor(l),h.importCssString(c,"ace_searchbox",l.container)};(function(){this.setEditor=function(l){l.searchBox=this,l.renderer.scroller.appendChild(this.element),this.editor=l},this.setSession=function(l){this.searchRange=null,this.$syncOptions(!0)},this.$initElements=function(l){this.searchBox=l.querySelector(".ace_search_form"),this.replaceBox=l.querySelector(".ace_replace_form"),this.searchOption=l.querySelector("[action=searchInSelection]"),this.replaceOption=l.querySelector("[action=toggleReplace]"),this.regExpOption=l.querySelector("[action=toggleRegexpMode]"),this.caseSensitiveOption=l.querySelector("[action=toggleCaseSensitive]"),this.wholeWordOption=l.querySelector("[action=toggleWholeWords]"),this.searchInput=this.searchBox.querySelector(".ace_search_field"),this.replaceInput=this.replaceBox.querySelector(".ace_search_field"),this.searchCounter=l.querySelector(".ace_search_counter")},this.$init=function(){var l=this.element;this.$initElements(l);var d=this;u.addListener(l,"mousedown",function(v){setTimeout(function(){d.activeInput.focus()},0),u.stopPropagation(v)}),u.addListener(l,"click",function(v){var y=v.target||v.srcElement,x=y.getAttribute("action");x&&d[x]?d[x]():d.$searchBarKb.commands[x]&&d.$searchBarKb.commands[x].exec(d),u.stopPropagation(v)}),u.addCommandKeyListener(l,function(v,y,x){var E=n.keyCodeToString(x),T=d.$searchBarKb.findKeyCommand(y,E);T&&T.exec&&(T.exec(d),u.stopEvent(v))}),this.$onChange=p.delayedCall(function(){d.find(!1,!1)}),u.addListener(this.searchInput,"input",function(){d.$onChange.schedule(20)}),u.addListener(this.searchInput,"focus",function(){d.activeInput=d.searchInput,d.searchInput.value&&d.highlight()}),u.addListener(this.replaceInput,"focus",function(){d.activeInput=d.replaceInput,d.searchInput.value&&d.highlight()})},this.$closeSearchBarKb=new f([{bindKey:"Esc",name:"closeSearchBar",exec:function(l){l.searchBox.hide()}}]),this.$searchBarKb=new f,this.$searchBarKb.bindKeys({"Ctrl-f|Command-f":function(l){var d=l.isReplace=!l.isReplace;l.replaceBox.style.display=d?"":"none",l.replaceOption.checked=!1,l.$syncOptions(),l.searchInput.focus()},"Ctrl-H|Command-Option-F":function(l){l.editor.getReadOnly()||(l.replaceOption.checked=!0,l.$syncOptions(),l.replaceInput.focus())},"Ctrl-G|Command-G":function(l){l.findNext()},"Ctrl-Shift-G|Command-Shift-G":function(l){l.findPrev()},esc:function(l){setTimeout(function(){l.hide()})},Return:function(l){l.activeInput==l.replaceInput&&l.replace(),l.findNext()},"Shift-Return":function(l){l.activeInput==l.replaceInput&&l.replace(),l.findPrev()},"Alt-Return":function(l){l.activeInput==l.replaceInput&&l.replaceAll(),l.findAll()},Tab:function(l){(l.activeInput==l.replaceInput?l.searchInput:l.replaceInput).focus()}}),this.$searchBarKb.addCommands([{name:"toggleRegexpMode",bindKey:{win:"Alt-R|Alt-/",mac:"Ctrl-Alt-R|Ctrl-Alt-/"},exec:function(l){l.regExpOption.checked=!l.regExpOption.checked,l.$syncOptions()}},{name:"toggleCaseSensitive",bindKey:{win:"Alt-C|Alt-I",mac:"Ctrl-Alt-R|Ctrl-Alt-I"},exec:function(l){l.caseSensitiveOption.checked=!l.caseSensitiveOption.checked,l.$syncOptions()}},{name:"toggleWholeWords",bindKey:{win:"Alt-B|Alt-W",mac:"Ctrl-Alt-B|Ctrl-Alt-W"},exec:function(l){l.wholeWordOption.checked=!l.wholeWordOption.checked,l.$syncOptions()}},{name:"toggleReplace",exec:function(l){l.replaceOption.checked=!l.replaceOption.checked,l.$syncOptions()}},{name:"searchInSelection",exec:function(l){l.searchOption.checked=!l.searchRange,l.setSearchRange(l.searchOption.checked&&l.editor.getSelectionRange()),l.$syncOptions()}}]),this.setSearchRange=function(l){this.searchRange=l,l?this.searchRangeMarker=this.editor.session.addMarker(l,"ace_active-line"):this.searchRangeMarker&&(this.editor.session.removeMarker(this.searchRangeMarker),this.searchRangeMarker=null)},this.$syncOptions=function(l){h.setCssClass(this.replaceOption,"checked",this.searchRange),h.setCssClass(this.searchOption,"checked",this.searchOption.checked),this.replaceOption.textContent=this.replaceOption.checked?"-":"+",h.setCssClass(this.regExpOption,"checked",this.regExpOption.checked),h.setCssClass(this.wholeWordOption,"checked",this.wholeWordOption.checked),h.setCssClass(this.caseSensitiveOption,"checked",this.caseSensitiveOption.checked);var d=this.editor.getReadOnly();this.replaceOption.style.display=d?"none":"",this.replaceBox.style.display=this.replaceOption.checked&&!d?"":"none",this.find(!1,!1,l)},this.highlight=function(l){this.editor.session.highlight(l||this.editor.$search.$options.re),this.editor.renderer.updateBackMarkers()},this.find=function(l,d,v){var y=this.editor.find(this.searchInput.value,{skipCurrent:l,backwards:d,wrap:!0,regExp:this.regExpOption.checked,caseSensitive:this.caseSensitiveOption.checked,wholeWord:this.wholeWordOption.checked,preventScroll:v,range:this.searchRange}),x=!y&&this.searchInput.value;h.setCssClass(this.searchBox,"ace_nomatch",x),this.editor._emit("findSearchBox",{match:!x}),this.highlight(),this.updateCounter()},this.updateCounter=function(){var l=this.editor,d=l.$search.$options.re,v=0,y=0;if(d){var x=this.searchRange?l.session.getTextRange(this.searchRange):l.getValue(),E=l.session.doc.positionToIndex(l.selection.anchor);this.searchRange&&(E-=l.session.doc.positionToIndex(this.searchRange.start));for(var T=d.lastIndex=0,k;(k=d.exec(x))&&(v++,T=k.index,T<=E&&y++,!(v>t||!k[0]&&(d.lastIndex=T+=1,T>=x.length))););}this.searchCounter.textContent=y+" of "+(v>t?t+"+":v)},this.findNext=function(){this.find(!0,!1)},this.findPrev=function(){this.find(!0,!0)},this.findAll=function(){var l=this.editor.findAll(this.searchInput.value,{regExp:this.regExpOption.checked,caseSensitive:this.caseSensitiveOption.checked,wholeWord:this.wholeWordOption.checked}),d=!l&&this.searchInput.value;h.setCssClass(this.searchBox,"ace_nomatch",d),this.editor._emit("findSearchBox",{match:!d}),this.highlight(),this.hide()},this.replace=function(){this.editor.getReadOnly()||this.editor.replace(this.replaceInput.value)},this.replaceAndFindNext=function(){this.editor.getReadOnly()||(this.editor.replace(this.replaceInput.value),this.findNext())},this.replaceAll=function(){this.editor.getReadOnly()||this.editor.replaceAll(this.replaceInput.value)},this.hide=function(){this.active=!1,this.setSearchRange(null),this.editor.off("changeSession",this.setSession),this.element.style.display="none",this.editor.keyBinding.removeKeyboardHandler(this.$closeSearchBarKb),this.editor.focus()},this.show=function(l,d){this.active=!0,this.editor.on("changeSession",this.setSession),this.element.style.display="",this.replaceOption.checked=d,l&&(this.searchInput.value=l),this.searchInput.focus(),this.searchInput.select(),this.editor.keyBinding.addKeyboardHandler(this.$closeSearchBarKb),this.$syncOptions(!0)},this.isFocused=function(){var l=document.activeElement;return l==this.searchInput||l==this.replaceInput}}).call(o.prototype),a.SearchBox=o,a.Search=function(l,d){var v=l.searchBox||new o(l);v.show(l.session.getTextRange(),d)}}),function(){ace.require(["ace/ext/searchbox"],function(e){s&&(s.exports=e)})}()})(extSearchbox);var modeJavascript={exports:{}};(function(s,r){ace.define("ace/mode/doc_comment_highlight_rules",["require","exports","module","ace/lib/oop","ace/mode/text_highlight_rules"],function(e,a,m){var h=e("../lib/oop"),p=e("./text_highlight_rules").TextHighlightRules,u=function(){this.$rules={start:[{token:"comment.doc.tag",regex:"@[\\w\\d_]+"},u.getTagRule(),{defaultToken:"comment.doc",caseInsensitive:!0}]}};h.inherits(u,p),u.getTagRule=function(c){return{token:"comment.doc.tag.storage.type",regex:"\\b(?:TODO|FIXME|XXX|HACK)\\b"}},u.getStartRule=function(c){return{token:"comment.doc",regex:"\\/\\*(?=\\*)",next:c}},u.getEndRule=function(c){return{token:"comment.doc",regex:"\\*\\/",next:c}},a.DocCommentHighlightRules=u}),ace.define("ace/mode/javascript_highlight_rules",["require","exports","module","ace/lib/oop","ace/mode/doc_comment_highlight_rules","ace/mode/text_highlight_rules"],function(e,a,m){var h=e("../lib/oop"),p=e("./doc_comment_highlight_rules").DocCommentHighlightRules,u=e("./text_highlight_rules").TextHighlightRules,c="[a-zA-Z\\$_¡-￿][a-zA-Z\\d\\$_¡-￿]*",f=function(o){var l=this.createKeywordMapper({"variable.language":"Array|Boolean|Date|Function|Iterator|Number|Object|RegExp|String|Proxy|Symbol|Namespace|QName|XML|XMLList|ArrayBuffer|Float32Array|Float64Array|Int16Array|Int32Array|Int8Array|Uint16Array|Uint32Array|Uint8Array|Uint8ClampedArray|Error|EvalError|InternalError|RangeError|ReferenceError|StopIteration|SyntaxError|TypeError|URIError|decodeURI|decodeURIComponent|encodeURI|encodeURIComponent|eval|isFinite|isNaN|parseFloat|parseInt|JSON|Math|this|arguments|prototype|window|document",keyword:"const|yield|import|get|set|async|await|break|case|catch|continue|default|delete|do|else|finally|for|function|if|in|of|instanceof|new|return|switch|throw|try|typeof|let|var|while|with|debugger|__parent__|__count__|escape|unescape|with|__proto__|class|enum|extends|super|export|implements|private|public|interface|package|protected|static|constructor","storage.type":"const|let|var|function","constant.language":"null|Infinity|NaN|undefined","support.function":"alert","constant.language.boolean":"true|false"},"identifier"),d="case|do|else|finally|in|instanceof|return|throw|try|typeof|yield|void",v="\\\\(?:x[0-9a-fA-F]{2}|u[0-9a-fA-F]{4}|u{[0-9a-fA-F]{1,6}}|[0-2][0-7]{0,2}|3[0-7][0-7]?|[4-7][0-7]?|.)";this.$rules={no_regex:[p.getStartRule("doc-start"),t("no_regex"),{token:"string",regex:"'(?=.)",next:"qstring"},{token:"string",regex:'"(?=.)',next:"qqstring"},{token:"constant.numeric",regex:/0(?:[xX][0-9a-fA-F]+|[oO][0-7]+|[bB][01]+)\b/},{token:"constant.numeric",regex:/(?:\d\d*(?:\.\d*)?|\.\d+)(?:[eE][+-]?\d+\b)?/},{token:["storage.type","punctuation.operator","support.function","punctuation.operator","entity.name.function","text","keyword.operator"],regex:"("+c+")(\\.)(prototype)(\\.)("+c+")(\\s*)(=)",next:"function_arguments"},{token:["storage.type","punctuation.operator","entity.name.function","text","keyword.operator","text","storage.type","text","paren.lparen"],regex:"("+c+")(\\.)("+c+")(\\s*)(=)(\\s*)(function\\*?)(\\s*)(\\()",next:"function_arguments"},{token:["entity.name.function","text","keyword.operator","text","storage.type","text","paren.lparen"],regex:"("+c+")(\\s*)(=)(\\s*)(function\\*?)(\\s*)(\\()",next:"function_arguments"},{token:["storage.type","punctuation.operator","entity.name.function","text","keyword.operator","text","storage.type","text","entity.name.function","text","paren.lparen"],regex:"("+c+")(\\.)("+c+")(\\s*)(=)(\\s*)(function\\*?)(\\s+)(\\w+)(\\s*)(\\()",next:"function_arguments"},{token:["storage.type","text","entity.name.function","text","paren.lparen"],regex:"(function\\*?)(\\s+)("+c+")(\\s*)(\\()",next:"function_arguments"},{token:["entity.name.function","text","punctuation.operator","text","storage.type","text","paren.lparen"],regex:"("+c+")(\\s*)(:)(\\s*)(function\\*?)(\\s*)(\\()",next:"function_arguments"},{token:["text","text","storage.type","text","paren.lparen"],regex:"(:)(\\s*)(function\\*?)(\\s*)(\\()",next:"function_arguments"},{token:"keyword",regex:`from(?=\\s*('|"))`},{token:"keyword",regex:"(?:"+d+")\\b",next:"start"},{token:"support.constant",regex:/that\b/},{token:["storage.type","punctuation.operator","support.function.firebug"],regex:/(console)(\.)(warn|info|log|error|time|trace|timeEnd|assert)\b/},{token:l,regex:c},{token:"punctuation.operator",regex:/[.](?![.])/,next:"property"},{token:"storage.type",regex:/=>/,next:"start"},{token:"keyword.operator",regex:/--|\+\+|\.{3}|===|==|=|!=|!==|<+=?|>+=?|!|&&|\|\||\?:|[!$%&*+\-~\/^]=?/,next:"start"},{token:"punctuation.operator",regex:/[?:,;.]/,next:"start"},{token:"paren.lparen",regex:/[\[({]/,next:"start"},{token:"paren.rparen",regex:/[\])}]/},{token:"comment",regex:/^#!.*$/}],property:[{token:"text",regex:"\\s+"},{token:["storage.type","punctuation.operator","entity.name.function","text","keyword.operator","text","storage.type","text","entity.name.function","text","paren.lparen"],regex:"("+c+")(\\.)("+c+")(\\s*)(=)(\\s*)(function\\*?)(?:(\\s+)(\\w+))?(\\s*)(\\()",next:"function_arguments"},{token:"punctuation.operator",regex:/[.](?![.])/},{token:"support.function",regex:/(s(?:h(?:ift|ow(?:Mod(?:elessDialog|alDialog)|Help))|croll(?:X|By(?:Pages|Lines)?|Y|To)?|t(?:op|rike)|i(?:n|zeToContent|debar|gnText)|ort|u(?:p|b(?:str(?:ing)?)?)|pli(?:ce|t)|e(?:nd|t(?:Re(?:sizable|questHeader)|M(?:i(?:nutes|lliseconds)|onth)|Seconds|Ho(?:tKeys|urs)|Year|Cursor|Time(?:out)?|Interval|ZOptions|Date|UTC(?:M(?:i(?:nutes|lliseconds)|onth)|Seconds|Hours|Date|FullYear)|FullYear|Active)|arch)|qrt|lice|avePreferences|mall)|h(?:ome|andleEvent)|navigate|c(?:har(?:CodeAt|At)|o(?:s|n(?:cat|textual|firm)|mpile)|eil|lear(?:Timeout|Interval)?|a(?:ptureEvents|ll)|reate(?:StyleSheet|Popup|EventObject))|t(?:o(?:GMTString|S(?:tring|ource)|U(?:TCString|pperCase)|Lo(?:caleString|werCase))|est|a(?:n|int(?:Enabled)?))|i(?:s(?:NaN|Finite)|ndexOf|talics)|d(?:isableExternalCapture|ump|etachEvent)|u(?:n(?:shift|taint|escape|watch)|pdateCommands)|j(?:oin|avaEnabled)|p(?:o(?:p|w)|ush|lugins.refresh|a(?:ddings|rse(?:Int|Float)?)|r(?:int|ompt|eference))|e(?:scape|nableExternalCapture|val|lementFromPoint|x(?:p|ec(?:Script|Command)?))|valueOf|UTC|queryCommand(?:State|Indeterm|Enabled|Value)|f(?:i(?:nd|lter|le(?:ModifiedDate|Size|CreatedDate|UpdatedDate)|xed)|o(?:nt(?:size|color)|rward|rEach)|loor|romCharCode)|watch|l(?:ink|o(?:ad|g)|astIndexOf)|a(?:sin|nchor|cos|t(?:tachEvent|ob|an(?:2)?)|pply|lert|b(?:s|ort))|r(?:ou(?:nd|teEvents)|e(?:size(?:By|To)|calc|turnValue|place|verse|l(?:oad|ease(?:Capture|Events)))|andom)|g(?:o|et(?:ResponseHeader|M(?:i(?:nutes|lliseconds)|onth)|Se(?:conds|lection)|Hours|Year|Time(?:zoneOffset)?|Da(?:y|te)|UTC(?:M(?:i(?:nutes|lliseconds)|onth)|Seconds|Hours|Da(?:y|te)|FullYear)|FullYear|A(?:ttention|llResponseHeaders)))|m(?:in|ove(?:B(?:y|elow)|To(?:Absolute)?|Above)|ergeAttributes|a(?:tch|rgins|x))|b(?:toa|ig|o(?:ld|rderWidths)|link|ack))\b(?=\()/},{token:"support.function.dom",regex:/(s(?:ub(?:stringData|mit)|plitText|e(?:t(?:NamedItem|Attribute(?:Node)?)|lect))|has(?:ChildNodes|Feature)|namedItem|c(?:l(?:ick|o(?:se|neNode))|reate(?:C(?:omment|DATASection|aption)|T(?:Head|extNode|Foot)|DocumentFragment|ProcessingInstruction|E(?:ntityReference|lement)|Attribute))|tabIndex|i(?:nsert(?:Row|Before|Cell|Data)|tem)|open|delete(?:Row|C(?:ell|aption)|T(?:Head|Foot)|Data)|focus|write(?:ln)?|a(?:dd|ppend(?:Child|Data))|re(?:set|place(?:Child|Data)|move(?:NamedItem|Child|Attribute(?:Node)?)?)|get(?:NamedItem|Element(?:sBy(?:Name|TagName|ClassName)|ById)|Attribute(?:Node)?)|blur)\b(?=\()/},{token:"support.constant",regex:/(s(?:ystemLanguage|cr(?:ipts|ollbars|een(?:X|Y|Top|Left))|t(?:yle(?:Sheets)?|atus(?:Text|bar)?)|ibling(?:Below|Above)|ource|uffixes|e(?:curity(?:Policy)?|l(?:ection|f)))|h(?:istory|ost(?:name)?|as(?:h|Focus))|y|X(?:MLDocument|SLDocument)|n(?:ext|ame(?:space(?:s|URI)|Prop))|M(?:IN_VALUE|AX_VALUE)|c(?:haracterSet|o(?:n(?:structor|trollers)|okieEnabled|lorDepth|mp(?:onents|lete))|urrent|puClass|l(?:i(?:p(?:boardData)?|entInformation)|osed|asses)|alle(?:e|r)|rypto)|t(?:o(?:olbar|p)|ext(?:Transform|Indent|Decoration|Align)|ags)|SQRT(?:1_2|2)|i(?:n(?:ner(?:Height|Width)|put)|ds|gnoreCase)|zIndex|o(?:scpu|n(?:readystatechange|Line)|uter(?:Height|Width)|p(?:sProfile|ener)|ffscreenBuffering)|NEGATIVE_INFINITY|d(?:i(?:splay|alog(?:Height|Top|Width|Left|Arguments)|rectories)|e(?:scription|fault(?:Status|Ch(?:ecked|arset)|View)))|u(?:ser(?:Profile|Language|Agent)|n(?:iqueID|defined)|pdateInterval)|_content|p(?:ixelDepth|ort|ersonalbar|kcs11|l(?:ugins|atform)|a(?:thname|dding(?:Right|Bottom|Top|Left)|rent(?:Window|Layer)?|ge(?:X(?:Offset)?|Y(?:Offset)?))|r(?:o(?:to(?:col|type)|duct(?:Sub)?|mpter)|e(?:vious|fix)))|e(?:n(?:coding|abledPlugin)|x(?:ternal|pando)|mbeds)|v(?:isibility|endor(?:Sub)?|Linkcolor)|URLUnencoded|P(?:I|OSITIVE_INFINITY)|f(?:ilename|o(?:nt(?:Size|Family|Weight)|rmName)|rame(?:s|Element)|gColor)|E|whiteSpace|l(?:i(?:stStyleType|n(?:eHeight|kColor))|o(?:ca(?:tion(?:bar)?|lName)|wsrc)|e(?:ngth|ft(?:Context)?)|a(?:st(?:M(?:odified|atch)|Index|Paren)|yer(?:s|X)|nguage))|a(?:pp(?:MinorVersion|Name|Co(?:deName|re)|Version)|vail(?:Height|Top|Width|Left)|ll|r(?:ity|guments)|Linkcolor|bove)|r(?:ight(?:Context)?|e(?:sponse(?:XML|Text)|adyState))|global|x|m(?:imeTypes|ultiline|enubar|argin(?:Right|Bottom|Top|Left))|L(?:N(?:10|2)|OG(?:10E|2E))|b(?:o(?:ttom|rder(?:Width|RightWidth|BottomWidth|Style|Color|TopWidth|LeftWidth))|ufferDepth|elow|ackground(?:Color|Image)))\b/},{token:"identifier",regex:c},{regex:"",token:"empty",next:"no_regex"}],start:[p.getStartRule("doc-start"),t("start"),{token:"string.regexp",regex:"\\/",next:"regex"},{token:"text",regex:"\\s+|^$",next:"start"},{token:"empty",regex:"",next:"no_regex"}],regex:[{token:"regexp.keyword.operator",regex:"\\\\(?:u[\\da-fA-F]{4}|x[\\da-fA-F]{2}|.)"},{token:"string.regexp",regex:"/[sxngimy]*",next:"no_regex"},{token:"invalid",regex:/\{\d+\b,?\d*\}[+*]|[+*$^?][+*]|[$^][?]|\?{3,}/},{token:"constant.language.escape",regex:/\(\?[:=!]|\)|\{\d+\b,?\d*\}|[+*]\?|[()$^+*?.]/},{token:"constant.language.delimiter",regex:/\|/},{token:"constant.language.escape",regex:/\[\^?/,next:"regex_character_class"},{token:"empty",regex:"$",next:"no_regex"},{defaultToken:"string.regexp"}],regex_character_class:[{token:"regexp.charclass.keyword.operator",regex:"\\\\(?:u[\\da-fA-F]{4}|x[\\da-fA-F]{2}|.)"},{token:"constant.language.escape",regex:"]",next:"regex"},{token:"constant.language.escape",regex:"-"},{token:"empty",regex:"$",next:"no_regex"},{defaultToken:"string.regexp.charachterclass"}],default_parameter:[{token:"string",regex:"'(?=.)",push:[{token:"string",regex:"'|$",next:"pop"},{include:"qstring"}]},{token:"string",regex:'"(?=.)',push:[{token:"string",regex:'"|$',next:"pop"},{include:"qqstring"}]},{token:"constant.language",regex:"null|Infinity|NaN|undefined"},{token:"constant.numeric",regex:/0(?:[xX][0-9a-fA-F]+|[oO][0-7]+|[bB][01]+)\b/},{token:"constant.numeric",regex:/(?:\d\d*(?:\.\d*)?|\.\d+)(?:[eE][+-]?\d+\b)?/},{token:"punctuation.operator",regex:",",next:"function_arguments"},{token:"text",regex:"\\s+"},{token:"punctuation.operator",regex:"$"},{token:"empty",regex:"",next:"no_regex"}],function_arguments:[t("function_arguments"),{token:"variable.parameter",regex:c},{token:"punctuation.operator",regex:","},{token:"text",regex:"\\s+"},{token:"punctuation.operator",regex:"$"},{token:"empty",regex:"",next:"no_regex"}],qqstring:[{token:"constant.language.escape",regex:v},{token:"string",regex:"\\\\$",consumeLineEnd:!0},{token:"string",regex:'"|$',next:"no_regex"},{defaultToken:"string"}],qstring:[{token:"constant.language.escape",regex:v},{token:"string",regex:"\\\\$",consumeLineEnd:!0},{token:"string",regex:"'|$",next:"no_regex"},{defaultToken:"string"}]},(!o||!o.noES6)&&(this.$rules.no_regex.unshift({regex:"[{}]",onMatch:function(y,x,E){if(this.next=y=="{"?this.nextState:"",y=="{"&&E.length)E.unshift("start",x);else if(y=="}"&&E.length&&(E.shift(),this.next=E.shift(),this.next.indexOf("string")!=-1||this.next.indexOf("jsx")!=-1))return"paren.quasi.end";return y=="{"?"paren.lparen":"paren.rparen"},nextState:"start"},{token:"string.quasi.start",regex:/`/,push:[{token:"constant.language.escape",regex:v},{token:"paren.quasi.start",regex:/\${/,push:"start"},{token:"string.quasi.end",regex:/`/,next:"pop"},{defaultToken:"string.quasi"}]},{token:["variable.parameter","text"],regex:"("+c+")(\\s*)(?=\\=>)"},{token:"paren.lparen",regex:"(\\()(?=.+\\s*=>)",next:"function_arguments"},{token:"variable.language",regex:"(?:(?:(?:Weak)?(?:Set|Map))|Promise)\\b"}),this.$rules.function_arguments.unshift({token:"keyword.operator",regex:"=",next:"default_parameter"},{token:"keyword.operator",regex:"\\.{3}"}),this.$rules.property.unshift({token:"support.function",regex:"(findIndex|repeat|startsWith|endsWith|includes|isSafeInteger|trunc|cbrt|log2|log10|sign|then|catch|finally|resolve|reject|race|any|all|allSettled|keys|entries|isInteger)\\b(?=\\()"},{token:"constant.language",regex:"(?:MAX_SAFE_INTEGER|MIN_SAFE_INTEGER|EPSILON)\\b"}),(!o||o.jsx!=!1)&&n.call(this)),this.embedRules(p,"doc-",[p.getEndRule("no_regex")]),this.normalizeRules()};h.inherits(f,u);function n(){var o=c.replace("\\d","\\d\\-"),l={onMatch:function(v,y,x){var E=v.charAt(1)=="/"?2:1;return E==1?(y!=this.nextState?x.unshift(this.next,this.nextState,0):x.unshift(this.next),x[2]++):E==2&&y==this.nextState&&(x[1]--,(!x[1]||x[1]<0)&&(x.shift(),x.shift())),[{type:"meta.tag.punctuation."+(E==1?"":"end-")+"tag-open.xml",value:v.slice(0,E)},{type:"meta.tag.tag-name.xml",value:v.substr(E)}]},regex:"</?"+o,next:"jsxAttributes",nextState:"jsx"};this.$rules.start.unshift(l);var d={regex:"{",token:"paren.quasi.start",push:"start"};this.$rules.jsx=[d,l,{include:"reference"},{defaultToken:"string"}],this.$rules.jsxAttributes=[{token:"meta.tag.punctuation.tag-close.xml",regex:"/?>",onMatch:function(v,y,x){return y==x[0]&&x.shift(),v.length==2&&(x[0]==this.nextState&&x[1]--,(!x[1]||x[1]<0)&&x.splice(0,2)),this.next=x[0]||"start",[{type:this.token,value:v}]},nextState:"jsx"},d,t("jsxAttributes"),{token:"entity.other.attribute-name.xml",regex:o},{token:"keyword.operator.attribute-equals.xml",regex:"="},{token:"text.tag-whitespace.xml",regex:"\\s+"},{token:"string.attribute-value.xml",regex:"'",stateName:"jsx_attr_q",push:[{token:"string.attribute-value.xml",regex:"'",next:"pop"},{include:"reference"},{defaultToken:"string.attribute-value.xml"}]},{token:"string.attribute-value.xml",regex:'"',stateName:"jsx_attr_qq",push:[{token:"string.attribute-value.xml",regex:'"',next:"pop"},{include:"reference"},{defaultToken:"string.attribute-value.xml"}]},l],this.$rules.reference=[{token:"constant.language.escape.reference.xml",regex:"(?:&#[0-9]+;)|(?:&#x[0-9a-fA-F]+;)|(?:&[a-zA-Z0-9_:\\.-]+;)"}]}function t(o){return[{token:"comment",regex:/\/\*/,next:[p.getTagRule(),{token:"comment",regex:"\\*\\/",next:o||"pop"},{defaultToken:"comment",caseInsensitive:!0}]},{token:"comment",regex:"\\/\\/",next:[p.getTagRule(),{token:"comment",regex:"$|^",next:o||"pop"},{defaultToken:"comment",caseInsensitive:!0}]}]}a.JavaScriptHighlightRules=f}),ace.define("ace/mode/matching_brace_outdent",["require","exports","module","ace/range"],function(e,a,m){var h=e("../range").Range,p=function(){};(function(){this.checkOutdent=function(u,c){return/^\s+$/.test(u)?/^\s*\}/.test(c):!1},this.autoOutdent=function(u,c){var f=u.getLine(c),n=f.match(/^(\s*\})/);if(!n)return 0;var t=n[1].length,o=u.findMatchingBracket({row:c,column:t});if(!o||o.row==c)return 0;var l=this.$getIndent(u.getLine(o.row));u.replace(new h(c,0,c,t-1),l)},this.$getIndent=function(u){return u.match(/^\s*/)[0]}}).call(p.prototype),a.MatchingBraceOutdent=p}),ace.define("ace/mode/folding/cstyle",["require","exports","module","ace/lib/oop","ace/range","ace/mode/folding/fold_mode"],function(e,a,m){var h=e("../../lib/oop"),p=e("../../range").Range,u=e("./fold_mode").FoldMode,c=a.FoldMode=function(f){f&&(this.foldingStartMarker=new RegExp(this.foldingStartMarker.source.replace(/\|[^|]*?$/,"|"+f.start)),this.foldingStopMarker=new RegExp(this.foldingStopMarker.source.replace(/\|[^|]*?$/,"|"+f.end)))};h.inherits(c,u),function(){this.foldingStartMarker=/([\{\[\(])[^\}\]\)]*$|^\s*(\/\*)/,this.foldingStopMarker=/^[^\[\{\(]*([\}\]\)])|^[\s\*]*(\*\/)/,this.singleLineBlockCommentRe=/^\s*(\/\*).*\*\/\s*$/,this.tripleStarBlockCommentRe=/^\s*(\/\*\*\*).*\*\/\s*$/,this.startRegionRe=/^\s*(\/\*|\/\/)#?region\b/,this._getFoldWidgetBase=this.getFoldWidget,this.getFoldWidget=function(f,n,t){var o=f.getLine(t);if(this.singleLineBlockCommentRe.test(o)&&!this.startRegionRe.test(o)&&!this.tripleStarBlockCommentRe.test(o))return"";var l=this._getFoldWidgetBase(f,n,t);return!l&&this.startRegionRe.test(o)?"start":l},this.getFoldWidgetRange=function(f,n,t,o){var l=f.getLine(t);if(this.startRegionRe.test(l))return this.getCommentRegionBlock(f,l,t);var y=l.match(this.foldingStartMarker);if(y){var d=y.index;if(y[1])return this.openingBracketBlock(f,y[1],t,d);var v=f.getCommentFoldRange(t,d+y[0].length,1);return v&&!v.isMultiLine()&&(o?v=this.getSectionRange(f,t):n!="all"&&(v=null)),v}if(n!=="markbegin"){var y=l.match(this.foldingStopMarker);if(y){var d=y.index+y[0].length;return y[1]?this.closingBracketBlock(f,y[1],t,d):f.getCommentFoldRange(t,d,-1)}}},this.getSectionRange=function(f,n){var t=f.getLine(n),o=t.search(/\S/),l=n,d=t.length;n=n+1;for(var v=n,y=f.getLength();++n<y;){t=f.getLine(n);var x=t.search(/\S/);if(x!==-1){if(o>x)break;var E=this.getFoldWidgetRange(f,"all",n);if(E){if(E.start.row<=l)break;if(E.isMultiLine())n=E.end.row;else if(o==x)break}v=n}}return new p(l,d,v,f.getLine(v).length)},this.getCommentRegionBlock=function(f,n,t){for(var o=n.search(/\s*$/),l=f.getLength(),d=t,v=/^\s*(?:\/\*|\/\/|--)#?(end)?region\b/,y=1;++t<l;){n=f.getLine(t);var x=v.exec(n);if(x&&(x[1]?y--:y++,!y))break}var E=t;if(E>d)return new p(d,o,E,n.length)}}.call(c.prototype)}),ace.define("ace/mode/javascript",["require","exports","module","ace/lib/oop","ace/mode/text","ace/mode/javascript_highlight_rules","ace/mode/matching_brace_outdent","ace/worker/worker_client","ace/mode/behaviour/cstyle","ace/mode/folding/cstyle"],function(e,a,m){var h=e("../lib/oop"),p=e("./text").Mode,u=e("./javascript_highlight_rules").JavaScriptHighlightRules,c=e("./matching_brace_outdent").MatchingBraceOutdent,f=e("../worker/worker_client").WorkerClient,n=e("./behaviour/cstyle").CstyleBehaviour,t=e("./folding/cstyle").FoldMode,o=function(){this.HighlightRules=u,this.$outdent=new c,this.$behaviour=new n,this.foldingRules=new t};h.inherits(o,p),function(){this.lineCommentStart="//",this.blockComment={start:"/*",end:"*/"},this.$quotes={'"':'"',"'":"'","`":"`"},this.getNextLineIndent=function(l,d,v){var y=this.$getIndent(d),x=this.getTokenizer().getLineTokens(d,l),E=x.tokens,T=x.state;if(E.length&&E[E.length-1].type=="comment")return y;if(l=="start"||l=="no_regex"){var k=d.match(/^.*(?:\bcase\b.*:|[\{\(\[])\s*$/);k&&(y+=v)}else if(l=="doc-start"){if(T=="start"||T=="no_regex")return"";var k=d.match(/^\s*(\/?)\*/);k&&(k[1]&&(y+=" "),y+="* ")}return y},this.checkOutdent=function(l,d,v){return this.$outdent.checkOutdent(d,v)},this.autoOutdent=function(l,d,v){this.$outdent.autoOutdent(d,v)},this.createWorker=function(l){var d=new f(["ace"],"ace/mode/javascript_worker","JavaScriptWorker");return d.attachToDocument(l.getDocument()),d.on("annotate",function(v){l.setAnnotations(v.data)}),d.on("terminate",function(){l.clearAnnotations()}),d},this.$id="ace/mode/javascript",this.snippetFileId="ace/snippets/javascript"}.call(o.prototype),a.Mode=o}),function(){ace.require(["ace/mode/javascript"],function(e){s&&(s.exports=e)})}()})(modeJavascript);function theme(s,r,e){r.isDark=!0,r.cssClass="ace-source",r.cssText=".ace-source .ace_gutter {                        background: #011e3a;                        color: rgb(128,145,160)                        }                        .ace-source .ace_print-margin {                        width: 1px;                        background: #555555                        }                        .ace-source {                        background-color: #002240;                        color: #FFFFFF                        }                        .ace-source .ace_cursor {                        color: #FFFFFF                        }                        .ace-source .ace_marker-layer .ace_selection {                        background: rgba(179, 101, 57, 0.75)                        }                        .ace-source.ace_multiselect .ace_selection.ace_start {                        box-shadow: 0 0 3px 0px #002240;                        }                        .ace-source .ace_marker-layer .ace_step {                        background: rgb(127, 111, 19)                        }                        .ace-source .ace_marker-layer .ace_bracket {                        background: #090;                        }                        .ace-terminal-theme .ace_marker-layer .ace_bracket-start {                        background: #090;                        }                        .ace-terminal-theme .ace_marker-layer .ace_bracket-unmatched {                        margin: -1px 0 0 -1px;                        border: 1px solid #900                        }                        .ace-source .ace_marker-layer .ace_active-line {                        background: rgba(0, 0, 0, 0.35)                        }                        .ace-source .ace_gutter-active-line {                        background-color: rgba(0, 0, 0, 0.35)                        }                        .ace-source .ace_marker-layer .ace_selected-word {                        border: 1px solid rgba(179, 101, 57, 0.75)                        }                        .ace-source .ace_invisible {                        color: rgba(255, 255, 255, 0.15)                        }                        .ace-source .ace_keyword,                        .ace-source .ace_meta {                        color: #FF9D00                        }                        .ace-source .ace_constant,                        .ace-source .ace_constant.ace_character,                        .ace-source .ace_constant.ace_other,                        .ace-source .ace_string,                        .ace-source .ace_string.ace_regexp {                        color: #FF628C                        }                        .ace-source .ace_constant.ace_character.ace_escape {                        color: #FFFFFF                        }                        .ace-source .ace_invalid {                        color: #F8F8F8;                        background-color: #800F00                        }                        .ace-source .ace_support {                        color: #80FFBB                        }                        .ace-source .ace_support.ace_constant {                        color: #EB939A                        }                        .ace-source .ace_fold {                        background-color: #FF9D00;                        border-color: #FFFFFF                        }                        .ace-source .ace_support.ace_function {                        color: #FFFFFF                        }                        .ace-source .ace_builtinconsts {                        color: #FFFFFF                        }                        .ace-source .ace_storage {                        color: #FFEE80                        }                        .ace-source .ace_entity {                        color: #FFDD00                        }                        .ace-source .ace_comment {                        font-style: italic;                        color: #0088FF                        }                        .ace-source .ace_heading,                        .ace-source .ace_markup.ace_heading {                        color: #C8E4FD;                        background-color: #001221                        }                        .ace-source .ace_list,                        .ace-source .ace_markup.ace_list {                        background-color: #130D26                        }                        .ace-source .ace_variable {                        color: #CCCCCC                        }                        .ace-source .ace_variable.ace_language {                        color: #FF80E1                        }                        .ace-source .ace_meta.ace_tag {                        color: #9EFFFF                        }                        .ace-source .ace_indent-guide {                        background: url(data:image/png;base64,                        iVBORw0KGgoAAAANSUhEUgAAAAEAAAACCAYAAACZgbY                        nAAAAEklEQVQImWNgYGBgYHCLSvkPAAP3AgSDTRd4AAAAAElFTkSuQmCC) right repeat-y                        }                        .ace_dark.ace-source.ace_editor.ace_autocomplete {                        background-color: #2c3e50;                        border-color: #555555;                        color: white;                        }                        .ace_dark.ace-source.ace_editor.ace_autocomplete .ace_completion-highlight {                        color: #FF9D00;                        }                        .ace_dark.ace-source.ace_editor.ace_autocomplete .ace_content .ace_marker-layer .ace_active-line {                        border-color: #555555;                        background-color: #495a6b;                        }                        .ace_dark.ace-source.ace_editor.ace_autocomplete .ace_content .ace_marker-layer .ace_line-hover {                        border-color: #555555;                        background-color: #6b839a;                        }                        .ace_dark.ace-source.ace_editor.ace_autocomplete .ace_content.ace_text-layer .ace_rightAlignedText {                        color: #ced9e0;                        }                        .ace_tooltip.ace_doc-tooltip {                        width: 400px;                        max-height: 40vh;                        white-space: normal;                        overflow: auto;                        background-color: #495a6b;                        color: white;                        border-color:#555555;                        }                        .ace_tooltip.ace_doc-tooltip h4 {                        color: white;                        margin: 0 0 1em;                        }                        .ace_tooltip.ace_doc-tooltip a {                        color: #48aff0;                        }                        ",s("../lib/dom").importCssString(r.cssText,r.cssClass)}ace.define("ace/theme/source",["require","exports","module","ace/lib/dom"],theme);var lib$1={},ace$3={},lodash_isequal={exports:{}};lodash_isequal.exports;(function(s,r){var e=200,a="__lodash_hash_undefined__",m=1,h=2,p=9007199254740991,u="[object Arguments]",c="[object Array]",f="[object AsyncFunction]",n="[object Boolean]",t="[object Date]",o="[object Error]",l="[object Function]",d="[object GeneratorFunction]",v="[object Map]",y="[object Number]",x="[object Null]",E="[object Object]",T="[object Promise]",k="[object Proxy]",b="[object RegExp]",S="[object Set]",A="[object String]",C="[object Symbol]",R="[object Undefined]",g="[object WeakMap]",w="[object ArrayBuffer]",$="[object DataView]",L="[object Float32Array]",M="[object Float64Array]",O="[object Int8Array]",I="[object Int16Array]",B="[object Int32Array]",H="[object Uint8Array]",K="[object Uint8ClampedArray]",j="[object Uint16Array]",Y="[object Uint32Array]",Q=/[\\^$.*+?()[\]{}|]/g,z=/^\[object .+?Constructor\]$/,V=/^(?:0|[1-9]\d*)$/,X={};X[L]=X[M]=X[O]=X[I]=X[B]=X[H]=X[K]=X[j]=X[Y]=!0,X[u]=X[c]=X[w]=X[n]=X[$]=X[t]=X[o]=X[l]=X[v]=X[y]=X[E]=X[b]=X[S]=X[A]=X[g]=!1;var ie=typeof commonjsGlobal=="object"&&commonjsGlobal&&commonjsGlobal.Object===Object&&commonjsGlobal,se=typeof self=="object"&&self&&self.Object===Object&&self,ee=ie||se||Function("return this")(),re=r&&!r.nodeType&&r,ae=re&&!0&&s&&!s.nodeType&&s,he=ae&&ae.exports===re,ye=he&&ie.process,Ae=function(){try{return ye&&ye.binding&&ye.binding("util")}catch{}}(),Ce=Ae&&Ae.isTypedArray;function _e(F,U){for(var te=-1,ce=F==null?0:F.length,Ee=0,pe=[];++te<ce;){var Le=F[te];U(Le,te,F)&&(pe[Ee++]=Le)}return pe}function Ne(F,U){for(var te=-1,ce=U.length,Ee=F.length;++te<ce;)F[Ee+te]=U[te];return F}function Qe(F,U){for(var te=-1,ce=F==null?0:F.length;++te<ce;)if(U(F[te],te,F))return!0;return!1}function Ve(F,U){for(var te=-1,ce=Array(F);++te<F;)ce[te]=U(te);return ce}function bt(F){return function(U){return F(U)}}function Ht(F,U){return F.has(U)}function J(F,U){return F?.[U]}function ue(F){var U=-1,te=Array(F.size);return F.forEach(function(ce,Ee){te[++U]=[Ee,ce]}),te}function de(F,U){return function(te){return F(U(te))}}function me(F){var U=-1,te=Array(F.size);return F.forEach(function(ce){te[++U]=ce}),te}var we=Array.prototype,ke=Function.prototype,xe=Object.prototype,$e=ee["__core-js_shared__"],Se=ke.toString,ve=xe.hasOwnProperty,We=function(){var F=/[^.]+$/.exec($e&&$e.keys&&$e.keys.IE_PROTO||"");return F?"Symbol(src)_1."+F:""}(),st=xe.toString,Tt=RegExp("^"+Se.call(ve).replace(Q,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),on=he?ee.Buffer:void 0,At=ee.Symbol,an=ee.Uint8Array,ln=xe.propertyIsEnumerable,Wn=we.splice,at=At?At.toStringTag:void 0,cn=Object.getOwnPropertySymbols,Kn=on?on.isBuffer:void 0,zn=de(Object.keys,Object),Wt=vt(ee,"DataView"),_t=vt(ee,"Map"),Kt=vt(ee,"Promise"),zt=vt(ee,"Set"),jt=vt(ee,"WeakMap"),wt=vt(Object,"create"),jn=ft(Wt),Un=ft(_t),Vn=ft(Kt),Gn=ft(zt),qn=ft(jt),hn=At?At.prototype:void 0,Ut=hn?hn.valueOf:void 0;function be(F){var U=-1,te=F==null?0:F.length;for(this.clear();++U<te;){var ce=F[U];this.set(ce[0],ce[1])}}function Yn(){this.__data__=wt?wt(null):{},this.size=0}function Xn(F){var U=this.has(F)&&delete this.__data__[F];return this.size-=U?1:0,U}function un(F){var U=this.__data__;if(wt){var te=U[F];return te===a?void 0:te}return ve.call(U,F)?U[F]:void 0}function St(F){var U=this.__data__;return wt?U[F]!==void 0:ve.call(U,F)}function Qn(F,U){var te=this.__data__;return this.size+=this.has(F)?0:1,te[F]=wt&&U===void 0?a:U,this}be.prototype.clear=Yn,be.prototype.delete=Xn,be.prototype.get=un,be.prototype.has=St,be.prototype.set=Qn;function Ge(F){var U=-1,te=F==null?0:F.length;for(this.clear();++U<te;){var ce=F[U];this.set(ce[0],ce[1])}}function fn(){this.__data__=[],this.size=0}function dn(F){var U=this.__data__,te=Pe(U,F);if(te<0)return!1;var ce=U.length-1;return te==ce?U.pop():Wn.call(U,te,1),--this.size,!0}function Jn(F){var U=this.__data__,te=Pe(U,F);return te<0?void 0:U[te][1]}function Zn(F){return Pe(this.__data__,F)>-1}function ei(F,U){var te=this.__data__,ce=Pe(te,F);return ce<0?(++this.size,te.push([F,U])):te[ce][1]=U,this}Ge.prototype.clear=fn,Ge.prototype.delete=dn,Ge.prototype.get=Jn,Ge.prototype.has=Zn,Ge.prototype.set=ei;function lt(F){var U=-1,te=F==null?0:F.length;for(this.clear();++U<te;){var ce=F[U];this.set(ce[0],ce[1])}}function ti(){this.size=0,this.__data__={hash:new be,map:new(_t||Ge),string:new be}}function ni(F){var U=Pt(this,F).delete(F);return this.size-=U?1:0,U}function ii(F){return Pt(this,F).get(F)}function ri(F){return Pt(this,F).has(F)}function si(F,U){var te=Pt(this,F),ce=te.size;return te.set(F,U),this.size+=te.size==ce?0:1,this}lt.prototype.clear=ti,lt.prototype.delete=ni,lt.prototype.get=ii,lt.prototype.has=ri,lt.prototype.set=si;function Lt(F){var U=-1,te=F==null?0:F.length;for(this.__data__=new lt;++U<te;)this.add(F[U])}function oi(F){return this.__data__.set(F,a),this}function Vt(F){return this.__data__.has(F)}Lt.prototype.add=Lt.prototype.push=oi,Lt.prototype.has=Vt;function tt(F){var U=this.__data__=new Ge(F);this.size=U.size}function ai(){this.__data__=new Ge,this.size=0}function li(F){var U=this.__data__,te=U.delete(F);return this.size=U.size,te}function ci(F){return this.__data__.get(F)}function qe(F){return this.__data__.has(F)}function Mt(F,U){var te=this.__data__;if(te instanceof Ge){var ce=te.__data__;if(!_t||ce.length<e-1)return ce.push([F,U]),this.size=++te.size,this;te=this.__data__=new lt(ce)}return te.set(F,U),this.size=te.size,this}tt.prototype.clear=ai,tt.prototype.delete=li,tt.prototype.get=ci,tt.prototype.has=qe,tt.prototype.set=Mt;function ct(F,U){var te=$t(F),ce=!te&&yn(F),Ee=!te&&!ce&&Xt(F),pe=!te&&!ce&&!Ee&&Sn(F),Le=te||ce||Ee||pe,Ie=Le?Ve(F.length,String):[],Fe=Ie.length;for(var Re in F)(U||ve.call(F,Re))&&!(Le&&(Re=="length"||Ee&&(Re=="offset"||Re=="parent")||pe&&(Re=="buffer"||Re=="byteLength"||Re=="byteOffset")||fi(Re,Fe)))&&Ie.push(Re);return Ie}function Pe(F,U){for(var te=F.length;te--;)if(mn(F[te][0],U))return te;return-1}function hi(F,U,te){var ce=U(F);return $t(F)?ce:Ne(ce,te(F))}function Ct(F){return F==null?F===void 0?R:x:at&&at in Object(F)?xt(F):di(F)}function Je(F){return kt(F)&&Ct(F)==u}function ht(F,U,te,ce,Ee){return F===U?!0:F==null||U==null||!kt(F)&&!kt(U)?F!==F&&U!==U:gn(F,U,te,ce,ht,Ee)}function gn(F,U,te,ce,Ee,pe){var Le=$t(F),Ie=$t(U),Fe=Le?c:nt(F),Re=Ie?c:nt(U);Fe=Fe==u?E:Fe,Re=Re==u?E:Re;var Ke=Fe==E,ze=Re==E,De=Fe==Re;if(De&&Xt(F)){if(!Xt(U))return!1;Le=!0,Ke=!1}if(De&&!Ke)return pe||(pe=new tt),Le||Sn(F)?ut(F,U,te,ce,Ee,pe):Gt(F,U,Fe,te,ce,Ee,pe);if(!(te&m)){var Ue=Ke&&ve.call(F,"__wrapped__"),je=ze&&ve.call(U,"__wrapped__");if(Ue||je){var Ze=Ue?F.value():F,Ye=je?U.value():U;return pe||(pe=new tt),Ee(Ze,Ye,te,ce,pe)}}return De?(pe||(pe=new tt),vn(F,U,te,ce,Ee,pe)):!1}function Ot(F){if(!wn(F)||qt(F))return!1;var U=bn(F)?Tt:z;return U.test(ft(F))}function pn(F){return kt(F)&&_n(F.length)&&!!X[Ct(F)]}function pt(F){if(!mt(F))return zn(F);var U=[];for(var te in Object(F))ve.call(F,te)&&te!="constructor"&&U.push(te);return U}function ut(F,U,te,ce,Ee,pe){var Le=te&m,Ie=F.length,Fe=U.length;if(Ie!=Fe&&!(Le&&Fe>Ie))return!1;var Re=pe.get(F);if(Re&&pe.get(U))return Re==U;var Ke=-1,ze=!0,De=te&h?new Lt:void 0;for(pe.set(F,U),pe.set(U,F);++Ke<Ie;){var Ue=F[Ke],je=U[Ke];if(ce)var Ze=Le?ce(je,Ue,Ke,U,F,pe):ce(Ue,je,Ke,F,U,pe);if(Ze!==void 0){if(Ze)continue;ze=!1;break}if(De){if(!Qe(U,function(Ye,dt){if(!Ht(De,dt)&&(Ue===Ye||Ee(Ue,Ye,te,ce,pe)))return De.push(dt)})){ze=!1;break}}else if(!(Ue===je||Ee(Ue,je,te,ce,pe))){ze=!1;break}}return pe.delete(F),pe.delete(U),ze}function Gt(F,U,te,ce,Ee,pe,Le){switch(te){case $:if(F.byteLength!=U.byteLength||F.byteOffset!=U.byteOffset)return!1;F=F.buffer,U=U.buffer;case w:return!(F.byteLength!=U.byteLength||!pe(new an(F),new an(U)));case n:case t:case y:return mn(+F,+U);case o:return F.name==U.name&&F.message==U.message;case b:case A:return F==U+"";case v:var Ie=ue;case S:var Fe=ce&m;if(Ie||(Ie=me),F.size!=U.size&&!Fe)return!1;var Re=Le.get(F);if(Re)return Re==U;ce|=h,Le.set(F,U);var Ke=ut(Ie(F),Ie(U),ce,Ee,pe,Le);return Le.delete(F),Ke;case C:if(Ut)return Ut.call(F)==Ut.call(U)}return!1}function vn(F,U,te,ce,Ee,pe){var Le=te&m,Ie=Et(F),Fe=Ie.length,Re=Et(U),Ke=Re.length;if(Fe!=Ke&&!Le)return!1;for(var ze=Fe;ze--;){var De=Ie[ze];if(!(Le?De in U:ve.call(U,De)))return!1}var Ue=pe.get(F);if(Ue&&pe.get(U))return Ue==U;var je=!0;pe.set(F,U),pe.set(U,F);for(var Ze=Le;++ze<Fe;){De=Ie[ze];var Ye=F[De],dt=U[De];if(ce)var Qt=Le?ce(dt,Ye,De,U,F,pe):ce(Ye,dt,De,F,U,pe);if(!(Qt===void 0?Ye===dt||Ee(Ye,dt,te,ce,pe):Qt)){je=!1;break}Ze||(Ze=De=="constructor")}if(je&&!Ze){var Rt=F.constructor,Dt=U.constructor;Rt!=Dt&&"constructor"in F&&"constructor"in U&&!(typeof Rt=="function"&&Rt instanceof Rt&&typeof Dt=="function"&&Dt instanceof Dt)&&(je=!1)}return pe.delete(F),pe.delete(U),je}function Et(F){return hi(F,pi,ui)}function Pt(F,U){var te=F.__data__;return It(U)?te[typeof U=="string"?"string":"hash"]:te.map}function vt(F,U){var te=J(F,U);return Ot(te)?te:void 0}function xt(F){var U=ve.call(F,at),te=F[at];try{F[at]=void 0;var ce=!0}catch{}var Ee=st.call(F);return ce&&(U?F[at]=te:delete F[at]),Ee}var ui=cn?function(F){return F==null?[]:(F=Object(F),_e(cn(F),function(U){return ln.call(F,U)}))}:vi,nt=Ct;(Wt&&nt(new Wt(new ArrayBuffer(1)))!=$||_t&&nt(new _t)!=v||Kt&&nt(Kt.resolve())!=T||zt&&nt(new zt)!=S||jt&&nt(new jt)!=g)&&(nt=function(F){var U=Ct(F),te=U==E?F.constructor:void 0,ce=te?ft(te):"";if(ce)switch(ce){case jn:return $;case Un:return v;case Vn:return T;case Gn:return S;case qn:return g}return U});function fi(F,U){return U=U??p,!!U&&(typeof F=="number"||V.test(F))&&F>-1&&F%1==0&&F<U}function It(F){var U=typeof F;return U=="string"||U=="number"||U=="symbol"||U=="boolean"?F!=="__proto__":F===null}function qt(F){return!!We&&We in F}function mt(F){var U=F&&F.constructor,te=typeof U=="function"&&U.prototype||xe;return F===te}function di(F){return st.call(F)}function ft(F){if(F!=null){try{return Se.call(F)}catch{}try{return F+""}catch{}}return""}function mn(F,U){return F===U||F!==F&&U!==U}var yn=Je(function(){return arguments}())?Je:function(F){return kt(F)&&ve.call(F,"callee")&&!ln.call(F,"callee")},$t=Array.isArray;function Yt(F){return F!=null&&_n(F.length)&&!bn(F)}var Xt=Kn||mi;function gi(F,U){return ht(F,U)}function bn(F){if(!wn(F))return!1;var U=Ct(F);return U==l||U==d||U==f||U==k}function _n(F){return typeof F=="number"&&F>-1&&F%1==0&&F<=p}function wn(F){var U=typeof F;return F!=null&&(U=="object"||U=="function")}function kt(F){return F!=null&&typeof F=="object"}var Sn=Ce?bt(Ce):pn;function pi(F){return Yt(F)?ct(F):pt(F)}function vi(){return[]}function mi(){return!1}s.exports=gi})(lodash_isequal,lodash_isequal.exports);var lodash_isequalExports=lodash_isequal.exports,editorOptions$1={};Object.defineProperty(editorOptions$1,"__esModule",{value:!0});editorOptions$1.getAceInstance=editorOptions$1.debounce=editorOptions$1.editorEvents=editorOptions$1.editorOptions=void 0;var editorOptions=["minLines","maxLines","readOnly","highlightActiveLine","tabSize","enableBasicAutocompletion","enableLiveAutocompletion","enableSnippets"];editorOptions$1.editorOptions=editorOptions;var editorEvents=["onChange","onFocus","onInput","onBlur","onCopy","onPaste","onSelectionChange","onCursorChange","onScroll","handleOptions","updateRef"];editorOptions$1.editorEvents=editorEvents;var getAceInstance=function(){var s;return typeof window>"u"?(commonjsGlobal.window={},s=aceExports,delete commonjsGlobal.window):window.ace?(s=window.ace,s.acequire=window.ace.require||window.ace.acequire):s=aceExports,s};editorOptions$1.getAceInstance=getAceInstance;var debounce=function(s,r){var e=null;return function(){var a=this,m=arguments;clearTimeout(e),e=setTimeout(function(){s.apply(a,m)},r)}};editorOptions$1.debounce=debounce;var __extends$3=commonjsGlobal&&commonjsGlobal.__extends||function(){var s=function(r,e){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,m){a.__proto__=m}||function(a,m){for(var h in m)Object.prototype.hasOwnProperty.call(m,h)&&(a[h]=m[h])},s(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");s(r,e);function a(){this.constructor=r}r.prototype=e===null?Object.create(e):(a.prototype=e.prototype,new a)}}(),__assign$1=commonjsGlobal&&commonjsGlobal.__assign||function(){return __assign$1=Object.assign||function(s){for(var r,e=1,a=arguments.length;e<a;e++){r=arguments[e];for(var m in r)Object.prototype.hasOwnProperty.call(r,m)&&(s[m]=r[m])}return s},__assign$1.apply(this,arguments)};Object.defineProperty(ace$3,"__esModule",{value:!0});var ace_builds_1$1=aceExports,PropTypes$2=propTypesExports,React$2=reactExports,isEqual$1=lodash_isequalExports,editorOptions_1$1=editorOptions$1,ace$2=(0,editorOptions_1$1.getAceInstance)(),ReactAce=function(s){__extends$3(r,s);function r(e){var a=s.call(this,e)||this;return editorOptions_1$1.editorEvents.forEach(function(m){a[m]=a[m].bind(a)}),a.debounce=editorOptions_1$1.debounce,a}return r.prototype.isInShadow=function(e){for(var a=e&&e.parentNode;a;){if(a.toString()==="[object ShadowRoot]")return!0;a=a.parentNode}return!1},r.prototype.componentDidMount=function(){var e=this,a=this.props,m=a.className,h=a.onBeforeLoad,p=a.onValidate,u=a.mode,c=a.focus,f=a.theme,n=a.fontSize,t=a.value,o=a.defaultValue,l=a.showGutter,d=a.wrapEnabled,v=a.showPrintMargin,y=a.scrollMargin,x=y===void 0?[0,0,0,0]:y,E=a.keyboardHandler,T=a.onLoad,k=a.commands,b=a.annotations,S=a.markers,A=a.placeholder;this.editor=ace$2.edit(this.refEditor),h&&h(ace$2);for(var C=Object.keys(this.props.editorProps),R=0;R<C.length;R++)this.editor[C[R]]=this.props.editorProps[C[R]];this.props.debounceChangePeriod&&(this.onChange=this.debounce(this.onChange,this.props.debounceChangePeriod)),this.editor.renderer.setScrollMargin(x[0],x[1],x[2],x[3]),this.isInShadow(this.refEditor)&&this.editor.renderer.attachToShadowRoot(),this.editor.getSession().setMode(typeof u=="string"?"ace/mode/".concat(u):u),f&&f!==""&&this.editor.setTheme("ace/theme/".concat(f)),this.editor.setFontSize(typeof n=="number"?"".concat(n,"px"):n),this.editor.getSession().setValue(o||t||""),this.props.navigateToFileEnd&&this.editor.navigateFileEnd(),this.editor.renderer.setShowGutter(l),this.editor.getSession().setUseWrapMode(d),this.editor.setShowPrintMargin(v),this.editor.on("focus",this.onFocus),this.editor.on("blur",this.onBlur),this.editor.on("copy",this.onCopy),this.editor.on("paste",this.onPaste),this.editor.on("change",this.onChange),this.editor.on("input",this.onInput),A&&this.updatePlaceholder(),this.editor.getSession().selection.on("changeSelection",this.onSelectionChange),this.editor.getSession().selection.on("changeCursor",this.onCursorChange),p&&this.editor.getSession().on("changeAnnotation",function(){var w=e.editor.getSession().getAnnotations();e.props.onValidate(w)}),this.editor.session.on("changeScrollTop",this.onScroll),this.editor.getSession().setAnnotations(b||[]),S&&S.length>0&&this.handleMarkers(S);var g=this.editor.$options;editorOptions_1$1.editorOptions.forEach(function(w){g.hasOwnProperty(w)?e.editor.setOption(w,e.props[w]):e.props[w]&&console.warn("ReactAce: editor option ".concat(w," was activated but not found. Did you need to import a related tool or did you possibly mispell the option?"))}),this.handleOptions(this.props),Array.isArray(k)&&k.forEach(function(w){typeof w.exec=="string"?e.editor.commands.bindKey(w.bindKey,w.exec):e.editor.commands.addCommand(w)}),E&&this.editor.setKeyboardHandler("ace/keyboard/"+E),m&&(this.refEditor.className+=" "+m),T&&T(this.editor),this.editor.resize(),c&&this.editor.focus()},r.prototype.componentDidUpdate=function(e){for(var a=e,m=this.props,h=0;h<editorOptions_1$1.editorOptions.length;h++){var p=editorOptions_1$1.editorOptions[h];m[p]!==a[p]&&this.editor.setOption(p,m[p])}if(m.className!==a.className){var u=this.refEditor.className,c=u.trim().split(" "),f=a.className.trim().split(" ");f.forEach(function(o){var l=c.indexOf(o);c.splice(l,1)}),this.refEditor.className=" "+m.className+" "+c.join(" ")}var n=this.editor&&m.value!=null&&this.editor.getValue()!==m.value;if(n){this.silent=!0;var t=this.editor.session.selection.toJSON();this.editor.setValue(m.value,m.cursorStart),this.editor.session.selection.fromJSON(t),this.silent=!1}m.placeholder!==a.placeholder&&this.updatePlaceholder(),m.mode!==a.mode&&this.editor.getSession().setMode(typeof m.mode=="string"?"ace/mode/".concat(m.mode):m.mode),m.theme!==a.theme&&this.editor.setTheme("ace/theme/"+m.theme),m.keyboardHandler!==a.keyboardHandler&&(m.keyboardHandler?this.editor.setKeyboardHandler("ace/keyboard/"+m.keyboardHandler):this.editor.setKeyboardHandler(null)),m.fontSize!==a.fontSize&&this.editor.setFontSize(typeof m.fontSize=="number"?"".concat(m.fontSize,"px"):m.fontSize),m.wrapEnabled!==a.wrapEnabled&&this.editor.getSession().setUseWrapMode(m.wrapEnabled),m.showPrintMargin!==a.showPrintMargin&&this.editor.setShowPrintMargin(m.showPrintMargin),m.showGutter!==a.showGutter&&this.editor.renderer.setShowGutter(m.showGutter),isEqual$1(m.setOptions,a.setOptions)||this.handleOptions(m),(n||!isEqual$1(m.annotations,a.annotations))&&this.editor.getSession().setAnnotations(m.annotations||[]),!isEqual$1(m.markers,a.markers)&&Array.isArray(m.markers)&&this.handleMarkers(m.markers),isEqual$1(m.scrollMargin,a.scrollMargin)||this.handleScrollMargins(m.scrollMargin),(e.height!==this.props.height||e.width!==this.props.width)&&this.editor.resize(),this.props.focus&&!e.focus&&this.editor.focus()},r.prototype.handleScrollMargins=function(e){e===void 0&&(e=[0,0,0,0]),this.editor.renderer.setScrollMargin(e[0],e[1],e[2],e[3])},r.prototype.componentWillUnmount=function(){this.editor&&(this.editor.destroy(),this.editor=null)},r.prototype.onChange=function(e){if(this.props.onChange&&!this.silent){var a=this.editor.getValue();this.props.onChange(a,e)}},r.prototype.onSelectionChange=function(e){if(this.props.onSelectionChange){var a=this.editor.getSelection();this.props.onSelectionChange(a,e)}},r.prototype.onCursorChange=function(e){if(this.props.onCursorChange){var a=this.editor.getSelection();this.props.onCursorChange(a,e)}},r.prototype.onInput=function(e){this.props.onInput&&this.props.onInput(e),this.props.placeholder&&this.updatePlaceholder()},r.prototype.onFocus=function(e){this.props.onFocus&&this.props.onFocus(e,this.editor)},r.prototype.onBlur=function(e){this.props.onBlur&&this.props.onBlur(e,this.editor)},r.prototype.onCopy=function(e){var a=e.text;this.props.onCopy&&this.props.onCopy(a)},r.prototype.onPaste=function(e){var a=e.text;this.props.onPaste&&this.props.onPaste(a)},r.prototype.onScroll=function(){this.props.onScroll&&this.props.onScroll(this.editor)},r.prototype.handleOptions=function(e){for(var a=Object.keys(e.setOptions),m=0;m<a.length;m++)this.editor.setOption(a[m],e.setOptions[a[m]])},r.prototype.handleMarkers=function(e){var a=this,m=this.editor.getSession().getMarkers(!0);for(var h in m)m.hasOwnProperty(h)&&this.editor.getSession().removeMarker(m[h].id);m=this.editor.getSession().getMarkers(!1);for(var h in m)m.hasOwnProperty(h)&&m[h].clazz!=="ace_active-line"&&m[h].clazz!=="ace_selected-word"&&this.editor.getSession().removeMarker(m[h].id);e.forEach(function(p){var u=p.startRow,c=p.startCol,f=p.endRow,n=p.endCol,t=p.className,o=p.type,l=p.inFront,d=l===void 0?!1:l,v=new ace_builds_1$1.Range(u,c,f,n);a.editor.getSession().addMarker(v,t,o,d)})},r.prototype.updatePlaceholder=function(){var e=this.editor,a=this.props.placeholder,m=!e.session.getValue().length,h=e.renderer.placeholderNode;!m&&h?(e.renderer.scroller.removeChild(e.renderer.placeholderNode),e.renderer.placeholderNode=null):m&&!h?(h=e.renderer.placeholderNode=document.createElement("div"),h.textContent=a||"",h.className="ace_comment ace_placeholder",h.style.padding="0 9px",h.style.position="absolute",h.style.zIndex="3",e.renderer.scroller.appendChild(h)):m&&h&&(h.textContent=a)},r.prototype.updateRef=function(e){this.refEditor=e},r.prototype.render=function(){var e=this.props,a=e.name,m=e.width,h=e.height,p=e.style,u=__assign$1({width:m,height:h},p);return React$2.createElement("div",{ref:this.updateRef,id:a,style:u})},r.propTypes={mode:PropTypes$2.oneOfType([PropTypes$2.string,PropTypes$2.object]),focus:PropTypes$2.bool,theme:PropTypes$2.string,name:PropTypes$2.string,className:PropTypes$2.string,height:PropTypes$2.string,width:PropTypes$2.string,fontSize:PropTypes$2.oneOfType([PropTypes$2.number,PropTypes$2.string]),showGutter:PropTypes$2.bool,onChange:PropTypes$2.func,onCopy:PropTypes$2.func,onPaste:PropTypes$2.func,onFocus:PropTypes$2.func,onInput:PropTypes$2.func,onBlur:PropTypes$2.func,onScroll:PropTypes$2.func,value:PropTypes$2.string,defaultValue:PropTypes$2.string,onLoad:PropTypes$2.func,onSelectionChange:PropTypes$2.func,onCursorChange:PropTypes$2.func,onBeforeLoad:PropTypes$2.func,onValidate:PropTypes$2.func,minLines:PropTypes$2.number,maxLines:PropTypes$2.number,readOnly:PropTypes$2.bool,highlightActiveLine:PropTypes$2.bool,tabSize:PropTypes$2.number,showPrintMargin:PropTypes$2.bool,cursorStart:PropTypes$2.number,debounceChangePeriod:PropTypes$2.number,editorProps:PropTypes$2.object,setOptions:PropTypes$2.object,style:PropTypes$2.object,scrollMargin:PropTypes$2.array,annotations:PropTypes$2.array,markers:PropTypes$2.array,keyboardHandler:PropTypes$2.string,wrapEnabled:PropTypes$2.bool,enableSnippets:PropTypes$2.bool,enableBasicAutocompletion:PropTypes$2.oneOfType([PropTypes$2.bool,PropTypes$2.array]),enableLiveAutocompletion:PropTypes$2.oneOfType([PropTypes$2.bool,PropTypes$2.array]),navigateToFileEnd:PropTypes$2.bool,commands:PropTypes$2.array,placeholder:PropTypes$2.string},r.defaultProps={name:"ace-editor",focus:!1,mode:"",theme:"",height:"500px",width:"500px",fontSize:12,enableSnippets:!1,showGutter:!0,onChange:null,onPaste:null,onLoad:null,onScroll:null,minLines:null,maxLines:null,readOnly:!1,highlightActiveLine:!0,showPrintMargin:!0,tabSize:4,cursorStart:1,editorProps:{},style:{},scrollMargin:[0,0,0,0],setOptions:{},wrapEnabled:!1,enableBasicAutocompletion:!1,enableLiveAutocompletion:!1,placeholder:null,navigateToFileEnd:!0},r}(React$2.Component);ace$3.default=ReactAce;var diff={},split={},extSplit={exports:{}};(function(s,r){ace.define("ace/split",["require","exports","module","ace/lib/oop","ace/lib/lang","ace/lib/event_emitter","ace/editor","ace/virtual_renderer","ace/edit_session"],function(e,a,m){var h=e("./lib/oop");e("./lib/lang");var p=e("./lib/event_emitter").EventEmitter,u=e("./editor").Editor,c=e("./virtual_renderer").VirtualRenderer,f=e("./edit_session").EditSession,n=function(t,o,l){this.BELOW=1,this.BESIDE=0,this.$container=t,this.$theme=o,this.$splits=0,this.$editorCSS="",this.$editors=[],this.$orientation=this.BESIDE,this.setSplits(l||1),this.$cEditor=this.$editors[0],this.on("focus",function(d){this.$cEditor=d}.bind(this))};(function(){h.implement(this,p),this.$createEditor=function(){var t=document.createElement("div");t.className=this.$editorCSS,t.style.cssText="position: absolute; top:0px; bottom:0px",this.$container.appendChild(t);var o=new u(new c(t,this.$theme));return o.on("focus",function(){this._emit("focus",o)}.bind(this)),this.$editors.push(o),o.setFontSize(this.$fontSize),o},this.setSplits=function(t){var o;if(t<1)throw"The number of splits have to be > 0!";if(t!=this.$splits){if(t>this.$splits){for(;this.$splits<this.$editors.length&&this.$splits<t;)o=this.$editors[this.$splits],this.$container.appendChild(o.container),o.setFontSize(this.$fontSize),this.$splits++;for(;this.$splits<t;)this.$createEditor(),this.$splits++}else for(;this.$splits>t;)o=this.$editors[this.$splits-1],this.$container.removeChild(o.container),this.$splits--;this.resize()}},this.getSplits=function(){return this.$splits},this.getEditor=function(t){return this.$editors[t]},this.getCurrentEditor=function(){return this.$cEditor},this.focus=function(){this.$cEditor.focus()},this.blur=function(){this.$cEditor.blur()},this.setTheme=function(t){this.$editors.forEach(function(o){o.setTheme(t)})},this.setKeyboardHandler=function(t){this.$editors.forEach(function(o){o.setKeyboardHandler(t)})},this.forEach=function(t,o){this.$editors.forEach(t,o)},this.$fontSize="",this.setFontSize=function(t){this.$fontSize=t,this.forEach(function(o){o.setFontSize(t)})},this.$cloneSession=function(t){var o=new f(t.getDocument(),t.getMode()),l=t.getUndoManager();return o.setUndoManager(l),o.setTabSize(t.getTabSize()),o.setUseSoftTabs(t.getUseSoftTabs()),o.setOverwrite(t.getOverwrite()),o.setBreakpoints(t.getBreakpoints()),o.setUseWrapMode(t.getUseWrapMode()),o.setUseWorker(t.getUseWorker()),o.setWrapLimitRange(t.$wrapLimitRange.min,t.$wrapLimitRange.max),o.$foldData=t.$cloneFoldData(),o},this.setSession=function(t,o){var l;o==null?l=this.$cEditor:l=this.$editors[o];var d=this.$editors.some(function(v){return v.session===t});return d&&(t=this.$cloneSession(t)),l.setSession(t),t},this.getOrientation=function(){return this.$orientation},this.setOrientation=function(t){this.$orientation!=t&&(this.$orientation=t,this.resize())},this.resize=function(){var t=this.$container.clientWidth,o=this.$container.clientHeight,l;if(this.$orientation==this.BESIDE)for(var d=t/this.$splits,v=0;v<this.$splits;v++)l=this.$editors[v],l.container.style.width=d+"px",l.container.style.top="0px",l.container.style.left=v*d+"px",l.container.style.height=o+"px",l.resize();else for(var y=o/this.$splits,v=0;v<this.$splits;v++)l=this.$editors[v],l.container.style.width=t+"px",l.container.style.top=v*y+"px",l.container.style.left="0px",l.container.style.height=y+"px",l.resize()}}).call(n.prototype),a.Split=n}),ace.define("ace/ext/split",["require","exports","module","ace/split"],function(e,a,m){m.exports=e("../split")}),function(){ace.require(["ace/ext/split"],function(e){s&&(s.exports=e)})}()})(extSplit);var extSplitExports=extSplit.exports,FUNC_ERROR_TEXT="Expected a function",HASH_UNDEFINED="__lodash_hash_undefined__",INFINITY=1/0,funcTag="[object Function]",genTag="[object GeneratorFunction]",symbolTag="[object Symbol]",reIsDeepProp=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,reIsPlainProp=/^\w*$/,reLeadingDot=/^\./,rePropName=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,reRegExpChar=/[\\^$.*+?()[\]{}|]/g,reEscapeChar=/\\(\\)?/g,reIsHostCtor=/^\[object .+?Constructor\]$/,freeGlobal=typeof commonjsGlobal=="object"&&commonjsGlobal&&commonjsGlobal.Object===Object&&commonjsGlobal,freeSelf=typeof self=="object"&&self&&self.Object===Object&&self,root=freeGlobal||freeSelf||Function("return this")();function getValue(s,r){return s?.[r]}function isHostObject(s){var r=!1;if(s!=null&&typeof s.toString!="function")try{r=!!(s+"")}catch{}return r}var arrayProto=Array.prototype,funcProto=Function.prototype,objectProto=Object.prototype,coreJsData=root["__core-js_shared__"],maskSrcKey=function(){var s=/[^.]+$/.exec(coreJsData&&coreJsData.keys&&coreJsData.keys.IE_PROTO||"");return s?"Symbol(src)_1."+s:""}(),funcToString=funcProto.toString,hasOwnProperty=objectProto.hasOwnProperty,objectToString=objectProto.toString,reIsNative=RegExp("^"+funcToString.call(hasOwnProperty).replace(reRegExpChar,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Symbol$1=root.Symbol,splice=arrayProto.splice,Map$1=getNative(root,"Map"),nativeCreate=getNative(Object,"create"),symbolProto=Symbol$1?Symbol$1.prototype:void 0,symbolToString=symbolProto?symbolProto.toString:void 0;function Hash(s){var r=-1,e=s?s.length:0;for(this.clear();++r<e;){var a=s[r];this.set(a[0],a[1])}}function hashClear(){this.__data__=nativeCreate?nativeCreate(null):{}}function hashDelete(s){return this.has(s)&&delete this.__data__[s]}function hashGet(s){var r=this.__data__;if(nativeCreate){var e=r[s];return e===HASH_UNDEFINED?void 0:e}return hasOwnProperty.call(r,s)?r[s]:void 0}function hashHas(s){var r=this.__data__;return nativeCreate?r[s]!==void 0:hasOwnProperty.call(r,s)}function hashSet(s,r){var e=this.__data__;return e[s]=nativeCreate&&r===void 0?HASH_UNDEFINED:r,this}Hash.prototype.clear=hashClear;Hash.prototype.delete=hashDelete;Hash.prototype.get=hashGet;Hash.prototype.has=hashHas;Hash.prototype.set=hashSet;function ListCache(s){var r=-1,e=s?s.length:0;for(this.clear();++r<e;){var a=s[r];this.set(a[0],a[1])}}function listCacheClear(){this.__data__=[]}function listCacheDelete(s){var r=this.__data__,e=assocIndexOf(r,s);if(e<0)return!1;var a=r.length-1;return e==a?r.pop():splice.call(r,e,1),!0}function listCacheGet(s){var r=this.__data__,e=assocIndexOf(r,s);return e<0?void 0:r[e][1]}function listCacheHas(s){return assocIndexOf(this.__data__,s)>-1}function listCacheSet(s,r){var e=this.__data__,a=assocIndexOf(e,s);return a<0?e.push([s,r]):e[a][1]=r,this}ListCache.prototype.clear=listCacheClear;ListCache.prototype.delete=listCacheDelete;ListCache.prototype.get=listCacheGet;ListCache.prototype.has=listCacheHas;ListCache.prototype.set=listCacheSet;function MapCache(s){var r=-1,e=s?s.length:0;for(this.clear();++r<e;){var a=s[r];this.set(a[0],a[1])}}function mapCacheClear(){this.__data__={hash:new Hash,map:new(Map$1||ListCache),string:new Hash}}function mapCacheDelete(s){return getMapData(this,s).delete(s)}function mapCacheGet(s){return getMapData(this,s).get(s)}function mapCacheHas(s){return getMapData(this,s).has(s)}function mapCacheSet(s,r){return getMapData(this,s).set(s,r),this}MapCache.prototype.clear=mapCacheClear;MapCache.prototype.delete=mapCacheDelete;MapCache.prototype.get=mapCacheGet;MapCache.prototype.has=mapCacheHas;MapCache.prototype.set=mapCacheSet;function assocIndexOf(s,r){for(var e=s.length;e--;)if(eq(s[e][0],r))return e;return-1}function baseGet(s,r){r=isKey(r,s)?[r]:castPath(r);for(var e=0,a=r.length;s!=null&&e<a;)s=s[toKey(r[e++])];return e&&e==a?s:void 0}function baseIsNative(s){if(!isObject$1(s)||isMasked(s))return!1;var r=isFunction(s)||isHostObject(s)?reIsNative:reIsHostCtor;return r.test(toSource(s))}function baseToString(s){if(typeof s=="string")return s;if(isSymbol(s))return symbolToString?symbolToString.call(s):"";var r=s+"";return r=="0"&&1/s==-INFINITY?"-0":r}function castPath(s){return isArray$2(s)?s:stringToPath(s)}function getMapData(s,r){var e=s.__data__;return isKeyable(r)?e[typeof r=="string"?"string":"hash"]:e.map}function getNative(s,r){var e=getValue(s,r);return baseIsNative(e)?e:void 0}function isKey(s,r){if(isArray$2(s))return!1;var e=typeof s;return e=="number"||e=="symbol"||e=="boolean"||s==null||isSymbol(s)?!0:reIsPlainProp.test(s)||!reIsDeepProp.test(s)||r!=null&&s in Object(r)}function isKeyable(s){var r=typeof s;return r=="string"||r=="number"||r=="symbol"||r=="boolean"?s!=="__proto__":s===null}function isMasked(s){return!!maskSrcKey&&maskSrcKey in s}var stringToPath=memoize(function(s){s=toString(s);var r=[];return reLeadingDot.test(s)&&r.push(""),s.replace(rePropName,function(e,a,m,h){r.push(m?h.replace(reEscapeChar,"$1"):a||e)}),r});function toKey(s){if(typeof s=="string"||isSymbol(s))return s;var r=s+"";return r=="0"&&1/s==-INFINITY?"-0":r}function toSource(s){if(s!=null){try{return funcToString.call(s)}catch{}try{return s+""}catch{}}return""}function memoize(s,r){if(typeof s!="function"||r&&typeof r!="function")throw new TypeError(FUNC_ERROR_TEXT);var e=function(){var a=arguments,m=r?r.apply(this,a):a[0],h=e.cache;if(h.has(m))return h.get(m);var p=s.apply(this,a);return e.cache=h.set(m,p),p};return e.cache=new(memoize.Cache||MapCache),e}memoize.Cache=MapCache;function eq(s,r){return s===r||s!==s&&r!==r}var isArray$2=Array.isArray;function isFunction(s){var r=isObject$1(s)?objectToString.call(s):"";return r==funcTag||r==genTag}function isObject$1(s){var r=typeof s;return!!s&&(r=="object"||r=="function")}function isObjectLike(s){return!!s&&typeof s=="object"}function isSymbol(s){return typeof s=="symbol"||isObjectLike(s)&&objectToString.call(s)==symbolTag}function toString(s){return s==null?"":baseToString(s)}function get$1(s,r,e){var a=s==null?void 0:baseGet(s,r);return a===void 0?e:a}var lodash_get=get$1,__extends$2=commonjsGlobal&&commonjsGlobal.__extends||function(){var s=function(r,e){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,m){a.__proto__=m}||function(a,m){for(var h in m)Object.prototype.hasOwnProperty.call(m,h)&&(a[h]=m[h])},s(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");s(r,e);function a(){this.constructor=r}r.prototype=e===null?Object.create(e):(a.prototype=e.prototype,new a)}}(),__assign=commonjsGlobal&&commonjsGlobal.__assign||function(){return __assign=Object.assign||function(s){for(var r,e=1,a=arguments.length;e<a;e++){r=arguments[e];for(var m in r)Object.prototype.hasOwnProperty.call(r,m)&&(s[m]=r[m])}return s},__assign.apply(this,arguments)};Object.defineProperty(split,"__esModule",{value:!0});var editorOptions_1=editorOptions$1,ace$1=(0,editorOptions_1.getAceInstance)(),ace_builds_1=aceExports,ext_split_1=extSplitExports,PropTypes$1=propTypesExports,React$1=reactExports,isEqual=lodash_isequalExports,get=lodash_get,SplitComponent=function(s){__extends$2(r,s);function r(e){var a=s.call(this,e)||this;return editorOptions_1.editorEvents.forEach(function(m){a[m]=a[m].bind(a)}),a.debounce=editorOptions_1.debounce,a}return r.prototype.isInShadow=function(e){for(var a=e&&e.parentNode;a;){if(a.toString()==="[object ShadowRoot]")return!0;a=a.parentNode}return!1},r.prototype.componentDidMount=function(){var e=this,a=this.props,m=a.className,h=a.onBeforeLoad,p=a.mode,u=a.focus,c=a.theme,f=a.fontSize,n=a.value,t=a.defaultValue,o=a.cursorStart,l=a.showGutter,d=a.wrapEnabled,v=a.showPrintMargin,y=a.scrollMargin,x=y===void 0?[0,0,0,0]:y,E=a.keyboardHandler,T=a.onLoad,k=a.commands,b=a.annotations,S=a.markers,A=a.splits;this.editor=ace$1.edit(this.refEditor),this.isInShadow(this.refEditor)&&this.editor.renderer.attachToShadowRoot(),this.editor.setTheme("ace/theme/".concat(c)),h&&h(ace$1);var C=Object.keys(this.props.editorProps),R=new ext_split_1.Split(this.editor.container,"ace/theme/".concat(c),A);this.editor.env.split=R,this.splitEditor=R.getEditor(0),this.split=R,this.editor.setShowPrintMargin(!1),this.editor.renderer.setShowGutter(!1);var g=this.splitEditor.$options;this.props.debounceChangePeriod&&(this.onChange=this.debounce(this.onChange,this.props.debounceChangePeriod)),R.forEach(function($,L){for(var M=0;M<C.length;M++)$[C[M]]=e.props.editorProps[C[M]];var O=get(t,L),I=get(n,L,"");$.session.setUndoManager(new ace$1.UndoManager),$.setTheme("ace/theme/".concat(c)),$.renderer.setScrollMargin(x[0],x[1],x[2],x[3]),$.getSession().setMode("ace/mode/".concat(p)),$.setFontSize(f),$.renderer.setShowGutter(l),$.getSession().setUseWrapMode(d),$.setShowPrintMargin(v),$.on("focus",e.onFocus),$.on("blur",e.onBlur),$.on("input",e.onInput),$.on("copy",e.onCopy),$.on("paste",e.onPaste),$.on("change",e.onChange),$.getSession().selection.on("changeSelection",e.onSelectionChange),$.getSession().selection.on("changeCursor",e.onCursorChange),$.session.on("changeScrollTop",e.onScroll),$.setValue(O===void 0?I:O,o);var B=get(b,L,[]),H=get(S,L,[]);$.getSession().setAnnotations(B),H&&H.length>0&&e.handleMarkers(H,$);for(var M=0;M<editorOptions_1.editorOptions.length;M++){var K=editorOptions_1.editorOptions[M];g.hasOwnProperty(K)?$.setOption(K,e.props[K]):e.props[K]&&console.warn("ReaceAce: editor option ".concat(K," was activated but not found. Did you need to import a related tool or did you possibly mispell the option?"))}e.handleOptions(e.props,$),Array.isArray(k)&&k.forEach(function(j){typeof j.exec=="string"?$.commands.bindKey(j.bindKey,j.exec):$.commands.addCommand(j)}),E&&$.setKeyboardHandler("ace/keyboard/"+E)}),m&&(this.refEditor.className+=" "+m),u&&this.splitEditor.focus();var w=this.editor.env.split;w.setOrientation(this.props.orientation==="below"?w.BELOW:w.BESIDE),w.resize(!0),T&&T(w)},r.prototype.componentDidUpdate=function(e){var a=this,m=e,h=this.props,p=this.editor.env.split;if(h.splits!==m.splits&&p.setSplits(h.splits),h.orientation!==m.orientation&&p.setOrientation(h.orientation==="below"?p.BELOW:p.BESIDE),p.forEach(function(n,t){h.mode!==m.mode&&n.getSession().setMode("ace/mode/"+h.mode),h.keyboardHandler!==m.keyboardHandler&&(h.keyboardHandler?n.setKeyboardHandler("ace/keyboard/"+h.keyboardHandler):n.setKeyboardHandler(null)),h.fontSize!==m.fontSize&&n.setFontSize(h.fontSize),h.wrapEnabled!==m.wrapEnabled&&n.getSession().setUseWrapMode(h.wrapEnabled),h.showPrintMargin!==m.showPrintMargin&&n.setShowPrintMargin(h.showPrintMargin),h.showGutter!==m.showGutter&&n.renderer.setShowGutter(h.showGutter);for(var o=0;o<editorOptions_1.editorOptions.length;o++){var l=editorOptions_1.editorOptions[o];h[l]!==m[l]&&n.setOption(l,h[l])}isEqual(h.setOptions,m.setOptions)||a.handleOptions(h,n);var d=get(h.value,t,"");if(n.getValue()!==d){a.silent=!0;var v=n.session.selection.toJSON();n.setValue(d,h.cursorStart),n.session.selection.fromJSON(v),a.silent=!1}var y=get(h.annotations,t,[]),x=get(m.annotations,t,[]);isEqual(y,x)||n.getSession().setAnnotations(y);var E=get(h.markers,t,[]),T=get(m.markers,t,[]);!isEqual(E,T)&&Array.isArray(E)&&a.handleMarkers(E,n)}),h.className!==m.className){var u=this.refEditor.className,c=u.trim().split(" "),f=m.className.trim().split(" ");f.forEach(function(n){var t=c.indexOf(n);c.splice(t,1)}),this.refEditor.className=" "+h.className+" "+c.join(" ")}h.theme!==m.theme&&p.setTheme("ace/theme/"+h.theme),h.focus&&!m.focus&&this.splitEditor.focus(),(h.height!==this.props.height||h.width!==this.props.width)&&this.editor.resize()},r.prototype.componentWillUnmount=function(){this.editor.destroy(),this.editor=null},r.prototype.onChange=function(e){if(this.props.onChange&&!this.silent){var a=[];this.editor.env.split.forEach(function(m){a.push(m.getValue())}),this.props.onChange(a,e)}},r.prototype.onSelectionChange=function(e){if(this.props.onSelectionChange){var a=[];this.editor.env.split.forEach(function(m){a.push(m.getSelection())}),this.props.onSelectionChange(a,e)}},r.prototype.onCursorChange=function(e){if(this.props.onCursorChange){var a=[];this.editor.env.split.forEach(function(m){a.push(m.getSelection())}),this.props.onCursorChange(a,e)}},r.prototype.onFocus=function(e){this.props.onFocus&&this.props.onFocus(e)},r.prototype.onInput=function(e){this.props.onInput&&this.props.onInput(e)},r.prototype.onBlur=function(e){this.props.onBlur&&this.props.onBlur(e)},r.prototype.onCopy=function(e){this.props.onCopy&&this.props.onCopy(e)},r.prototype.onPaste=function(e){this.props.onPaste&&this.props.onPaste(e)},r.prototype.onScroll=function(){this.props.onScroll&&this.props.onScroll(this.editor)},r.prototype.handleOptions=function(e,a){for(var m=Object.keys(e.setOptions),h=0;h<m.length;h++)a.setOption(m[h],e.setOptions[m[h]])},r.prototype.handleMarkers=function(e,a){var m=a.getSession().getMarkers(!0);for(var h in m)m.hasOwnProperty(h)&&a.getSession().removeMarker(m[h].id);m=a.getSession().getMarkers(!1);for(var h in m)m.hasOwnProperty(h)&&a.getSession().removeMarker(m[h].id);e.forEach(function(p){var u=p.startRow,c=p.startCol,f=p.endRow,n=p.endCol,t=p.className,o=p.type,l=p.inFront,d=l===void 0?!1:l,v=new ace_builds_1.Range(u,c,f,n);a.getSession().addMarker(v,t,o,d)})},r.prototype.updateRef=function(e){this.refEditor=e},r.prototype.render=function(){var e=this.props,a=e.name,m=e.width,h=e.height,p=e.style,u=__assign({width:m,height:h},p);return React$1.createElement("div",{ref:this.updateRef,id:a,style:u})},r.propTypes={className:PropTypes$1.string,debounceChangePeriod:PropTypes$1.number,defaultValue:PropTypes$1.arrayOf(PropTypes$1.string),focus:PropTypes$1.bool,fontSize:PropTypes$1.oneOfType([PropTypes$1.number,PropTypes$1.string]),height:PropTypes$1.string,mode:PropTypes$1.string,name:PropTypes$1.string,onBlur:PropTypes$1.func,onChange:PropTypes$1.func,onCopy:PropTypes$1.func,onFocus:PropTypes$1.func,onInput:PropTypes$1.func,onLoad:PropTypes$1.func,onPaste:PropTypes$1.func,onScroll:PropTypes$1.func,orientation:PropTypes$1.string,showGutter:PropTypes$1.bool,splits:PropTypes$1.number,theme:PropTypes$1.string,value:PropTypes$1.arrayOf(PropTypes$1.string),width:PropTypes$1.string,onSelectionChange:PropTypes$1.func,onCursorChange:PropTypes$1.func,onBeforeLoad:PropTypes$1.func,minLines:PropTypes$1.number,maxLines:PropTypes$1.number,readOnly:PropTypes$1.bool,highlightActiveLine:PropTypes$1.bool,tabSize:PropTypes$1.number,showPrintMargin:PropTypes$1.bool,cursorStart:PropTypes$1.number,editorProps:PropTypes$1.object,setOptions:PropTypes$1.object,style:PropTypes$1.object,scrollMargin:PropTypes$1.array,annotations:PropTypes$1.array,markers:PropTypes$1.array,keyboardHandler:PropTypes$1.string,wrapEnabled:PropTypes$1.bool,enableBasicAutocompletion:PropTypes$1.oneOfType([PropTypes$1.bool,PropTypes$1.array]),enableLiveAutocompletion:PropTypes$1.oneOfType([PropTypes$1.bool,PropTypes$1.array]),commands:PropTypes$1.array},r.defaultProps={name:"ace-editor",focus:!1,orientation:"beside",splits:2,mode:"",theme:"",height:"500px",width:"500px",value:[],fontSize:12,showGutter:!0,onChange:null,onPaste:null,onLoad:null,onScroll:null,minLines:null,maxLines:null,readOnly:!1,highlightActiveLine:!0,showPrintMargin:!0,tabSize:4,cursorStart:1,editorProps:{},style:{},scrollMargin:[0,0,0,0],setOptions:{},wrapEnabled:!1,enableBasicAutocompletion:!1,enableLiveAutocompletion:!1},r}(React$1.Component);split.default=SplitComponent;var diffMatchPatch={exports:{}};(function(s){var r=function(){this.Diff_Timeout=1,this.Diff_EditCost=4,this.Match_Threshold=.5,this.Match_Distance=1e3,this.Patch_DeleteThreshold=.5,this.Patch_Margin=4,this.Match_MaxBits=32},e=-1,a=1,m=0;r.Diff=function(h,p){return[h,p]},r.prototype.diff_main=function(h,p,u,c){typeof c>"u"&&(this.Diff_Timeout<=0?c=Number.MAX_VALUE:c=new Date().getTime()+this.Diff_Timeout*1e3);var f=c;if(h==null||p==null)throw new Error("Null input. (diff_main)");if(h==p)return h?[new r.Diff(m,h)]:[];typeof u>"u"&&(u=!0);var n=u,t=this.diff_commonPrefix(h,p),o=h.substring(0,t);h=h.substring(t),p=p.substring(t),t=this.diff_commonSuffix(h,p);var l=h.substring(h.length-t);h=h.substring(0,h.length-t),p=p.substring(0,p.length-t);var d=this.diff_compute_(h,p,n,f);return o&&d.unshift(new r.Diff(m,o)),l&&d.push(new r.Diff(m,l)),this.diff_cleanupMerge(d),d},r.prototype.diff_compute_=function(h,p,u,c){var f;if(!h)return[new r.Diff(a,p)];if(!p)return[new r.Diff(e,h)];var n=h.length>p.length?h:p,t=h.length>p.length?p:h,o=n.indexOf(t);if(o!=-1)return f=[new r.Diff(a,n.substring(0,o)),new r.Diff(m,t),new r.Diff(a,n.substring(o+t.length))],h.length>p.length&&(f[0][0]=f[2][0]=e),f;if(t.length==1)return[new r.Diff(e,h),new r.Diff(a,p)];var l=this.diff_halfMatch_(h,p);if(l){var d=l[0],v=l[1],y=l[2],x=l[3],E=l[4],T=this.diff_main(d,y,u,c),k=this.diff_main(v,x,u,c);return T.concat([new r.Diff(m,E)],k)}return u&&h.length>100&&p.length>100?this.diff_lineMode_(h,p,c):this.diff_bisect_(h,p,c)},r.prototype.diff_lineMode_=function(h,p,u){var c=this.diff_linesToChars_(h,p);h=c.chars1,p=c.chars2;var f=c.lineArray,n=this.diff_main(h,p,!1,u);this.diff_charsToLines_(n,f),this.diff_cleanupSemantic(n),n.push(new r.Diff(m,""));for(var t=0,o=0,l=0,d="",v="";t<n.length;){switch(n[t][0]){case a:l++,v+=n[t][1];break;case e:o++,d+=n[t][1];break;case m:if(o>=1&&l>=1){n.splice(t-o-l,o+l),t=t-o-l;for(var y=this.diff_main(d,v,!1,u),x=y.length-1;x>=0;x--)n.splice(t,0,y[x]);t=t+y.length}l=0,o=0,d="",v="";break}t++}return n.pop(),n},r.prototype.diff_bisect_=function(h,p,u){for(var c=h.length,f=p.length,n=Math.ceil((c+f)/2),t=n,o=2*n,l=new Array(o),d=new Array(o),v=0;v<o;v++)l[v]=-1,d[v]=-1;l[t+1]=0,d[t+1]=0;for(var y=c-f,x=y%2!=0,E=0,T=0,k=0,b=0,S=0;S<n&&!(new Date().getTime()>u);S++){for(var A=-S+E;A<=S-T;A+=2){var C=t+A,R;A==-S||A!=S&&l[C-1]<l[C+1]?R=l[C+1]:R=l[C-1]+1;for(var g=R-A;R<c&&g<f&&h.charAt(R)==p.charAt(g);)R++,g++;if(l[C]=R,R>c)T+=2;else if(g>f)E+=2;else if(x){var w=t+y-A;if(w>=0&&w<o&&d[w]!=-1){var $=c-d[w];if(R>=$)return this.diff_bisectSplit_(h,p,R,g,u)}}}for(var L=-S+k;L<=S-b;L+=2){var w=t+L,$;L==-S||L!=S&&d[w-1]<d[w+1]?$=d[w+1]:$=d[w-1]+1;for(var M=$-L;$<c&&M<f&&h.charAt(c-$-1)==p.charAt(f-M-1);)$++,M++;if(d[w]=$,$>c)b+=2;else if(M>f)k+=2;else if(!x){var C=t+y-L;if(C>=0&&C<o&&l[C]!=-1){var R=l[C],g=t+R-C;if($=c-$,R>=$)return this.diff_bisectSplit_(h,p,R,g,u)}}}}return[new r.Diff(e,h),new r.Diff(a,p)]},r.prototype.diff_bisectSplit_=function(h,p,u,c,f){var n=h.substring(0,u),t=p.substring(0,c),o=h.substring(u),l=p.substring(c),d=this.diff_main(n,t,!1,f),v=this.diff_main(o,l,!1,f);return d.concat(v)},r.prototype.diff_linesToChars_=function(h,p){var u=[],c={};u[0]="";function f(l){for(var d="",v=0,y=-1,x=u.length;y<l.length-1;){y=l.indexOf(`
`,v),y==-1&&(y=l.length-1);var E=l.substring(v,y+1);(c.hasOwnProperty?c.hasOwnProperty(E):c[E]!==void 0)?d+=String.fromCharCode(c[E]):(x==n&&(E=l.substring(v),y=l.length),d+=String.fromCharCode(x),c[E]=x,u[x++]=E),v=y+1}return d}var n=4e4,t=f(h);n=65535;var o=f(p);return{chars1:t,chars2:o,lineArray:u}},r.prototype.diff_charsToLines_=function(h,p){for(var u=0;u<h.length;u++){for(var c=h[u][1],f=[],n=0;n<c.length;n++)f[n]=p[c.charCodeAt(n)];h[u][1]=f.join("")}},r.prototype.diff_commonPrefix=function(h,p){if(!h||!p||h.charAt(0)!=p.charAt(0))return 0;for(var u=0,c=Math.min(h.length,p.length),f=c,n=0;u<f;)h.substring(n,f)==p.substring(n,f)?(u=f,n=u):c=f,f=Math.floor((c-u)/2+u);return f},r.prototype.diff_commonSuffix=function(h,p){if(!h||!p||h.charAt(h.length-1)!=p.charAt(p.length-1))return 0;for(var u=0,c=Math.min(h.length,p.length),f=c,n=0;u<f;)h.substring(h.length-f,h.length-n)==p.substring(p.length-f,p.length-n)?(u=f,n=u):c=f,f=Math.floor((c-u)/2+u);return f},r.prototype.diff_commonOverlap_=function(h,p){var u=h.length,c=p.length;if(u==0||c==0)return 0;u>c?h=h.substring(u-c):u<c&&(p=p.substring(0,u));var f=Math.min(u,c);if(h==p)return f;for(var n=0,t=1;;){var o=h.substring(f-t),l=p.indexOf(o);if(l==-1)return n;t+=l,(l==0||h.substring(f-t)==p.substring(0,t))&&(n=t,t++)}},r.prototype.diff_halfMatch_=function(h,p){if(this.Diff_Timeout<=0)return null;var u=h.length>p.length?h:p,c=h.length>p.length?p:h;if(u.length<4||c.length*2<u.length)return null;var f=this;function n(T,k,b){for(var S=T.substring(b,b+Math.floor(T.length/4)),A=-1,C="",R,g,w,$;(A=k.indexOf(S,A+1))!=-1;){var L=f.diff_commonPrefix(T.substring(b),k.substring(A)),M=f.diff_commonSuffix(T.substring(0,b),k.substring(0,A));C.length<M+L&&(C=k.substring(A-M,A)+k.substring(A,A+L),R=T.substring(0,b-M),g=T.substring(b+L),w=k.substring(0,A-M),$=k.substring(A+L))}return C.length*2>=T.length?[R,g,w,$,C]:null}var t=n(u,c,Math.ceil(u.length/4)),o=n(u,c,Math.ceil(u.length/2)),l;if(!t&&!o)return null;o?t?l=t[4].length>o[4].length?t:o:l=o:l=t;var d,v,y,x;h.length>p.length?(d=l[0],v=l[1],y=l[2],x=l[3]):(y=l[0],x=l[1],d=l[2],v=l[3]);var E=l[4];return[d,v,y,x,E]},r.prototype.diff_cleanupSemantic=function(h){for(var p=!1,u=[],c=0,f=null,n=0,t=0,o=0,l=0,d=0;n<h.length;)h[n][0]==m?(u[c++]=n,t=l,o=d,l=0,d=0,f=h[n][1]):(h[n][0]==a?l+=h[n][1].length:d+=h[n][1].length,f&&f.length<=Math.max(t,o)&&f.length<=Math.max(l,d)&&(h.splice(u[c-1],0,new r.Diff(e,f)),h[u[c-1]+1][0]=a,c--,c--,n=c>0?u[c-1]:-1,t=0,o=0,l=0,d=0,f=null,p=!0)),n++;for(p&&this.diff_cleanupMerge(h),this.diff_cleanupSemanticLossless(h),n=1;n<h.length;){if(h[n-1][0]==e&&h[n][0]==a){var v=h[n-1][1],y=h[n][1],x=this.diff_commonOverlap_(v,y),E=this.diff_commonOverlap_(y,v);x>=E?(x>=v.length/2||x>=y.length/2)&&(h.splice(n,0,new r.Diff(m,y.substring(0,x))),h[n-1][1]=v.substring(0,v.length-x),h[n+1][1]=y.substring(x),n++):(E>=v.length/2||E>=y.length/2)&&(h.splice(n,0,new r.Diff(m,v.substring(0,E))),h[n-1][0]=a,h[n-1][1]=y.substring(0,y.length-E),h[n+1][0]=e,h[n+1][1]=v.substring(E),n++),n++}n++}},r.prototype.diff_cleanupSemanticLossless=function(h){function p(E,T){if(!E||!T)return 6;var k=E.charAt(E.length-1),b=T.charAt(0),S=k.match(r.nonAlphaNumericRegex_),A=b.match(r.nonAlphaNumericRegex_),C=S&&k.match(r.whitespaceRegex_),R=A&&b.match(r.whitespaceRegex_),g=C&&k.match(r.linebreakRegex_),w=R&&b.match(r.linebreakRegex_),$=g&&E.match(r.blanklineEndRegex_),L=w&&T.match(r.blanklineStartRegex_);return $||L?5:g||w?4:S&&!C&&R?3:C||R?2:S||A?1:0}for(var u=1;u<h.length-1;){if(h[u-1][0]==m&&h[u+1][0]==m){var c=h[u-1][1],f=h[u][1],n=h[u+1][1],t=this.diff_commonSuffix(c,f);if(t){var o=f.substring(f.length-t);c=c.substring(0,c.length-t),f=o+f.substring(0,f.length-t),n=o+n}for(var l=c,d=f,v=n,y=p(c,f)+p(f,n);f.charAt(0)===n.charAt(0);){c+=f.charAt(0),f=f.substring(1)+n.charAt(0),n=n.substring(1);var x=p(c,f)+p(f,n);x>=y&&(y=x,l=c,d=f,v=n)}h[u-1][1]!=l&&(l?h[u-1][1]=l:(h.splice(u-1,1),u--),h[u][1]=d,v?h[u+1][1]=v:(h.splice(u+1,1),u--))}u++}},r.nonAlphaNumericRegex_=/[^a-zA-Z0-9]/,r.whitespaceRegex_=/\s/,r.linebreakRegex_=/[\r\n]/,r.blanklineEndRegex_=/\n\r?\n$/,r.blanklineStartRegex_=/^\r?\n\r?\n/,r.prototype.diff_cleanupEfficiency=function(h){for(var p=!1,u=[],c=0,f=null,n=0,t=!1,o=!1,l=!1,d=!1;n<h.length;)h[n][0]==m?(h[n][1].length<this.Diff_EditCost&&(l||d)?(u[c++]=n,t=l,o=d,f=h[n][1]):(c=0,f=null),l=d=!1):(h[n][0]==e?d=!0:l=!0,f&&(t&&o&&l&&d||f.length<this.Diff_EditCost/2&&t+o+l+d==3)&&(h.splice(u[c-1],0,new r.Diff(e,f)),h[u[c-1]+1][0]=a,c--,f=null,t&&o?(l=d=!0,c=0):(c--,n=c>0?u[c-1]:-1,l=d=!1),p=!0)),n++;p&&this.diff_cleanupMerge(h)},r.prototype.diff_cleanupMerge=function(h){h.push(new r.Diff(m,""));for(var p=0,u=0,c=0,f="",n="",t;p<h.length;)switch(h[p][0]){case a:c++,n+=h[p][1],p++;break;case e:u++,f+=h[p][1],p++;break;case m:u+c>1?(u!==0&&c!==0&&(t=this.diff_commonPrefix(n,f),t!==0&&(p-u-c>0&&h[p-u-c-1][0]==m?h[p-u-c-1][1]+=n.substring(0,t):(h.splice(0,0,new r.Diff(m,n.substring(0,t))),p++),n=n.substring(t),f=f.substring(t)),t=this.diff_commonSuffix(n,f),t!==0&&(h[p][1]=n.substring(n.length-t)+h[p][1],n=n.substring(0,n.length-t),f=f.substring(0,f.length-t))),p-=u+c,h.splice(p,u+c),f.length&&(h.splice(p,0,new r.Diff(e,f)),p++),n.length&&(h.splice(p,0,new r.Diff(a,n)),p++),p++):p!==0&&h[p-1][0]==m?(h[p-1][1]+=h[p][1],h.splice(p,1)):p++,c=0,u=0,f="",n="";break}h[h.length-1][1]===""&&h.pop();var o=!1;for(p=1;p<h.length-1;)h[p-1][0]==m&&h[p+1][0]==m&&(h[p][1].substring(h[p][1].length-h[p-1][1].length)==h[p-1][1]?(h[p][1]=h[p-1][1]+h[p][1].substring(0,h[p][1].length-h[p-1][1].length),h[p+1][1]=h[p-1][1]+h[p+1][1],h.splice(p-1,1),o=!0):h[p][1].substring(0,h[p+1][1].length)==h[p+1][1]&&(h[p-1][1]+=h[p+1][1],h[p][1]=h[p][1].substring(h[p+1][1].length)+h[p+1][1],h.splice(p+1,1),o=!0)),p++;o&&this.diff_cleanupMerge(h)},r.prototype.diff_xIndex=function(h,p){var u=0,c=0,f=0,n=0,t;for(t=0;t<h.length&&(h[t][0]!==a&&(u+=h[t][1].length),h[t][0]!==e&&(c+=h[t][1].length),!(u>p));t++)f=u,n=c;return h.length!=t&&h[t][0]===e?n:n+(p-f)},r.prototype.diff_prettyHtml=function(h){for(var p=[],u=/&/g,c=/</g,f=/>/g,n=/\n/g,t=0;t<h.length;t++){var o=h[t][0],l=h[t][1],d=l.replace(u,"&amp;").replace(c,"&lt;").replace(f,"&gt;").replace(n,"&para;<br>");switch(o){case a:p[t]='<ins style="background:#e6ffe6;">'+d+"</ins>";break;case e:p[t]='<del style="background:#ffe6e6;">'+d+"</del>";break;case m:p[t]="<span>"+d+"</span>";break}}return p.join("")},r.prototype.diff_text1=function(h){for(var p=[],u=0;u<h.length;u++)h[u][0]!==a&&(p[u]=h[u][1]);return p.join("")},r.prototype.diff_text2=function(h){for(var p=[],u=0;u<h.length;u++)h[u][0]!==e&&(p[u]=h[u][1]);return p.join("")},r.prototype.diff_levenshtein=function(h){for(var p=0,u=0,c=0,f=0;f<h.length;f++){var n=h[f][0],t=h[f][1];switch(n){case a:u+=t.length;break;case e:c+=t.length;break;case m:p+=Math.max(u,c),u=0,c=0;break}}return p+=Math.max(u,c),p},r.prototype.diff_toDelta=function(h){for(var p=[],u=0;u<h.length;u++)switch(h[u][0]){case a:p[u]="+"+encodeURI(h[u][1]);break;case e:p[u]="-"+h[u][1].length;break;case m:p[u]="="+h[u][1].length;break}return p.join("	").replace(/%20/g," ")},r.prototype.diff_fromDelta=function(h,p){for(var u=[],c=0,f=0,n=p.split(/\t/g),t=0;t<n.length;t++){var o=n[t].substring(1);switch(n[t].charAt(0)){case"+":try{u[c++]=new r.Diff(a,decodeURI(o))}catch{throw new Error("Illegal escape in diff_fromDelta: "+o)}break;case"-":case"=":var l=parseInt(o,10);if(isNaN(l)||l<0)throw new Error("Invalid number in diff_fromDelta: "+o);var d=h.substring(f,f+=l);n[t].charAt(0)=="="?u[c++]=new r.Diff(m,d):u[c++]=new r.Diff(e,d);break;default:if(n[t])throw new Error("Invalid diff operation in diff_fromDelta: "+n[t])}}if(f!=h.length)throw new Error("Delta length ("+f+") does not equal source text length ("+h.length+").");return u},r.prototype.match_main=function(h,p,u){if(h==null||p==null||u==null)throw new Error("Null input. (match_main)");return u=Math.max(0,Math.min(u,h.length)),h==p?0:h.length?h.substring(u,u+p.length)==p?u:this.match_bitap_(h,p,u):-1},r.prototype.match_bitap_=function(h,p,u){if(p.length>this.Match_MaxBits)throw new Error("Pattern too long for this browser.");var c=this.match_alphabet_(p),f=this;function n(R,g){var w=R/p.length,$=Math.abs(u-g);return f.Match_Distance?w+$/f.Match_Distance:$?1:w}var t=this.Match_Threshold,o=h.indexOf(p,u);o!=-1&&(t=Math.min(n(0,o),t),o=h.lastIndexOf(p,u+p.length),o!=-1&&(t=Math.min(n(0,o),t)));var l=1<<p.length-1;o=-1;for(var d,v,y=p.length+h.length,x,E=0;E<p.length;E++){for(d=0,v=y;d<v;)n(E,u+v)<=t?d=v:y=v,v=Math.floor((y-d)/2+d);y=v;var T=Math.max(1,u-v+1),k=Math.min(u+v,h.length)+p.length,b=Array(k+2);b[k+1]=(1<<E)-1;for(var S=k;S>=T;S--){var A=c[h.charAt(S-1)];if(E===0?b[S]=(b[S+1]<<1|1)&A:b[S]=(b[S+1]<<1|1)&A|((x[S+1]|x[S])<<1|1)|x[S+1],b[S]&l){var C=n(E,S-1);if(C<=t)if(t=C,o=S-1,o>u)T=Math.max(1,2*u-o);else break}}if(n(E+1,u)>t)break;x=b}return o},r.prototype.match_alphabet_=function(h){for(var p={},u=0;u<h.length;u++)p[h.charAt(u)]=0;for(var u=0;u<h.length;u++)p[h.charAt(u)]|=1<<h.length-u-1;return p},r.prototype.patch_addContext_=function(h,p){if(p.length!=0){if(h.start2===null)throw Error("patch not initialized");for(var u=p.substring(h.start2,h.start2+h.length1),c=0;p.indexOf(u)!=p.lastIndexOf(u)&&u.length<this.Match_MaxBits-this.Patch_Margin-this.Patch_Margin;)c+=this.Patch_Margin,u=p.substring(h.start2-c,h.start2+h.length1+c);c+=this.Patch_Margin;var f=p.substring(h.start2-c,h.start2);f&&h.diffs.unshift(new r.Diff(m,f));var n=p.substring(h.start2+h.length1,h.start2+h.length1+c);n&&h.diffs.push(new r.Diff(m,n)),h.start1-=f.length,h.start2-=f.length,h.length1+=f.length+n.length,h.length2+=f.length+n.length}},r.prototype.patch_make=function(h,p,u){var c,f;if(typeof h=="string"&&typeof p=="string"&&typeof u>"u")c=h,f=this.diff_main(c,p,!0),f.length>2&&(this.diff_cleanupSemantic(f),this.diff_cleanupEfficiency(f));else if(h&&typeof h=="object"&&typeof p>"u"&&typeof u>"u")f=h,c=this.diff_text1(f);else if(typeof h=="string"&&p&&typeof p=="object"&&typeof u>"u")c=h,f=p;else if(typeof h=="string"&&typeof p=="string"&&u&&typeof u=="object")c=h,f=u;else throw new Error("Unknown call format to patch_make.");if(f.length===0)return[];for(var n=[],t=new r.patch_obj,o=0,l=0,d=0,v=c,y=c,x=0;x<f.length;x++){var E=f[x][0],T=f[x][1];switch(!o&&E!==m&&(t.start1=l,t.start2=d),E){case a:t.diffs[o++]=f[x],t.length2+=T.length,y=y.substring(0,d)+T+y.substring(d);break;case e:t.length1+=T.length,t.diffs[o++]=f[x],y=y.substring(0,d)+y.substring(d+T.length);break;case m:T.length<=2*this.Patch_Margin&&o&&f.length!=x+1?(t.diffs[o++]=f[x],t.length1+=T.length,t.length2+=T.length):T.length>=2*this.Patch_Margin&&o&&(this.patch_addContext_(t,v),n.push(t),t=new r.patch_obj,o=0,v=y,l=d);break}E!==a&&(l+=T.length),E!==e&&(d+=T.length)}return o&&(this.patch_addContext_(t,v),n.push(t)),n},r.prototype.patch_deepCopy=function(h){for(var p=[],u=0;u<h.length;u++){var c=h[u],f=new r.patch_obj;f.diffs=[];for(var n=0;n<c.diffs.length;n++)f.diffs[n]=new r.Diff(c.diffs[n][0],c.diffs[n][1]);f.start1=c.start1,f.start2=c.start2,f.length1=c.length1,f.length2=c.length2,p[u]=f}return p},r.prototype.patch_apply=function(h,p){if(h.length==0)return[p,[]];h=this.patch_deepCopy(h);var u=this.patch_addPadding(h);p=u+p+u,this.patch_splitMax(h);for(var c=0,f=[],n=0;n<h.length;n++){var t=h[n].start2+c,o=this.diff_text1(h[n].diffs),l,d=-1;if(o.length>this.Match_MaxBits?(l=this.match_main(p,o.substring(0,this.Match_MaxBits),t),l!=-1&&(d=this.match_main(p,o.substring(o.length-this.Match_MaxBits),t+o.length-this.Match_MaxBits),(d==-1||l>=d)&&(l=-1))):l=this.match_main(p,o,t),l==-1)f[n]=!1,c-=h[n].length2-h[n].length1;else{f[n]=!0,c=l-t;var v;if(d==-1?v=p.substring(l,l+o.length):v=p.substring(l,d+this.Match_MaxBits),o==v)p=p.substring(0,l)+this.diff_text2(h[n].diffs)+p.substring(l+o.length);else{var y=this.diff_main(o,v,!1);if(o.length>this.Match_MaxBits&&this.diff_levenshtein(y)/o.length>this.Patch_DeleteThreshold)f[n]=!1;else{this.diff_cleanupSemanticLossless(y);for(var x=0,E,T=0;T<h[n].diffs.length;T++){var k=h[n].diffs[T];k[0]!==m&&(E=this.diff_xIndex(y,x)),k[0]===a?p=p.substring(0,l+E)+k[1]+p.substring(l+E):k[0]===e&&(p=p.substring(0,l+E)+p.substring(l+this.diff_xIndex(y,x+k[1].length))),k[0]!==e&&(x+=k[1].length)}}}}}return p=p.substring(u.length,p.length-u.length),[p,f]},r.prototype.patch_addPadding=function(h){for(var p=this.Patch_Margin,u="",c=1;c<=p;c++)u+=String.fromCharCode(c);for(var c=0;c<h.length;c++)h[c].start1+=p,h[c].start2+=p;var f=h[0],n=f.diffs;if(n.length==0||n[0][0]!=m)n.unshift(new r.Diff(m,u)),f.start1-=p,f.start2-=p,f.length1+=p,f.length2+=p;else if(p>n[0][1].length){var t=p-n[0][1].length;n[0][1]=u.substring(n[0][1].length)+n[0][1],f.start1-=t,f.start2-=t,f.length1+=t,f.length2+=t}if(f=h[h.length-1],n=f.diffs,n.length==0||n[n.length-1][0]!=m)n.push(new r.Diff(m,u)),f.length1+=p,f.length2+=p;else if(p>n[n.length-1][1].length){var t=p-n[n.length-1][1].length;n[n.length-1][1]+=u.substring(0,t),f.length1+=t,f.length2+=t}return u},r.prototype.patch_splitMax=function(h){for(var p=this.Match_MaxBits,u=0;u<h.length;u++)if(!(h[u].length1<=p)){var c=h[u];h.splice(u--,1);for(var f=c.start1,n=c.start2,t="";c.diffs.length!==0;){var o=new r.patch_obj,l=!0;for(o.start1=f-t.length,o.start2=n-t.length,t!==""&&(o.length1=o.length2=t.length,o.diffs.push(new r.Diff(m,t)));c.diffs.length!==0&&o.length1<p-this.Patch_Margin;){var d=c.diffs[0][0],v=c.diffs[0][1];d===a?(o.length2+=v.length,n+=v.length,o.diffs.push(c.diffs.shift()),l=!1):d===e&&o.diffs.length==1&&o.diffs[0][0]==m&&v.length>2*p?(o.length1+=v.length,f+=v.length,l=!1,o.diffs.push(new r.Diff(d,v)),c.diffs.shift()):(v=v.substring(0,p-o.length1-this.Patch_Margin),o.length1+=v.length,f+=v.length,d===m?(o.length2+=v.length,n+=v.length):l=!1,o.diffs.push(new r.Diff(d,v)),v==c.diffs[0][1]?c.diffs.shift():c.diffs[0][1]=c.diffs[0][1].substring(v.length))}t=this.diff_text2(o.diffs),t=t.substring(t.length-this.Patch_Margin);var y=this.diff_text1(c.diffs).substring(0,this.Patch_Margin);y!==""&&(o.length1+=y.length,o.length2+=y.length,o.diffs.length!==0&&o.diffs[o.diffs.length-1][0]===m?o.diffs[o.diffs.length-1][1]+=y:o.diffs.push(new r.Diff(m,y))),l||h.splice(++u,0,o)}}},r.prototype.patch_toText=function(h){for(var p=[],u=0;u<h.length;u++)p[u]=h[u];return p.join("")},r.prototype.patch_fromText=function(h){var p=[];if(!h)return p;for(var u=h.split(`
`),c=0,f=/^@@ -(\d+),?(\d*) \+(\d+),?(\d*) @@$/;c<u.length;){var n=u[c].match(f);if(!n)throw new Error("Invalid patch string: "+u[c]);var t=new r.patch_obj;for(p.push(t),t.start1=parseInt(n[1],10),n[2]===""?(t.start1--,t.length1=1):n[2]=="0"?t.length1=0:(t.start1--,t.length1=parseInt(n[2],10)),t.start2=parseInt(n[3],10),n[4]===""?(t.start2--,t.length2=1):n[4]=="0"?t.length2=0:(t.start2--,t.length2=parseInt(n[4],10)),c++;c<u.length;){var o=u[c].charAt(0);try{var l=decodeURI(u[c].substring(1))}catch{throw new Error("Illegal escape in patch_fromText: "+l)}if(o=="-")t.diffs.push(new r.Diff(e,l));else if(o=="+")t.diffs.push(new r.Diff(a,l));else if(o==" ")t.diffs.push(new r.Diff(m,l));else{if(o=="@")break;if(o!=="")throw new Error('Invalid patch mode "'+o+'" in: '+l)}c++}}return p},r.patch_obj=function(){this.diffs=[],this.start1=null,this.start2=null,this.length1=0,this.length2=0},r.patch_obj.prototype.toString=function(){var h,p;this.length1===0?h=this.start1+",0":this.length1==1?h=this.start1+1:h=this.start1+1+","+this.length1,this.length2===0?p=this.start2+",0":this.length2==1?p=this.start2+1:p=this.start2+1+","+this.length2;for(var u=["@@ -"+h+" +"+p+` @@
`],c,f=0;f<this.diffs.length;f++){switch(this.diffs[f][0]){case a:c="+";break;case e:c="-";break;case m:c=" ";break}u[f+1]=c+encodeURI(this.diffs[f][1])+`
`}return u.join("").replace(/%20/g," ")},s.exports=r,s.exports.diff_match_patch=r,s.exports.DIFF_DELETE=e,s.exports.DIFF_INSERT=a,s.exports.DIFF_EQUAL=m})(diffMatchPatch);var diffMatchPatchExports=diffMatchPatch.exports,__extends$1=commonjsGlobal&&commonjsGlobal.__extends||function(){var s=function(r,e){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,m){a.__proto__=m}||function(a,m){for(var h in m)Object.prototype.hasOwnProperty.call(m,h)&&(a[h]=m[h])},s(r,e)};return function(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");s(r,e);function a(){this.constructor=r}r.prototype=e===null?Object.create(e):(a.prototype=e.prototype,new a)}}();Object.defineProperty(diff,"__esModule",{value:!0});var PropTypes=propTypesExports,React=reactExports,split_1$1=split,DiffMatchPatch=diffMatchPatchExports,DiffComponent=function(s){__extends$1(r,s);function r(e){var a=s.call(this,e)||this;return a.state={value:a.props.value},a.onChange=a.onChange.bind(a),a.diff=a.diff.bind(a),a}return r.prototype.componentDidUpdate=function(){var e=this.props.value;e!==this.state.value&&this.setState({value:e})},r.prototype.onChange=function(e){this.setState({value:e}),this.props.onChange&&this.props.onChange(e)},r.prototype.diff=function(){var e=new DiffMatchPatch,a=this.state.value[0],m=this.state.value[1];if(a.length===0&&m.length===0)return[];var h=e.diff_main(a,m);e.diff_cleanupSemantic(h);var p=this.generateDiffedLines(h),u=this.setCodeMarkers(p);return u},r.prototype.generateDiffedLines=function(e){var a={DIFF_EQUAL:0,DIFF_DELETE:-1,DIFF_INSERT:1},m={left:[],right:[]},h={left:1,right:1};return e.forEach(function(p){var u=p[0],c=p[1],f=c.split(`
`).length-1;if(c.length!==0){var n=c[0],t=c[c.length-1],o=0;switch(u){case a.DIFF_EQUAL:h.left+=f,h.right+=f;break;case a.DIFF_DELETE:n===`
`&&(h.left++,f--),o=f,o===0&&m.right.push({startLine:h.right,endLine:h.right}),t===`
`&&(o-=1),m.left.push({startLine:h.left,endLine:h.left+o}),h.left+=f;break;case a.DIFF_INSERT:n===`
`&&(h.right++,f--),o=f,o===0&&m.left.push({startLine:h.left,endLine:h.left}),t===`
`&&(o-=1),m.right.push({startLine:h.right,endLine:h.right+o}),h.right+=f;break;default:throw new Error("Diff type was not defined.")}}}),m},r.prototype.setCodeMarkers=function(e){e===void 0&&(e={left:[],right:[]});for(var a=[],m={left:[],right:[]},h=0;h<e.left.length;h++){var p={startRow:e.left[h].startLine-1,endRow:e.left[h].endLine,type:"text",className:"codeMarker"};m.left.push(p)}for(var h=0;h<e.right.length;h++){var p={startRow:e.right[h].startLine-1,endRow:e.right[h].endLine,type:"text",className:"codeMarker"};m.right.push(p)}return a[0]=m.left,a[1]=m.right,a},r.prototype.render=function(){var e=this.diff();return React.createElement(split_1$1.default,{name:this.props.name,className:this.props.className,focus:this.props.focus,orientation:this.props.orientation,splits:this.props.splits,mode:this.props.mode,theme:this.props.theme,height:this.props.height,width:this.props.width,fontSize:this.props.fontSize,showGutter:this.props.showGutter,onChange:this.onChange,onPaste:this.props.onPaste,onLoad:this.props.onLoad,onScroll:this.props.onScroll,minLines:this.props.minLines,maxLines:this.props.maxLines,readOnly:this.props.readOnly,highlightActiveLine:this.props.highlightActiveLine,showPrintMargin:this.props.showPrintMargin,tabSize:this.props.tabSize,cursorStart:this.props.cursorStart,editorProps:this.props.editorProps,style:this.props.style,scrollMargin:this.props.scrollMargin,setOptions:this.props.setOptions,wrapEnabled:this.props.wrapEnabled,enableBasicAutocompletion:this.props.enableBasicAutocompletion,enableLiveAutocompletion:this.props.enableLiveAutocompletion,value:this.state.value,markers:e})},r.propTypes={cursorStart:PropTypes.number,editorProps:PropTypes.object,enableBasicAutocompletion:PropTypes.bool,enableLiveAutocompletion:PropTypes.bool,focus:PropTypes.bool,fontSize:PropTypes.number,height:PropTypes.string,highlightActiveLine:PropTypes.bool,maxLines:PropTypes.number,minLines:PropTypes.number,mode:PropTypes.string,name:PropTypes.string,className:PropTypes.string,onLoad:PropTypes.func,onPaste:PropTypes.func,onScroll:PropTypes.func,onChange:PropTypes.func,orientation:PropTypes.string,readOnly:PropTypes.bool,scrollMargin:PropTypes.array,setOptions:PropTypes.object,showGutter:PropTypes.bool,showPrintMargin:PropTypes.bool,splits:PropTypes.number,style:PropTypes.object,tabSize:PropTypes.number,theme:PropTypes.string,value:PropTypes.array,width:PropTypes.string,wrapEnabled:PropTypes.bool},r.defaultProps={cursorStart:1,editorProps:{},enableBasicAutocompletion:!1,enableLiveAutocompletion:!1,focus:!1,fontSize:12,height:"500px",highlightActiveLine:!0,maxLines:null,minLines:null,mode:"",name:"ace-editor",onLoad:null,onScroll:null,onPaste:null,onChange:null,orientation:"beside",readOnly:!1,scrollMargin:[0,0,0,0],setOptions:{},showGutter:!0,showPrintMargin:!0,splits:2,style:{},tabSize:4,theme:"github",value:["",""],width:"500px",wrapEnabled:!0},r}(React.Component);diff.default=DiffComponent;Object.defineProperty(lib$1,"__esModule",{value:!0});lib$1.diff=lib$1.split=void 0;var ace_1=ace$3,diff_1=diff;lib$1.diff=diff_1.default;var split_1=split;lib$1.split=split_1.default;var _default=lib$1.default=ace_1.default;class SourcecastEditor extends reactExports.PureComponent{constructor(r){super(r),this.getMarkers=()=>{const e=[];for(const a of this.props.highlightedLines)e.push({startRow:a[0],startCol:0,endRow:a[1],endCol:1,className:"myMarker",type:"fullLine"});return e},this.handleGutterClick=e=>{const a=e.domEvent.target;if(a.className.indexOf("ace_gutter-cell")===-1||!e.editor.isFocused()||e.clientX>35+a.getBoundingClientRect().left)return;const m=e.getDocumentPosition().row,h=e.editor.session.getLine(m);e.editor.session.getBreakpoints(m,0)[m]===void 0&&h.length!==0&&!h.includes("//")&&!h.includes("debugger;")?e.editor.session.setBreakpoint(m):e.editor.session.clearBreakpoint(m),e.stop(),this.props.handleEditorUpdateBreakpoints(e.editor.session.$breakpoints)},this.handleAnnotationChange=e=>()=>{const a=e.getAnnotations();let m=0;for(const h of a)h.type==="info"&&(h.type="error",h.className="ace_error",m++);m!==0&&e.setAnnotations(a)},this.handleEvaluate=()=>{this.props.handleEditorEval(),this.props.isRecording&&this.props.handleRecordInput({type:"keyboardCommand",time:this.props.getTimerDuration(),data:KeyboardCommand.run})},this.moveCursor=e=>{this.AceEditor.current.editor.selection.clearSelection(),this.AceEditor.current.editor.moveCursorToPosition(e),this.AceEditor.current.editor.renderer.showCursor(),this.AceEditor.current.editor.renderer.scrollCursorIntoView(e,.5)},this.handleDeclarationNavigate=()=>{this.props.handleDeclarationNavigate(this.AceEditor.current.editor.getCursorPosition())},this.AceEditor=reactExports.createRef(),this.ShareAce=null,this.onChangeMethod=(e,a)=>{this.props.handleUpdateHasUnsavedChanges&&this.props.handleUpdateHasUnsavedChanges(!0),this.props.handleEditorValueChange(e),this.props.isRecording&&this.props.handleRecordInput({type:"codeDelta",time:this.props.getTimerDuration(),data:a});const m=this.AceEditor.current.editor.getSession().getAnnotations();this.props.isEditorAutorun&&m.length===0&&this.props.handleEditorEval()},this.onCursorChange=e=>{if(!this.props.isRecording)return;const a=e.getCursor();this.props.handleRecordInput({type:"cursorPositionChange",time:this.props.getTimerDuration(),data:a})},this.onSelectionChange=e=>{if(!this.props.isRecording)return;const a=e.getRange(),m=e.isBackwards();lodashExports.isEqual(a.start,a.end)||this.props.handleRecordInput({type:"selectionRangeData",time:this.props.getTimerDuration(),data:{range:a,isBackwards:m}})}}componentDidUpdate(r){const{codeDeltasToApply:e,inputToApply:a,newCursorPosition:m}=this.props;if(e&&e!==r.codeDeltasToApply&&(this.AceEditor.current.editor.session.getDocument().applyDeltas(e),this.AceEditor.current.editor.selection.clearSelection()),m&&m!==r.newCursorPosition&&this.moveCursor(m),!(!a||a===r.inputToApply))switch(a.type){case"codeDelta":this.AceEditor.current.editor.session.getDocument().applyDelta(a.data),this.AceEditor.current.editor.selection.clearSelection();break;case"cursorPositionChange":this.moveCursor(a.data);break;case"selectionRangeData":const{range:h,isBackwards:p}=a.data;this.AceEditor.current.editor.selection.setRange(h,p);break;case"keyboardCommand":switch(a.data){case"run":this.props.handleEditorEval(),this.props.setDraggableReplPosition&&this.props.setDraggableReplPosition();break}break}}getBreakpoints(){return this.AceEditor.current.editor.session.getBreakpoints().filter(r=>r!=null)}componentDidMount(){if(!this.AceEditor||!this.AceEditor.current||!this.AceEditor.current.editor)return;const r=this.AceEditor.current.editor,e=r.getSession();r.on("gutterclick",this.handleGutterClick),e.on("changeAnnotation",this.handleAnnotationChange(e));const{onFocus:a,onBlur:m}=this.props;a&&r.on("focus",h=>a(h,r)),m&&r.on("blur",h=>m(h,r))}componentWillUnmount(){this.ShareAce!==null&&this.ShareAce.WS.close(),this.ShareAce=null}render(){return jsxRuntimeExports.jsx(index_esExports.HotKeys,{className:"Editor bp4-card bp4-elevation-0",handlers:handlers$2,children:jsxRuntimeExports.jsx("div",{className:"row editor-react-ace",children:jsxRuntimeExports.jsx(_default,{className:"react-ace",commands:[{name:"evaluate",bindKey:{win:"Shift-Enter",mac:"Shift-Enter"},exec:this.handleEvaluate},{name:"navigate",bindKey:{win:"Ctrl-B",mac:"Command-B"},exec:this.handleDeclarationNavigate}],editorProps:{$blockScrolling:1/0},ref:this.AceEditor,markers:this.getMarkers(),fontSize:17,height:"100%",highlightActiveLine:!1,mode:"javascript",onChange:this.onChangeMethod,onCursorChange:this.onCursorChange,onSelectionChange:this.onSelectionChange,readOnly:this.props.isEditorReadonly,theme:"source",value:this.props.editorValue,width:"100%",setOptions:{fontFamily:"'Inconsolata', 'Consolas', monospace"}})})})}}const handlers$2={goGreen:()=>{}};var extLanguage_tools={exports:{}};(function(s,r){ace.define("ace/snippets",["require","exports","module","ace/lib/dom","ace/lib/oop","ace/lib/event_emitter","ace/lib/lang","ace/range","ace/range_list","ace/keyboard/hash_handler","ace/tokenizer","ace/clipboard","ace/editor"],function(e,a,m){var h=e("./lib/dom"),p=e("./lib/oop"),u=e("./lib/event_emitter").EventEmitter,c=e("./lib/lang"),f=e("./range").Range,n=e("./range_list").RangeList,t=e("./keyboard/hash_handler").HashHandler,o=e("./tokenizer").Tokenizer,l=e("./clipboard"),d={CURRENT_WORD:function(b){return b.session.getTextRange(b.session.getWordRange())},SELECTION:function(b,S,A){var C=b.session.getTextRange();return A?C.replace(/\n\r?([ \t]*\S)/g,`
`+A+"$1"):C},CURRENT_LINE:function(b){return b.session.getLine(b.getCursorPosition().row)},PREV_LINE:function(b){return b.session.getLine(b.getCursorPosition().row-1)},LINE_INDEX:function(b){return b.getCursorPosition().row},LINE_NUMBER:function(b){return b.getCursorPosition().row+1},SOFT_TABS:function(b){return b.session.getUseSoftTabs()?"YES":"NO"},TAB_SIZE:function(b){return b.session.getTabSize()},CLIPBOARD:function(b){return l.getText&&l.getText()},FILENAME:function(b){return/[^/\\]*$/.exec(this.FILEPATH(b))[0]},FILENAME_BASE:function(b){return/[^/\\]*$/.exec(this.FILEPATH(b))[0].replace(/\.[^.]*$/,"")},DIRECTORY:function(b){return this.FILEPATH(b).replace(/[^/\\]*$/,"")},FILEPATH:function(b){return"/not implemented.txt"},WORKSPACE_NAME:function(){return"Unknown"},FULLNAME:function(){return"Unknown"},BLOCK_COMMENT_START:function(b){var S=b.session.$mode||{};return S.blockComment&&S.blockComment.start||""},BLOCK_COMMENT_END:function(b){var S=b.session.$mode||{};return S.blockComment&&S.blockComment.end||""},LINE_COMMENT:function(b){var S=b.session.$mode||{};return S.lineCommentStart||""},CURRENT_YEAR:v.bind(null,{year:"numeric"}),CURRENT_YEAR_SHORT:v.bind(null,{year:"2-digit"}),CURRENT_MONTH:v.bind(null,{month:"numeric"}),CURRENT_MONTH_NAME:v.bind(null,{month:"long"}),CURRENT_MONTH_NAME_SHORT:v.bind(null,{month:"short"}),CURRENT_DATE:v.bind(null,{day:"2-digit"}),CURRENT_DAY_NAME:v.bind(null,{weekday:"long"}),CURRENT_DAY_NAME_SHORT:v.bind(null,{weekday:"short"}),CURRENT_HOUR:v.bind(null,{hour:"2-digit",hour12:!1}),CURRENT_MINUTE:v.bind(null,{minute:"2-digit"}),CURRENT_SECOND:v.bind(null,{second:"2-digit"})};d.SELECTED_TEXT=d.SELECTION;function v(b){var S=new Date().toLocaleString("en-us",b);return S.length==1?"0"+S:S}var y=function(){this.snippetMap={},this.snippetNameMap={}};(function(){p.implement(this,u),this.getTokenizer=function(){return y.$tokenizer||this.createTokenizer()},this.createTokenizer=function(){function b(C){return C=C.substr(1),/^\d+$/.test(C)?[{tabstopId:parseInt(C,10)}]:[{text:C}]}function S(C){return"(?:[^\\\\"+C+"]|\\\\.)"}var A={regex:"/("+S("/")+"+)/",onMatch:function(C,R,g){var w=g[0];return w.fmtString=!0,w.guard=C.slice(1,-1),w.flag="",""},next:"formatString"};return y.$tokenizer=new o({start:[{regex:/\\./,onMatch:function(C,R,g){var w=C[1];return(w=="}"&&g.length||"`$\\".indexOf(w)!=-1)&&(C=w),[C]}},{regex:/}/,onMatch:function(C,R,g){return[g.length?g.shift():C]}},{regex:/\$(?:\d+|\w+)/,onMatch:b},{regex:/\$\{[\dA-Z_a-z]+/,onMatch:function(C,R,g){var w=b(C.substr(1));return g.unshift(w[0]),w},next:"snippetVar"},{regex:/\n/,token:"newline",merge:!1}],snippetVar:[{regex:"\\|"+S("\\|")+"*\\|",onMatch:function(C,R,g){var w=C.slice(1,-1).replace(/\\[,|\\]|,/g,function($){return $.length==2?$[1]:"\0"}).split("\0").map(function($){return{value:$}});return g[0].choices=w,[w[0]]},next:"start"},A,{regex:"([^:}\\\\]|\\\\.)*:?",token:"",next:"start"}],formatString:[{regex:/:/,onMatch:function(C,R,g){return g.length&&g[0].expectElse?(g[0].expectElse=!1,g[0].ifEnd={elseEnd:g[0]},[g[0].ifEnd]):":"}},{regex:/\\./,onMatch:function(C,R,g){var w=C[1];return w=="}"&&g.length||"`$\\".indexOf(w)!=-1?C=w:w=="n"?C=`
`:w=="t"?C="	":"ulULE".indexOf(w)!=-1&&(C={changeCase:w,local:w>"a"}),[C]}},{regex:"/\\w*}",onMatch:function(C,R,g){var w=g.shift();return w&&(w.flag=C.slice(1,-1)),this.next=w&&w.tabstopId?"start":"",[w||C]},next:"start"},{regex:/\$(?:\d+|\w+)/,onMatch:function(C,R,g){return[{text:C.slice(1)}]}},{regex:/\${\w+/,onMatch:function(C,R,g){var w={text:C.slice(2)};return g.unshift(w),[w]},next:"formatStringVar"},{regex:/\n/,token:"newline",merge:!1},{regex:/}/,onMatch:function(C,R,g){var w=g.shift();return this.next=w&&w.tabstopId?"start":"",[w||C]},next:"start"}],formatStringVar:[{regex:/:\/\w+}/,onMatch:function(C,R,g){var w=g[0];return w.formatFunction=C.slice(2,-1),[g.shift()]},next:"formatString"},A,{regex:/:[\?\-+]?/,onMatch:function(C,R,g){C[1]=="+"&&(g[0].ifEnd=g[0]),C[1]=="?"&&(g[0].expectElse=!0)},next:"formatString"},{regex:"([^:}\\\\]|\\\\.)*:?",token:"",next:"formatString"}]}),y.$tokenizer},this.tokenizeTmSnippet=function(b,S){return this.getTokenizer().getLineTokens(b,S).tokens.map(function(A){return A.value||A})},this.getVariableValue=function(b,S,A){if(/^\d+$/.test(S))return(this.variables.__||{})[S]||"";if(/^[A-Z]\d+$/.test(S))return(this.variables[S[0]+"__"]||{})[S.substr(1)]||"";if(S=S.replace(/^TM_/,""),!this.variables.hasOwnProperty(S))return"";var C=this.variables[S];return typeof C=="function"&&(C=this.variables[S](b,S,A)),C??""},this.variables=d,this.tmStrFormat=function(b,S,A){if(!S.fmt)return b;var C=S.flag||"",R=S.guard;R=new RegExp(R,C.replace(/[^gim]/g,""));var g=typeof S.fmt=="string"?this.tokenizeTmSnippet(S.fmt,"formatString"):S.fmt,w=this,$=b.replace(R,function(){var L=w.variables.__;w.variables.__=[].slice.call(arguments);for(var M=w.resolveVariables(g,A),O="E",I=0;I<M.length;I++){var B=M[I];if(typeof B=="object")if(M[I]="",B.changeCase&&B.local){var H=M[I+1];H&&typeof H=="string"&&(B.changeCase=="u"?M[I]=H[0].toUpperCase():M[I]=H[0].toLowerCase(),M[I+1]=H.substr(1))}else B.changeCase&&(O=B.changeCase);else O=="U"?M[I]=B.toUpperCase():O=="L"&&(M[I]=B.toLowerCase())}return w.variables.__=L,M.join("")});return $},this.tmFormatFunction=function(b,S,A){return S.formatFunction=="upcase"?b.toUpperCase():S.formatFunction=="downcase"?b.toLowerCase():b},this.resolveVariables=function(b,S){for(var A=[],C="",R=!0,g=0;g<b.length;g++){var w=b[g];if(typeof w=="string"){A.push(w),w==`
`?(R=!0,C=""):R&&(C=/^\t*/.exec(w)[0],R=/\S/.test(w));continue}if(w){if(R=!1,w.fmtString){var $=b.indexOf(w,g+1);$==-1&&($=b.length),w.fmt=b.slice(g+1,$),g=$}if(w.text){var L=this.getVariableValue(S,w.text,C)+"";w.fmtString&&(L=this.tmStrFormat(L,w,S)),w.formatFunction&&(L=this.tmFormatFunction(L,w,S)),L&&!w.ifEnd?(A.push(L),M(w)):!L&&w.ifEnd&&M(w.ifEnd)}else w.elseEnd?M(w.elseEnd):(w.tabstopId!=null||w.changeCase!=null)&&A.push(w)}}function M(O){var I=b.indexOf(O,g+1);I!=-1&&(g=I)}return A},this.insertSnippetForSelection=function(b,S){var A=b.getCursorPosition(),C=b.session.getLine(A.row),R=b.session.getTabString(),g=C.match(/^\s*/)[0];A.column<g.length&&(g=g.slice(0,A.column)),S=S.replace(/\r/g,"");var w=this.tokenizeTmSnippet(S);w=this.resolveVariables(w,b),w=w.map(function(ee){return ee==`
`?ee+g:typeof ee=="string"?ee.replace(/\t/g,R):ee});var $=[];w.forEach(function(ee,re){if(typeof ee=="object"){var ae=ee.tabstopId,he=$[ae];if(he||(he=$[ae]=[],he.index=ae,he.value="",he.parents={}),he.indexOf(ee)===-1){ee.choices&&!he.choices&&(he.choices=ee.choices),he.push(ee);var ye=w.indexOf(ee,re+1);if(ye!==-1){var Ae=w.slice(re+1,ye),Ce=Ae.some(function(_e){return typeof _e=="object"});Ce&&!he.value?he.value=Ae:Ae.length&&(!he.value||typeof he.value!="string")&&(he.value=Ae.join(""))}}}}),$.forEach(function(ee){ee.length=0});var L={};function M(ee){for(var re=[],ae=0;ae<ee.length;ae++){var he=ee[ae];if(typeof he=="object"){if(L[he.tabstopId])continue;var ye=ee.lastIndexOf(he,ae-1);he=re[ye]||{tabstopId:he.tabstopId}}re[ae]=he}return re}for(var O=0;O<w.length;O++){var I=w[O];if(typeof I=="object"){var B=I.tabstopId,H=$[B],K=w.indexOf(I,O+1);if(L[B]){L[B]===I&&(delete L[B],Object.keys(L).forEach(function(ee){H.parents[ee]=!0}));continue}L[B]=I;var j=H.value;typeof j!="string"?j=M(j):I.fmt&&(j=this.tmStrFormat(j,I,b)),w.splice.apply(w,[O+1,Math.max(0,K-O)].concat(j,I)),H.indexOf(I)===-1&&H.push(I)}}var Y=0,Q=0,z="";w.forEach(function(ee){if(typeof ee=="string"){var re=ee.split(`
`);re.length>1?(Q=re[re.length-1].length,Y+=re.length-1):Q+=ee.length,z+=ee}else ee&&(ee.start?ee.end={row:Y,column:Q}:ee.start={row:Y,column:Q})});var V=b.getSelectionRange(),X=b.session.replace(V,z),ie=new x(b),se=b.inVirtualSelectionMode&&b.selection.index;ie.addTabstops($,V.start,X,se)},this.insertSnippet=function(b,S){var A=this;if(b.inVirtualSelectionMode)return A.insertSnippetForSelection(b,S);b.forEachSelection(function(){A.insertSnippetForSelection(b,S)},null,{keepOrder:!0}),b.tabstopManager&&b.tabstopManager.tabNext()},this.$getScope=function(b){var S=b.session.$mode.$id||"";if(S=S.split("/").pop(),S==="html"||S==="php"){S==="php"&&!b.session.$mode.inlinePhp&&(S="html");var A=b.getCursorPosition(),C=b.session.getState(A.row);typeof C=="object"&&(C=C[0]),C.substring&&(C.substring(0,3)=="js-"?S="javascript":C.substring(0,4)=="css-"?S="css":C.substring(0,4)=="php-"&&(S="php"))}return S},this.getActiveScopes=function(b){var S=this.$getScope(b),A=[S],C=this.snippetMap;return C[S]&&C[S].includeScopes&&A.push.apply(A,C[S].includeScopes),A.push("_"),A},this.expandWithTab=function(b,S){var A=this,C=b.forEachSelection(function(){return A.expandSnippetForSelection(b,S)},null,{keepOrder:!0});return C&&b.tabstopManager&&b.tabstopManager.tabNext(),C},this.expandSnippetForSelection=function(b,S){var A=b.getCursorPosition(),C=b.session.getLine(A.row),R=C.substring(0,A.column),g=C.substr(A.column),w=this.snippetMap,$;return this.getActiveScopes(b).some(function(L){var M=w[L];return M&&($=this.findMatchingSnippet(M,R,g)),!!$},this),$?(S&&S.dryRun||(b.session.doc.removeInLine(A.row,A.column-$.replaceBefore.length,A.column+$.replaceAfter.length),this.variables.M__=$.matchBefore,this.variables.T__=$.matchAfter,this.insertSnippetForSelection(b,$.content),this.variables.M__=this.variables.T__=null),!0):!1},this.findMatchingSnippet=function(b,S,A){for(var C=b.length;C--;){var R=b[C];if(!(R.startRe&&!R.startRe.test(S))&&!(R.endRe&&!R.endRe.test(A))&&!(!R.startRe&&!R.endRe))return R.matchBefore=R.startRe?R.startRe.exec(S):[""],R.matchAfter=R.endRe?R.endRe.exec(A):[""],R.replaceBefore=R.triggerRe?R.triggerRe.exec(S)[0]:"",R.replaceAfter=R.endTriggerRe?R.endTriggerRe.exec(A)[0]:"",R}},this.snippetMap={},this.snippetNameMap={},this.register=function(b,S){var A=this.snippetMap,C=this.snippetNameMap,R=this;b||(b=[]);function g(L){return L&&!/^\^?\(.*\)\$?$|^\\b$/.test(L)&&(L="(?:"+L+")"),L||""}function w(L,M,O){return L=g(L),M=g(M),O?(L=M+L,L&&L[L.length-1]!="$"&&(L=L+"$")):(L=L+M,L&&L[0]!="^"&&(L="^"+L)),new RegExp(L)}function $(L){L.scope||(L.scope=S||"_"),S=L.scope,A[S]||(A[S]=[],C[S]={});var M=C[S];if(L.name){var O=M[L.name];O&&R.unregister(O),M[L.name]=L}A[S].push(L),L.prefix&&(L.tabTrigger=L.prefix),!L.content&&L.body&&(L.content=Array.isArray(L.body)?L.body.join(`
`):L.body),L.tabTrigger&&!L.trigger&&(!L.guard&&/^\w/.test(L.tabTrigger)&&(L.guard="\\b"),L.trigger=c.escapeRegExp(L.tabTrigger)),!(!L.trigger&&!L.guard&&!L.endTrigger&&!L.endGuard)&&(L.startRe=w(L.trigger,L.guard,!0),L.triggerRe=new RegExp(L.trigger),L.endRe=w(L.endTrigger,L.endGuard,!0),L.endTriggerRe=new RegExp(L.endTrigger))}Array.isArray(b)?b.forEach($):Object.keys(b).forEach(function(L){$(b[L])}),this._signal("registerSnippets",{scope:S})},this.unregister=function(b,S){var A=this.snippetMap,C=this.snippetNameMap;function R(g){var w=C[g.scope||S];if(w&&w[g.name]){delete w[g.name];var $=A[g.scope||S],L=$&&$.indexOf(g);L>=0&&$.splice(L,1)}}b.content?R(b):Array.isArray(b)&&b.forEach(R)},this.parseSnippetFile=function(b){b=b.replace(/\r/g,"");for(var S=[],A={},C=/^#.*|^({[\s\S]*})\s*$|^(\S+) (.*)$|^((?:\n*\t.*)+)/gm,R;R=C.exec(b);){if(R[1])try{A=JSON.parse(R[1]),S.push(A)}catch{}if(R[4])A.content=R[4].replace(/^\t/gm,""),S.push(A),A={};else{var g=R[2],w=R[3];if(g=="regex"){var $=/\/((?:[^\/\\]|\\.)*)|$/g;A.guard=$.exec(w)[1],A.trigger=$.exec(w)[1],A.endTrigger=$.exec(w)[1],A.endGuard=$.exec(w)[1]}else g=="snippet"?(A.tabTrigger=w.match(/^\S*/)[0],A.name||(A.name=w)):g&&(A[g]=w)}}return S},this.getSnippetByName=function(b,S){var A=this.snippetNameMap,C;return this.getActiveScopes(S).some(function(R){var g=A[R];return g&&(C=g[b]),!!C},this),C}}).call(y.prototype);var x=function(b){if(b.tabstopManager)return b.tabstopManager;b.tabstopManager=this,this.$onChange=this.onChange.bind(this),this.$onChangeSelection=c.delayedCall(this.onChangeSelection.bind(this)).schedule,this.$onChangeSession=this.onChangeSession.bind(this),this.$onAfterExec=this.onAfterExec.bind(this),this.attach(b)};(function(){this.attach=function(b){this.index=0,this.ranges=[],this.tabstops=[],this.$openTabstops=null,this.selectedTabstop=null,this.editor=b,this.editor.on("change",this.$onChange),this.editor.on("changeSelection",this.$onChangeSelection),this.editor.on("changeSession",this.$onChangeSession),this.editor.commands.on("afterExec",this.$onAfterExec),this.editor.keyBinding.addKeyboardHandler(this.keyboardHandler)},this.detach=function(){this.tabstops.forEach(this.removeTabstopMarkers,this),this.ranges=null,this.tabstops=null,this.selectedTabstop=null,this.editor.removeListener("change",this.$onChange),this.editor.removeListener("changeSelection",this.$onChangeSelection),this.editor.removeListener("changeSession",this.$onChangeSession),this.editor.commands.removeListener("afterExec",this.$onAfterExec),this.editor.keyBinding.removeKeyboardHandler(this.keyboardHandler),this.editor.tabstopManager=null,this.editor=null},this.onChange=function(b){for(var S=b.action[0]=="r",A=this.selectedTabstop||{},C=A.parents||{},R=(this.tabstops||[]).slice(),g=0;g<R.length;g++){var w=R[g],$=w==A||C[w.index];if(w.rangeList.$bias=$?0:1,b.action=="remove"&&w!==A){var L=w.parents&&w.parents[A.index],M=w.rangeList.pointIndex(b.start,L);M=M<0?-M-1:M+1;var O=w.rangeList.pointIndex(b.end,L);O=O<0?-O-1:O-1;for(var I=w.rangeList.ranges.slice(M,O),B=0;B<I.length;B++)this.removeRange(I[B])}w.rangeList.$onChange(b)}var H=this.editor.session;!this.$inChange&&S&&H.getLength()==1&&!H.getValue()&&this.detach()},this.updateLinkedFields=function(){var b=this.selectedTabstop;if(!(!b||!b.hasLinkedRanges||!b.firstNonLinked)){this.$inChange=!0;for(var S=this.editor.session,A=S.getTextRange(b.firstNonLinked),C=0;C<b.length;C++){var R=b[C];if(R.linked){var g=R.original,w=a.snippetManager.tmStrFormat(A,g,this.editor);S.replace(R,w)}}this.$inChange=!1}},this.onAfterExec=function(b){b.command&&!b.command.readOnly&&this.updateLinkedFields()},this.onChangeSelection=function(){if(this.editor){for(var b=this.editor.selection.lead,S=this.editor.selection.anchor,A=this.editor.selection.isEmpty(),C=0;C<this.ranges.length;C++)if(!this.ranges[C].linked){var R=this.ranges[C].contains(b.row,b.column),g=A||this.ranges[C].contains(S.row,S.column);if(R&&g)return}this.detach()}},this.onChangeSession=function(){this.detach()},this.tabNext=function(b){var S=this.tabstops.length,A=this.index+(b||1);A=Math.min(Math.max(A,1),S),A==S&&(A=0),this.selectTabstop(A),A===0&&this.detach()},this.selectTabstop=function(b){this.$openTabstops=null;var S=this.tabstops[this.index];if(S&&this.addTabstopMarkers(S),this.index=b,S=this.tabstops[this.index],!(!S||!S.length)){this.selectedTabstop=S;var A=S.firstNonLinked||S;if(S.choices&&(A.cursor=A.start),this.editor.inVirtualSelectionMode)this.editor.selection.fromOrientedRange(A);else{var C=this.editor.multiSelect;C.toSingleRange(A);for(var R=0;R<S.length;R++)S.hasLinkedRanges&&S[R].linked||C.addRange(S[R].clone(),!0)}this.editor.keyBinding.addKeyboardHandler(this.keyboardHandler),this.selectedTabstop&&this.selectedTabstop.choices&&this.editor.execCommand("startAutocomplete",{matches:this.selectedTabstop.choices})}},this.addTabstops=function(b,S,A){var C=this.useLink||!this.editor.getOption("enableMultiselect");if(this.$openTabstops||(this.$openTabstops=[]),!b[0]){var R=f.fromPoints(A,A);T(R.start,S),T(R.end,S),b[0]=[R],b[0].index=0}var g=this.index,w=[g+1,0],$=this.ranges;b.forEach(function(L,M){for(var O=this.$openTabstops[M]||L,I=0;I<L.length;I++){var B=L[I],H=f.fromPoints(B.start,B.end||B.start);E(H.start,S),E(H.end,S),H.original=B,H.tabstop=O,$.push(H),O!=L?O.unshift(H):O[I]=H,B.fmtString||O.firstNonLinked&&C?(H.linked=!0,O.hasLinkedRanges=!0):O.firstNonLinked||(O.firstNonLinked=H)}O.firstNonLinked||(O.hasLinkedRanges=!1),O===L&&(w.push(O),this.$openTabstops[M]=O),this.addTabstopMarkers(O),O.rangeList=O.rangeList||new n,O.rangeList.$bias=0,O.rangeList.addList(O)},this),w.length>2&&(this.tabstops.length&&w.push(w.splice(2,1)[0]),this.tabstops.splice.apply(this.tabstops,w))},this.addTabstopMarkers=function(b){var S=this.editor.session;b.forEach(function(A){A.markerId||(A.markerId=S.addMarker(A,"ace_snippet-marker","text"))})},this.removeTabstopMarkers=function(b){var S=this.editor.session;b.forEach(function(A){S.removeMarker(A.markerId),A.markerId=null})},this.removeRange=function(b){var S=b.tabstop.indexOf(b);S!=-1&&b.tabstop.splice(S,1),S=this.ranges.indexOf(b),S!=-1&&this.ranges.splice(S,1),S=b.tabstop.rangeList.ranges.indexOf(b),S!=-1&&b.tabstop.splice(S,1),this.editor.session.removeMarker(b.markerId),b.tabstop.length||(S=this.tabstops.indexOf(b.tabstop),S!=-1&&this.tabstops.splice(S,1),this.tabstops.length||this.detach())},this.keyboardHandler=new t,this.keyboardHandler.bindKeys({Tab:function(b){a.snippetManager&&a.snippetManager.expandWithTab(b)||(b.tabstopManager.tabNext(1),b.renderer.scrollCursorIntoView())},"Shift-Tab":function(b){b.tabstopManager.tabNext(-1),b.renderer.scrollCursorIntoView()},Esc:function(b){b.tabstopManager.detach()}})}).call(x.prototype);var E=function(b,S){b.row==0&&(b.column+=S.column),b.row+=S.row},T=function(b,S){b.row==S.row&&(b.column-=S.column),b.row-=S.row};h.importCssString(`
.ace_snippet-marker {
    -moz-box-sizing: border-box;
    box-sizing: border-box;
    background: rgba(194, 193, 208, 0.09);
    border: 1px dotted rgba(211, 208, 235, 0.62);
    position: absolute;
}`,"snippets.css",!1),a.snippetManager=new y;var k=e("./editor").Editor;(function(){this.insertSnippet=function(b,S){return a.snippetManager.insertSnippet(this,b,S)},this.expandSnippet=function(b){return a.snippetManager.expandWithTab(this,b)}}).call(k.prototype)}),ace.define("ace/autocomplete/popup",["require","exports","module","ace/virtual_renderer","ace/editor","ace/range","ace/lib/event","ace/lib/lang","ace/lib/dom"],function(e,a,m){var h=e("../virtual_renderer").VirtualRenderer,p=e("../editor").Editor,u=e("../range").Range,c=e("../lib/event"),f=e("../lib/lang"),n=e("../lib/dom"),t=function(d){return"suggest-aria-id:".concat(d)},o=function(d){var v=new h(d);v.$maxLines=4;var y=new p(v);return y.setHighlightActiveLine(!1),y.setShowPrintMargin(!1),y.renderer.setShowGutter(!1),y.renderer.setHighlightGutterLine(!1),y.$mouseHandler.$focusTimeout=0,y.$highlightTagPending=!0,y},l=function(d){var v=n.createElement("div"),y=new o(v);d&&d.appendChild(v),v.style.display="none",y.renderer.content.style.cursor="default",y.renderer.setStyle("ace_autocomplete"),y.renderer.container.setAttribute("role","listbox"),y.renderer.container.setAttribute("aria-label","Autocomplete suggestions"),y.setOption("displayIndentGuides",!1),y.setOption("dragDelay",150);var x=function(){};y.focus=x,y.$isFocused=!0,y.renderer.$cursorLayer.restartTimer=x,y.renderer.$cursorLayer.element.style.opacity=0,y.renderer.$maxLines=8,y.renderer.$keepTextAreaAtCursor=!1,y.setHighlightActiveLine(!1),y.session.highlight(""),y.session.$searchHighlight.clazz="ace_highlight-marker",y.on("mousedown",function(C){var R=C.getDocumentPosition();y.selection.moveToPosition(R),k.start.row=k.end.row=R.row,C.stop()});var E,T=new u(-1,0,-1,1/0),k=new u(-1,0,-1,1/0);k.id=y.session.addMarker(k,"ace_active-line","fullLine"),y.setSelectOnHover=function(C){C?T.id&&(y.session.removeMarker(T.id),T.id=null):T.id=y.session.addMarker(T,"ace_line-hover","fullLine")},y.setSelectOnHover(!1),y.on("mousemove",function(C){if(!E){E=C;return}if(!(E.x==C.x&&E.y==C.y)){E=C,E.scrollTop=y.renderer.scrollTop;var R=E.getDocumentPosition().row;T.start.row!=R&&(T.id||y.setRow(R),S(R))}}),y.renderer.on("beforeRender",function(){if(E&&T.start.row!=-1){E.$pos=null;var C=E.getDocumentPosition().row;T.id||y.setRow(C),S(C,!0)}}),y.renderer.on("afterRender",function(){var C=y.getRow(),R=y.renderer.$textLayer,g=R.element.childNodes[C-R.config.firstRow],w=document.activeElement;if(g!==R.selectedNode&&R.selectedNode&&(n.removeCssClass(R.selectedNode,"ace_selected"),w.removeAttribute("aria-activedescendant"),R.selectedNode.removeAttribute("id")),R.selectedNode=g,g){n.addCssClass(g,"ace_selected");var $=t(C);g.id=$,y.renderer.container.setAttribute("aria-activedescendant",$),w.setAttribute("aria-activedescendant",$),g.setAttribute("role","option"),g.setAttribute("aria-label",y.getData(C).value),g.setAttribute("aria-setsize",y.data.length),g.setAttribute("aria-posinset",C)}});var b=function(){S(-1)},S=function(C,R){C!==T.start.row&&(T.start.row=T.end.row=C,R||y.session._emit("changeBackMarker"),y._emit("changeHoverMarker"))};y.getHoveredRow=function(){return T.start.row},c.addListener(y.container,"mouseout",b),y.on("hide",b),y.on("changeSelection",b),y.session.doc.getLength=function(){return y.data.length},y.session.doc.getLine=function(C){var R=y.data[C];return typeof R=="string"?R:R&&R.value||""};var A=y.session.bgTokenizer;return A.$tokenizeRow=function(C){var R=y.data[C],g=[];if(!R)return g;typeof R=="string"&&(R={value:R});var w=R.caption||R.value||R.name;function $(j,Y){j&&g.push({type:(R.className||"")+(Y||""),value:j})}for(var L=w.toLowerCase(),M=(y.filterText||"").toLowerCase(),O=0,I=0,B=0;B<=M.length;B++)if(B!=I&&(R.matchMask&1<<B||B==M.length)){var H=M.slice(I,B);I=B;var K=L.indexOf(H,O);if(K==-1)continue;$(w.slice(O,K),""),O=K+H.length,$(w.slice(K,O),"completion-highlight")}return $(w.slice(O,w.length),""),R.meta&&g.push({type:"completion-meta",value:R.meta}),R.message&&g.push({type:"completion-message",value:R.message}),g},A.$updateOnChange=x,A.start=x,y.session.$computeWidth=function(){return this.screenWidth=0},y.isOpen=!1,y.isTopdown=!1,y.autoSelect=!0,y.filterText="",y.data=[],y.setData=function(C,R){y.filterText=R||"",y.setValue(f.stringRepeat(`
`,C.length),-1),y.data=C||[],y.setRow(0)},y.getData=function(C){return y.data[C]},y.getRow=function(){return k.start.row},y.setRow=function(C){C=Math.max(this.autoSelect?0:-1,Math.min(this.data.length,C)),k.start.row!=C&&(y.selection.clearSelection(),k.start.row=k.end.row=C||0,y.session._emit("changeBackMarker"),y.moveCursorTo(C||0,0),y.isOpen&&y._signal("select"))},y.on("changeSelection",function(){y.isOpen&&y.setRow(y.selection.lead.row),y.renderer.scrollCursorIntoView()}),y.hide=function(){this.container.style.display="none",this._signal("hide"),y.isOpen=!1},y.show=function(C,R,g){var w=this.container,$=window.innerHeight,L=window.innerWidth,M=this.renderer,O=M.$maxLines*R*1.4,I=C.top+this.$borderSize,B=I>$/2&&!g;B&&I+R+O>$?(M.$maxPixelHeight=I-2*this.$borderSize,w.style.top="",w.style.bottom=$-I+"px",y.isTopdown=!1):(I+=R,M.$maxPixelHeight=$-I-.2*R,w.style.top=I+"px",w.style.bottom="",y.isTopdown=!0),w.style.display="";var H=C.left;H+w.offsetWidth>L&&(H=L-w.offsetWidth),w.style.left=H+"px",this._signal("show"),E=null,y.isOpen=!0},y.goTo=function(C){var R=this.getRow(),g=this.session.getLength()-1;switch(C){case"up":R=R<=0?g:R-1;break;case"down":R=R>=g?-1:R+1;break;case"start":R=0;break;case"end":R=g;break}this.setRow(R)},y.getTextLeftOffset=function(){return this.$borderSize+this.renderer.$padding+this.$imageSize},y.$imageSize=0,y.$borderSize=1,y};n.importCssString(`
.ace_editor.ace_autocomplete .ace_marker-layer .ace_active-line {
    background-color: #CAD6FA;
    z-index: 1;
}
.ace_dark.ace_editor.ace_autocomplete .ace_marker-layer .ace_active-line {
    background-color: #3a674e;
}
.ace_editor.ace_autocomplete .ace_line-hover {
    border: 1px solid #abbffe;
    margin-top: -1px;
    background: rgba(233,233,253,0.4);
    position: absolute;
    z-index: 2;
}
.ace_dark.ace_editor.ace_autocomplete .ace_line-hover {
    border: 1px solid rgba(109, 150, 13, 0.8);
    background: rgba(58, 103, 78, 0.62);
}
.ace_completion-meta {
    opacity: 0.5;
    margin: 0.9em;
}
.ace_completion-message {
    color: blue;
}
.ace_editor.ace_autocomplete .ace_completion-highlight{
    color: #2d69c7;
}
.ace_dark.ace_editor.ace_autocomplete .ace_completion-highlight{
    color: #93ca12;
}
.ace_editor.ace_autocomplete {
    width: 300px;
    z-index: 200000;
    border: 1px lightgray solid;
    position: fixed;
    box-shadow: 2px 3px 5px rgba(0,0,0,.2);
    line-height: 1.4;
    background: #fefefe;
    color: #111;
}
.ace_dark.ace_editor.ace_autocomplete {
    border: 1px #484747 solid;
    box-shadow: 2px 3px 5px rgba(0, 0, 0, 0.51);
    line-height: 1.4;
    background: #25282c;
    color: #c1c1c1;
}`,"autocompletion.css",!1),a.AcePopup=l,a.$singleLineEditor=o,a.getAriaId=t}),ace.define("ace/autocomplete/util",["require","exports","module"],function(e,a,m){a.parForEach=function(p,u,c){var f=0,n=p.length;n===0&&c();for(var t=0;t<n;t++)u(p[t],function(o,l){f++,f===n&&c(o,l)})};var h=/[a-zA-Z_0-9\$\-\u00A2-\u2000\u2070-\uFFFF]/;a.retrievePrecedingIdentifier=function(p,u,c){c=c||h;for(var f=[],n=u-1;n>=0&&c.test(p[n]);n--)f.push(p[n]);return f.reverse().join("")},a.retrieveFollowingIdentifier=function(p,u,c){c=c||h;for(var f=[],n=u;n<p.length&&c.test(p[n]);n++)f.push(p[n]);return f},a.getCompletionPrefix=function(p){var u=p.getCursorPosition(),c=p.session.getLine(u.row),f;return p.completers.forEach(function(n){n.identifierRegexps&&n.identifierRegexps.forEach(function(t){!f&&t&&(f=this.retrievePrecedingIdentifier(c,u.column,t))}.bind(this))}.bind(this)),f||this.retrievePrecedingIdentifier(c,u.column)}}),ace.define("ace/autocomplete",["require","exports","module","ace/keyboard/hash_handler","ace/autocomplete/popup","ace/autocomplete/popup","ace/autocomplete/util","ace/lib/lang","ace/lib/dom","ace/snippets","ace/config"],function(e,a,m){var h=e("./keyboard/hash_handler").HashHandler,p=e("./autocomplete/popup").AcePopup,u=e("./autocomplete/popup").getAriaId,c=e("./autocomplete/util"),f=e("./lib/lang"),n=e("./lib/dom"),t=e("./snippets").snippetManager,o=e("./config"),l=function(){this.autoInsert=!1,this.autoSelect=!0,this.exactMatch=!1,this.gatherCompletionsId=0,this.keyboardHandler=new h,this.keyboardHandler.bindKeys(this.commands),this.blurListener=this.blurListener.bind(this),this.changeListener=this.changeListener.bind(this),this.mousedownListener=this.mousedownListener.bind(this),this.mousewheelListener=this.mousewheelListener.bind(this),this.changeTimer=f.delayedCall(function(){this.updateCompletions(!0)}.bind(this)),this.tooltipTimer=f.delayedCall(this.updateDocTooltip.bind(this),50)};(function(){this.$init=function(){return this.popup=new p(document.body||document.documentElement),this.popup.on("click",function(v){this.insertMatch(),v.stop()}.bind(this)),this.popup.focus=this.editor.focus.bind(this.editor),this.popup.on("show",this.tooltipTimer.bind(null,null)),this.popup.on("select",this.tooltipTimer.bind(null,null)),this.popup.on("changeHoverMarker",this.tooltipTimer.bind(null,null)),this.popup},this.getPopup=function(){return this.popup||this.$init()},this.openPopup=function(v,y,x){this.popup||this.$init(),this.popup.autoSelect=this.autoSelect,this.popup.setData(this.completions.filtered,this.completions.filterText),this.editor.textInput.setAriaOptions&&this.editor.textInput.setAriaOptions({activeDescendant:u(this.popup.getRow())}),v.keyBinding.addKeyboardHandler(this.keyboardHandler);var E=v.renderer;if(this.popup.setRow(this.autoSelect?0:-1),x)x&&!y&&this.detach();else{this.popup.setTheme(v.getTheme()),this.popup.setFontSize(v.getFontSize());var T=E.layerConfig.lineHeight,k=E.$cursorLayer.getPixelPosition(this.base,!0);k.left-=this.popup.getTextLeftOffset();var b=v.container.getBoundingClientRect();k.top+=b.top-E.layerConfig.offset,k.left+=b.left-v.renderer.scrollLeft,k.left+=E.gutterWidth,this.popup.show(k,T)}this.changeTimer.cancel()},this.detach=function(){this.editor.keyBinding.removeKeyboardHandler(this.keyboardHandler),this.editor.off("changeSelection",this.changeListener),this.editor.off("blur",this.blurListener),this.editor.off("mousedown",this.mousedownListener),this.editor.off("mousewheel",this.mousewheelListener),this.changeTimer.cancel(),this.hideDocTooltip(),this.gatherCompletionsId+=1,this.popup&&this.popup.isOpen&&this.popup.hide(),this.base&&this.base.detach(),this.activated=!1,this.completions=this.base=null},this.changeListener=function(v){var y=this.editor.selection.lead;(y.row!=this.base.row||y.column<this.base.column)&&this.detach(),this.activated?this.changeTimer.schedule():this.detach()},this.blurListener=function(v){var y=document.activeElement,x=this.editor.textInput.getElement(),E=v.relatedTarget&&this.tooltipNode&&this.tooltipNode.contains(v.relatedTarget),T=this.popup&&this.popup.container;y!=x&&y.parentNode!=T&&!E&&y!=this.tooltipNode&&v.relatedTarget!=x&&this.detach()},this.mousedownListener=function(v){this.detach()},this.mousewheelListener=function(v){this.detach()},this.goTo=function(v){this.popup.goTo(v)},this.insertMatch=function(v,y){if(v||(v=this.popup.getData(this.popup.getRow())),!v)return!1;var x=this.completions;if(this.editor.startOperation({command:{name:"insertMatch"}}),v.completer&&v.completer.insertMatch)v.completer.insertMatch(this.editor,v);else{if(!x)return!1;if(x.filterText)for(var E=this.editor.selection.getAllRanges(),T=0,k;k=E[T];T++)k.start.column-=x.filterText.length,this.editor.session.remove(k);v.snippet?t.insertSnippet(this.editor,v.snippet):this.editor.execCommand("insertstring",v.value||v)}this.completions==x&&this.detach(),this.editor.endOperation()},this.commands={Up:function(v){v.completer.goTo("up")},Down:function(v){v.completer.goTo("down")},"Ctrl-Up|Ctrl-Home":function(v){v.completer.goTo("start")},"Ctrl-Down|Ctrl-End":function(v){v.completer.goTo("end")},Esc:function(v){v.completer.detach()},Return:function(v){return v.completer.insertMatch()},"Shift-Return":function(v){v.completer.insertMatch(null,{deleteSuffix:!0})},Tab:function(v){var y=v.completer.insertMatch();if(!y&&!v.tabstopManager)v.completer.goTo("down");else return y},PageUp:function(v){v.completer.popup.gotoPageUp()},PageDown:function(v){v.completer.popup.gotoPageDown()}},this.gatherCompletions=function(v,y){var x=v.getSession(),E=v.getCursorPosition(),T=c.getCompletionPrefix(v);this.base=x.doc.createAnchor(E.row,E.column-T.length),this.base.$insertRight=!0;var k=[],b=v.completers.length;return v.completers.forEach(function(S,A){S.getCompletions(v,x,E,T,function(C,R){!C&&R&&(k=k.concat(R)),y(null,{prefix:c.getCompletionPrefix(v),matches:k,finished:--b===0})})}),!0},this.showPopup=function(v,y){this.editor&&this.detach(),this.activated=!0,this.editor=v,v.completer!=this&&(v.completer&&v.completer.detach(),v.completer=this),v.on("changeSelection",this.changeListener),v.on("blur",this.blurListener),v.on("mousedown",this.mousedownListener),v.on("mousewheel",this.mousewheelListener),this.updateCompletions(!1,y)},this.updateCompletions=function(v,y){if(v&&this.base&&this.completions){var x=this.editor.getCursorPosition(),E=this.editor.session.getTextRange({start:this.base,end:x});if(E==this.completions.filterText)return;if(this.completions.setFilter(E),!this.completions.filtered.length)return this.detach();if(this.completions.filtered.length==1&&this.completions.filtered[0].value==E&&!this.completions.filtered[0].snippet)return this.detach();this.openPopup(this.editor,E,v);return}if(y&&y.matches){var x=this.editor.getSelectionRange().start;return this.base=this.editor.session.doc.createAnchor(x.row,x.column),this.base.$insertRight=!0,this.completions=new d(y.matches),this.openPopup(this.editor,"",v)}var T=this.gatherCompletionsId,k=function(R){if(R.finished)return this.detach()}.bind(this),b=function(R){var g=R.prefix,w=R.matches;this.completions=new d(w),this.exactMatch&&(this.completions.exactMatch=!0),this.completions.setFilter(g);var $=this.completions.filtered;if(!$.length||$.length==1&&$[0].value==g&&!$[0].snippet)return k(R);if(this.autoInsert&&$.length==1&&R.finished)return this.insertMatch($[0]);this.openPopup(this.editor,g,v)}.bind(this),S=!0,A=null;if(this.gatherCompletions(this.editor,function(R,g){var w=g.prefix,$=g&&g.matches;if(!$||!$.length)return k(g);if(!(w.indexOf(g.prefix)!==0||T!=this.gatherCompletionsId)){if(S){A=g;return}b(g)}}.bind(this)),S=!1,A){var C=A;A=null,b(C)}},this.cancelContextMenu=function(){this.editor.$mouseHandler.cancelContextMenu()},this.updateDocTooltip=function(){var v=this.popup,y=v.data,x=y&&(y[v.getHoveredRow()]||y[v.getRow()]),E=null;if(!x||!this.editor||!this.popup.isOpen)return this.hideDocTooltip();if(this.editor.completers.some(function(T){return T.getDocTooltip&&(E=T.getDocTooltip(x)),E}),!E&&typeof x!="string"&&(E=x),typeof E=="string"&&(E={docText:E}),!E||!(E.docHTML||E.docText))return this.hideDocTooltip();this.showDocTooltip(E)},this.showDocTooltip=function(v){this.tooltipNode||(this.tooltipNode=n.createElement("div"),this.tooltipNode.className="ace_tooltip ace_doc-tooltip",this.tooltipNode.style.margin=0,this.tooltipNode.style.pointerEvents="auto",this.tooltipNode.tabIndex=-1,this.tooltipNode.onblur=this.blurListener.bind(this),this.tooltipNode.onclick=this.onTooltipClick.bind(this));var y=this.tooltipNode;v.docHTML?y.innerHTML=v.docHTML:v.docText&&(y.textContent=v.docText),y.parentNode||document.body.appendChild(y);var x=this.popup,E=x.container.getBoundingClientRect();y.style.top=x.container.style.top,y.style.bottom=x.container.style.bottom,y.style.display="block",window.innerWidth-E.right<320?E.left<320?x.isTopdown?(y.style.top=E.bottom+"px",y.style.left=E.left+"px",y.style.right="",y.style.bottom=""):(y.style.top=x.container.offsetTop-y.offsetHeight+"px",y.style.left=E.left+"px",y.style.right="",y.style.bottom=""):(y.style.right=window.innerWidth-E.left+"px",y.style.left=""):(y.style.left=E.right+1+"px",y.style.right="")},this.hideDocTooltip=function(){if(this.tooltipTimer.cancel(),!!this.tooltipNode){var v=this.tooltipNode;!this.editor.isFocused()&&document.activeElement==v&&this.editor.focus(),this.tooltipNode=null,v.parentNode&&v.parentNode.removeChild(v)}},this.onTooltipClick=function(v){for(var y=v.target;y&&y!=this.tooltipNode;){if(y.nodeName=="A"&&y.href){y.rel="noreferrer",y.target="_blank";break}y=y.parentNode}},this.destroy=function(){if(this.detach(),this.popup){this.popup.destroy();var v=this.popup.container;v&&v.parentNode&&v.parentNode.removeChild(v)}this.editor&&this.editor.completer==this&&this.editor.completer==null,this.popup=null}}).call(l.prototype),l.for=function(v){return v.completer||(o.get("sharedPopups")?(l.$shared||(l.$sharedInstance=new l),v.completer=l.$sharedInstance):(v.completer=new l,v.once("destroy",function(y,x){x.completer.destroy()}))),v.completer},l.startCommand={name:"startAutocomplete",exec:function(v,y){var x=l.for(v);x.autoInsert=!1,x.autoSelect=!0,x.showPopup(v,y),x.cancelContextMenu()},bindKey:"Ctrl-Space|Ctrl-Shift-Space|Alt-Space"};var d=function(v,y){this.all=v,this.filtered=v,this.filterText=y||"",this.exactMatch=!1};(function(){this.setFilter=function(v){if(v.length>this.filterText&&v.lastIndexOf(this.filterText,0)===0)var y=this.filtered;else var y=this.all;this.filterText=v,y=this.filterCompletions(y,this.filterText),y=y.sort(function(E,T){return T.exactMatch-E.exactMatch||T.$score-E.$score||(E.caption||E.value).localeCompare(T.caption||T.value)});var x=null;y=y.filter(function(E){var T=E.snippet||E.caption||E.value;return T===x?!1:(x=T,!0)}),this.filtered=y},this.filterCompletions=function(v,y){var x=[],E=y.toUpperCase(),T=y.toLowerCase();e:for(var k=0,b;b=v[k];k++){var S=b.caption||b.value||b.snippet;if(S){var A=-1,C=0,R=0,g,w;if(this.exactMatch){if(y!==S.substr(0,y.length))continue e}else{var $=S.toLowerCase().indexOf(T);if($>-1)R=$;else for(var L=0;L<y.length;L++){var M=S.indexOf(T[L],A+1),O=S.indexOf(E[L],A+1);if(g=M>=0&&(O<0||M<O)?M:O,g<0)continue e;w=g-A-1,w>0&&(A===-1&&(R+=10),R+=w,C=C|1<<L),A=g}}b.matchMask=C,b.exactMatch=R?0:1,b.$score=(b.score||0)-R,x.push(b)}}return x}}).call(d.prototype),a.Autocomplete=l,a.FilteredList=d}),ace.define("ace/autocomplete/text_completer",["require","exports","module","ace/range"],function(e,a,m){var h=e("../range").Range,p=/[^a-zA-Z_0-9\$\-\u00C0-\u1FFF\u2C00-\uD7FF\w]+/;function u(f,n){var t=f.getTextRange(h.fromPoints({row:0,column:0},n));return t.split(p).length-1}function c(f,n){var t=u(f,n),o=f.getValue().split(p),l=Object.create(null),d=o[t];return o.forEach(function(v,y){if(!(!v||v===d)){var x=Math.abs(t-y),E=o.length-x;l[v]?l[v]=Math.max(E,l[v]):l[v]=E}}),l}a.getCompletions=function(f,n,t,o,l){var d=c(n,t),v=Object.keys(d);l(null,v.map(function(y){return{caption:y,value:y,score:d[y],meta:"local"}}))}}),ace.define("ace/ext/language_tools",["require","exports","module","ace/snippets","ace/autocomplete","ace/config","ace/lib/lang","ace/autocomplete/util","ace/autocomplete/text_completer","ace/editor","ace/config"],function(e,a,m){var h=e("../snippets").snippetManager,p=e("../autocomplete").Autocomplete,u=e("../config"),c=e("../lib/lang"),f=e("../autocomplete/util"),n=e("../autocomplete/text_completer"),t={getCompletions:function(b,S,A,C,R){if(S.$mode.completer)return S.$mode.completer.getCompletions(b,S,A,C,R);var g=b.session.getState(A.row),w=S.$mode.getCompletions(g,S,A,C);R(null,w)}},o=function(b){var S={};return b.replace(/\${(\d+)(:(.*?))?}/g,function(A,C,R,g){return S[C]=g||""}).replace(/\$(\d+?)/g,function(A,C){return S[C]})},l={getCompletions:function(b,S,A,C,R){var g=[],w=S.getTokenAt(A.row,A.column);w&&w.type.match(/(tag-name|tag-open|tag-whitespace|attribute-name|attribute-value)\.xml$/)?g.push("html-tag"):g=h.getActiveScopes(b);var $=h.snippetMap,L=[];g.forEach(function(M){for(var O=$[M]||[],I=O.length;I--;){var B=O[I],H=B.name||B.tabTrigger;H&&L.push({caption:H,snippet:B.content,meta:B.tabTrigger&&!B.name?B.tabTrigger+"⇥ ":"snippet",type:"snippet"})}},this),R(null,L)},getDocTooltip:function(b){b.type=="snippet"&&!b.docHTML&&(b.docHTML=["<b>",c.escapeHTML(b.caption),"</b>","<hr></hr>",c.escapeHTML(o(b.snippet))].join(""))}},d=[l,n,t];a.setCompleters=function(b){d.length=0,b&&d.push.apply(d,b)},a.addCompleter=function(b){d.push(b)},a.textCompleter=n,a.keyWordCompleter=t,a.snippetCompleter=l;var v={name:"expandSnippet",exec:function(b){return h.expandWithTab(b)},bindKey:"Tab"},y=function(b,S){x(S.session.$mode)},x=function(b){typeof b=="string"&&(b=u.$modes[b]),b&&(h.files||(h.files={}),E(b.$id,b.snippetFileId),b.modes&&b.modes.forEach(x))},E=function(b,S){!S||!b||h.files[b]||(h.files[b]={},u.loadModule(S,function(A){A&&(h.files[b]=A,!A.snippets&&A.snippetText&&(A.snippets=h.parseSnippetFile(A.snippetText)),h.register(A.snippets||[],A.scope),A.includeScopes&&(h.snippetMap[A.scope].includeScopes=A.includeScopes,A.includeScopes.forEach(function(C){x("ace/mode/"+C)})))}))},T=function(b){var S=b.editor,A=S.completer&&S.completer.activated;if(b.command.name==="backspace")A&&!f.getCompletionPrefix(S)&&S.completer.detach();else if(b.command.name==="insertstring"){var C=f.getCompletionPrefix(S);if(C&&!A){var R=p.for(S);R.autoInsert=!1,R.showPopup(S)}}},k=e("../editor").Editor;e("../config").defineOptions(k.prototype,"editor",{enableBasicAutocompletion:{set:function(b){b?(this.completers||(this.completers=Array.isArray(b)?b:d),this.commands.addCommand(p.startCommand)):this.commands.removeCommand(p.startCommand)},value:!1},enableLiveAutocompletion:{set:function(b){b?(this.completers||(this.completers=Array.isArray(b)?b:d),this.commands.on("afterExec",T)):this.commands.removeListener("afterExec",T)},value:!1},enableSnippets:{set:function(b){b?(this.commands.addCommand(v),this.on("changeMode",y),y(null,this)):(this.commands.removeCommand(v),this.off("changeMode",y))},value:!1}})}),function(){ace.require(["ace/ext/language_tools"],function(e){s&&(s.exports=e)})}()})(extLanguage_tools);const keyBindings={evaluate:{win:"Shift-Enter",mac:"Shift-Enter"},navigate:{win:"Ctrl-B",mac:"Command-B"},refactor:{win:"Ctrl-M",mac:"Command-M"},highlightScope:{win:"Ctrl-Shift-H",mac:"Command-Shift-H"},typeInferenceDisplay:{win:"Ctrl-Shift-M",mac:"Command-Shift-M"}},useHighlighting=(s,r,e,a)=>{const m=reactExports.useRef(s);m.current=s;const h=reactExports.useRef([]),p=reactExports.useCallback(()=>{setTimeout(()=>{if(!a.current)return;const n=a.current.editor,t=n.session,o=t.getValue(),l=m.current.sourceChapter,d=n.getCursorPosition();if(!t||!t.bgTokenizer)return;h.current.forEach(x=>{t.removeMarker(x)});const v=distExports.getAllOccurrencesInScope(o,distExports.createContext(l),{line:d.row+1,column:d.column}).map(x=>new aceExports.Range(x.start.line-1,x.start.column,x.end.line-1,x.end.column)),y="ace_variable_highlighting";h.current=v.map(x=>t.addMarker(x,y,"text"))},10)},[a]),u=reactExports.useCallback(()=>{if(!a.current)return;const n=a.current.editor,t=n.getValue(),o=m.current.sourceChapter,l=n.getCursorPosition(),d=distExports.getScope(t,distExports.createContext(o),{line:l.row+1,column:l.column});d.length!==0&&d.forEach(v=>{h.current.push(n.session.addMarker(new aceExports.Range(v.start.line-1,v.start.column,v.end.line-1,v.end.column),"ace_selection","text"))})},[a]),{onChange:c,onCursorChange:f}=r;r.onChange=reactExports.useCallback((n,t)=>{p(),c&&c(n,t)},[p,c]),r.onCursorChange=reactExports.useCallback((n,t)=>{p(),f&&f(n,t)},[p,f]),e.highlightScope=u},useNavigation=(s,r,e,a)=>{const m=reactExports.useRef(s);m.current=s;const h=reactExports.useCallback(()=>{const p=a.current.editor,u=p.selection.getCursor(),c=p.session.getTokenAt(u.row,u.column),{sourceChapter:f,handleDeclarationNavigate:n}=m.current;n(p.getCursorPosition());const t=p.selection.getCursor();if(t.row!==u.row||t.column!==u.column||distExports.hasDeclaration(p.getValue(),distExports.createContext(f),{line:t.row+1,column:t.column}))return;const o=Links.sourceDocs,l=m.current.sourceVariant===types$3.Variant.DEFAULT?"":`_${m.current.sourceVariant}`,d=m.current.externalLibraryName===void 0?"NONE":m.current.externalLibraryName,v=m.current.externalLibraryName==="ALL"?"External%20libraries":d;Documentation.externalLibraries[d].some(x=>x.caption===(c&&c.value))?c!==null&&(/\bsupport.function\b/.test(c.type)||/\bbuiltinconsts\b/.test(c.type))&&window.open(`${o}${v}/global.html#${c.value}`):c!==null&&(/\bsupport.function\b/.test(c.type)||/\bbuiltinconsts\b/.test(c.type))&&window.open(`${o}source_${f}${l}/global.html#${c.value}`),c!==null&&/\bstorage.type\b/.test(c.type)&&window.open(`${o}source_${f}.pdf`)},[a]);e.navigate=h},useRefactor=(s,r,e,a)=>{const{sourceChapter:m}=s,h=reactExports.useCallback(()=>{const p=a.current.editor;if(!p)return;const u=p.getValue(),c=p.getCursorPosition(),f=distExports.getAllOccurrencesInScope(u,distExports.createContext(m),{line:c.row+1,column:c.column}),n=p.getSelection();f.map(o=>new aceExports.Range(o.start.line-1,o.start.column,o.end.line-1,o.end.column)).forEach(o=>n.addRange(o))},[a,m]);e.refactor=h};var sharedbAce$1={};/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var extendStatics=function(s,r){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var m in a)a.hasOwnProperty(m)&&(e[m]=a[m])},extendStatics(s,r)};function __extends(s,r){extendStatics(s,r);function e(){this.constructor=s}s.prototype=r===null?Object.create(r):(e.prototype=r.prototype,new e)}function __values(s){var r=typeof Symbol=="function"&&s[Symbol.iterator],e=0;return r?r.call(s):{next:function(){return s&&e>=s.length&&(s=void 0),{value:s&&s[e++],done:!s}}}}function __read(s,r){var e=typeof Symbol=="function"&&s[Symbol.iterator];if(!e)return s;var a=e.call(s),m,h=[],p;try{for(;(r===void 0||r-- >0)&&!(m=a.next()).done;)h.push(m.value)}catch(u){p={error:u}}finally{try{m&&!m.done&&(e=a.return)&&e.call(a)}finally{if(p)throw p.error}}return h}function __spread(){for(var s=[],r=0;r<arguments.length;r++)s=s.concat(__read(arguments[r]));return s}var Event=function(){function s(r,e){this.target=e,this.type=r}return s}(),ErrorEvent=function(s){__extends(r,s);function r(e,a){var m=s.call(this,"error",a)||this;return m.message=e.message,m.error=e,m}return r}(Event),CloseEvent=function(s){__extends(r,s);function r(e,a,m){e===void 0&&(e=1e3),a===void 0&&(a="");var h=s.call(this,"close",m)||this;return h.wasClean=!0,h.code=e,h.reason=a,h}return r}(Event);/*!
 * Reconnecting WebSocket
 * by Pedro Ladaria <pedro.ladaria@gmail.com>
 * https://github.com/pladaria/reconnecting-websocket
 * License MIT
 */var getGlobalWebSocket=function(){if(typeof WebSocket<"u")return WebSocket},isWebSocket=function(s){return typeof s<"u"&&!!s&&s.CLOSING===2},DEFAULT={maxReconnectionDelay:1e4,minReconnectionDelay:1e3+Math.random()*4e3,minUptime:5e3,reconnectionDelayGrowFactor:1.3,connectionTimeout:4e3,maxRetries:1/0,maxEnqueuedMessages:1/0,startClosed:!1,debug:!1},ReconnectingWebSocket=function(){function s(r,e,a){var m=this;a===void 0&&(a={}),this._listeners={error:[],message:[],open:[],close:[]},this._retryCount=-1,this._shouldReconnect=!0,this._connectLock=!1,this._binaryType="blob",this._closeCalled=!1,this._messageQueue=[],this.onclose=null,this.onerror=null,this.onmessage=null,this.onopen=null,this._handleOpen=function(h){m._debug("open event");var p=m._options.minUptime,u=p===void 0?DEFAULT.minUptime:p;clearTimeout(m._connectTimeout),m._uptimeTimeout=setTimeout(function(){return m._acceptOpen()},u),m._ws.binaryType=m._binaryType,m._messageQueue.forEach(function(c){return m._ws.send(c)}),m._messageQueue=[],m.onopen&&m.onopen(h),m._listeners.open.forEach(function(c){return m._callEventListener(h,c)})},this._handleMessage=function(h){m._debug("message event"),m.onmessage&&m.onmessage(h),m._listeners.message.forEach(function(p){return m._callEventListener(h,p)})},this._handleError=function(h){m._debug("error event",h.message),m._disconnect(void 0,h.message==="TIMEOUT"?"timeout":void 0),m.onerror&&m.onerror(h),m._debug("exec error listeners"),m._listeners.error.forEach(function(p){return m._callEventListener(h,p)}),m._connect()},this._handleClose=function(h){m._debug("close event"),m._clearTimeouts(),m._shouldReconnect&&m._connect(),m.onclose&&m.onclose(h),m._listeners.close.forEach(function(p){return m._callEventListener(h,p)})},this._url=r,this._protocols=e,this._options=a,this._options.startClosed&&(this._shouldReconnect=!1),this._connect()}return Object.defineProperty(s,"CONNECTING",{get:function(){return 0},enumerable:!0,configurable:!0}),Object.defineProperty(s,"OPEN",{get:function(){return 1},enumerable:!0,configurable:!0}),Object.defineProperty(s,"CLOSING",{get:function(){return 2},enumerable:!0,configurable:!0}),Object.defineProperty(s,"CLOSED",{get:function(){return 3},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"CONNECTING",{get:function(){return s.CONNECTING},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"OPEN",{get:function(){return s.OPEN},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"CLOSING",{get:function(){return s.CLOSING},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"CLOSED",{get:function(){return s.CLOSED},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"binaryType",{get:function(){return this._ws?this._ws.binaryType:this._binaryType},set:function(r){this._binaryType=r,this._ws&&(this._ws.binaryType=r)},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"retryCount",{get:function(){return Math.max(this._retryCount,0)},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"bufferedAmount",{get:function(){var r=this._messageQueue.reduce(function(e,a){return typeof a=="string"?e+=a.length:a instanceof Blob?e+=a.size:e+=a.byteLength,e},0);return r+(this._ws?this._ws.bufferedAmount:0)},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"extensions",{get:function(){return this._ws?this._ws.extensions:""},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"protocol",{get:function(){return this._ws?this._ws.protocol:""},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"readyState",{get:function(){return this._ws?this._ws.readyState:this._options.startClosed?s.CLOSED:s.CONNECTING},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"url",{get:function(){return this._ws?this._ws.url:""},enumerable:!0,configurable:!0}),s.prototype.close=function(r,e){if(r===void 0&&(r=1e3),this._closeCalled=!0,this._shouldReconnect=!1,this._clearTimeouts(),!this._ws){this._debug("close enqueued: no ws instance");return}if(this._ws.readyState===this.CLOSED){this._debug("close: already closed");return}this._ws.close(r,e)},s.prototype.reconnect=function(r,e){this._shouldReconnect=!0,this._closeCalled=!1,this._retryCount=-1,!this._ws||this._ws.readyState===this.CLOSED?this._connect():(this._disconnect(r,e),this._connect())},s.prototype.send=function(r){if(this._ws&&this._ws.readyState===this.OPEN)this._debug("send",r),this._ws.send(r);else{var e=this._options.maxEnqueuedMessages,a=e===void 0?DEFAULT.maxEnqueuedMessages:e;this._messageQueue.length<a&&(this._debug("enqueue",r),this._messageQueue.push(r))}},s.prototype.addEventListener=function(r,e){this._listeners[r]&&this._listeners[r].push(e)},s.prototype.dispatchEvent=function(r){var e,a,m=this._listeners[r.type];if(m)try{for(var h=__values(m),p=h.next();!p.done;p=h.next()){var u=p.value;this._callEventListener(r,u)}}catch(c){e={error:c}}finally{try{p&&!p.done&&(a=h.return)&&a.call(h)}finally{if(e)throw e.error}}return!0},s.prototype.removeEventListener=function(r,e){this._listeners[r]&&(this._listeners[r]=this._listeners[r].filter(function(a){return a!==e}))},s.prototype._debug=function(){for(var r=[],e=0;e<arguments.length;e++)r[e]=arguments[e];this._options.debug&&console.log.apply(console,__spread(["RWS>"],r))},s.prototype._getNextDelay=function(){var r=this._options,e=r.reconnectionDelayGrowFactor,a=e===void 0?DEFAULT.reconnectionDelayGrowFactor:e,m=r.minReconnectionDelay,h=m===void 0?DEFAULT.minReconnectionDelay:m,p=r.maxReconnectionDelay,u=p===void 0?DEFAULT.maxReconnectionDelay:p,c=0;return this._retryCount>0&&(c=h*Math.pow(a,this._retryCount-1),c>u&&(c=u)),this._debug("next delay",c),c},s.prototype._wait=function(){var r=this;return new Promise(function(e){setTimeout(e,r._getNextDelay())})},s.prototype._getNextUrl=function(r){if(typeof r=="string")return Promise.resolve(r);if(typeof r=="function"){var e=r();if(typeof e=="string")return Promise.resolve(e);if(e.then)return e}throw Error("Invalid URL")},s.prototype._connect=function(){var r=this;if(!(this._connectLock||!this._shouldReconnect)){this._connectLock=!0;var e=this._options,a=e.maxRetries,m=a===void 0?DEFAULT.maxRetries:a,h=e.connectionTimeout,p=h===void 0?DEFAULT.connectionTimeout:h,u=e.WebSocket,c=u===void 0?getGlobalWebSocket():u;if(this._retryCount>=m){this._debug("max retries reached",this._retryCount,">=",m);return}if(this._retryCount++,this._debug("connect",this._retryCount),this._removeListeners(),!isWebSocket(c))throw Error("No valid WebSocket class provided");this._wait().then(function(){return r._getNextUrl(r._url)}).then(function(f){r._closeCalled||(r._debug("connect",{url:f,protocols:r._protocols}),r._ws=r._protocols?new c(f,r._protocols):new c(f),r._ws.binaryType=r._binaryType,r._connectLock=!1,r._addListeners(),r._connectTimeout=setTimeout(function(){return r._handleTimeout()},p))})}},s.prototype._handleTimeout=function(){this._debug("timeout event"),this._handleError(new ErrorEvent(Error("TIMEOUT"),this))},s.prototype._disconnect=function(r,e){if(r===void 0&&(r=1e3),this._clearTimeouts(),!!this._ws){this._removeListeners();try{this._ws.close(r,e),this._handleClose(new CloseEvent(r,e,this))}catch{}}},s.prototype._acceptOpen=function(){this._debug("accept open"),this._retryCount=0},s.prototype._callEventListener=function(r,e){"handleEvent"in e?e.handleEvent(r):e(r)},s.prototype._removeListeners=function(){this._ws&&(this._debug("removeListeners"),this._ws.removeEventListener("open",this._handleOpen),this._ws.removeEventListener("close",this._handleClose),this._ws.removeEventListener("message",this._handleMessage),this._ws.removeEventListener("error",this._handleError))},s.prototype._addListeners=function(){this._ws&&(this._debug("addListeners"),this._ws.addEventListener("open",this._handleOpen),this._ws.addEventListener("close",this._handleClose),this._ws.addEventListener("message",this._handleMessage),this._ws.addEventListener("error",this._handleError))},s.prototype._clearTimeouts=function(){clearTimeout(this._connectTimeout),clearTimeout(this._uptimeTimeout)},s}();const reconnectingWebsocketMjs=Object.freeze(Object.defineProperty({__proto__:null,default:ReconnectingWebSocket},Symbol.toStringTag,{value:"Module"})),require$$0=getAugmentedNamespace(reconnectingWebsocketMjs);var _createClass=function(){function s(r,e){for(var a=0;a<e.length;a++){var m=e[a];m.enumerable=m.enumerable||!1,m.configurable=!0,"value"in m&&(m.writable=!0),Object.defineProperty(r,m.key,m)}}return function(r,e,a){return e&&s(r.prototype,e),a&&s(r,a),r}}();function _classCallCheck(s,r){if(!(s instanceof r))throw new TypeError("Cannot call a class as a function")}var DEFAULT_VALUES={emitDelay:10,strictMode:!1},EventEmitter$1=function(){function s(){var r=arguments.length<=0||arguments[0]===void 0?DEFAULT_VALUES:arguments[0];_classCallCheck(this,s);var e=void 0,a=void 0;r.hasOwnProperty("emitDelay")?e=r.emitDelay:e=DEFAULT_VALUES.emitDelay,this._emitDelay=e,r.hasOwnProperty("strictMode")?a=r.strictMode:a=DEFAULT_VALUES.strictMode,this._strictMode=a,this._listeners={},this.events=[]}return _createClass(s,[{key:"_addListenner",value:function(e,a,m){if(typeof a!="function")throw TypeError("listener must be a function");this.events.indexOf(e)===-1?(this._listeners[e]=[{once:m,fn:a}],this.events.push(e)):this._listeners[e].push({once:m,fn:a})}},{key:"on",value:function(e,a){this._addListenner(e,a,!1)}},{key:"once",value:function(e,a){this._addListenner(e,a,!0)}},{key:"off",value:function(e,a){var m=this,h=this.events.indexOf(e),p=e&&h!==-1;p&&(a?function(){var u=[],c=m._listeners[e];c.forEach(function(f,n){f.fn===a&&u.unshift(n)}),u.forEach(function(f){c.splice(f,1)}),c.length||(m.events.splice(h,1),delete m._listeners[e])}():(delete this._listeners[e],this.events.splice(h,1)))}},{key:"_applyEvents",value:function(e,a){var m=this._listeners[e];if(!m||!m.length){if(this._strictMode)throw"No listeners specified for event: "+e;return}var h=[];m.forEach(function(p,u){p.fn.apply(null,a),p.once&&h.unshift(u)}),h.forEach(function(p){m.splice(p,1)})}},{key:"emit",value:function(e){for(var a=this,m=arguments.length,h=Array(m>1?m-1:0),p=1;p<m;p++)h[p-1]=arguments[p];this._emitDelay?setTimeout(function(){a._applyEvents.call(a,e,h)},this._emitDelay):this._applyEvents(e,h)}},{key:"emitSync",value:function(e){for(var a=arguments.length,m=Array(a>1?a-1:0),h=1;h<a;h++)m[h-1]=arguments[h];this._applyEvents(e,m)}},{key:"destroy",value:function(){this._listeners={},this.events=[]}}]),s}(),eventEmitterEs6=EventEmitter$1,client={},emitter$6={},EventEmitter=eventsExports.EventEmitter;emitter$6.EventEmitter=EventEmitter;emitter$6.mixin=mixin;function mixin(s){for(var r in EventEmitter.prototype)s.prototype[r]=EventEmitter.prototype[r]}var SUPPORTED_METHODS=["info","warn","error"];function Logger$1(){var s={};SUPPORTED_METHODS.forEach(function(r){s[r]=console[r].bind(console)}),this.setMethods(s)}var logger$3=Logger$1;Logger$1.prototype.setMethods=function(s){s=s||{};var r=this;SUPPORTED_METHODS.forEach(function(e){typeof s[e]=="function"&&(r[e]=s[e])})};var Logger=logger$3,logger$2=new Logger,logger_1=logger$2;function ShareDBError$3(s,r){this.code=s,this.message=r||"",Error.captureStackTrace?Error.captureStackTrace(this,ShareDBError$3):this.stack=new Error().stack}ShareDBError$3.prototype=Object.create(Error.prototype);ShareDBError$3.prototype.constructor=ShareDBError$3;ShareDBError$3.prototype.name="ShareDBError";ShareDBError$3.CODES={ERR_APPLY_OP_VERSION_DOES_NOT_MATCH_SNAPSHOT:"ERR_APPLY_OP_VERSION_DOES_NOT_MATCH_SNAPSHOT",ERR_APPLY_SNAPSHOT_NOT_PROVIDED:"ERR_APPLY_SNAPSHOT_NOT_PROVIDED",ERR_CLIENT_ID_BADLY_FORMED:"ERR_CLIENT_ID_BADLY_FORMED",ERR_CONNECTION_SEQ_INTEGER_OVERFLOW:"ERR_CONNECTION_SEQ_INTEGER_OVERFLOW",ERR_CONNECTION_STATE_TRANSITION_INVALID:"ERR_CONNECTION_STATE_TRANSITION_INVALID",ERR_DATABASE_ADAPTER_NOT_FOUND:"ERR_DATABASE_ADAPTER_NOT_FOUND",ERR_DATABASE_DOES_NOT_SUPPORT_SUBSCRIBE:"ERR_DATABASE_DOES_NOT_SUPPORT_SUBSCRIBE",ERR_DATABASE_METHOD_NOT_IMPLEMENTED:"ERR_DATABASE_METHOD_NOT_IMPLEMENTED",ERR_DEFAULT_TYPE_MISMATCH:"ERR_DEFAULT_TYPE_MISMATCH",ERR_DOC_MISSING_VERSION:"ERR_DOC_MISSING_VERSION",ERR_DOC_ALREADY_CREATED:"ERR_DOC_ALREADY_CREATED",ERR_DOC_DOES_NOT_EXIST:"ERR_DOC_DOES_NOT_EXIST",ERR_DOC_TYPE_NOT_RECOGNIZED:"ERR_DOC_TYPE_NOT_RECOGNIZED",ERR_DOC_WAS_DELETED:"ERR_DOC_WAS_DELETED",ERR_INFLIGHT_OP_MISSING:"ERR_INFLIGHT_OP_MISSING",ERR_INGESTED_SNAPSHOT_HAS_NO_VERSION:"ERR_INGESTED_SNAPSHOT_HAS_NO_VERSION",ERR_MAX_SUBMIT_RETRIES_EXCEEDED:"ERR_MAX_SUBMIT_RETRIES_EXCEEDED",ERR_MESSAGE_BADLY_FORMED:"ERR_MESSAGE_BADLY_FORMED",ERR_MILESTONE_ARGUMENT_INVALID:"ERR_MILESTONE_ARGUMENT_INVALID",ERR_OP_ALREADY_SUBMITTED:"ERR_OP_ALREADY_SUBMITTED",ERR_OP_NOT_ALLOWED_IN_PROJECTION:"ERR_OP_NOT_ALLOWED_IN_PROJECTION",ERR_OP_SUBMIT_REJECTED:"ERR_OP_SUBMIT_REJECTED",ERR_OP_VERSION_MISMATCH_AFTER_TRANSFORM:"ERR_OP_VERSION_MISMATCH_AFTER_TRANSFORM",ERR_OP_VERSION_MISMATCH_DURING_TRANSFORM:"ERR_OP_VERSION_MISMATCH_DURING_TRANSFORM",ERR_OP_VERSION_NEWER_THAN_CURRENT_SNAPSHOT:"ERR_OP_VERSION_NEWER_THAN_CURRENT_SNAPSHOT",ERR_OT_LEGACY_JSON0_OP_CANNOT_BE_NORMALIZED:"ERR_OT_LEGACY_JSON0_OP_CANNOT_BE_NORMALIZED",ERR_OT_OP_BADLY_FORMED:"ERR_OT_OP_BADLY_FORMED",ERR_OT_OP_NOT_APPLIED:"ERR_OT_OP_NOT_APPLIED",ERR_OT_OP_NOT_PROVIDED:"ERR_OT_OP_NOT_PROVIDED",ERR_PRESENCE_TRANSFORM_FAILED:"ERR_PRESENCE_TRANSFORM_FAILED",ERR_PROTOCOL_VERSION_NOT_SUPPORTED:"ERR_PROTOCOL_VERSION_NOT_SUPPORTED",ERR_QUERY_EMITTER_LISTENER_NOT_ASSIGNED:"ERR_QUERY_EMITTER_LISTENER_NOT_ASSIGNED",ERR_SNAPSHOT_READ_SILENT_REJECTION:"ERR_SNAPSHOT_READ_SILENT_REJECTION",ERR_SNAPSHOT_READS_REJECTED:"ERR_SNAPSHOT_READS_REJECTED",ERR_SUBMIT_TRANSFORM_OPS_NOT_FOUND:"ERR_SUBMIT_TRANSFORM_OPS_NOT_FOUND",ERR_TYPE_CANNOT_BE_PROJECTED:"ERR_TYPE_CANNOT_BE_PROJECTED",ERR_TYPE_DOES_NOT_SUPPORT_PRESENCE:"ERR_TYPE_DOES_NOT_SUPPORT_PRESENCE",ERR_UNKNOWN_ERROR:"ERR_UNKNOWN_ERROR"};var error=ShareDBError$3,types$2={},bootstrapTransform_1=bootstrapTransform;function bootstrapTransform(s,r,e,a){var m=function(p,u,c,f){r(c,p,u,"left"),r(f,u,p,"right")},h=s.transformX=function(p,u){e(p),e(u);for(var c=[],f=0;f<u.length;f++){for(var n=u[f],t=[],o=0;o<p.length;){var l=[];if(m(p[o],n,t,l),o++,l.length===1)n=l[0];else if(l.length===0){for(var d=o;d<p.length;d++)a(t,p[d]);n=null;break}else{for(var v=h(p.slice(o),l),y=0;y<v[0].length;y++)a(t,v[0][y]);for(var x=0;x<v[1].length;x++)a(c,v[1][x]);n=null;break}}n!=null&&a(c,n),p=t}return[p,c]};s.transform=function(p,u,c){if(!(c==="left"||c==="right"))throw new Error("type must be 'left' or 'right'");return u.length===0?p:p.length===1&&u.length===1?r([],p[0],u[0],c):c==="left"?h(p,u)[0]:h(u,p)[1]}}var text0={exports:{}},text$1=text0.exports={name:"text0",uri:"http://sharejs.org/types/textv0",create:function(s){if(s!=null&&typeof s!="string")throw new Error("Initial data must be a string");return s||""}},strInject=function(s,r,e){return s.slice(0,r)+e+s.slice(r)},checkValidComponent=function(s){if(typeof s.p!="number")throw new Error("component missing position field");if(typeof s.i=="string"==(typeof s.d=="string"))throw new Error("component needs an i or d field");if(s.p<0)throw new Error("position cannot be negative")},checkValidOp=function(s){for(var r=0;r<s.length;r++)checkValidComponent(s[r])};text$1.apply=function(s,r){var e;checkValidOp(r);for(var a=0;a<r.length;a++){var m=r[a];if(m.i!=null)s=strInject(s,m.p,m.i);else{if(e=s.slice(m.p,m.p+m.d.length),m.d!==e)throw new Error("Delete component '"+m.d+"' does not match deleted text '"+e+"'");s=s.slice(0,m.p)+s.slice(m.p+m.d.length)}}return s};var append=text$1._append=function(s,r){if(!(r.i===""||r.d===""))if(s.length===0)s.push(r);else{var e=s[s.length-1];e.i!=null&&r.i!=null&&e.p<=r.p&&r.p<=e.p+e.i.length?s[s.length-1]={i:strInject(e.i,r.p-e.p,r.i),p:e.p}:e.d!=null&&r.d!=null&&r.p<=e.p&&e.p<=r.p+r.d.length?s[s.length-1]={d:strInject(r.d,e.p-r.p,e.d),p:r.p}:s.push(r)}};text$1.compose=function(s,r){checkValidOp(s),checkValidOp(r);for(var e=s.slice(),a=0;a<r.length;a++)append(e,r[a]);return e};text$1.normalize=function(s){var r=[];(s.i!=null||s.p!=null)&&(s=[s]);for(var e=0;e<s.length;e++){var a=s[e];a.p==null&&(a.p=0),append(r,a)}return r};var transformPosition=function(s,r,e){return r.i!=null?r.p<s||r.p===s&&e?s+r.i.length:s:s<=r.p?s:s<=r.p+r.d.length?r.p:s-r.d.length};text$1.transformCursor=function(s,r,e){for(var a=e==="right",m=0;m<r.length;m++)s=transformPosition(s,r[m],a);return s};var transformComponent=text$1._tc=function(s,r,e,a){if(checkValidComponent(r),checkValidComponent(e),r.i!=null)append(s,{i:r.i,p:transformPosition(r.p,e,a==="right")});else if(e.i!=null){var m=r.d;r.p<e.p&&(append(s,{d:m.slice(0,e.p-r.p),p:r.p}),m=m.slice(e.p-r.p)),m!==""&&append(s,{d:m,p:r.p+e.i.length})}else if(r.p>=e.p+e.d.length)append(s,{d:r.d,p:r.p-e.d.length});else if(r.p+r.d.length<=e.p)append(s,r);else{var h={d:"",p:r.p};r.p<e.p&&(h.d=r.d.slice(0,e.p-r.p)),r.p+r.d.length>e.p+e.d.length&&(h.d+=r.d.slice(e.p+e.d.length-r.p));var p=Math.max(r.p,e.p),u=Math.min(r.p+r.d.length,e.p+e.d.length),c=r.d.slice(p-r.p,u-r.p),f=e.d.slice(p-e.p,u-e.p);if(c!==f)throw new Error("Delete ops delete different text in the same region of the document");h.d!==""&&(h.p=transformPosition(h.p,e),append(s,h))}return s},invertComponent=function(s){return s.i!=null?{d:s.i,p:s.p}:{i:s.d,p:s.p}};text$1.invert=function(s){s=s.slice().reverse();for(var r=0;r<s.length;r++)s[r]=invertComponent(s[r]);return s};bootstrapTransform_1(text$1,transformComponent,checkValidOp,append);var text0Exports=text0.exports,isArray$1=function(s){return Object.prototype.toString.call(s)=="[object Array]"},isObject=function(s){return!!s&&s.constructor===Object},clone=function(s){return JSON.parse(JSON.stringify(s))},json={name:"json0",uri:"http://sharejs.org/types/JSONv0"},subtypes={};json.registerSubtype=function(s){subtypes[s.name]=s};json.create=function(s){return s===void 0?null:clone(s)};json.invertComponent=function(s){var r={p:s.p};return s.t&&subtypes[s.t]&&(r.t=s.t,r.o=subtypes[s.t].invert(s.o)),s.si!==void 0&&(r.sd=s.si),s.sd!==void 0&&(r.si=s.sd),s.oi!==void 0&&(r.od=s.oi),s.od!==void 0&&(r.oi=s.od),s.li!==void 0&&(r.ld=s.li),s.ld!==void 0&&(r.li=s.ld),s.na!==void 0&&(r.na=-s.na),s.lm!==void 0&&(r.lm=s.p[s.p.length-1],r.p=s.p.slice(0,s.p.length-1).concat([s.lm])),r};json.invert=function(s){for(var r=s.slice().reverse(),e=[],a=0;a<r.length;a++)e.push(json.invertComponent(r[a]));return e};json.checkValidOp=function(s){for(var r=0;r<s.length;r++)if(!isArray$1(s[r].p))throw new Error("Missing path")};json.checkList=function(s){if(!isArray$1(s))throw new Error("Referenced element not a list")};json.checkObj=function(s){if(!isObject(s))throw new Error("Referenced element not an object (it was "+JSON.stringify(s)+")")};function convertFromText(s){s.t="text0";var r={p:s.p.pop()};s.si!=null&&(r.i=s.si),s.sd!=null&&(r.d=s.sd),s.o=[r]}function convertToText(s){s.p.push(s.o[0].p),s.o[0].i!=null&&(s.si=s.o[0].i),s.o[0].d!=null&&(s.sd=s.o[0].d),delete s.t,delete s.o}json.apply=function(s,r){json.checkValidOp(r),r=clone(r);for(var e={data:s},a=0;a<r.length;a++){var m=r[a];(m.si!=null||m.sd!=null)&&convertFromText(m);for(var h=null,p=e,u="data",c=0;c<m.p.length;c++){var f=m.p[c];if(h=p,p=p[u],u=f,h==null)throw new Error("Path invalid")}if(m.t&&m.o!==void 0&&subtypes[m.t])p[u]=subtypes[m.t].apply(p[u],m.o);else if(m.na!==void 0){if(typeof p[u]!="number")throw new Error("Referenced element not a number");p[u]+=m.na}else if(m.li!==void 0&&m.ld!==void 0)json.checkList(p),p[u]=m.li;else if(m.li!==void 0)json.checkList(p),p.splice(u,0,m.li);else if(m.ld!==void 0)json.checkList(p),p.splice(u,1);else if(m.lm!==void 0){if(json.checkList(p),m.lm!=u){var n=p[u];p.splice(u,1),p.splice(m.lm,0,n)}}else if(m.oi!==void 0)json.checkObj(p),p[u]=m.oi;else if(m.od!==void 0)json.checkObj(p),delete p[u];else throw new Error("invalid / missing instruction in op")}return e.data};json.shatter=function(s){for(var r=[],e=0;e<s.length;e++)r.push([s[e]]);return r};json.incrementalApply=function(s,r,e){for(var a=0;a<r.length;a++){var m=[r[a]];s=json.apply(s,m),e(m,s)}return s};var pathMatches=json.pathMatches=function(s,r,e){if(s.length!=r.length)return!1;for(var a=0;a<s.length;a++)if(s[a]!==r[a]&&(!e||a!==s.length-1))return!1;return!0};json.append=function(s,r){if(r=clone(r),s.length===0){s.push(r);return}var e=s[s.length-1];if((r.si!=null||r.sd!=null)&&(e.si!=null||e.sd!=null)&&(convertFromText(r),convertFromText(e)),pathMatches(r.p,e.p))if(r.t&&e.t&&r.t===e.t&&subtypes[r.t]){if(e.o=subtypes[r.t].compose(e.o,r.o),r.si!=null||r.sd!=null){for(var a=r.p,m=0;m<e.o.length-1;m++)r.o=[e.o.pop()],r.p=a.slice(),convertToText(r),s.push(r);convertToText(e)}}else e.na!=null&&r.na!=null?s[s.length-1]={p:e.p,na:e.na+r.na}:e.li!==void 0&&r.li===void 0&&r.ld===e.li?e.ld!==void 0?delete e.li:s.pop():e.od!==void 0&&e.oi===void 0&&r.oi!==void 0&&r.od===void 0?e.oi=r.oi:e.oi!==void 0&&r.od!==void 0?r.oi!==void 0?e.oi=r.oi:e.od!==void 0?delete e.oi:s.pop():r.lm!==void 0&&r.p[r.p.length-1]===r.lm||s.push(r);else(r.si!=null||r.sd!=null)&&(e.si!=null||e.sd!=null)&&(convertToText(r),convertToText(e)),s.push(r)};json.compose=function(s,r){json.checkValidOp(s),json.checkValidOp(r);for(var e=clone(s),a=0;a<r.length;a++)json.append(e,r[a]);return e};json.normalize=function(s){var r=[];s=isArray$1(s)?s:[s];for(var e=0;e<s.length;e++){var a=s[e];a.p==null&&(a.p=[]),json.append(r,a)}return r};json.commonLengthForOps=function(s,r){var e=s.p.length,a=r.p.length;if((s.na!=null||s.t)&&e++,(r.na!=null||r.t)&&a++,e===0)return-1;if(a===0)return null;e--,a--;for(var m=0;m<e;m++){var h=s.p[m];if(m>=a||h!==r.p[m])return null}return e};json.canOpAffectPath=function(s,r){return json.commonLengthForOps({p:r},s)!=null};json.transformComponent=function(s,r,e,a){r=clone(r);var m=json.commonLengthForOps(e,r),h=json.commonLengthForOps(r,e),p=r.p.length,u=e.p.length;if((r.na!=null||r.t)&&p++,(e.na!=null||e.t)&&u++,h!=null&&u>p&&r.p[h]==e.p[h]){if(r.ld!==void 0){var c=clone(e);c.p=c.p.slice(p),r.ld=json.apply(clone(r.ld),[c])}else if(r.od!==void 0){var c=clone(e);c.p=c.p.slice(p),r.od=json.apply(clone(r.od),[c])}}if(m!=null){var f=p==u,c=e;if((r.si!=null||r.sd!=null)&&(e.si!=null||e.sd!=null)&&(convertFromText(r),c=clone(e),convertFromText(c)),c.t&&subtypes[c.t]){if(r.t&&r.t===c.t){var n=subtypes[r.t].transform(r.o,c.o,a);if(r.si!=null||r.sd!=null)for(var t=r.p,o=0;o<n.length;o++)r.o=[n[o]],r.p=t.slice(),convertToText(r),json.append(s,r);else(!isArray$1(n)||n.length>0)&&(r.o=n,json.append(s,r));return s}}else if(e.na===void 0){if(e.li!==void 0&&e.ld!==void 0){if(e.p[m]===r.p[m])if(f){if(r.ld!==void 0)if(r.li!==void 0&&a==="left")r.ld=clone(e.li);else return s}else return s}else if(e.li!==void 0)r.li!==void 0&&r.ld===void 0&&f&&r.p[m]===e.p[m]?a==="right"&&r.p[m]++:e.p[m]<=r.p[m]&&r.p[m]++,r.lm!==void 0&&f&&e.p[m]<=r.lm&&r.lm++;else if(e.ld!==void 0){if(r.lm!==void 0&&f){if(e.p[m]===r.p[m])return s;var t=e.p[m],l=r.p[m],d=r.lm;(t<d||t===d&&l<d)&&r.lm--}if(e.p[m]<r.p[m])r.p[m]--;else if(e.p[m]===r.p[m]){if(u<p)return s;if(r.ld!==void 0)if(r.li!==void 0)delete r.ld;else return s}}else if(e.lm!==void 0)if(r.lm!==void 0&&p===u){var l=r.p[m],d=r.lm,v=e.p[m],y=e.lm;if(v!==y)if(l===v)if(a==="left")r.p[m]=y,l===d&&(r.lm=y);else return s;else l>v&&r.p[m]--,l>y?r.p[m]++:l===y&&v>y&&(r.p[m]++,l===d&&r.lm++),(d>v||d===v&&d>l)&&r.lm--,d>y?r.lm++:d===y&&(y>v&&d>l||y<v&&d<l?a==="right"&&r.lm++:d>l?r.lm++:d===v&&r.lm--)}else if(r.li!==void 0&&r.ld===void 0&&f){var l=e.p[m],d=e.lm;t=r.p[m],t>l&&r.p[m]--,t>d&&r.p[m]++}else{var l=e.p[m],d=e.lm;t=r.p[m],t===l?r.p[m]=d:(t>l&&r.p[m]--,(t>d||t===d&&l>d)&&r.p[m]++)}else if(e.oi!==void 0&&e.od!==void 0){if(r.p[m]===e.p[m])if(r.oi!==void 0&&f){if(a==="right")return s;r.od=e.oi}else return s}else if(e.oi!==void 0){if(r.oi!==void 0&&r.p[m]===e.p[m])if(a==="left")json.append(s,{p:r.p,od:e.oi});else return s}else if(e.od!==void 0&&r.p[m]==e.p[m]){if(!f)return s;if(r.oi!==void 0)delete r.od;else return s}}}return json.append(s,r),s};bootstrapTransform_1(json,json.transformComponent,json.checkValidOp,json.append);var text=text0Exports;json.registerSubtype(text);var json0=json,lib={type:json0};(function(s){s.defaultType=lib.type,s.map={},s.register=function(r){r.name&&(s.map[r.name]=r),r.uri&&(s.map[r.uri]=r)},s.register(s.defaultType)})(types$2);var util$9={};(function(s){s.doNothing=r;function r(){}s.hasKeys=function(e){for(var a in e)return!0;return!1},s.isInteger=Number.isInteger||function(e){return typeof e=="number"&&isFinite(e)&&Math.floor(e)===e},s.isValidVersion=function(e){return e===null?!0:s.isInteger(e)&&e>=0},s.isValidTimestamp=function(e){return s.isValidVersion(e)},s.MAX_SAFE_INTEGER=9007199254740991,s.dig=function(){for(var e=arguments[0],a=1;a<arguments.length;a++){var m=arguments[a];e=e[m]||(a===arguments.length-1?void 0:{})}return e},s.digOrCreate=function(){for(var e=arguments[0],a=arguments[arguments.length-1],m=1;m<arguments.length-1;m++){var h=arguments[m];e=e[h]||(e[h]=m===arguments.length-2?a():{})}return e},s.digAndRemove=function(){for(var e=arguments[0],a=[e],m=1;m<arguments.length-1;m++){var h=arguments[m];if(!e.hasOwnProperty(h))break;e=e[h],a.push(e)}for(var m=a.length-1;m>=0;m--){var p=a[m],h=arguments[m+1],u=p[h];(m===a.length-1||!s.hasKeys(u))&&delete p[h]}},s.supportsPresence=function(e){return e&&typeof e.transformPresence=="function"},s.callEach=function(e,a){var m=!1;return e.forEach(function(h){h&&(h(a),m=!0)}),m},s.truthy=function(e){return!!e},s.nextTick=function(e){if(typeof process<"u"&&process.nextTick)return process.nextTick.apply(null,arguments);for(var a=[],m=1;m<arguments.length;m++)a[m-1]=arguments[m];setTimeout(function(){e.apply(null,a)})}})(util$9);var isArray=Array.isArray,keyList=Object.keys,hasProp=Object.prototype.hasOwnProperty,fastDeepEqual=function s(r,e){if(r===e)return!0;if(r&&e&&typeof r=="object"&&typeof e=="object"){var a=isArray(r),m=isArray(e),h,p,u;if(a&&m){if(p=r.length,p!=e.length)return!1;for(h=p;h--!==0;)if(!s(r[h],e[h]))return!1;return!0}if(a!=m)return!1;var c=r instanceof Date,f=e instanceof Date;if(c!=f)return!1;if(c&&f)return r.getTime()==e.getTime();var n=r instanceof RegExp,t=e instanceof RegExp;if(n!=t)return!1;if(n&&t)return r.toString()==e.toString();var o=keyList(r);if(p=o.length,p!==keyList(e).length)return!1;for(h=p;h--!==0;)if(!hasProp.call(e,o[h]))return!1;for(h=p;h--!==0;)if(u=o[h],!s(r[u],e[u]))return!1;return!0}return r!==r&&e!==e},emitter$5=emitter$6,logger$1=logger_1,ShareDBError$2=error,types$1=types$2,util$8=util$9,deepEqual=fastDeepEqual,ERROR_CODE$2=ShareDBError$2.CODES,doc=Doc$1;function Doc$1(s,r,e){emitter$5.EventEmitter.call(this),this.connection=s,this.collection=r,this.id=e,this.version=null,this.type=null,this.data=void 0,this.inflightFetch=[],this.inflightSubscribe=null,this.pendingFetch=[],this.pendingSubscribe=[],this.subscribed=!1,this.wantSubscribe=!1,this.inflightOp=null,this.pendingOps=[],this.type=null,this.applyStack=null,this.preventCompose=!1,this.submitSource=!1,this.paused=!1}emitter$5.mixin(Doc$1);Doc$1.prototype.destroy=function(s){var r=this;r.whenNothingPending(function(){r.wantSubscribe?r.unsubscribe(function(e){if(e)return s?s(e):r.emit("error",e);r.connection._destroyDoc(r),r.emit("destroy"),s&&s()}):(r.connection._destroyDoc(r),r.emit("destroy"),s&&s())})};Doc$1.prototype._setType=function(s){if(typeof s=="string"&&(s=types$1.map[s]),s)this.type=s;else if(s===null)this.type=s,this.data=void 0;else{var r=new ShareDBError$2(ERROR_CODE$2.ERR_DOC_TYPE_NOT_RECOGNIZED,"Missing type "+s);return this.emit("error",r)}};Doc$1.prototype.ingestSnapshot=function(s,r){if(!s)return r&&r();if(typeof s.v!="number"){var e=new ShareDBError$2(ERROR_CODE$2.ERR_INGESTED_SNAPSHOT_HAS_NO_VERSION,"Missing version in ingested snapshot. "+this.collection+"."+this.id);return r?r(e):this.emit("error",e)}if(this.type||this.hasWritePending()){if(this.version==null){if(this.hasWritePending())return r&&this.once("no write pending",r);var e=new ShareDBError$2(ERROR_CODE$2.ERR_DOC_MISSING_VERSION,"Cannot ingest snapshot in doc with null version. "+this.collection+"."+this.id);return r?r(e):this.emit("error",e)}return s.v>this.version?this.fetch(r):r&&r()}if(this.version>s.v)return r&&r();this.version=s.v;var a=s.type===void 0?types$1.defaultType:s.type;this._setType(a),this.data=this.type&&this.type.deserialize?this.type.deserialize(s.data):s.data,this.emit("load"),r&&r()};Doc$1.prototype.whenNothingPending=function(s){var r=this;util$8.nextTick(function(){if(r.hasPending()){r.once("nothing pending",s);return}s()})};Doc$1.prototype.hasPending=function(){return!!(this.inflightOp||this.pendingOps.length||this.inflightFetch.length||this.inflightSubscribe||this.pendingFetch.length||this.pendingSubscribe.length)};Doc$1.prototype.hasWritePending=function(){return!!(this.inflightOp||this.pendingOps.length)};Doc$1.prototype._emitNothingPending=function(){this.hasWritePending()||(this.emit("no write pending"),!this.hasPending()&&this.emit("nothing pending"))};Doc$1.prototype._emitResponseError=function(s,r){if(s&&s.code===ERROR_CODE$2.ERR_SNAPSHOT_READ_SILENT_REJECTION){this.wantSubscribe=!1,r&&r(),this._emitNothingPending();return}if(r){r(s),this._emitNothingPending();return}this._emitNothingPending(),this.emit("error",s)};Doc$1.prototype._handleFetch=function(s,r){var e=this.pendingFetch;this.pendingFetch=[];var a=this.inflightFetch.shift();if(a&&e.push(a),e.length&&(a=function(m){util$8.callEach(e,m)}),s)return this._emitResponseError(s,a);this.ingestSnapshot(r,a),this._emitNothingPending()};Doc$1.prototype._handleSubscribe=function(s,r){var e=this.inflightSubscribe;this.inflightSubscribe=null;var a=this.pendingFetch;this.pendingFetch=[],e.callback&&a.push(e.callback);var m;if(a.length&&(m=function(h){util$8.callEach(a,h)}),s)return this._emitResponseError(s,m);this.subscribed=e.wantSubscribe,this.subscribed?this.ingestSnapshot(r,m):m&&m(),this._emitNothingPending(),this._flushSubscribe()};Doc$1.prototype._handleOp=function(s,r){if(s)return this.inflightOp?(s.code===ERROR_CODE$2.ERR_OP_SUBMIT_REJECTED&&(s=null),this._rollback(s)):this.emit("error",s);if(this.inflightOp&&r.src===this.inflightOp.src&&r.seq===this.inflightOp.seq){this._opAcknowledged(r);return}if(this.version==null||r.v>this.version){this.fetch();return}if(!(r.v<this.version)){if(this.inflightOp){var e=transformX(this.inflightOp,r);if(e)return this._hardRollback(e)}for(var a=0;a<this.pendingOps.length;a++){var e=transformX(this.pendingOps[a],r);if(e)return this._hardRollback(e)}this.version++;try{this._otApply(r,!1)}catch(m){return this._hardRollback(m)}}};Doc$1.prototype._onConnectionStateChanged=function(){this.connection.canSend?(this.flush(),this._resubscribe()):(this.inflightOp&&(this.pendingOps.unshift(this.inflightOp),this.inflightOp=null),this.subscribed=!1,this.inflightSubscribe&&(this.inflightSubscribe.wantSubscribe?(this.pendingSubscribe.unshift(this.inflightSubscribe),this.inflightSubscribe=null):this._handleSubscribe()),this.inflightFetch.length&&(this.pendingFetch=this.pendingFetch.concat(this.inflightFetch),this.inflightFetch.length=0))};Doc$1.prototype._resubscribe=function(){if(!this.pendingSubscribe.length&&this.wantSubscribe)return this.subscribe();var s=this.pendingSubscribe.some(function(r){return r.wantSubscribe});!s&&this.pendingFetch.length&&this.fetch(),this._flushSubscribe()};Doc$1.prototype.fetch=function(s){if(this.connection.canSend){var r=this.connection.sendFetch(this);pushActionCallback(this.inflightFetch,r,s);return}this.pendingFetch.push(s)};Doc$1.prototype.subscribe=function(s){var r=!0;this._queueSubscribe(r,s)};Doc$1.prototype.unsubscribe=function(s){var r=!1;this._queueSubscribe(r,s)};Doc$1.prototype._queueSubscribe=function(s,r){var e=this.pendingSubscribe[this.pendingSubscribe.length-1]||this.inflightSubscribe,a=e&&e.wantSubscribe===s;if(a){e.callback=combineCallbacks([e.callback,r]);return}this.pendingSubscribe.push({wantSubscribe:!!s,callback:r}),this._flushSubscribe()};Doc$1.prototype._flushSubscribe=function(){if(!(this.inflightSubscribe||!this.pendingSubscribe.length)){if(this.connection.canSend){this.inflightSubscribe=this.pendingSubscribe.shift(),this.wantSubscribe=this.inflightSubscribe.wantSubscribe,this.wantSubscribe?this.connection.sendSubscribe(this):(this.subscribed=!1,this.connection.sendUnsubscribe(this));return}if(!this.pendingSubscribe[0].wantSubscribe){this.inflightSubscribe=this.pendingSubscribe.shift();var s=this;util$8.nextTick(function(){s._handleSubscribe()})}}};function pushActionCallback(s,r,e){if(r){var a=s.pop();s.push(function(m){a&&a(m),e&&e(m)})}else s.push(e)}function combineCallbacks(s){return s=s.filter(util$8.truthy),s.length?function(r){util$8.callEach(s,r)}:null}Doc$1.prototype.flush=function(){!this.connection.canSend||this.inflightOp||!this.paused&&this.pendingOps.length&&this._sendOp()};function setNoOp(s){delete s.op,delete s.create,delete s.del}function transformX(s,r){if(s.del)return setNoOp(r);if(r.del)return new ShareDBError$2(ERROR_CODE$2.ERR_DOC_WAS_DELETED,"Document was deleted");if(r.create)return new ShareDBError$2(ERROR_CODE$2.ERR_DOC_ALREADY_CREATED,"Document already created");if("op"in r){if(s.create)return new ShareDBError$2(ERROR_CODE$2.ERR_DOC_ALREADY_CREATED,"Document already created");if(s.type.transformX){var e=s.type.transformX(s.op,r.op);s.op=e[0],r.op=e[1]}else{var a=s.type.transform(s.op,r.op,"left"),m=s.type.transform(r.op,s.op,"right");s.op=a,r.op=m}}}Doc$1.prototype._otApply=function(s,r){if("op"in s){if(!this.type)throw new ShareDBError$2(ERROR_CODE$2.ERR_DOC_DOES_NOT_EXIST,"Cannot apply op to uncreated document. "+this.collection+"."+this.id);if(this.emit("before op batch",s.op,r),!r&&this.type===types$1.defaultType&&s.op.length>1){this.applyStack||(this.applyStack=[]);for(var e=this.applyStack.length,a=0;a<s.op.length;a++){for(var m=s.op[a],h={op:[m]},p=e;p<this.applyStack.length;p++){var u=transformX(this.applyStack[p],h);if(u)return this._hardRollback(u)}this.emit("before op",h.op,r,s.src),this.data=this.type.apply(this.data,h.op),this.emit("op",h.op,r,s.src)}this.emit("op batch",s.op,r),this._popApplyStack(e);return}this.emit("before op",s.op,r,s.src),this.data=this.type.apply(this.data,s.op),this.emit("op",s.op,r,s.src),this.emit("op batch",s.op,r);return}if(s.create){this._setType(s.create.type),this.data=this.type.deserialize?this.type.createDeserialized?this.type.createDeserialized(s.create.data):this.type.deserialize(this.type.create(s.create.data)):this.type.create(s.create.data),this.emit("create",r);return}if(s.del){var c=this.data;this._setType(null),this.emit("del",c,r);return}};Doc$1.prototype._sendOp=function(){if(this.connection.canSend){var s=this.connection.id;this.inflightOp||(this.inflightOp=this.pendingOps.shift());var r=this.inflightOp;if(!r){var e=new ShareDBError$2(ERROR_CODE$2.ERR_INFLIGHT_OP_MISSING,"No op to send on call to _sendOp");return this.emit("error",e)}if(r.sentAt=Date.now(),r.retries=r.retries==null?0:r.retries+1,r.seq==null){if(this.connection.seq>=util$8.MAX_SAFE_INTEGER)return this.emit("error",new ShareDBError$2(ERROR_CODE$2.ERR_CONNECTION_SEQ_INTEGER_OVERFLOW,"Connection seq has exceeded the max safe integer, maybe from being open for too long"));r.seq=this.connection.seq++}this.connection.sendOp(this,r),r.src==null&&(r.src=s)}};Doc$1.prototype._submit=function(s,r,e){if(r||(r=!0),"op"in s){if(!this.type){var a=new ShareDBError$2(ERROR_CODE$2.ERR_DOC_DOES_NOT_EXIST,"Cannot submit op. Document has not been created. "+this.collection+"."+this.id);return e?e(a):this.emit("error",a)}this.type.normalize&&(s.op=this.type.normalize(s.op))}try{this._pushOp(s,r,e),this._otApply(s,r)}catch(h){return this._hardRollback(h)}var m=this;util$8.nextTick(function(){m.flush()})};Doc$1.prototype._pushOp=function(s,r,e){if(s.source=r,this.applyStack)this.applyStack.push(s);else{var a=this._tryCompose(s);if(a){a.callbacks.push(e);return}}s.type=this.type,s.callbacks=[e],this.pendingOps.push(s)};Doc$1.prototype._popApplyStack=function(s){if(s>0){this.applyStack.length=s;return}var r=this.applyStack[0];if(this.applyStack=null,!!r){var e=this.pendingOps.indexOf(r);if(e!==-1)for(var a=this.pendingOps.splice(e),e=0;e<a.length;e++){var r=a[e],m=this._tryCompose(r);m?m.callbacks=m.callbacks.concat(r.callbacks):this.pendingOps.push(r)}}};Doc$1.prototype._tryCompose=function(s){if(!this.preventCompose){var r=this.pendingOps[this.pendingOps.length-1];if(!(!r||r.sentAt)&&!(this.submitSource&&!deepEqual(s.source,r.source))){if(r.create&&"op"in s)return r.create.data=this.type.apply(r.create.data,s.op),r;if("op"in r&&"op"in s&&this.type.compose)return r.op=this.type.compose(r.op,s.op),r}}};Doc$1.prototype.submitOp=function(s,r,e){typeof r=="function"&&(e=r,r=null);var a={op:s},m=r&&r.source;this._submit(a,m,e)};Doc$1.prototype.create=function(s,r,e,a){if(typeof r=="function"?(a=r,e=null,r=null):typeof e=="function"&&(a=e,e=null),r||(r=types$1.defaultType.uri),this.type){var m=new ShareDBError$2(ERROR_CODE$2.ERR_DOC_ALREADY_CREATED,"Document already exists");return a?a(m):this.emit("error",m)}var h={create:{type:r,data:s}},p=e&&e.source;this._submit(h,p,a)};Doc$1.prototype.del=function(s,r){if(typeof s=="function"&&(r=s,s=null),!this.type){var e=new ShareDBError$2(ERROR_CODE$2.ERR_DOC_DOES_NOT_EXIST,"Document does not exist");return r?r(e):this.emit("error",e)}var a={del:!0},m=s&&s.source;this._submit(a,m,r)};Doc$1.prototype.pause=function(){this.paused=!0};Doc$1.prototype.resume=function(){this.paused=!1,this.flush()};Doc$1.prototype._opAcknowledged=function(s){if(this.inflightOp.create)this.version=s.v;else if(s.v!==this.version)return logger$1.warn("Invalid version from server. Expected: "+this.version+" Received: "+s.v,s),this.fetch();this.version++,this._clearInflightOp()};Doc$1.prototype._rollback=function(s){var r=this.inflightOp;if("op"in r&&r.type.invert){r.op=r.type.invert(r.op);for(var e=0;e<this.pendingOps.length;e++){var a=transformX(this.pendingOps[e],r);if(a)return this._hardRollback(a)}try{this._otApply(r,!1)}catch(m){return this._hardRollback(m)}this._clearInflightOp(s);return}this._hardRollback(s)};Doc$1.prototype._hardRollback=function(s){var r=[];this.inflightOp&&r.push(this.inflightOp),r=r.concat(this.pendingOps),this._setType(null),this.version=null,this.inflightOp=null,this.pendingOps=[];var e=this;this.fetch(function(){for(var a=!!r.length,m=0;m<r.length;m++)a=util$8.callEach(r[m].callbacks,s)&&a;if(s&&!a)return e.emit("error",s)})};Doc$1.prototype._clearInflightOp=function(s){var r=this.inflightOp;this.inflightOp=null;var e=util$8.callEach(r.callbacks,s);if(this.flush(),this._emitNothingPending(),s&&!e)return this.emit("error",s)};var emitter$4=emitter$6,util$7=util$9,query=Query$1;function Query$1(s,r,e,a,m,h,p){emitter$4.EventEmitter.call(this),this.action=s,this.connection=r,this.id=e,this.collection=a,this.query=m,this.results=null,h&&h.results&&(this.results=h.results,delete h.results),this.extra=void 0,this.options=h,this.callback=p,this.ready=!1,this.sent=!1}emitter$4.mixin(Query$1);Query$1.prototype.hasPending=function(){return!this.ready};Query$1.prototype.send=function(){if(this.connection.canSend){var s={a:this.action,id:this.id,c:this.collection,q:this.query};if(this.options&&(s.o=this.options),this.results){for(var r=[],e=0;e<this.results.length;e++){var a=this.results[e];r.push([a.id,a.version])}s.r=r}this.connection.send(s),this.sent=!0}};Query$1.prototype.destroy=function(s){this.connection.canSend&&this.action==="qs"&&this.connection.send({a:"qu",id:this.id}),this.connection._destroyQuery(this),s&&util$7.nextTick(s)};Query$1.prototype._onConnectionStateChanged=function(){this.connection.canSend&&!this.sent?this.send():this.sent=!1};Query$1.prototype._handleFetch=function(s,r,e){this.connection._destroyQuery(this),this._handleResponse(s,r,e)};Query$1.prototype._handleSubscribe=function(s,r,e){this._handleResponse(s,r,e)};Query$1.prototype._handleResponse=function(s,r,e){var a=this.callback;if(this.callback=null,s)return this._finishResponse(s,a);if(!r)return this._finishResponse(null,a);var m=this,h=1,p=function(n){if(n)return m._finishResponse(n,a);--h||m._finishResponse(null,a)};if(Array.isArray(r))h+=r.length,this.results=this._ingestSnapshots(r,p),this.extra=e;else for(var u in r){h++;var c=r[u],f=this.connection.get(c.c||this.collection,u);f.ingestSnapshot(c,p)}p()};Query$1.prototype._ingestSnapshots=function(s,r){for(var e=[],a=0;a<s.length;a++){var m=s[a],h=this.connection.get(m.c||this.collection,m.d);h.ingestSnapshot(m,r),e.push(h)}return e};Query$1.prototype._finishResponse=function(s,r){if(this.emit("ready"),this.ready=!0,s)return this.connection._destroyQuery(this),r?r(s):this.emit("error",s);r&&r(null,this.results,this.extra)};Query$1.prototype._handleError=function(s){this.emit("error",s)};Query$1.prototype._handleDiff=function(s){for(var r=0;r<s.length;r++){var e=s[r];e.type==="insert"&&(e.values=this._ingestSnapshots(e.values))}for(var r=0;r<s.length;r++){var e=s[r];switch(e.type){case"insert":var a=e.values;Array.prototype.splice.apply(this.results,[e.index,0].concat(a)),this.emit("insert",a,e.index);break;case"remove":var h=e.howMany||1,m=this.results.splice(e.index,h);this.emit("remove",m,e.index);break;case"move":var h=e.howMany||1,p=this.results.splice(e.from,h);Array.prototype.splice.apply(this.results,[e.to,0].concat(p)),this.emit("move",p,e.from,e.to);break}}this.emit("changed",this.results)};Query$1.prototype._handleExtra=function(s){this.extra=s,this.emit("extra",s)};var emitter$3=emitter$6,util$6=util$9,localPresence=LocalPresence$2;function LocalPresence$2(s,r){if(emitter$3.EventEmitter.call(this),!r||typeof r!="string")throw new Error("LocalPresence presenceId must be a string");this.presence=s,this.presenceId=r,this.connection=s.connection,this.presenceVersion=0,this.value=null,this._pendingMessages=[],this._callbacksByPresenceVersion={}}emitter$3.mixin(LocalPresence$2);LocalPresence$2.prototype.submit=function(s,r){this.value=s,this.send(r)};LocalPresence$2.prototype.send=function(s){var r=this._message();this._pendingMessages.push(r),this._callbacksByPresenceVersion[r.pv]=s,this._sendPending()};LocalPresence$2.prototype.destroy=function(s){var r=this;this.submit(null,function(e){if(e)return r._callbackOrEmit(e,s);delete r.presence.localPresences[r.presenceId],s&&s()})};LocalPresence$2.prototype._sendPending=function(){if(this.connection.canSend){var s=this;this._pendingMessages.forEach(function(r){s.connection.send(r)}),this._pendingMessages=[]}};LocalPresence$2.prototype._ack=function(s,r){var e=this._getCallback(r);this._callbackOrEmit(s,e)};LocalPresence$2.prototype._message=function(){return{a:"p",ch:this.presence.channel,id:this.presenceId,p:this.value,pv:this.presenceVersion++}};LocalPresence$2.prototype._getCallback=function(s){var r=this._callbacksByPresenceVersion[s];return delete this._callbacksByPresenceVersion[s],r};LocalPresence$2.prototype._callbackOrEmit=function(s,r){if(r)return util$6.nextTick(r,s);s&&this.emit("error",s)};var util$5=util$9,remotePresence=RemotePresence$2;function RemotePresence$2(s,r){this.presence=s,this.presenceId=r,this.connection=this.presence.connection,this.value=null,this.presenceVersion=0}RemotePresence$2.prototype.receiveUpdate=function(s){s.pv<this.presenceVersion||(this.value=s.p,this.presenceVersion=s.pv,this.presence._updateRemotePresence(this))};RemotePresence$2.prototype.destroy=function(s){delete this.presence._remotePresenceInstances[this.presenceId],delete this.presence.remotePresences[this.presenceId],s&&util$5.nextTick(s)};var async$1={exports:{}};async$1.exports;(function(s,r){(function(e,a){a(r)})(commonjsGlobal,function(e){function a(P,D){D=D|0;for(var N=Math.max(P.length-D,0),W=Array(N),q=0;q<N;q++)W[q]=P[D+q];return W}var m=function(P){var D=a(arguments,1);return function(){var N=a(arguments);return P.apply(null,D.concat(N))}},h=function(P){return function(){var D=a(arguments),N=D.pop();P.call(this,D,N)}};function p(P){var D=typeof P;return P!=null&&(D=="object"||D=="function")}var u=typeof setImmediate=="function"&&setImmediate,c=typeof process=="object"&&typeof process.nextTick=="function";function f(P){setTimeout(P,0)}function n(P){return function(D){var N=a(arguments,1);P(function(){D.apply(null,N)})}}var t;u?t=setImmediate:c?t=process.nextTick:t=f;var o=n(t);function l(P){return h(function(D,N){var W;try{W=P.apply(this,D)}catch(q){return N(q)}p(W)&&typeof W.then=="function"?W.then(function(q){d(N,null,q)},function(q){d(N,q.message?q:new Error(q))}):N(null,W)})}function d(P,D,N){try{P(D,N)}catch(W){o(v,W)}}function v(P){throw P}var y=typeof Symbol=="function";function x(P){return y&&P[Symbol.toStringTag]==="AsyncFunction"}function E(P){return x(P)?l(P):P}function T(P){return function(D){var N=a(arguments,1),W=h(function(q,G){var Z=this;return P(D,function(ne,oe){E(ne).apply(Z,q.concat(oe))},G)});return N.length?W.apply(this,N):W}}var k=typeof commonjsGlobal=="object"&&commonjsGlobal&&commonjsGlobal.Object===Object&&commonjsGlobal,b=typeof self=="object"&&self&&self.Object===Object&&self,S=k||b||Function("return this")(),A=S.Symbol,C=Object.prototype,R=C.hasOwnProperty,g=C.toString,w=A?A.toStringTag:void 0;function $(P){var D=R.call(P,w),N=P[w];try{P[w]=void 0;var W=!0}catch{}var q=g.call(P);return W&&(D?P[w]=N:delete P[w]),q}var L=Object.prototype,M=L.toString;function O(P){return M.call(P)}var I="[object Null]",B="[object Undefined]",H=A?A.toStringTag:void 0;function K(P){return P==null?P===void 0?B:I:H&&H in Object(P)?$(P):O(P)}var j="[object AsyncFunction]",Y="[object Function]",Q="[object GeneratorFunction]",z="[object Proxy]";function V(P){if(!p(P))return!1;var D=K(P);return D==Y||D==Q||D==j||D==z}var X=9007199254740991;function ie(P){return typeof P=="number"&&P>-1&&P%1==0&&P<=X}function se(P){return P!=null&&ie(P.length)&&!V(P)}var ee={};function re(){}function ae(P){return function(){if(P!==null){var D=P;P=null,D.apply(this,arguments)}}}var he=typeof Symbol=="function"&&Symbol.iterator,ye=function(P){return he&&P[he]&&P[he]()};function Ae(P,D){for(var N=-1,W=Array(P);++N<P;)W[N]=D(N);return W}function Ce(P){return P!=null&&typeof P=="object"}var _e="[object Arguments]";function Ne(P){return Ce(P)&&K(P)==_e}var Qe=Object.prototype,Ve=Qe.hasOwnProperty,bt=Qe.propertyIsEnumerable,Ht=Ne(function(){return arguments}())?Ne:function(P){return Ce(P)&&Ve.call(P,"callee")&&!bt.call(P,"callee")},J=Array.isArray;function ue(){return!1}var de=typeof e=="object"&&e&&!e.nodeType&&e,me=de&&!0&&s&&!s.nodeType&&s,we=me&&me.exports===de,ke=we?S.Buffer:void 0,xe=ke?ke.isBuffer:void 0,$e=xe||ue,Se=9007199254740991,ve=/^(?:0|[1-9]\d*)$/;function We(P,D){var N=typeof P;return D=D??Se,!!D&&(N=="number"||N!="symbol"&&ve.test(P))&&P>-1&&P%1==0&&P<D}var st="[object Arguments]",Tt="[object Array]",on="[object Boolean]",At="[object Date]",an="[object Error]",ln="[object Function]",Wn="[object Map]",at="[object Number]",cn="[object Object]",Kn="[object RegExp]",zn="[object Set]",Wt="[object String]",_t="[object WeakMap]",Kt="[object ArrayBuffer]",zt="[object DataView]",jt="[object Float32Array]",wt="[object Float64Array]",jn="[object Int8Array]",Un="[object Int16Array]",Vn="[object Int32Array]",Gn="[object Uint8Array]",qn="[object Uint8ClampedArray]",hn="[object Uint16Array]",Ut="[object Uint32Array]",be={};be[jt]=be[wt]=be[jn]=be[Un]=be[Vn]=be[Gn]=be[qn]=be[hn]=be[Ut]=!0,be[st]=be[Tt]=be[Kt]=be[on]=be[zt]=be[At]=be[an]=be[ln]=be[Wn]=be[at]=be[cn]=be[Kn]=be[zn]=be[Wt]=be[_t]=!1;function Yn(P){return Ce(P)&&ie(P.length)&&!!be[K(P)]}function Xn(P){return function(D){return P(D)}}var un=typeof e=="object"&&e&&!e.nodeType&&e,St=un&&!0&&s&&!s.nodeType&&s,Qn=St&&St.exports===un,Ge=Qn&&k.process,fn=function(){try{var P=St&&St.require&&St.require("util").types;return P||Ge&&Ge.binding&&Ge.binding("util")}catch{}}(),dn=fn&&fn.isTypedArray,Jn=dn?Xn(dn):Yn,Zn=Object.prototype,ei=Zn.hasOwnProperty;function lt(P,D){var N=J(P),W=!N&&Ht(P),q=!N&&!W&&$e(P),G=!N&&!W&&!q&&Jn(P),Z=N||W||q||G,ne=Z?Ae(P.length,String):[],oe=ne.length;for(var fe in P)(D||ei.call(P,fe))&&!(Z&&(fe=="length"||q&&(fe=="offset"||fe=="parent")||G&&(fe=="buffer"||fe=="byteLength"||fe=="byteOffset")||We(fe,oe)))&&ne.push(fe);return ne}var ti=Object.prototype;function ni(P){var D=P&&P.constructor,N=typeof D=="function"&&D.prototype||ti;return P===N}function ii(P,D){return function(N){return P(D(N))}}var ri=ii(Object.keys,Object),si=Object.prototype,Lt=si.hasOwnProperty;function oi(P){if(!ni(P))return ri(P);var D=[];for(var N in Object(P))Lt.call(P,N)&&N!="constructor"&&D.push(N);return D}function Vt(P){return se(P)?lt(P):oi(P)}function tt(P){var D=-1,N=P.length;return function(){return++D<N?{value:P[D],key:D}:null}}function ai(P){var D=-1;return function(){var W=P.next();return W.done?null:(D++,{value:W.value,key:D})}}function li(P){var D=Vt(P),N=-1,W=D.length;return function q(){var G=D[++N];return G==="__proto__"?q():N<W?{value:P[G],key:G}:null}}function ci(P){if(se(P))return tt(P);var D=ye(P);return D?ai(D):li(P)}function qe(P){return function(){if(P===null)throw new Error("Callback was already called.");var D=P;P=null,D.apply(this,arguments)}}function Mt(P){return function(D,N,W){if(W=ae(W||re),P<=0||!D)return W(null);var q=ci(D),G=!1,Z=0,ne=!1;function oe(le,ge){if(Z-=1,le)G=!0,W(le);else{if(ge===ee||G&&Z<=0)return G=!0,W(null);ne||fe()}}function fe(){for(ne=!0;Z<P&&!G;){var le=q();if(le===null){G=!0,Z<=0&&W(null);return}Z+=1,N(le.value,le.key,qe(oe))}ne=!1}fe()}}function ct(P,D,N,W){Mt(D)(P,E(N),W)}function Pe(P,D){return function(N,W,q){return P(N,D,W,q)}}function hi(P,D,N){N=ae(N||re);var W=0,q=0,G=P.length;G===0&&N(null);function Z(ne,oe){ne?N(ne):(++q===G||oe===ee)&&N(null)}for(;W<G;W++)D(P[W],W,qe(Z))}var Ct=Pe(ct,1/0),Je=function(P,D,N){var W=se(P)?hi:Ct;W(P,E(D),N)};function ht(P){return function(D,N,W){return P(Je,D,E(N),W)}}function gn(P,D,N,W){W=W||re,D=D||[];var q=[],G=0,Z=E(N);P(D,function(ne,oe,fe){var le=G++;Z(ne,function(ge,Te){q[le]=Te,fe(ge)})},function(ne){W(ne,q)})}var Ot=ht(gn),pn=T(Ot);function pt(P){return function(D,N,W,q){return P(Mt(N),D,E(W),q)}}var ut=pt(gn),Gt=Pe(ut,1),vn=T(Gt);function Et(P,D){for(var N=-1,W=P==null?0:P.length;++N<W&&D(P[N],N,P)!==!1;);return P}function Pt(P){return function(D,N,W){for(var q=-1,G=Object(D),Z=W(D),ne=Z.length;ne--;){var oe=Z[P?ne:++q];if(N(G[oe],oe,G)===!1)break}return D}}var vt=Pt();function xt(P,D){return P&&vt(P,D,Vt)}function ui(P,D,N,W){for(var q=P.length,G=N+(W?1:-1);W?G--:++G<q;)if(D(P[G],G,P))return G;return-1}function nt(P){return P!==P}function fi(P,D,N){for(var W=N-1,q=P.length;++W<q;)if(P[W]===D)return W;return-1}function It(P,D,N){return D===D?fi(P,D,N):ui(P,nt,N)}var qt=function(P,D,N){typeof D=="function"&&(N=D,D=null),N=ae(N||re);var W=Vt(P),q=W.length;if(!q)return N(null);D||(D=q);var G={},Z=0,ne=!1,oe=Object.create(null),fe=[],le=[],ge={};xt(P,function(Me,Oe){if(!J(Me)){Te(Oe,[Me]),le.push(Oe);return}var Be=Me.slice(0,Me.length-1),gt=Be.length;if(gt===0){Te(Oe,Me),le.push(Oe);return}ge[Oe]=gt,Et(Be,function(Bt){if(!P[Bt])throw new Error("async.auto task `"+Oe+"` has a non-existent dependency `"+Bt+"` in "+Be.join(", "));it(Bt,function(){gt--,gt===0&&Te(Oe,Me)})})}),Br(),He();function Te(Me,Oe){fe.push(function(){rt(Me,Oe)})}function He(){if(fe.length===0&&Z===0)return N(null,G);for(;fe.length&&Z<D;){var Me=fe.shift();Me()}}function it(Me,Oe){var Be=oe[Me];Be||(Be=oe[Me]=[]),Be.push(Oe)}function Xe(Me){var Oe=oe[Me]||[];Et(Oe,function(Be){Be()}),He()}function rt(Me,Oe){if(!ne){var Be=qe(function(Bt,$i){if(Z--,arguments.length>2&&($i=a(arguments,1)),Bt){var ki={};xt(G,function(Wr,Kr){ki[Kr]=Wr}),ki[Me]=$i,ne=!0,oe=Object.create(null),N(Bt,ki)}else G[Me]=$i,Xe(Me)});Z++;var gt=E(Oe[Oe.length-1]);Oe.length>1?gt(G,Be):gt(Be)}}function Br(){for(var Me,Oe=0;le.length;)Me=le.pop(),Oe++,Et(Hr(Me),function(Be){--ge[Be]===0&&le.push(Be)});if(Oe!==q)throw new Error("async.auto cannot execute tasks due to a recursive dependency")}function Hr(Me){var Oe=[];return xt(P,function(Be,gt){J(Be)&&It(Be,Me,0)>=0&&Oe.push(gt)}),Oe}};function mt(P,D){for(var N=-1,W=P==null?0:P.length,q=Array(W);++N<W;)q[N]=D(P[N],N,P);return q}var di="[object Symbol]";function ft(P){return typeof P=="symbol"||Ce(P)&&K(P)==di}var mn=1/0,yn=A?A.prototype:void 0,$t=yn?yn.toString:void 0;function Yt(P){if(typeof P=="string")return P;if(J(P))return mt(P,Yt)+"";if(ft(P))return $t?$t.call(P):"";var D=P+"";return D=="0"&&1/P==-mn?"-0":D}function Xt(P,D,N){var W=-1,q=P.length;D<0&&(D=-D>q?0:q+D),N=N>q?q:N,N<0&&(N+=q),q=D>N?0:N-D>>>0,D>>>=0;for(var G=Array(q);++W<q;)G[W]=P[W+D];return G}function gi(P,D,N){var W=P.length;return N=N===void 0?W:N,!D&&N>=W?P:Xt(P,D,N)}function bn(P,D){for(var N=P.length;N--&&It(D,P[N],0)>-1;);return N}function _n(P,D){for(var N=-1,W=P.length;++N<W&&It(D,P[N],0)>-1;);return N}function wn(P){return P.split("")}var kt="\\ud800-\\udfff",Sn="\\u0300-\\u036f",pi="\\ufe20-\\ufe2f",vi="\\u20d0-\\u20ff",mi=Sn+pi+vi,F="\\ufe0e\\ufe0f",U="\\u200d",te=RegExp("["+U+kt+mi+F+"]");function ce(P){return te.test(P)}var Ee="\\ud800-\\udfff",pe="\\u0300-\\u036f",Le="\\ufe20-\\ufe2f",Ie="\\u20d0-\\u20ff",Fe=pe+Le+Ie,Re="\\ufe0e\\ufe0f",Ke="["+Ee+"]",ze="["+Fe+"]",De="\\ud83c[\\udffb-\\udfff]",Ue="(?:"+ze+"|"+De+")",je="[^"+Ee+"]",Ze="(?:\\ud83c[\\udde6-\\uddff]){2}",Ye="[\\ud800-\\udbff][\\udc00-\\udfff]",dt="\\u200d",Qt=Ue+"?",Rt="["+Re+"]?",Dt="(?:"+dt+"(?:"+[je,Ze,Ye].join("|")+")"+Rt+Qt+")*",_r=Rt+Qt+Dt,wr="(?:"+[je+ze+"?",ze,Ze,Ye,Ke].join("|")+")",Sr=RegExp(De+"(?="+De+")|"+wr+_r,"g");function Cr(P){return P.match(Sr)||[]}function Ri(P){return ce(P)?Cr(P):wn(P)}function Er(P){return P==null?"":Yt(P)}var xr=/^\s+|\s+$/g;function $r(P,D,N){if(P=Er(P),P&&(N||D===void 0))return P.replace(xr,"");if(!P||!(D=Yt(D)))return P;var W=Ri(P),q=Ri(D),G=_n(W,q),Z=bn(W,q)+1;return gi(W,G,Z).join("")}var kr=/^(?:async\s+)?(function)?\s*[^\(]*\(\s*([^\)]*)\)/m,Rr=/,/,Tr=/(=.+)?(\s*)$/,Ar=/((\/\/.*$)|(\/\*[\s\S]*?\*\/))/mg;function Lr(P){return P=P.toString().replace(Ar,""),P=P.match(kr)[2].replace(" ",""),P=P?P.split(Rr):[],P=P.map(function(D){return $r(D.replace(Tr,""))}),P}function Ti(P,D){var N={};xt(P,function(W,q){var G,Z=x(W),ne=!Z&&W.length===1||Z&&W.length===0;if(J(W))G=W.slice(0,-1),W=W[W.length-1],N[q]=G.concat(G.length>0?oe:W);else if(ne)N[q]=W;else{if(G=Lr(W),W.length===0&&!Z&&G.length===0)throw new Error("autoInject task functions require explicit parameters.");Z||G.pop(),N[q]=G.concat(oe)}function oe(fe,le){var ge=mt(G,function(Te){return fe[Te]});ge.push(le),E(W).apply(null,ge)}}),qt(N,D)}function et(){this.head=this.tail=null,this.length=0}function Ai(P,D){P.length=1,P.head=P.tail=D}et.prototype.removeLink=function(P){return P.prev?P.prev.next=P.next:this.head=P.next,P.next?P.next.prev=P.prev:this.tail=P.prev,P.prev=P.next=null,this.length-=1,P},et.prototype.empty=function(){for(;this.head;)this.shift();return this},et.prototype.insertAfter=function(P,D){D.prev=P,D.next=P.next,P.next?P.next.prev=D:this.tail=D,P.next=D,this.length+=1},et.prototype.insertBefore=function(P,D){D.prev=P.prev,D.next=P,P.prev?P.prev.next=D:this.head=D,P.prev=D,this.length+=1},et.prototype.unshift=function(P){this.head?this.insertBefore(this.head,P):Ai(this,P)},et.prototype.push=function(P){this.tail?this.insertAfter(this.tail,P):Ai(this,P)},et.prototype.shift=function(){return this.head&&this.removeLink(this.head)},et.prototype.pop=function(){return this.tail&&this.removeLink(this.tail)},et.prototype.toArray=function(){for(var P=Array(this.length),D=this.head,N=0;N<this.length;N++)P[N]=D.data,D=D.next;return P},et.prototype.remove=function(P){for(var D=this.head;D;){var N=D.next;P(D)&&this.removeLink(D),D=N}return this};function Li(P,D,N){if(D==null)D=1;else if(D===0)throw new Error("Concurrency must not be zero");var W=E(P),q=0,G=[],Z=!1;function ne(ge,Te,He){if(He!=null&&typeof He!="function")throw new Error("task callback must be a function");if(le.started=!0,J(ge)||(ge=[ge]),ge.length===0&&le.idle())return o(function(){le.drain()});for(var it=0,Xe=ge.length;it<Xe;it++){var rt={data:ge[it],callback:He||re};Te?le._tasks.unshift(rt):le._tasks.push(rt)}Z||(Z=!0,o(function(){Z=!1,le.process()}))}function oe(ge){return function(Te){q-=1;for(var He=0,it=ge.length;He<it;He++){var Xe=ge[He],rt=It(G,Xe,0);rt===0?G.shift():rt>0&&G.splice(rt,1),Xe.callback.apply(Xe,arguments),Te!=null&&le.error(Te,Xe.data)}q<=le.concurrency-le.buffer&&le.unsaturated(),le.idle()&&le.drain(),le.process()}}var fe=!1,le={_tasks:new et,concurrency:D,payload:N,saturated:re,unsaturated:re,buffer:D/4,empty:re,drain:re,error:re,started:!1,paused:!1,push:function(ge,Te){ne(ge,!1,Te)},kill:function(){le.drain=re,le._tasks.empty()},unshift:function(ge,Te){ne(ge,!0,Te)},remove:function(ge){le._tasks.remove(ge)},process:function(){if(!fe){for(fe=!0;!le.paused&&q<le.concurrency&&le._tasks.length;){var ge=[],Te=[],He=le._tasks.length;le.payload&&(He=Math.min(He,le.payload));for(var it=0;it<He;it++){var Xe=le._tasks.shift();ge.push(Xe),G.push(Xe),Te.push(Xe.data)}q+=1,le._tasks.length===0&&le.empty(),q===le.concurrency&&le.saturated();var rt=qe(oe(ge));W(Te,rt)}fe=!1}},length:function(){return le._tasks.length},running:function(){return q},workersList:function(){return G},idle:function(){return le._tasks.length+q===0},pause:function(){le.paused=!0},resume:function(){le.paused!==!1&&(le.paused=!1,o(le.process))}};return le}function Mi(P,D){return Li(P,1,D)}var Ft=Pe(ct,1);function yt(P,D,N,W){W=ae(W||re);var q=E(N);Ft(P,function(G,Z,ne){q(D,G,function(oe,fe){D=fe,ne(oe)})},function(G){W(G,D)})}function yi(){var P=mt(arguments,E);return function(){var D=a(arguments),N=this,W=D[D.length-1];typeof W=="function"?D.pop():W=re,yt(P,D,function(q,G,Z){G.apply(N,q.concat(function(ne){var oe=a(arguments,1);Z(ne,oe)}))},function(q,G){W.apply(N,[q].concat(G))})}}var Oi=function(){return yi.apply(null,a(arguments).reverse())},Mr=Array.prototype.concat,Cn=function(P,D,N,W){W=W||re;var q=E(N);ut(P,D,function(G,Z){q(G,function(ne){return ne?Z(ne):Z(null,a(arguments,1))})},function(G,Z){for(var ne=[],oe=0;oe<Z.length;oe++)Z[oe]&&(ne=Mr.apply(ne,Z[oe]));return W(G,ne)})},Pi=Pe(Cn,1/0),Ii=Pe(Cn,1),Di=function(){var P=a(arguments),D=[null].concat(P);return function(){var N=arguments[arguments.length-1];return N.apply(this,D)}};function Jt(P){return P}function Nt(P,D){return function(N,W,q,G){G=G||re;var Z=!1,ne;N(W,function(oe,fe,le){q(oe,function(ge,Te){ge?le(ge):P(Te)&&!ne?(Z=!0,ne=D(!0,oe),le(null,ee)):le()})},function(oe){oe?G(oe):G(null,Z?ne:D(!1))})}}function Fi(P,D){return D}var En=ht(Nt(Jt,Fi)),Zt=pt(Nt(Jt,Fi)),xn=Pe(Zt,1);function Ni(P){return function(D){var N=a(arguments,1);N.push(function(W){var q=a(arguments,1);typeof console=="object"&&(W?console.error&&console.error(W):console[P]&&Et(q,function(G){console[P](G)}))}),E(D).apply(null,N)}}var Bi=Ni("dir");function Hi(P,D,N){N=qe(N||re);var W=E(P),q=E(D);function G(ne){if(ne)return N(ne);var oe=a(arguments,1);oe.push(Z),q.apply(this,oe)}function Z(ne,oe){if(ne)return N(ne);if(!oe)return N(null);W(G)}Z(null,!0)}function bi(P,D,N){N=qe(N||re);var W=E(P),q=function(G){if(G)return N(G);var Z=a(arguments,1);if(D.apply(this,Z))return W(q);N.apply(null,[null].concat(Z))};W(q)}function Wi(P,D,N){bi(P,function(){return!D.apply(this,arguments)},N)}function Ki(P,D,N){N=qe(N||re);var W=E(D),q=E(P);function G(ne){if(ne)return N(ne);q(Z)}function Z(ne,oe){if(ne)return N(ne);if(!oe)return N(null);W(G)}q(Z)}function zi(P){return function(D,N,W){return P(D,W)}}function $n(P,D,N){Je(P,zi(E(D)),N)}function en(P,D,N,W){Mt(D)(P,zi(E(N)),W)}var tn=Pe(en,1);function _i(P){return x(P)?P:h(function(D,N){var W=!0;D.push(function(){var q=arguments;W?o(function(){N.apply(null,q)}):N.apply(null,q)}),P.apply(this,D),W=!1})}function kn(P){return!P}var Rn=ht(Nt(kn,kn)),nn=pt(Nt(kn,kn)),Tn=Pe(nn,1);function ji(P){return function(D){return D?.[P]}}function Or(P,D,N,W){var q=new Array(D.length);P(D,function(G,Z,ne){N(G,function(oe,fe){q[Z]=!!fe,ne(oe)})},function(G){if(G)return W(G);for(var Z=[],ne=0;ne<D.length;ne++)q[ne]&&Z.push(D[ne]);W(null,Z)})}function Pr(P,D,N,W){var q=[];P(D,function(G,Z,ne){N(G,function(oe,fe){oe?ne(oe):(fe&&q.push({index:Z,value:G}),ne())})},function(G){G?W(G):W(null,mt(q.sort(function(Z,ne){return Z.index-ne.index}),ji("value")))})}function wi(P,D,N,W){var q=se(D)?Or:Pr;q(P,D,E(N),W||re)}var An=ht(wi),rn=pt(wi),Ln=Pe(rn,1);function Ui(P,D){var N=qe(D||re),W=E(_i(P));function q(G){if(G)return N(G);W(q)}q()}var Mn=function(P,D,N,W){W=W||re;var q=E(N);ut(P,D,function(G,Z){q(G,function(ne,oe){return ne?Z(ne):Z(null,{key:oe,val:G})})},function(G,Z){for(var ne={},oe=Object.prototype.hasOwnProperty,fe=0;fe<Z.length;fe++)if(Z[fe]){var le=Z[fe].key,ge=Z[fe].val;oe.call(ne,le)?ne[le].push(ge):ne[le]=[ge]}return W(G,ne)})},Vi=Pe(Mn,1/0),Gi=Pe(Mn,1),qi=Ni("log");function On(P,D,N,W){W=ae(W||re);var q={},G=E(N);ct(P,D,function(Z,ne,oe){G(Z,ne,function(fe,le){if(fe)return oe(fe);q[ne]=le,oe()})},function(Z){W(Z,q)})}var Yi=Pe(On,1/0),Xi=Pe(On,1);function Qi(P,D){return D in P}function Ji(P,D){var N=Object.create(null),W=Object.create(null);D=D||Jt;var q=E(P),G=h(function(ne,oe){var fe=D.apply(null,ne);Qi(N,fe)?o(function(){oe.apply(null,N[fe])}):Qi(W,fe)?W[fe].push(oe):(W[fe]=[oe],q.apply(null,ne.concat(function(){var le=a(arguments);N[fe]=le;var ge=W[fe];delete W[fe];for(var Te=0,He=ge.length;Te<He;Te++)ge[Te].apply(null,le)})))});return G.memo=N,G.unmemoized=P,G}var Pn;c?Pn=process.nextTick:u?Pn=setImmediate:Pn=f;var Zi=n(Pn);function Si(P,D,N){N=N||re;var W=se(D)?[]:{};P(D,function(q,G,Z){E(q)(function(ne,oe){arguments.length>2&&(oe=a(arguments,1)),W[G]=oe,Z(ne)})},function(q){N(q,W)})}function er(P,D){Si(Je,P,D)}function tr(P,D,N){Si(Mt(D),P,N)}var Ci=function(P,D){var N=E(P);return Li(function(W,q){N(W[0],q)},D,1)},nr=function(P,D){var N=Ci(P,D);return N.push=function(W,q,G){if(G==null&&(G=re),typeof G!="function")throw new Error("task callback must be a function");if(N.started=!0,J(W)||(W=[W]),W.length===0)return o(function(){N.drain()});q=q||0;for(var Z=N._tasks.head;Z&&q>=Z.priority;)Z=Z.next;for(var ne=0,oe=W.length;ne<oe;ne++){var fe={data:W[ne],priority:q,callback:G};Z?N._tasks.insertBefore(Z,fe):N._tasks.push(fe)}o(N.process)},delete N.unshift,N};function ir(P,D){if(D=ae(D||re),!J(P))return D(new TypeError("First argument to race must be an array of functions"));if(!P.length)return D();for(var N=0,W=P.length;N<W;N++)E(P[N])(D)}function In(P,D,N,W){var q=a(P).reverse();yt(q,D,N,W)}function Dn(P){var D=E(P);return h(function(W,q){return W.push(function(Z,ne){if(Z)q(null,{error:Z});else{var oe;arguments.length<=2?oe=ne:oe=a(arguments,1),q(null,{value:oe})}}),D.apply(this,W)})}function rr(P){var D;return J(P)?D=mt(P,Dn):(D={},xt(P,function(N,W){D[W]=Dn.call(this,N)})),D}function sr(P,D,N,W){wi(P,D,function(q,G){N(q,function(Z,ne){G(Z,!ne)})},W)}var or=ht(sr),Ei=pt(sr),ar=Pe(Ei,1);function lr(P){return function(){return P}}function Fn(P,D,N){var W=5,q=0,G={times:W,intervalFunc:lr(q)};function Z(le,ge){if(typeof ge=="object")le.times=+ge.times||W,le.intervalFunc=typeof ge.interval=="function"?ge.interval:lr(+ge.interval||q),le.errorFilter=ge.errorFilter;else if(typeof ge=="number"||typeof ge=="string")le.times=+ge||W;else throw new Error("Invalid arguments for async.retry")}if(arguments.length<3&&typeof P=="function"?(N=D||re,D=P):(Z(G,P),N=N||re),typeof D!="function")throw new Error("Invalid arguments for async.retry");var ne=E(D),oe=1;function fe(){ne(function(le){le&&oe++<G.times&&(typeof G.errorFilter!="function"||G.errorFilter(le))?setTimeout(fe,G.intervalFunc(oe)):N.apply(null,arguments)})}fe()}var cr=function(P,D){D||(D=P,P=null);var N=E(D);return h(function(W,q){function G(Z){N.apply(null,W.concat(Z))}P?Fn(P,G,q):Fn(G,q)})};function hr(P,D){Si(Ft,P,D)}var Nn=ht(Nt(Boolean,Jt)),sn=pt(Nt(Boolean,Jt)),Bn=Pe(sn,1);function ur(P,D,N){var W=E(D);Ot(P,function(G,Z){W(G,function(ne,oe){if(ne)return Z(ne);Z(null,{value:G,criteria:oe})})},function(G,Z){if(G)return N(G);N(null,mt(Z.sort(q),ji("value")))});function q(G,Z){var ne=G.criteria,oe=Z.criteria;return ne<oe?-1:ne>oe?1:0}}function fr(P,D,N){var W=E(P);return h(function(q,G){var Z=!1,ne;function oe(){var fe=P.name||"anonymous",le=new Error('Callback function "'+fe+'" timed out.');le.code="ETIMEDOUT",N&&(le.info=N),Z=!0,G(le)}q.push(function(){Z||(G.apply(null,arguments),clearTimeout(ne))}),ne=setTimeout(oe,D),W.apply(null,q)})}var Ir=Math.ceil,Dr=Math.max;function Fr(P,D,N,W){for(var q=-1,G=Dr(Ir((D-P)/(N||1)),0),Z=Array(G);G--;)Z[W?G:++q]=P,P+=N;return Z}function Hn(P,D,N,W){var q=E(N);ut(Fr(0,P,1),D,q,W)}var dr=Pe(Hn,1/0),gr=Pe(Hn,1);function pr(P,D,N,W){arguments.length<=3&&(W=N,N=D,D=J(P)?[]:{}),W=ae(W||re);var q=E(N);Je(P,function(G,Z,ne){q(D,G,Z,ne)},function(G){W(G,D)})}function vr(P,D){var N=null,W;D=D||re,tn(P,function(q,G){E(q)(function(Z,ne){arguments.length>2?W=a(arguments,1):W=ne,N=Z,G(!Z)})},function(){D(N,W)})}function mr(P){return function(){return(P.unmemoized||P).apply(null,arguments)}}function xi(P,D,N){N=qe(N||re);var W=E(D);if(!P())return N(null);var q=function(G){if(G)return N(G);if(P())return W(q);var Z=a(arguments,1);N.apply(null,[null].concat(Z))};W(q)}function yr(P,D,N){xi(function(){return!P.apply(this,arguments)},D,N)}var br=function(P,D){if(D=ae(D||re),!J(P))return D(new Error("First argument to waterfall must be an array of functions"));if(!P.length)return D();var N=0;function W(G){var Z=E(P[N++]);G.push(qe(q)),Z.apply(null,G)}function q(G){if(G||N===P.length)return D.apply(null,arguments);W(a(arguments,1))}W([])},Nr={apply:m,applyEach:pn,applyEachSeries:vn,asyncify:l,auto:qt,autoInject:Ti,cargo:Mi,compose:Oi,concat:Pi,concatLimit:Cn,concatSeries:Ii,constant:Di,detect:En,detectLimit:Zt,detectSeries:xn,dir:Bi,doDuring:Hi,doUntil:Wi,doWhilst:bi,during:Ki,each:$n,eachLimit:en,eachOf:Je,eachOfLimit:ct,eachOfSeries:Ft,eachSeries:tn,ensureAsync:_i,every:Rn,everyLimit:nn,everySeries:Tn,filter:An,filterLimit:rn,filterSeries:Ln,forever:Ui,groupBy:Vi,groupByLimit:Mn,groupBySeries:Gi,log:qi,map:Ot,mapLimit:ut,mapSeries:Gt,mapValues:Yi,mapValuesLimit:On,mapValuesSeries:Xi,memoize:Ji,nextTick:Zi,parallel:er,parallelLimit:tr,priorityQueue:nr,queue:Ci,race:ir,reduce:yt,reduceRight:In,reflect:Dn,reflectAll:rr,reject:or,rejectLimit:Ei,rejectSeries:ar,retry:Fn,retryable:cr,seq:yi,series:hr,setImmediate:o,some:Nn,someLimit:sn,someSeries:Bn,sortBy:ur,timeout:fr,times:dr,timesLimit:Hn,timesSeries:gr,transform:pr,tryEach:vr,unmemoize:mr,until:yr,waterfall:br,whilst:xi,all:Rn,allLimit:nn,allSeries:Tn,any:Nn,anyLimit:sn,anySeries:Bn,find:En,findLimit:Zt,findSeries:xn,forEach:$n,forEachSeries:tn,forEachLimit:en,forEachOf:Je,forEachOfSeries:Ft,forEachOfLimit:ct,inject:yt,foldl:yt,foldr:In,select:An,selectLimit:rn,selectSeries:Ln,wrapSync:l};e.default=Nr,e.apply=m,e.applyEach=pn,e.applyEachSeries=vn,e.asyncify=l,e.auto=qt,e.autoInject=Ti,e.cargo=Mi,e.compose=Oi,e.concat=Pi,e.concatLimit=Cn,e.concatSeries=Ii,e.constant=Di,e.detect=En,e.detectLimit=Zt,e.detectSeries=xn,e.dir=Bi,e.doDuring=Hi,e.doUntil=Wi,e.doWhilst=bi,e.during=Ki,e.each=$n,e.eachLimit=en,e.eachOf=Je,e.eachOfLimit=ct,e.eachOfSeries=Ft,e.eachSeries=tn,e.ensureAsync=_i,e.every=Rn,e.everyLimit=nn,e.everySeries=Tn,e.filter=An,e.filterLimit=rn,e.filterSeries=Ln,e.forever=Ui,e.groupBy=Vi,e.groupByLimit=Mn,e.groupBySeries=Gi,e.log=qi,e.map=Ot,e.mapLimit=ut,e.mapSeries=Gt,e.mapValues=Yi,e.mapValuesLimit=On,e.mapValuesSeries=Xi,e.memoize=Ji,e.nextTick=Zi,e.parallel=er,e.parallelLimit=tr,e.priorityQueue=nr,e.queue=Ci,e.race=ir,e.reduce=yt,e.reduceRight=In,e.reflect=Dn,e.reflectAll=rr,e.reject=or,e.rejectLimit=Ei,e.rejectSeries=ar,e.retry=Fn,e.retryable=cr,e.seq=yi,e.series=hr,e.setImmediate=o,e.some=Nn,e.someLimit=sn,e.someSeries=Bn,e.sortBy=ur,e.timeout=fr,e.times=dr,e.timesLimit=Hn,e.timesSeries=gr,e.transform=pr,e.tryEach=vr,e.unmemoize=mr,e.until=yr,e.waterfall=br,e.whilst=xi,e.all=Rn,e.allLimit=nn,e.allSeries=Tn,e.any=Nn,e.anyLimit=sn,e.anySeries=Bn,e.find=En,e.findLimit=Zt,e.findSeries=xn,e.forEach=$n,e.forEachSeries=tn,e.forEachLimit=en,e.forEachOf=Je,e.forEachOfSeries=Ft,e.forEachOfLimit=ct,e.inject=yt,e.foldl=yt,e.foldr=In,e.select=An,e.selectLimit=rn,e.selectSeries=Ln,e.wrapSync=l,Object.defineProperty(e,"__esModule",{value:!0})})})(async$1,async$1.exports);var asyncExports=async$1.exports,hat$2={exports:{}},hat$1=hat$2.exports=function(s,r){if(r||(r=16),s===void 0&&(s=128),s<=0)return"0";for(var e=Math.log(Math.pow(2,s))/Math.log(r),a=2;e===1/0;a*=2)e=Math.log(Math.pow(2,s/a))/Math.log(r)*a;for(var m=e-Math.floor(e),h="",a=0;a<Math.floor(e);a++){var p=Math.floor(Math.random()*r).toString(r);h=p+h}if(m){var u=Math.pow(r,m),p=Math.floor(Math.random()*u).toString(r);h=p+h}var c=parseInt(h,r);return c!==1/0&&c>=Math.pow(2,s)?hat$1(s,r):h};hat$1.rack=function(s,r,e){var a=function(h){var p=0;do{if(p++>10)if(e)s+=e;else throw new Error("too many ID collisions, use more bits");var u=hat$1(s,r)}while(Object.hasOwnProperty.call(m,u));return m[u]=h,u},m=a.hats={};return a.get=function(h){return a.hats[h]},a.set=function(h,p){return a.hats[h]=p,a},a.bits=s||128,a.base=r||16,a};var hatExports=hat$2.exports,emitter$2=emitter$6,LocalPresence$1=localPresence,RemotePresence$1=remotePresence,util$4=util$9,async=asyncExports,hat=hatExports,presence=Presence$2;function Presence$2(s,r){if(emitter$2.EventEmitter.call(this),!r||typeof r!="string")throw new Error("Presence channel must be provided");this.connection=s,this.channel=r,this.wantSubscribe=!1,this.subscribed=!1,this.remotePresences={},this.localPresences={},this._remotePresenceInstances={},this._subscriptionCallbacksBySeq={}}emitter$2.mixin(Presence$2);Presence$2.prototype.subscribe=function(s){this._sendSubscriptionAction(!0,s)};Presence$2.prototype.unsubscribe=function(s){this._sendSubscriptionAction(!1,s)};Presence$2.prototype.create=function(s){s=s||hat();var r=this._createLocalPresence(s);return this.localPresences[s]=r,r};Presence$2.prototype.destroy=function(s){var r=this;this.unsubscribe(function(e){if(e)return r._callbackOrEmit(e,s);var a=Object.keys(r.localPresences),m=Object.keys(r._remotePresenceInstances);async.parallel([function(h){async.each(a,function(p,u){r.localPresences[p].destroy(u)},h)},function(h){async.each(m,function(p,u){r._remotePresenceInstances[p].destroy(u)},h)}],function(h){delete r.connection._presences[r.channel],r._callbackOrEmit(h,s)})})};Presence$2.prototype._sendSubscriptionAction=function(s,r){this.wantSubscribe=!!s;var e=this.wantSubscribe?"ps":"pu",a=this.connection._presenceSeq++;this._subscriptionCallbacksBySeq[a]=r,this.connection.canSend&&this.connection._sendPresenceAction(e,a,this)};Presence$2.prototype._handleSubscribe=function(s,r){this.wantSubscribe&&(this.subscribed=!0);var e=this._subscriptionCallback(r);this._callbackOrEmit(s,e)};Presence$2.prototype._handleUnsubscribe=function(s,r){this.subscribed=!1;var e=this._subscriptionCallback(r);this._callbackOrEmit(s,e)};Presence$2.prototype._receiveUpdate=function(s,r){var e=util$4.dig(this.localPresences,r.id);if(e)return e._ack(s,r.pv);if(s)return this.emit("error",s);var a=this,m=util$4.digOrCreate(this._remotePresenceInstances,r.id,function(){return a._createRemotePresence(r.id)});m.receiveUpdate(r)};Presence$2.prototype._updateRemotePresence=function(s){this.remotePresences[s.presenceId]=s.value,s.value===null&&this._removeRemotePresence(s.presenceId),this.emit("receive",s.presenceId,s.value)};Presence$2.prototype._broadcastAllLocalPresence=function(s){if(s)return this.emit("error",s);for(var r in this.localPresences){var e=this.localPresences[r];e.value!==null&&e.send()}};Presence$2.prototype._removeRemotePresence=function(s){this._remotePresenceInstances[s].destroy(),delete this._remotePresenceInstances[s],delete this.remotePresences[s]};Presence$2.prototype._onConnectionStateChanged=function(){if(this.connection.canSend){this._resubscribe();for(var s in this.localPresences)this.localPresences[s]._sendPending()}};Presence$2.prototype._resubscribe=function(){var s=[];for(var r in this._subscriptionCallbacksBySeq){var e=this._subscriptionCallback(r);s.push(e)}if(!this.wantSubscribe)return this._callEachOrEmit(s);var a=this;this.subscribe(function(m){a._callEachOrEmit(s,m)})};Presence$2.prototype._subscriptionCallback=function(s){var r=this._subscriptionCallbacksBySeq[s];return delete this._subscriptionCallbacksBySeq[s],r};Presence$2.prototype._callbackOrEmit=function(s,r){if(r)return util$4.nextTick(r,s);s&&this.emit("error",s)};Presence$2.prototype._createLocalPresence=function(s){return new LocalPresence$1(this,s)};Presence$2.prototype._createRemotePresence=function(s){return new RemotePresence$1(this,s)};Presence$2.prototype._callEachOrEmit=function(s,r){var e=util$4.callEach(s,r);!e&&r&&this.emit("error",r)};var LocalPresence=localPresence,ShareDBError$1=error,util$3=util$9,ERROR_CODE$1=ShareDBError$1.CODES,localDocPresence=LocalDocPresence$1;function LocalDocPresence$1(s,r){LocalPresence.call(this,s,r),this.collection=this.presence.collection,this.id=this.presence.id,this._doc=this.connection.get(this.collection,this.id),this._isSending=!1,this._opHandler=this._transformAgainstOp.bind(this),this._createOrDelHandler=this._handleCreateOrDel.bind(this),this._loadHandler=this._handleLoad.bind(this),this._destroyHandler=this.destroy.bind(this),this._registerWithDoc()}LocalDocPresence$1.prototype=Object.create(LocalPresence.prototype);LocalDocPresence$1.prototype.submit=function(s,r){if(!this._doc.type){if(s===null)return this._callbackOrEmit(null,r);var e={code:ERROR_CODE$1.ERR_DOC_DOES_NOT_EXIST,message:"Cannot submit presence. Document has not been created"};return this._callbackOrEmit(e,r)}LocalPresence.prototype.submit.call(this,s,r)};LocalDocPresence$1.prototype.destroy=function(s){this._doc.removeListener("op",this._opHandler),this._doc.removeListener("create",this._createOrDelHandler),this._doc.removeListener("del",this._createOrDelHandler),this._doc.removeListener("load",this._loadHandler),this._doc.removeListener("destroy",this._destroyHandler),LocalPresence.prototype.destroy.call(this,s)};LocalDocPresence$1.prototype._sendPending=function(){if(!this._isSending){this._isSending=!0;var s=this;this._doc.whenNothingPending(function(){s._isSending=!1,s.connection.canSend&&(s._pendingMessages.forEach(function(r){r.t=s._doc.type.uri,r.v=s._doc.version,s.connection.send(r)}),s._pendingMessages=[])})}};LocalDocPresence$1.prototype._registerWithDoc=function(){this._doc.on("op",this._opHandler),this._doc.on("create",this._createOrDelHandler),this._doc.on("del",this._createOrDelHandler),this._doc.on("load",this._loadHandler),this._doc.on("destroy",this._destroyHandler)};LocalDocPresence$1.prototype._transformAgainstOp=function(s,r){var e=this;this._pendingMessages.forEach(function(a){try{a.p=e._transformPresence(a.p,s,r)}catch(h){var m=e._getCallback(a.pv);e._callbackOrEmit(h,m)}});try{this.value=this._transformPresence(this.value,s,r)}catch(a){this.emit("error",a)}};LocalDocPresence$1.prototype._handleCreateOrDel=function(){this._pendingMessages.forEach(function(s){s.p=null}),this.value=null};LocalDocPresence$1.prototype._handleLoad=function(){this.value=null,this._pendingMessages=[]};LocalDocPresence$1.prototype._message=function(){var s=LocalPresence.prototype._message.call(this);return s.c=this.collection,s.d=this.id,s.v=null,s.t=null,s};LocalDocPresence$1.prototype._transformPresence=function(s,r,e){var a=this._doc.type;if(!util$3.supportsPresence(a))throw new ShareDBError$1(ERROR_CODE$1.ERR_TYPE_DOES_NOT_SUPPORT_PRESENCE,"Type does not support presence: "+a.name);return a.transformPresence(s,r,e)};var ot$1={};(function(s){var r=types$2,e=error,a=util$9,m=e.CODES;s.checkOp=function(u){if(u==null||typeof u!="object")return new e(m.ERR_OT_OP_BADLY_FORMED,"Op must be an object");if(u.create!=null){if(typeof u.create!="object")return new e(m.ERR_OT_OP_BADLY_FORMED,"Create data must be an object");var c=u.create.type;if(typeof c!="string")return new e(m.ERR_OT_OP_BADLY_FORMED,"Missing create type");var f=r.map[c];if(f==null||typeof f!="object")return new e(m.ERR_DOC_TYPE_NOT_RECOGNIZED,"Unknown type")}else if(u.del!=null){if(u.del!==!0)return new e(m.ERR_OT_OP_BADLY_FORMED,"del value must be true")}else if(!("op"in u))return new e(m.ERR_OT_OP_BADLY_FORMED,"Missing op, create, or del");if(u.src!=null&&typeof u.src!="string")return new e(m.ERR_OT_OP_BADLY_FORMED,"src must be a string");if(u.seq!=null&&typeof u.seq!="number")return new e(m.ERR_OT_OP_BADLY_FORMED,"seq must be a number");if(u.src==null&&u.seq!=null||u.src!=null&&u.seq==null)return new e(m.ERR_OT_OP_BADLY_FORMED,"Both src and seq must be set together");if(u.m!=null&&typeof u.m!="object")return new e(m.ERR_OT_OP_BADLY_FORMED,"op.m must be an object or null")},s.normalizeType=function(u){return r.map[u]&&r.map[u].uri},s.apply=function(u,c){if(typeof u!="object")return new e(m.ERR_APPLY_SNAPSHOT_NOT_PROVIDED,"Missing snapshot");if(u.v!=null&&c.v!=null&&u.v!==c.v)return new e(m.ERR_APPLY_OP_VERSION_DOES_NOT_MATCH_SNAPSHOT,"Version mismatch");if(c.create){if(u.type)return new e(m.ERR_DOC_ALREADY_CREATED,"Document already exists");var f=c.create,n=r.map[f.type];if(!n)return new e(m.ERR_DOC_TYPE_NOT_RECOGNIZED,"Unknown type");try{u.data=n.create(f.data),u.type=n.uri,u.v++}catch(o){return o}}else if(c.del)u.data=void 0,u.type=null,u.v++;else if("op"in c){var t=h(u,c.op);if(t)return t;u.v++}else u.v++};function h(u,c){if(!u.type)return new e(m.ERR_DOC_DOES_NOT_EXIST,"Document does not exist");if(c===void 0)return new e(m.ERR_OT_OP_NOT_PROVIDED,"Missing op");var f=r.map[u.type];if(!f)return new e(m.ERR_DOC_TYPE_NOT_RECOGNIZED,"Unknown type");try{u.data=f.apply(u.data,c)}catch(n){return new e(m.ERR_OT_OP_NOT_APPLIED,n.message)}}s.transform=function(u,c,f){if(c.v!=null&&c.v!==f.v)return new e(m.ERR_OP_VERSION_MISMATCH_DURING_TRANSFORM,"Version mismatch");if(f.del){if(c.create||"op"in c)return new e(m.ERR_DOC_WAS_DELETED,"Document was deleted")}else{if(f.create&&("op"in c||c.create||c.del)||"op"in f&&c.create)return new e(m.ERR_DOC_ALREADY_CREATED,"Document was created remotely");if("op"in f&&"op"in c){if(!u)return new e(m.ERR_DOC_DOES_NOT_EXIST,"Document does not exist");if(typeof u=="string"&&(u=r.map[u],!u))return new e(m.ERR_DOC_TYPE_NOT_RECOGNIZED,"Unknown type");try{c.op=u.transform(c.op,f.op,"left")}catch(n){return n}}}c.v!=null&&c.v++},s.applyOps=function(u,c,f){f=f||{};for(var n=0;n<c.length;n++){var t=c[n];if(f._normalizeLegacyJson0Ops)try{p(u,t)}catch{return new e(m.ERR_OT_LEGACY_JSON0_OP_CANNOT_BE_NORMALIZED,"Cannot normalize legacy json0 op")}u.v=t.v;var o=s.apply(u,t);if(o)return o}},s.transformPresence=function(u,c,f){var n=this.checkOp(c);if(n)return n;var t=u.t;if(typeof t=="string"&&(t=r.map[t]),!t)return{code:m.ERR_DOC_TYPE_NOT_RECOGNIZED,message:"Unknown type"};if(!a.supportsPresence(t))return{code:m.ERR_TYPE_DOES_NOT_SUPPORT_PRESENCE,message:"Type does not support presence"};if(c.create||c.del){u.p=null,u.v++;return}try{u.p=u.p===null?null:t.transformPresence(u.p,c.op,f)}catch(o){return{code:m.ERR_PRESENCE_TRANSFORM_FAILED,message:o.message||o}}u.v++};function p(u,c){if(u.type===r.defaultType.uri){var f=c.op;if(f)for(var n=0;n<f.length;n++){var t=f[n];typeof t.lm=="string"&&(t.lm=+t.lm);for(var o=t.p,l=u.data,d=0;d<o.length;d++){var v=o[d];Object.prototype.toString.call(l)=="[object Array]"?o[d]=+v:l.constructor===Object&&(o[d]=v.toString()),l=l[v]}}}}})(ot$1);var RemotePresence=remotePresence,ot=ot$1,remoteDocPresence=RemoteDocPresence$1;function RemoteDocPresence$1(s,r){RemotePresence.call(this,s,r),this.collection=this.presence.collection,this.id=this.presence.id,this.src=null,this.presenceVersion=null,this._doc=this.connection.get(this.collection,this.id),this._pending=null,this._opCache=null,this._pendingSetPending=!1,this._opHandler=this._handleOp.bind(this),this._createDelHandler=this._handleCreateDel.bind(this),this._loadHandler=this._handleLoad.bind(this),this._registerWithDoc()}RemoteDocPresence$1.prototype=Object.create(RemotePresence.prototype);RemoteDocPresence$1.prototype.receiveUpdate=function(s){this._pending&&s.pv<this._pending.pv||(this.src=s.src,this._pending=s,this._setPendingPresence())};RemoteDocPresence$1.prototype.destroy=function(s){this._doc.removeListener("op",this._opHandler),this._doc.removeListener("create",this._createDelHandler),this._doc.removeListener("del",this._createDelHandler),this._doc.removeListener("load",this._loadHandler),RemotePresence.prototype.destroy.call(this,s)};RemoteDocPresence$1.prototype._registerWithDoc=function(){this._doc.on("op",this._opHandler),this._doc.on("create",this._createDelHandler),this._doc.on("del",this._createDelHandler),this._doc.on("load",this._loadHandler)};RemoteDocPresence$1.prototype._setPendingPresence=function(){if(!this._pendingSetPending){this._pendingSetPending=!0;var s=this;this._doc.whenNothingPending(function(){if(s._pendingSetPending=!1,!!s._pending){if(s._pending.pv<s.presenceVersion)return s._pending=null;if(s._pending.v>s._doc.version)return s._doc.fetch();s._catchUpStalePresence()&&(s.value=s._pending.p,s.presenceVersion=s._pending.pv,s._pending=null,s.presence._updateRemotePresence(s))}})}};RemoteDocPresence$1.prototype._handleOp=function(s,r,e){var a=e===this.src;this._transformAgainstOp(s,a),this._cacheOp(s,a),this._setPendingPresence()};RemotePresence.prototype._handleCreateDel=function(){this._cacheOp(null),this._setPendingPresence()};RemotePresence.prototype._handleLoad=function(){this.value=null,this._pending=null,this._opCache=null,this.presence._updateRemotePresence(this)};RemoteDocPresence$1.prototype._transformAgainstOp=function(s,r){if(this.value){try{this.value=this._doc.type.transformPresence(this.value,s,r)}catch(e){return this.presence.emit("error",e)}this.presence._updateRemotePresence(this)}};RemoteDocPresence$1.prototype._catchUpStalePresence=function(){if(this._pending.v>=this._doc.version)return!0;if(!this._opCache)return this._startCachingOps(),this._doc.fetch(),this.presence.subscribe(),!1;for(;this._opCache[this._pending.v];){var s=this._opCache[this._pending.v],r=s.op,e=s.isOwnOp;r===null?(this._pending.p=null,this._pending.v++):ot.transformPresence(this._pending,r,e)}var a=this._pending.v>=this._doc.version;return a&&this._stopCachingOps(),a};RemoteDocPresence$1.prototype._startCachingOps=function(){this._opCache=[]};RemoteDocPresence$1.prototype._stopCachingOps=function(){this._opCache=null};RemoteDocPresence$1.prototype._cacheOp=function(s,r){this._opCache&&(s=s?{op:s}:null,this._opCache[this._doc.version-1]={op:s,isOwnOp:r})};var Presence$1=presence,LocalDocPresence=localDocPresence,RemoteDocPresence=remoteDocPresence;function DocPresence$1(s,r,e){var a=DocPresence$1.channel(r,e);Presence$1.call(this,s,a),this.collection=r,this.id=e}var docPresence=DocPresence$1;DocPresence$1.prototype=Object.create(Presence$1.prototype);DocPresence$1.channel=function(s,r){return s+"."+r};DocPresence$1.prototype._createLocalPresence=function(s){return new LocalDocPresence(this,s)};DocPresence$1.prototype._createRemotePresence=function(s){return new RemoteDocPresence(this,s)};var snapshot=Snapshot$1;function Snapshot$1(s,r,e,a,m){this.id=s,this.v=r,this.type=e,this.data=a,this.m=m}var Snapshot=snapshot,emitter$1=emitter$6,snapshotRequest=SnapshotRequest$2;function SnapshotRequest$2(s,r,e,a,m){if(emitter$1.EventEmitter.call(this),typeof m!="function")throw new Error("Callback is required for SnapshotRequest");this.requestId=r,this.connection=s,this.id=a,this.collection=e,this.callback=m,this.sent=!1}emitter$1.mixin(SnapshotRequest$2);SnapshotRequest$2.prototype.send=function(){this.connection.canSend&&(this.connection.send(this._message()),this.sent=!0)};SnapshotRequest$2.prototype._onConnectionStateChanged=function(){this.connection.canSend?this.sent||this.send():this.sent=!1};SnapshotRequest$2.prototype._handleResponse=function(s,r){if(this.emit("ready"),s)return this.callback(s);var e=r.meta?r.meta:null,a=new Snapshot(this.id,r.v,r.type,r.data,e);this.callback(null,a)};var SnapshotRequest$1=snapshotRequest,util$2=util$9,snapshotVersionRequest=SnapshotVersionRequest$1;function SnapshotVersionRequest$1(s,r,e,a,m,h){if(SnapshotRequest$1.call(this,s,r,e,a,h),!util$2.isValidVersion(m))throw new Error("Snapshot version must be a positive integer or null");this.version=m}SnapshotVersionRequest$1.prototype=Object.create(SnapshotRequest$1.prototype);SnapshotVersionRequest$1.prototype._message=function(){return{a:"nf",id:this.requestId,c:this.collection,d:this.id,v:this.version}};var SnapshotRequest=snapshotRequest,util$1=util$9,snapshotTimestampRequest=SnapshotTimestampRequest$1;function SnapshotTimestampRequest$1(s,r,e,a,m,h){if(SnapshotRequest.call(this,s,r,e,a,h),!util$1.isValidTimestamp(m))throw new Error("Snapshot timestamp must be a positive integer or null");this.timestamp=m}SnapshotTimestampRequest$1.prototype=Object.create(SnapshotRequest.prototype);SnapshotTimestampRequest$1.prototype._message=function(){return{a:"nt",id:this.requestId,c:this.collection,d:this.id,ts:this.timestamp}};var Doc=doc,Query=query,Presence=presence,DocPresence=docPresence,SnapshotVersionRequest=snapshotVersionRequest,SnapshotTimestampRequest=snapshotTimestampRequest,emitter=emitter$6,ShareDBError=error,types=types$2,util=util$9,logger=logger_1,ERROR_CODE=ShareDBError.CODES;function connectionState(s){return s.readyState===0||s.readyState===1?"connecting":"disconnected"}var connection=Connection;function Connection(s){emitter.EventEmitter.call(this),this.collections={},this.nextQueryId=1,this.nextSnapshotRequestId=1,this.queries={},this._presences={},this._snapshotRequests={},this.seq=1,this._presenceSeq=1,this.id=null,this.agent=null,this.debug=!1,this.state=connectionState(s),this.bindToSocket(s)}emitter.mixin(Connection);Connection.prototype.bindToSocket=function(s){this.socket&&(this.socket.close(),this.socket.onmessage=null,this.socket.onopen=null,this.socket.onerror=null,this.socket.onclose=null),this.socket=s;var r=connectionState(s);this._setState(r),this.canSend=!1;var e=this;s.onmessage=function(a){try{var m=typeof a.data=="string"?JSON.parse(a.data):a.data}catch{logger.warn("Failed to parse message",a);return}e.debug&&logger.info("RECV",JSON.stringify(m));var h={data:m};if(e.emit("receive",h),!!h.data)try{e.handleMessage(h.data)}catch(p){util.nextTick(function(){e.emit("error",p)})}},s.readyState===1&&e._initializeHandshake(),s.onopen=function(){e._setState("connecting"),e._initializeHandshake()},s.onerror=function(a){e.emit("connection error",a)},s.onclose=function(a){a==="closed"||a==="Closed"?e._setState("closed",a):a==="stopped"||a==="Stopped by server"?e._setState("stopped",a):e._setState("disconnected",a)}};Connection.prototype.handleMessage=function(s){var r=null;switch(s.error&&(r=wrapErrorData(s.error,s),delete s.error),s.a){case"init":return this._handleLegacyInit(s);case"hs":return this._handleHandshake(r,s);case"qf":var e=this.queries[s.id];e&&e._handleFetch(r,s.data,s.extra);return;case"qs":var e=this.queries[s.id];e&&e._handleSubscribe(r,s.data,s.extra);return;case"qu":return;case"q":var e=this.queries[s.id];if(!e)return;if(r)return e._handleError(r);s.diff&&e._handleDiff(s.diff),s.hasOwnProperty("extra")&&e._handleExtra(s.extra);return;case"bf":return this._handleBulkMessage(r,s,"_handleFetch");case"bs":case"bu":return this._handleBulkMessage(r,s,"_handleSubscribe");case"nf":case"nt":return this._handleSnapshotFetch(r,s);case"f":var a=this.getExisting(s.c,s.d);a&&a._handleFetch(r,s.data);return;case"s":case"u":var a=this.getExisting(s.c,s.d);a&&a._handleSubscribe(r,s.data);return;case"op":var a=this.getExisting(s.c,s.d);a&&a._handleOp(r,s);return;case"p":return this._handlePresence(r,s);case"ps":return this._handlePresenceSubscribe(r,s);case"pu":return this._handlePresenceUnsubscribe(r,s);case"pr":return this._handlePresenceRequest(r,s);default:logger.warn("Ignoring unrecognized message",s)}};function wrapErrorData(s,r){var e=new Error(s.message);return e.code=s.code,r&&(e.data=r),e}Connection.prototype._handleBulkMessage=function(s,r,e){if(r.data)for(var a in r.data){var m=r.data[a],h=this.getExisting(r.c,a);h&&(s?h[e](s):m.error?h[e](wrapErrorData(m.error)):h[e](null,m))}else if(Array.isArray(r.b))for(var p=0;p<r.b.length;p++){var a=r.b[p],h=this.getExisting(r.c,a);h&&h[e](s)}else if(r.b)for(var a in r.b){var h=this.getExisting(r.c,a);h&&h[e](s)}else logger.error("Invalid bulk message",r)};Connection.prototype._reset=function(){this.agent=null};Connection.prototype._setState=function(s,r){if(this.state!==s){if(s==="connecting"&&this.state!=="disconnected"&&this.state!=="stopped"&&this.state!=="closed"||s==="connected"&&this.state!=="connecting"){var e=new ShareDBError(ERROR_CODE.ERR_CONNECTION_STATE_TRANSITION_INVALID,"Cannot transition directly from "+this.state+" to "+s);return this.emit("error",e)}this.state=s,this.canSend=s==="connected",(s==="disconnected"||s==="stopped"||s==="closed")&&this._reset(),this.startBulk();for(var a in this.queries){var m=this.queries[a];m._onConnectionStateChanged()}for(var h in this.collections){var p=this.collections[h];for(var a in p)p[a]._onConnectionStateChanged()}for(var u in this._presences)this._presences[u]._onConnectionStateChanged();for(var a in this._snapshotRequests){var c=this._snapshotRequests[a];c._onConnectionStateChanged()}this.endBulk(),this.emit(s,r),this.emit("state",s,r)}};Connection.prototype.startBulk=function(){this.bulk||(this.bulk={})};Connection.prototype.endBulk=function(){if(this.bulk)for(var s in this.bulk){var r=this.bulk[s];this._sendBulk("f",s,r.f),this._sendBulk("s",s,r.s),this._sendBulk("u",s,r.u)}this.bulk=null};Connection.prototype._sendBulk=function(s,r,e){if(e){var a=[],m={},h=0,p;for(var u in e){var c=e[u];c==null?a.push(u):(m[u]=c,p=u,h++)}if(a.length===1){var u=a[0];this.send({a:s,c:r,d:u})}else a.length&&this.send({a:"b"+s,c:r,b:a});if(h===1){var f=m[p];this.send({a:s,c:r,d:p,v:f})}else h&&this.send({a:"b"+s,c:r,b:m})}};Connection.prototype._sendAction=function(s,r,e){if(this._addDoc(r),this.bulk){var a=this.bulk[r.collection]||(this.bulk[r.collection]={}),m=a[s]||(a[s]={}),h=m.hasOwnProperty(r.id);return m[r.id]=e,h}else{var p={a:s,c:r.collection,d:r.id,v:e};this.send(p)}};Connection.prototype.sendFetch=function(s){return this._sendAction("f",s,s.version)};Connection.prototype.sendSubscribe=function(s){return this._sendAction("s",s,s.version)};Connection.prototype.sendUnsubscribe=function(s){return this._sendAction("u",s)};Connection.prototype.sendOp=function(s,r){this._addDoc(s);var e={a:"op",c:s.collection,d:s.id,v:s.version,src:r.src,seq:r.seq,x:{}};"op"in r&&(e.op=r.op),r.create&&(e.create=r.create),r.del&&(e.del=r.del),s.submitSource&&(e.x.source=r.source),this.send(e)};Connection.prototype.send=function(s){this.debug&&logger.info("SEND",JSON.stringify(s)),this.emit("send",s),this.socket.send(JSON.stringify(s))};Connection.prototype.close=function(){this.socket.close()};Connection.prototype.getExisting=function(s,r){if(this.collections[s])return this.collections[s][r]};Connection.prototype.get=function(s,r){var e=this.collections[s]||(this.collections[s]={}),a=e[r];return a||(a=e[r]=new Doc(this,s,r),this.emit("doc",a)),a};Connection.prototype._destroyDoc=function(s){util.digAndRemove(this.collections,s.collection,s.id)};Connection.prototype._addDoc=function(s){var r=this.collections[s.collection];r||(r=this.collections[s.collection]={}),r[s.id]!==s&&(r[s.id]=s)};Connection.prototype._createQuery=function(s,r,e,a,m){var h=this.nextQueryId++,p=new Query(s,this,h,r,e,a,m);return this.queries[h]=p,p.send(),p};Connection.prototype._destroyQuery=function(s){delete this.queries[s.id]};Connection.prototype.createFetchQuery=function(s,r,e,a){return this._createQuery("qf",s,r,e,a)};Connection.prototype.createSubscribeQuery=function(s,r,e,a){return this._createQuery("qs",s,r,e,a)};Connection.prototype.hasPending=function(){return!!(this._firstDoc(hasPending)||this._firstQuery(hasPending)||this._firstSnapshotRequest())};function hasPending(s){return s.hasPending()}Connection.prototype.hasWritePending=function(){return!!this._firstDoc(hasWritePending)};function hasWritePending(s){return s.hasWritePending()}Connection.prototype.whenNothingPending=function(s){var r=this._firstDoc(hasPending);if(r){r.once("nothing pending",this._nothingPendingRetry(s));return}var e=this._firstQuery(hasPending);if(e){e.once("ready",this._nothingPendingRetry(s));return}var a=this._firstSnapshotRequest();if(a){a.once("ready",this._nothingPendingRetry(s));return}util.nextTick(s)};Connection.prototype._nothingPendingRetry=function(s){var r=this;return function(){util.nextTick(function(){r.whenNothingPending(s)})}};Connection.prototype._firstDoc=function(s){for(var r in this.collections){var e=this.collections[r];for(var a in e){var m=e[a];if(s(m))return m}}};Connection.prototype._firstQuery=function(s){for(var r in this.queries){var e=this.queries[r];if(s(e))return e}};Connection.prototype._firstSnapshotRequest=function(){for(var s in this._snapshotRequests)return this._snapshotRequests[s]};Connection.prototype.fetchSnapshot=function(s,r,e,a){typeof e=="function"&&(a=e,e=null);var m=this.nextSnapshotRequestId++,h=new SnapshotVersionRequest(this,m,s,r,e,a);this._snapshotRequests[h.requestId]=h,h.send()};Connection.prototype.fetchSnapshotByTimestamp=function(s,r,e,a){typeof e=="function"&&(a=e,e=null);var m=this.nextSnapshotRequestId++,h=new SnapshotTimestampRequest(this,m,s,r,e,a);this._snapshotRequests[h.requestId]=h,h.send()};Connection.prototype._handleSnapshotFetch=function(s,r){var e=this._snapshotRequests[r.id];e&&(delete this._snapshotRequests[r.id],e._handleResponse(s,r))};Connection.prototype._handleLegacyInit=function(s){if(s.protocolMinor)return this._initializeHandshake();this._initialize(s)};Connection.prototype._initializeHandshake=function(){this.send({a:"hs",id:this.id})};Connection.prototype._handleHandshake=function(s,r){if(s)return this.emit("error",s);this._initialize(r)};Connection.prototype._initialize=function(s){if(this.state==="connecting"){if(s.protocol!==1)return this.emit("error",new ShareDBError(ERROR_CODE.ERR_PROTOCOL_VERSION_NOT_SUPPORTED,"Unsupported protocol version: "+s.protocol));if(types.map[s.type]!==types.defaultType)return this.emit("error",new ShareDBError(ERROR_CODE.ERR_DEFAULT_TYPE_MISMATCH,s.type+" does not match the server default type"));if(typeof s.id!="string")return this.emit("error",new ShareDBError(ERROR_CODE.ERR_CLIENT_ID_BADLY_FORMED,"Client id must be a string"));this.id=s.id,this._setState("connected")}};Connection.prototype.getPresence=function(s){var r=this;return util.digOrCreate(this._presences,s,function(){return new Presence(r,s)})};Connection.prototype.getDocPresence=function(s,r){var e=DocPresence.channel(s,r),a=this;return util.digOrCreate(this._presences,e,function(){return new DocPresence(a,s,r)})};Connection.prototype._sendPresenceAction=function(s,r,e){this._addPresence(e);var a={a:s,ch:e.channel,seq:r};return this.send(a),a.seq};Connection.prototype._addPresence=function(s){util.digOrCreate(this._presences,s.channel,function(){return s})};Connection.prototype._handlePresenceSubscribe=function(s,r){var e=util.dig(this._presences,r.ch);e&&e._handleSubscribe(s,r.seq)};Connection.prototype._handlePresenceUnsubscribe=function(s,r){var e=util.dig(this._presences,r.ch);e&&e._handleUnsubscribe(s,r.seq)};Connection.prototype._handlePresence=function(s,r){var e=util.dig(this._presences,r.ch);e&&e._receiveUpdate(s,r)};Connection.prototype._handlePresenceRequest=function(s,r){var e=util.dig(this._presences,r.ch);e&&e._broadcastAllLocalPresence(s,r)};client.Connection=connection;client.Doc=doc;client.Error=error;client.Query=query;client.types=types$2;client.logger=logger_1;var sharedbAceBinding={},logdown_min={exports:{}};(function(module,exports){(function(s,r){module.exports=r()})(window,function(){return function(s){var r={};function e(a){if(r[a])return r[a].exports;var m=r[a]={i:a,l:!1,exports:{}};return s[a].call(m.exports,m,m.exports,e),m.l=!0,m.exports}return e.m=s,e.c=r,e.d=function(a,m,h){e.o(a,m)||Object.defineProperty(a,m,{enumerable:!0,get:h})},e.r=function(a){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(a,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(a,"__esModule",{value:!0})},e.t=function(a,m){if(1&m&&(a=e(a)),8&m||4&m&&typeof a=="object"&&a&&a.__esModule)return a;var h=Object.create(null);if(e.r(h),Object.defineProperty(h,"default",{enumerable:!0,value:a}),2&m&&typeof a!="string")for(var p in a)e.d(h,p,function(u){return a[u]}.bind(null,p));return h},e.n=function(a){var m=a&&a.__esModule?function(){return a.default}:function(){return a};return e.d(m,"a",m),m},e.o=function(a,m){return Object.prototype.hasOwnProperty.call(a,m)},e.p="",e(e.s=0)}([function(s,r,e){var a,m=e(1)(),h=e(3),p=e(5),u=e(8)();m.prefixColors=["#F2777A","#F99157","#FFCC66","#99CC99","#66CCCC","#6699CC","#CC99CC"],m._setPrefixRegExps=function(){try{u.localStorage&&typeof u.localStorage.getItem("debug")=="string"&&(m._prefixRegExps=[],u.localStorage.getItem("debug").split(",").forEach(function(c){var f="enable";(c=c.trim())[0]==="-"&&(c=c.substr(1),f="disable");var n=m._prepareRegExpForPrefixSearch(c);m._prefixRegExps.push({type:f,regExp:n})}))}catch{}},m._getNextPrefixColor=(a=0,function(){return a+=1,m.prefixColors[a%m.prefixColors.length]}),m.prototype._getDecoratedPrefix=function(){var c=[];return p()?(c.push("%c"+this.opts.prefix+"%c "),c.push("color:"+this.opts.prefixColor+"; font-weight:bold;","")):c.push("["+this.opts.prefix+"] "),c},m.prototype._prepareOutput=function(c){var f,n=this._getDecoratedPrefix();return typeof c[0]=="string"?this.opts.markdown&&p()?(f=h.parse(c[0]),n[0]=n[0]+f.text,n=n.concat(f.styles)):n[0]=n[0]+c[0]:n.push(c[0]),1<c.length&&(n=n.concat(c.slice(1))),n},m._setPrefixRegExps(),s.exports=m},function(s,r,e){var a=e(2);s.exports=function(){function m(h,p){return this instanceof m?m._isPrefixAlreadyInUse(h)?m._getInstanceByPrefix(h):(this.opts=m._normalizeOpts(h,p),this.state=m._getInitialState(this.opts),m._decorateLoggerMethods(this),m._instances.push(this),this):new m(h,p)}return m.transports=[],m._instances=[],m._prefixRegExps=[],m._prepareRegExpForPrefixSearch=function(h){return new RegExp("^"+h.replace(/\*/g,".*?")+"$")},m._isPrefixAlreadyInUse=function(h){return m._instances.some(function(p){return p.opts.prefix===h})},m._getInstanceByPrefix=function(h){return m._instances.filter(function(p){return p.opts.prefix===h})[0]},m._normalizeOpts=function(h,p){if(typeof h!="string")throw new TypeError("prefix must be a string");var u=(p=p||{}).markdown===void 0||!!p.markdown,c=p.prefixColor||m._getNextPrefixColor();return{logger:p.logger||console,markdown:u,plaintext:!!p.plaintext,prefix:h,prefixColor:c}},m._getInitialState=function(h){return{isEnabled:m._getEnableState(h)}},m._getEnableState=function(h){var p=!1;return m._prefixRegExps.forEach(function(u){u.type==="enable"&&u.regExp.test(h.prefix)?p=!0:u.type==="disable"&&u.regExp.test(h.prefix)&&(p=!1)}),p},m._decorateLoggerMethods=function(h){var p=h.opts.logger,u=Object.keys(p).filter(function(c){return typeof p[c]=="function"});u.length===0&&(u=["debug","log","warn","error","info"]),u.forEach(function(c){h[c]=function(){var f=a(arguments),n=this.opts.prefix;if(m.transports.length){var t="["+n+"] "+f.filter(function(l){return typeof l!="object"}).join(" ");m.transports.forEach(function(l){l({state:this.state,instance:n,level:c,args:f,msg:t})}.bind(this))}if(this.state.isEnabled){var o=this._prepareOutput(f,c);p[c].apply(p,o)}}})},m}},function(s,r){s.exports=function(e){return Array.prototype.slice.call(e,0)}},function(s,r,e){var a=[];function m(p){return function(u){return a.push(p),a.push(""),"%c"+u+"%c"}}var h=new(e(4))({renderer:{"*":m("font-weight:bold;"),_:m("font-style:italic;"),"`":m("background-color:rgba(255,204,102, 0.1);color:#FFCC66;padding:2px 5px;border-radius:2px;")}});s.exports={parse:function(p){var u={text:h.parse(p),styles:[].concat(a)};return a.length=0,u}}},function(s,r){var e=/([_*`\\]|[^_*`\\]+)/g,a=/[_*`]/;function m(p){this.renderer=p.renderer}function h(p){return a.test(p)}m.prototype.parse=function(p){if(p==="")return"";var u,c,f,n=p.match(e),t=this.renderer,o="",l=[],d={},v=0;function y(k){for(var b="";u&&u.tag!==k;)b=u.tag+u.text+b,d[u.tag]=!1,u=l.pop();return b}for(;f=n[v];){if(c="",v++,h(f))if(d[f])c=y(f),c=t[u.tag](u.text+c),d[f]=!1,u=l.pop();else{var x="";if(f==="`"){var E=n.indexOf(f,v);E!==-1&&(o+=y(),x=n.slice(v,E).join(""),v=E)}u&&l.push(u),d[f]=!0,u={tag:f,text:x}}else if((c=f)==="\\"){var T=n[v];(h(T)||T==="\\")&&(c=T,v++)}c&&(u?u.text+=c:o+=c,c="")}return o+y()},s.exports=m},function(s,r,e){var a=e(6),m=e(7);s.exports=function(){return a()||m()}},function(s,r){s.exports=function(){try{return"WebkitAppearance"in document.documentElement.style&&!/Edge/.test(navigator.userAgent)}catch{return!1}}},function(s,r){s.exports=function(){try{return/firefox\/(\d+)/i.test(navigator.userAgent)}catch{return!1}}},function(s,r,e){(function(a){function m(h,p){return typeof h=="object"&&h.self===h&&h||typeof p=="object"&&p.global===p&&p||this}s.exports=m.bind(this,self,a),s.exports.getGlobal=m}).call(this,e(9))},function(ob,pb){var qb;qb=function(){return this}();try{qb=qb||Function("return this")()||eval("this")}catch(s){typeof window=="object"&&(qb=window)}ob.exports=qb}])})})(logdown_min);var logdown_minExports=logdown_min.exports;(function(s){Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var r=e(logdown_minExports);function e(o){return o&&o.__esModule?o:{default:o}}function a(o,l){if(!(o instanceof l))throw new TypeError("Cannot call a class as a function")}function m(o,l){for(var d=0;d<l.length;d++){var v=l[d];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(o,v.key,v)}}function h(o,l,d){return l&&m(o.prototype,l),d&&m(o,d),o}function p(o,l){var d;if(typeof Symbol>"u"||o[Symbol.iterator]==null){if(Array.isArray(o)||(d=u(o))||l&&o&&typeof o.length=="number"){d&&(o=d);var v=0,y=function(){};return{s:y,n:function(){return v>=o.length?{done:!0}:{done:!1,value:o[v++]}},e:function(b){throw b},f:y}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var x=!0,E=!1,T;return{s:function(){d=o[Symbol.iterator]()},n:function(){var b=d.next();return x=b.done,b},e:function(b){E=!0,T=b},f:function(){try{!x&&d.return!=null&&d.return()}finally{if(E)throw T}}}}function u(o,l){if(o){if(typeof o=="string")return c(o,l);var d=Object.prototype.toString.call(o).slice(8,-1);if(d==="Object"&&o.constructor&&(d=o.constructor.name),d==="Map"||d==="Set")return Array.from(o);if(d==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(d))return c(o,l)}}function c(o,l){(l==null||l>o.length)&&(l=o.length);for(var d=0,v=new Array(l);d<l;d++)v[d]=o[d];return v}function f(o,l){var d=p(l),v;try{for(d.s();!(v=d.n()).done;){var y=v.value;o=o[y]}}catch(x){d.e(x)}finally{d.f()}return o}var n=function(){function o(l){var d=this;a(this,o),this.editor=l.ace,this.editor.id="".concat(l.id,"-").concat(l.path),this.editor.$blockScrolling=1/0,this.session=this.editor.getSession(),this.newline=this.session.getDocument().getNewLineCharacter(),this.path=l.path,this.doc=l.doc,this.pluginWS=l.pluginWS,this.plugins=l.plugins||[],this.onError=l.onError,this.logger=new r.default("shareace"),this.plugins.forEach(function(v){v(d.pluginWS,d.editor)}),this.suppress=!1,this.setInitialValue(),this.$onLocalChange=this.onLocalChange.bind(this),this.$onRemoteChange=this.onRemoteChange.bind(this),this.$onRemoteReload=this.onRemoteReload.bind(this),this.listen()}return h(o,[{key:"setInitialValue",value:function(){this.suppress=!0,this.session.setValue(f(this.doc.data,this.path)),this.suppress=!1}},{key:"listen",value:function(){this.session.on("change",this.$onLocalChange),this.doc.on("op",this.$onRemoteChange),this.doc.on("load",this.$onRemoteReload)}},{key:"unlisten",value:function(){this.session.removeListener("change",this.$onLocalChange),this.doc.off("op",this.$onRemoteChange),this.doc.off("load",this.$onRemoteReload)}},{key:"deltaTransform",value:function(d){var v=this.session.getDocument(),y={},x=v.positionToIndex(d.start),E=v.positionToIndex(d.end);y.p=this.path.concat(x),this.logger.state.isEnabled&&this.logger.log("start: ".concat(x," end: ").concat(E));var T;if(d.action==="insert")T="si";else if(d.action==="remove")T="sd";else throw new Error("action ".concat(T," not supported"));var k=d.lines.join(`
`);return y[T]=k,y}},{key:"opTransform",value:function(d){var v=this;function y(E){var T=E.p[E.p.length-1],k=v.session.doc.indexToPosition(T,0),b=k,S,A,C;if("sd"in E){S="remove",A=E.sd.split(`
`);var R=A.reduce(function(w,$){return w+$.length},A.length-1);C=v.session.doc.indexToPosition(T+R,0)}else if("si"in E)S="insert",A=E.si.split(`
`),A.length===1?C={row:b.row,column:b.column+E.si.length}:C={row:b.row+(A.length-1),column:A[A.length-1].length};else throw new Error("Invalid Operation: ".concat(JSON.stringify(E)));var g={start:b,end:C,action:S,lines:A};return g}var x=d.map(y);return x}},{key:"onLocalChange",value:function(d){var v=this;try{if(this.logger.state.isEnabled&&(this.logger.log("*local*: fired ".concat(Date.now())),this.logger.log("*local*: delta received: ".concat(JSON.stringify(d))),this.suppress&&this.logger.log("*local*: local delta, _skipping_")),this.suppress)return;var y=this.deltaTransform(d);this.logger.state.isEnabled&&this.logger.log("*local*: transformed op: ".concat(JSON.stringify(y)));var x=function(T){T&&v.onError&&v.onError(T),v.logger.state.isEnabled&&(T?v.logger.log("*local*: op error: ".concat(T)):v.logger.log("*local*: op submitted"))};if(!this.doc.type)return;this.doc.submitOp(y,{source:this},x)}catch(E){this.onError&&this.onError(E)}}},{key:"onRemoteChange",value:function(d,v){try{var y=this,x=d[0].p.slice(0,d[0].p.length-1).toString();if(this.logger.state.isEnabled&&(this.logger.log("*remote*: fired ".concat(Date.now())),this.logger.log(x)),v===y){this.logger.state.isEnabled&&this.logger.log("*remote*: op origin is self; _skipping_");return}else if(x!==this.path.toString()){this.logger.log("*remote*: not from my path; _skipping_");return}var E=this.opTransform(d);this.logger.state.isEnabled&&(this.logger.log("*remote*: op received: ".concat(JSON.stringify(d))),this.logger.log("*remote*: transformed delta: ".concat(JSON.stringify(E)))),y.suppress=!0,y.session.getDocument().applyDeltas(E),y.suppress=!1,this.logger.state.isEnabled&&(this.logger.log("*remote*: session value"),this.logger.log(JSON.stringify(this.session.getValue())),this.logger.log("*remote*: delta applied"))}catch(T){this.onError&&this.onError(T)}}},{key:"onRemoteReload",value:function(){this.logger.log("*remote*: reloading document"),this.setInitialValue()}}]),o}(),t=n;s.default=t})(sharedbAceBinding);(function(s){Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var r=h(require$$0),e=h(eventEmitterEs6),a=h(client),m=h(sharedbAceBinding);function h(k){return k&&k.__esModule?k:{default:k}}function p(k){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?p=function(S){return typeof S}:p=function(S){return S&&typeof Symbol=="function"&&S.constructor===Symbol&&S!==Symbol.prototype?"symbol":typeof S},p(k)}function u(k,b){if(!(k instanceof b))throw new TypeError("Cannot call a class as a function")}function c(k,b){for(var S=0;S<b.length;S++){var A=b[S];A.enumerable=A.enumerable||!1,A.configurable=!0,"value"in A&&(A.writable=!0),Object.defineProperty(k,A.key,A)}}function f(k,b,S){return b&&c(k.prototype,b),S&&c(k,S),k}function n(k,b){if(typeof b!="function"&&b!==null)throw new TypeError("Super expression must either be null or a function");k.prototype=Object.create(b&&b.prototype,{constructor:{value:k,writable:!0,configurable:!0}}),b&&t(k,b)}function t(k,b){return t=Object.setPrototypeOf||function(A,C){return A.__proto__=C,A},t(k,b)}function o(k){var b=v();return function(){var A=y(k),C;if(b){var R=y(this).constructor;C=Reflect.construct(A,arguments,R)}else C=A.apply(this,arguments);return l(this,C)}}function l(k,b){return b&&(p(b)==="object"||typeof b=="function")?b:d(k)}function d(k){if(k===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return k}function v(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function y(k){return y=Object.setPrototypeOf?Object.getPrototypeOf:function(S){return S.__proto__||Object.getPrototypeOf(S)},y(k)}function x(k){this.message=k,this.name="IllegalArgumentException"}var E=function(k){n(S,k);var b=o(S);function S(A,C){var R;if(u(this,S),R=b.call(this),R.id=A,C.pluginWsUrl!==null&&(R.pluginWS=new r.default(C.pluginWsUrl)),C.WsUrl===null)throw new x("wsUrl not provided.");R.WS=new r.default(C.WsUrl);var g=new a.default.Connection(R.WS);if(C.namespace===null)throw new x("namespace not provided.");var w=C.namespace,$=g.get(w,A),L=function(O){if(O)throw O;if(!$.type)throw new Error("ShareDB document uninitialized. Please check if you have the correct id or that you have initialized the document in the server.");R.emit("ready")};return $.subscribe(L),R.doc=$,R.connections={},R}return f(S,[{key:"add",value:function(C,R,g){var w=this,$=R||[],L=new m.default({ace:C,doc:this.doc,path:$,pluginWS:this.pluginWS,id:this.id,plugins:g,onError:function(O){return w.emit("error",R,O)}});this.connections[R.join("-")]=L}}]),S}(e.default),T=E;s.default=T})(sharedbAce$1);const sharedbAce=getDefaultExportFromCjs(sharedbAce$1),useShareAce=(s,r,e,a)=>{const m=reactExports.useRef(s);m.current=s;const{editorSessionId:h}=s;reactExports.useEffect(()=>{if(!h)return;const p=a.current.editor,u=new sharedbAce(h,{WsUrl:getSessionUrl(h,!0),pluginWsUrl:null,namespace:"sa"});u.on("ready",()=>{u.add(p,[],[]),m.current.handleSetSharedbConnected(!0)}),u.on("error",(t,o)=>{console.error("ShareAce error",o),captureException(o)});const c=u.WS;let f;return f=setInterval(async()=>{if(u!==null)try{await checkSessionIdExists(h)||(clearInterval(f),c.close())}catch{c.reconnect()}},5e3),c.addEventListener("open",()=>{m.current.handleSetSharedbConnected(!0)}),c.addEventListener("close",()=>{m.current.handleSetSharedbConnected(!1)}),()=>{clearInterval(f);for(const t of Object.values(u.connections))t.unlisten();u.WS.close()}},[h,a])},useTypeInference=(s,r,e,a)=>{const{sourceChapter:m,handleSendReplInputToOutput:h}=s,p=reactExports.useCallback(()=>{const u=a.current.editor,c=u.getValue(),f=u.getCursorPosition(),n=u.session.getTokenAt(f.row,f.column),t=l=>l.split(`
`).filter(v=>v!=="").map(v=>"// "+v).join(`
`);let o;if(h){if(f&&n){if(n.type==="comment")return;const l=distExports.getTypeInformation(c,distExports.createContext(m),{line:f.row+1,column:f.column},n.value);o=t(l),l.length===0&&(o="// type information not found")}else o="// invalid token. Please put cursor on an identifier.";h(o)}},[a,h,m]);e.typeInferenceDisplay=p};function HighlightRulesSelector_native(s,r=types$3.Variant.DEFAULT,e="NONE",a=[]){function m(p,u,c){const f=p("../lib/oop"),n=p("./doc_comment_highlight_rules").DocCommentHighlightRules,t=p("./text_highlight_rules").TextHighlightRules,o="[a-zA-Z\\$_¡-￿][a-zA-Z\\d\\$_¡-￿]*";r===types$3.Variant.DEFAULT?s.toString():s.toString()+""+r;const l=()=>"window|document",d=function(x){const E=this.createKeywordMapper({"variable.language":"implements|interface|package|private|protected|public|static|"+l(),keyword:"Array|Boolean|Date|Function|Iterator|Number|Object|RegExp|String|Proxy|Namespace|QName|XML|XMLList|ArrayBuffer|Float32Array|Float64Array|Int16Array|Int32Array|Int8Array|Uint16Array|Uint32Array|Uint8Array|Uint8ClampedArray|Error|EvalError|InternalError|RangeError|ReferenceError|StopIteration|SyntaxError|TypeError|URIError|decodeURI|decodeURIComponent|encodeURI|encodeURIComponent|isFinite|isNaN|parseFloat|parseInt|Math|this|arguments|prototypeyield|get|set|async|await|enum|eval|true|false|null|Infinity|NaN|undefined|break|case|continue|default|delete|do|else|finally|for|if|in|of|instanceof|new|return|switch|throw|try|typeof|while|with|debugger|escape|with|extends|super|export","storage.type":"const|let|var|function|import|class|catch","support.function":"alert"},"identifier"),T="case|do|else|finally|in|instanceof|return|throw|try|typeof|yield|void",k="\\\\(?:x[0-9a-fA-F]{2}|u[0-9a-fA-F]{4}|u{[0-9a-fA-F]{1,6}}|[0-2][0-7]{0,2}|3[0-7][0-7]?|[4-7][0-7]?|.)";this.$rules={no_regex:[n.getStartRule("doc-start"),y("no_regex"),{token:"string",regex:"'(?=.)",next:"qstring"},{token:"string",regex:'"(?=.)',next:"qqstring"},{token:"constant.numeric",regex:/0(?:[xX][0-9a-fA-F]+|[oO][0-7]+|[bB][01]+)\b/},{token:"constant.numeric",regex:/(?:\d\d*(?:\.\d*)?|\.\d+)(?:[eE][+-]?\d+\b)?/},{token:["storage.type","punctuation.operator","support.function","punctuation.operator","entity.name.function","text","keyword.operator"],regex:"("+o+")(\\.)(prototype)(\\.)("+o+")(\\s*)(=)",next:"function_arguments"},{token:["storage.type","punctuation.operator","entity.name.function","text","keyword.operator","text","storage.type","text","paren.lparen"],regex:"("+o+")(\\.)("+o+")(\\s*)(=)(\\s*)(function)(\\s*)(\\()",next:"function_arguments"},{token:["entity.name.function","text","keyword.operator","text","storage.type","text","paren.lparen"],regex:"("+o+")(\\s*)(=)(\\s*)(function)(\\s*)(\\()",next:"function_arguments"},{token:["storage.type","punctuation.operator","entity.name.function","text","keyword.operator","text","storage.type","text","entity.name.function","text","paren.lparen"],regex:"("+o+")(\\.)("+o+")(\\s*)(=)(\\s*)(function)(\\s+)(\\w+)(\\s*)(\\()",next:"function_arguments"},{token:["storage.type","text","entity.name.function","text","paren.lparen"],regex:"(function)(\\s+)("+o+")(\\s*)(\\()",next:"function_arguments"},{token:["entity.name.function","text","punctuation.operator","text","storage.type","text","paren.lparen"],regex:"("+o+")(\\s*)(:)(\\s*)(function)(\\s*)(\\()",next:"function_arguments"},{token:["text","text","storage.type","text","paren.lparen"],regex:"(:)(\\s*)(function)(\\s*)(\\()",next:"function_arguments"},{token:"keyword",regex:`from(?=\\s*('|"))`},{token:"keyword",regex:"(?:"+T+")\\b",next:"start"},{token:["support.constant"],regex:/that\b/},{token:E,regex:o},{token:"variable.language",regex:/[.](?![.])/,next:"property"},{token:"storage.type",regex:/=>/},{token:"keyword.operator",regex:/--|\+\+|\.{3}|===|==|=|!=|!==|<+=?|>+=?|!|&&|\|\||\?:|[!$%&*+\-~\/^]=?/,next:"start"},{token:"punctuation.operator",regex:/[?:,;.]/,next:"start"},{token:"paren.lparen",regex:/[\[({]/,next:"start"},{token:"paren.rparen",regex:/[\])}]/},{token:"comment",regex:/^#!.*$/}],property:[{token:"text",regex:"\\s+"},{token:["storage.type","punctuation.operator","entity.name.function","text","keyword.operator","text","storage.type","text","entity.name.function","text","paren.lparen"],regex:"("+o+")(\\.)("+o+")(\\s*)(=)(\\s*)(function)(?:(\\s+)(\\w+))?(\\s*)(\\()",next:"function_arguments"},{token:"punctuation.operator",regex:/[.](?![.])/},{token:"variable.language",regex:/(s(?:h(?:ift|ow(?:Mod(?:elessDialog|alDialog)|Help))|croll(?:X|By(?:Pages|Lines)?|Y|To)?|t(?:op|rike)|i(?:n|zeToContent|debar|gnText)|ort|u(?:p|b(?:str(?:ing)?)?)|pli(?:ce|t)|e(?:nd|t(?:Re(?:sizable|questHeader)|M(?:i(?:nutes|lliseconds)|onth)|Seconds|Ho(?:tKeys|urs)|Year|Cursor|Time(?:out)?|Interval|ZOptions|Date|UTC(?:M(?:i(?:nutes|lliseconds)|onth)|Seconds|Hours|Date|FullYear)|FullYear|Active)|arch)|qrt|lice|avePreferences|mall)|h(?:ome|andleEvent)|navigate|c(?:har(?:CodeAt|At)|o(?:s|n(?:cat|textual|firm)|mpile)|eil|lear(?:Timeout|Interval)?|a(?:ptureEvents|ll)|reate(?:StyleSheet|Popup|EventObject))|t(?:o(?:GMTString|S(?:tring|ource)|U(?:TCString|pperCase)|Lo(?:caleString|werCase))|est|a(?:n|int(?:Enabled)?))|i(?:s(?:NaN|Finite)|ndexOf|talics)|d(?:isableExternalCapture|ump|etachEvent)|u(?:n(?:shift|taint|escape|watch)|pdateCommands)|j(?:oin|avaEnabled)|p(?:o(?:p|w)|ush|lugins.refresh|a(?:ddings|rse(?:Int|Float)?)|r(?:int|ompt|eference))|e(?:scape|nableExternalCapture|val|lementFromPoint|x(?:p|ec(?:Script|Command)?))|valueOf|UTC|queryCommand(?:State|Indeterm|Enabled|Value)|f(?:i(?:nd|le(?:ModifiedDate|Size|CreatedDate|UpdatedDate)|xed)|o(?:nt(?:size|color)|rward)|loor|romCharCode)|watch|l(?:ink|o(?:ad|g)|astIndexOf)|a(?:sin|nchor|cos|t(?:tachEvent|ob|an(?:2)?)|pply|lert|b(?:s|ort))|r(?:ou(?:nd|teEvents)|e(?:size(?:By|To)|calc|turnValue|place|verse|l(?:oad|ease(?:Capture|Events)))|andom)|g(?:o|et(?:ResponseHeader|M(?:i(?:nutes|lliseconds)|onth)|Se(?:conds|lection)|Hours|Year|Time(?:zoneOffset)?|Da(?:y|te)|UTC(?:M(?:i(?:nutes|lliseconds)|onth)|Seconds|Hours|Da(?:y|te)|FullYear)|FullYear|A(?:ttention|llResponseHeaders)))|m(?:in|ove(?:B(?:y|elow)|To(?:Absolute)?|Above)|ergeAttributes|a(?:tch|rgins|x))|b(?:toa|ig|o(?:ld|rderWidths)|link|ack))\b(?=\()/},{token:"variable.language.dom",regex:/(s(?:ub(?:stringData|mit)|plitText|e(?:t(?:NamedItem|Attribute(?:Node)?)|lect))|has(?:ChildNodes|Feature)|namedItem|c(?:l(?:ick|o(?:se|neNode))|reate(?:C(?:omment|DATASection|aption)|T(?:Head|extNode|Foot)|DocumentFragment|ProcessingInstruction|E(?:ntityReference|lement)|Attribute))|tabIndex|i(?:nsert(?:Row|Before|Cell|Data)|tem)|open|delete(?:Row|C(?:ell|aption)|T(?:Head|Foot)|Data)|focus|write(?:ln)?|a(?:dd|ppend(?:Child|Data))|re(?:set|place(?:Child|Data)|move(?:NamedItem|Child|Attribute(?:Node)?)?)|get(?:NamedItem|Element(?:sBy(?:Name|TagName|ClassName)|ById)|Attribute(?:Node)?)|blur)\b(?=\()/},{token:"support.constant",regex:/(s(?:ystemLanguage|cr(?:ipts|ollbars|een(?:X|Y|Top|Left))|t(?:yle(?:Sheets)?|atus(?:Text|bar)?)|ibling(?:Below|Above)|ource|uffixes|e(?:curity(?:Policy)?|l(?:ection|f)))|h(?:istory|ost(?:name)?|as(?:h|Focus))|y|X(?:MLDocument|SLDocument)|n(?:ext|ame(?:space(?:s|URI)|Prop))|M(?:IN_VALUE|AX_VALUE)|c(?:haracterSet|o(?:n(?:structor|trollers)|okieEnabled|lorDepth|mp(?:onents|lete))|urrent|puClass|l(?:i(?:p(?:boardData)?|entInformation)|osed|asses)|alle(?:e|r)|rypto)|t(?:o(?:olbar|p)|ext(?:Transform|Indent|Decoration|Align)|ags)|SQRT(?:1_2|2)|i(?:n(?:ner(?:Height|Width)|put)|ds|gnoreCase)|zIndex|o(?:scpu|n(?:readystatechange|Line)|uter(?:Height|Width)|p(?:sProfile|ener)|ffscreenBuffering)|NEGATIVE_INFINITY|d(?:i(?:splay|alog(?:Height|Top|Width|Left|Arguments)|rectories)|e(?:scription|fault(?:Status|Ch(?:ecked|arset)|View)))|u(?:ser(?:Profile|Language|Agent)|n(?:iqueID|defined)|pdateInterval)|_content|p(?:ixelDepth|ort|ersonalbar|kcs11|l(?:ugins|atform)|a(?:thname|dding(?:Right|Bottom|Top|Left)|rent(?:Window|Layer)?|ge(?:X(?:Offset)?|Y(?:Offset)?))|r(?:o(?:to(?:col|type)|duct(?:Sub)?|mpter)|e(?:vious|fix)))|e(?:n(?:coding|abledPlugin)|x(?:ternal|pando)|mbeds)|v(?:isibility|endor(?:Sub)?|Linkcolor)|URLUnencoded|P(?:I|OSITIVE_INFINITY)|f(?:ilename|o(?:nt(?:Size|Family|Weight)|rmName)|rame(?:s|Element)|gColor)|E|whiteSpace|l(?:i(?:stStyleType|n(?:eHeight|kColor))|o(?:ca(?:tion(?:bar)?|lName)|wsrc)|e(?:ngth|ft(?:Context)?)|a(?:st(?:M(?:odified|atch)|Index|Paren)|yer(?:s|X)|nguage))|a(?:pp(?:MinorVersion|Name|Co(?:deName|re)|Version)|vail(?:Height|Top|Width|Left)|ll|r(?:ity|guments)|Linkcolor|bove)|r(?:ight(?:Context)?|e(?:sponse(?:XML|Text)|adyState))|global|x|m(?:imeTypes|ultiline|enubar|argin(?:Right|Bottom|Top|Left))|L(?:N(?:10|2)|OG(?:10E|2E))|b(?:o(?:ttom|rder(?:Width|RightWidth|BottomWidth|Style|Color|TopWidth|LeftWidth))|ufferDepth|elow|ackground(?:Color|Image)))\b/},{token:"identifier",regex:o},{regex:"",token:"empty",next:"no_regex"}],start:[n.getStartRule("doc-start"),y("start"),{token:"string.regexp",regex:"\\/",next:"regex"},{token:"text",regex:"\\s+|^$",next:"start"},{token:"empty",regex:"",next:"no_regex"}],regex:[{token:"regexp.keyword.operator",regex:"\\\\(?:u[\\da-fA-F]{4}|x[\\da-fA-F]{2}|.)"},{token:"string.regexp",regex:"/[sxngimy]*",next:"no_regex"},{token:"invalid",regex:/\{\d+\b,?\d*\}[+*]|[+*$^?][+*]|[$^][?]|\?{3,}/},{token:"constant.language.escape",regex:/\(\?[:=!]|\)|\{\d+\b,?\d*\}|[+*]\?|[()$^+*?.]/},{token:"constant.language.delimiter",regex:/\|/},{token:"constant.language.escape",regex:/\[\^?/,next:"regex_character_class"},{token:"empty",regex:"$",next:"no_regex"},{defaultToken:"string.regexp"}],regex_character_class:[{token:"regexp.charclass.keyword.operator",regex:"\\\\(?:u[\\da-fA-F]{4}|x[\\da-fA-F]{2}|.)"},{token:"constant.language.escape",regex:"]",next:"regex"},{token:"constant.language.escape",regex:"-"},{token:"empty",regex:"$",next:"no_regex"},{defaultToken:"string.regexp.charachterclass"}],function_arguments:[{token:"variable.parameter",regex:o},{token:"punctuation.operator",regex:"[, ]+"},{token:"punctuation.operator",regex:"$"},{token:"empty",regex:"",next:"no_regex"}],qqstring:[{token:"constant.language.escape",regex:k},{token:"string",regex:"\\\\$",consumeLineEnd:!0},{token:"string",regex:'"|$',next:"no_regex"},{defaultToken:"string"}],qstring:[{token:"constant.language.escape",regex:k},{token:"string",regex:"\\\\$",consumeLineEnd:!0},{token:"string",regex:"'|$",next:"no_regex"},{defaultToken:"string"}]},(!x||!x.noES6)&&(this.$rules.no_regex.unshift({regex:"[{}]",onMatch:function(b,S,A){if(this.next=b=="{"?this.nextState:"",b=="{"&&A.length)A.unshift("start",S);else if(b=="}"&&A.length&&(A.shift(),this.next=A.shift(),this.next.indexOf("string")!=-1||this.next.indexOf("jsx")!=-1))return"paren.quasi.end";return b=="{"?"paren.lparen":"paren.rparen"},nextState:"start"},{token:"string.quasi.start",regex:/`/,push:[{token:"constant.language.escape",regex:k},{token:"paren.quasi.start",regex:/\${/,push:"start"},{token:"string.quasi.end",regex:/`/,next:"pop"},{defaultToken:"string.quasi"}]}),(!x||x.jsx!=!1)&&v.call(this)),this.embedRules(n,"doc-",[n.getEndRule("no_regex")]),this.normalizeRules()};f.inherits(d,t);function v(){const x=o.replace("\\d","\\d\\-"),E={onMatch:function(k,b,S){const A=k.charAt(1)=="/"?2:1;return A==1?(b!=this.nextState?S.unshift(this.next,this.nextState,0):S.unshift(this.next),S[2]++):A==2&&b==this.nextState&&(S[1]--,(!S[1]||S[1]<0)&&(S.shift(),S.shift())),[{type:"meta.tag.punctuation."+(A==1?"":"end-")+"tag-open.xml",value:k.slice(0,A)},{type:"meta.tag.tag-name.xml",value:k.substr(A)}]},regex:"</?"+x,next:"jsxAttributes",nextState:"jsx"};this.$rules.start.unshift(E);const T={regex:"{",token:"paren.quasi.start",push:"start"};this.$rules.jsx=[T,E,{include:"reference"},{defaultToken:"string"}],this.$rules.jsxAttributes=[{token:"meta.tag.punctuation.tag-close.xml",regex:"/?>",onMatch:function(k,b,S){return b==S[0]&&S.shift(),k.length==2&&(S[0]==this.nextState&&S[1]--,(!S[1]||S[1]<0)&&S.splice(0,2)),this.next=S[0]||"start",[{type:this.token,value:k}]},nextState:"jsx"},T,y("jsxAttributes"),{token:"entity.other.attribute-name.xml",regex:x},{token:"keyword.operator.attribute-equals.xml",regex:"="},{token:"text.tag-whitespace.xml",regex:"\\s+"},{token:"string.attribute-value.xml",regex:"'",stateName:"jsx_attr_q",push:[{token:"string.attribute-value.xml",regex:"'",next:"pop"},{include:"reference"},{defaultToken:"string.attribute-value.xml"}]},{token:"string.attribute-value.xml",regex:'"',stateName:"jsx_attr_qq",push:[{token:"string.attribute-value.xml",regex:'"',next:"pop"},{include:"reference"},{defaultToken:"string.attribute-value.xml"}]},E],this.$rules.reference=[{token:"constant.language.escape.reference.xml",regex:"(?:&#[0-9]+;)|(?:&#x[0-9a-fA-F]+;)|(?:&[a-zA-Z0-9_:\\.-]+;)"}]}function y(x){return[{token:"comment",regex:/\/\*/,next:[n.getTagRule(),{token:"comment",regex:"\\*\\/",next:x||"pop"},{defaultToken:"comment",caseInsensitive:!0}]},{token:"comment",regex:"\\/\\/",next:[n.getTagRule(),{token:"comment",regex:"$|^",next:x||"pop"},{defaultToken:"comment",caseInsensitive:!0}]}]}u.SourceHighlightRules=d}const h=s.toString()+r+e;aceExports.define("ace/mode/source_highlight_rules"+h,["require","exports","module","ace/lib/oop","ace/mode/doc_comment_highlight_rules","ace/mode/text_highlight_rules"],m)}const selectMode=(s,r,e)=>{typeof ace.define.modules[`ace/mode/${getModeString(s,r,e)}`]?.Mode!="function"&&(s!==types$3.Chapter.FULL_JS?HighlightRulesSelector_1(s,r,e,Documentation.externalLibraries[e]):HighlightRulesSelector_native(s,r,e,Documentation.externalLibraries[e]),ModeSelector_1(s,r,e))},getModeString=(s,r,e)=>{switch(s){case types$3.Chapter.HTML:return"html";case types$3.Chapter.FULL_TS:return"typescript";case types$3.Chapter.PYTHON_1:case types$3.Chapter.PYTHON_2:case types$3.Chapter.PYTHON_3:case types$3.Chapter.PYTHON_4:case types$3.Chapter.FULL_PYTHON:return"python";case types$3.Chapter.SCHEME_1:case types$3.Chapter.SCHEME_2:case types$3.Chapter.SCHEME_3:case types$3.Chapter.SCHEME_4:case types$3.Chapter.FULL_SCHEME:return"scheme";default:return`source${s}${r}${e}`}},EventT=["onSelectionChange","onCursorChange","onInput","onLoad","onValidate","onBeforeLoad","onChange","onSelection","onCopy","onPaste","onFocus","onBlur","onScroll"],getMarkers=s=>s.map(r=>({startRow:r[0],startCol:0,endRow:r[1],endCol:1,className:"myMarker",type:"fullLine"})),makeHandleGutterClick=(s,r)=>e=>{const a=e.domEvent.target;if(a.className.indexOf("ace_gutter-cell")===-1||!e.editor.isFocused()||e.clientX>35+a.getBoundingClientRect().left)return;const m=e.getDocumentPosition().row,h=e.editor.session.getLine(m);e.editor.session.getBreakpoints()[m]===void 0&&h.length!==0&&!h.includes("//")&&!h.includes("debugger;")?e.editor.session.setBreakpoint(m,void 0):e.editor.session.clearBreakpoint(m),e.stop(),s(r,e.editor.session.getBreakpoints())},getBreakpointLineNumbers=s=>{const r=[];return s.forEach((e,a)=>{e==="ace_breakpoint"&&r.push(a)}),r},shiftBreakpointsWithCode=(s,r)=>{const e=t=>t.length-t.trimStart().length,a=t=>t.trim().length===0,m=s.session.getBreakpoints(),h=getBreakpointLineNumbers(m),p=[],u=r.start.row,c=r.start.column,f=r.end.row,n=r.lines.length-1;for(const t of h)switch(r.action){case"insert":{let o;if(t<u)o=!1;else if(t===u){const d=s.session.getLine(t);o=e(d)>=c}else o=!0;const l=t+(o?n:0);p.push(l);break}case"remove":{let o;if(t<u)o=!1;else{if(t>u&&t<f)break;if(t===u){const d=s.session.getLine(t);if(a(d))break;o=!1}else if(t===f){const d=s.session.getLine(t-n).substring(c);if(a(d))break;o=!0}else o=!0}const l=t-(o?n:0);p.push(l);break}}s.session.setBreakpoints(p)},displayBreakpoints=(s,r)=>{const e=getBreakpointLineNumbers(r);s.session.setBreakpoints(e)},makeHandleAnnotationChange=s=>()=>{const r=s.getAnnotations();let e=0;for(const a of r)a.type==="info"&&(a.type="error",a.className="ace_error",e++);e!==0&&s.setAnnotations(r)},makeCompleter=s=>({getCompletions:(r,e,a,m,h)=>{if(m&&/\d/.test(m.charAt(0))){h();return}s(a.row+1,a.column,h)}}),moveCursor=(s,r)=>{s.selection.clearSelection(),s.moveCursorToPosition(r),s.renderer.showCursor(),s.renderer.scrollCursorIntoView(r,.5)},handlers$1={goGreen:()=>{}},EditorBase=reactExports.memo(s=>{const r=reactExports.useRef(null),[e,a]=reactExports.useState(void 0),m=reactExports.useRef(s.handleEditorUpdateBreakpoints),h=reactExports.useRef(s.handlePromptAutocomplete),p=r.current?.editor;p!==void 0&&e!==s.filePath&&(s.session.setMode(p.getSession().getMode()),p.setSession(s.session),e!==void 0&&p.focus(),a(s.filePath)),reactExports.useEffect(()=>{m.current=s.handleEditorUpdateBreakpoints,h.current=s.handlePromptAutocomplete},[s.handleEditorUpdateBreakpoints,s.handlePromptAutocomplete]),reactExports.useEffect(()=>{p!==void 0&&displayBreakpoints(p,s.breakpoints)},[p,s.breakpoints]),reactExports.useEffect(()=>(/iPhone|iPad|iPod/.test(navigator.userAgent)&&(document.body.style.position="fixed",document.body.style.width="100%"),()=>{document.body.style.position="",document.body.style.width=""}),[]);const[u,c,f]=[s.sourceChapter||types$3.Chapter.SOURCE_1,s.sourceVariant||types$3.Variant.DEFAULT,s.externalLibraryName||"NONE"];selectMode(u,c,f),reactExports.useLayoutEffect(()=>{if(p===void 0)return;const E=p.getSession();p.on("gutterclick",makeHandleGutterClick((...T)=>m.current(...T),s.editorTabIndex)),E.on("changeAnnotation",makeHandleAnnotationChange(E)),aceExports.require("ace/ext/language_tools").setCompleters([makeCompleter((...T)=>h.current(...T))])},[p,s.editorTabIndex]),reactExports.useLayoutEffect(()=>{if(p===void 0)return;const E=s.newCursorPosition;E&&moveCursor(p,E)},[p,s.newCursorPosition]);const{handleUpdateHasUnsavedChanges:n,handleEditorValueChange:t,isEditorAutorun:o,handleEditorEval:l}=s,d={evaluate:l},v={className:"react-ace",editorProps:{$blockScrolling:1/0},markers:reactExports.useMemo(()=>getMarkers(s.highlightedLines),[s.highlightedLines]),fontSize:17,height:"100%",highlightActiveLine:!1,mode:getModeString(u,c,f),theme:"source",value:s.editorValue,width:"100%",setOptions:{enableBasicAutocompletion:!0,enableLiveAutocompletion:!0,fontFamily:"'Inconsolata', 'Consolas', monospace"},keyboardHandler:s.editorBinding},[y]=reactExports.useState(s.hooks);if(y)for(const E of y)E(s,v,d,r);const{onChange:x}=v;return v.onChange=reactExports.useCallback((E,T)=>{if(!r.current)return;t(s.editorTabIndex,E),shiftBreakpointsWithCode(r.current.editor,T),n&&n(!0);const k=r.current.editor.getSession().getAnnotations();o&&k.length===0&&l(),x!==void 0&&x(E,T)},[t,s.editorTabIndex,n,o,x,l]),v.commands=Object.entries(d).filter(([E,T])=>T).map(([E,T])=>({name:E,bindKey:keyBindings[E],exec:T})),EventT.forEach(E=>{const T=s[E];if(T){const k=v[E];k?v[E]=function(...b){k(...b),T(...b)}:v[E]=T}}),jsxRuntimeExports.jsx(index_esExports.HotKeys,{className:"Editor bp4-card bp4-elevation-0",handlers:handlers$1,children:jsxRuntimeExports.jsx("div",{className:"row editor-react-ace",children:jsxRuntimeExports.jsx(_default,{...v,ref:r})})})}),hooks=[useHighlighting,useNavigation,useTypeInference,useShareAce,useRefactor],Editor=s=>{const[r]=reactExports.useContext(WorkspaceSettingsContext),[e,a]=reactExports.useState({}),m=aceExports.require("ace/mode/javascript").Mode(),h=aceExports.createEditSession(s.editorValue,m);return s.filePath!==void 0&&e[s.filePath]===void 0&&a({...e,[s.filePath]:h}),jsxRuntimeExports.jsx(EditorBase,{...s,session:s.filePath?e[s.filePath]:h,editorBinding:r.editorBinding,hooks})},EditorTab=s=>{const{filePath:r,isActive:e,setActive:a,remove:m}=s,h=p=>{p.stopPropagation(),m()};return jsxRuntimeExports.jsxs(Card,{className:classNames("editor-tab",{selected:e}),onClick:a,children:[r,jsxRuntimeExports.jsx(Icon,{className:"remove-button",icon:IconNames.SMALL_CROSS,onClick:h})]})},getShortestUniqueFilePaths=s=>{const r={},e=s.reduce((a,m)=>({...a,[m]:m.split(path.sep).filter(h=>h!=="")}),{});for(let a=1;Object.keys(r).length<s.length;a++){const m=Object.entries(e).reduce((h,[p,u])=>{const c="/"+u.slice(-a).join("/");return{...h,[c]:(h[c]??[]).concat(p)}},{});Object.entries(m).forEach(([h,p])=>{if(p.length>1)return;const u=p[0];r[u]=h,delete e[u]})}return s.map(a=>r[a])},EditorTabContainer=s=>{const{baseFilePath:r,filePaths:e,activeEditorTabIndex:a,setActiveEditorTabIndex:m,removeEditorTabByIndex:h}=s,p=f=>{f.currentTarget.scrollTo({left:f.currentTarget.scrollLeft+f.deltaY})},u=e.map(f=>f.replace(r,"")),c=getShortestUniqueFilePaths(u);return jsxRuntimeExports.jsx("div",{className:"editor-tab-container",onWheel:p,children:c.map((f,n)=>jsxRuntimeExports.jsx(EditorTab,{filePath:f,isActive:n===a,setActive:()=>m(n),remove:()=>h(n)},n))})},convertEditorTabStateToProps=(s,r)=>({editorTabIndex:r,editorValue:s.value,..._.pick(s,"filePath","highlightedLines","breakpoints","newCursorPosition")}),createNormalEditorTab=s=>r=>jsxRuntimeExports.jsx(Editor,{...s,...r}),createSourcecastEditorTab=s=>r=>jsxRuntimeExports.jsx(SourcecastEditor,{...s,...r}),EditorContainer=s=>{const{baseFilePath:r,isFolderModeEnabled:e,activeEditorTabIndex:a,setActiveEditorTabIndex:m,removeEditorTabByIndex:h,editorTabs:p,...u}=s,c=u.editorVariant==="sourcecast"?createSourcecastEditorTab(u):createNormalEditorTab(u);if(a===null)return jsxRuntimeExports.jsx("div",{className:"editor-container",children:jsxRuntimeExports.jsx("h1",{children:"Double click on a file in the sidebar to start editing!"})});const f=p.map(n=>n.filePath??"UNKNOWN");return jsxRuntimeExports.jsxs("div",{className:"editor-container",children:[e&&jsxRuntimeExports.jsx(EditorTabContainer,{baseFilePath:r??"",activeEditorTabIndex:a,filePaths:f,setActiveEditorTabIndex:m,removeEditorTabByIndex:h}),c(p[a])]})};class McqChooser extends reactExports.PureComponent{constructor(){super(...arguments),this.onButtonClickFactory=r=>e=>{if(r!==this.props.mcq.answer&&this.props.handleMCQSubmit(r),this.props.mcq.solution!==null&&this.props.mcq.choices[r].hint){const m=jsxRuntimeExports.jsx(Markdown,{className:"markdown-notification",content:this.props.mcq.choices[r].hint});r===this.props.mcq.solution?showSuccessMessage(m,4e3):showWarningMessage(m,4e3)}},this.getButtonIntent=(r,e,a)=>{const m=r===e,h=m&&a!==void 0&&r===a;return a===void 0?Intent.NONE:m&&h?Intent.SUCCESS:m&&!h?Intent.DANGER:Intent.NONE}}render(){const r=this.props.mcq.choices.map((e,a)=>jsxRuntimeExports.jsx(Button,{className:"mcq-option col-xs-12",active:a===this.props.mcq.answer,intent:this.getButtonIntent(a,this.props.mcq.answer,this.props.mcq.solution),onClick:this.onButtonClickFactory(a),minimal:!0,children:jsxRuntimeExports.jsx(Markdown,{content:e.content})},a));return jsxRuntimeExports.jsx("div",{className:"MCQChooser row",children:jsxRuntimeExports.jsx(Card,{className:"mcq-content-parent col-xs-12 middle-xs",children:jsxRuntimeExports.jsx("div",{className:"row mcq-options-parent between-xs",children:r})})})}}function usePrompt(s,{beforeUnload:r}={}){const e=useBlocker(reactExports.useCallback(()=>typeof s=="string"?!window.confirm(s):!1,[s])),a=reactExports.useRef(e.state);reactExports.useEffect(()=>{e.state==="blocked"&&e.reset(),a.current=e.state},[e]),useBeforeUnload(reactExports.useCallback(m=>{r&&typeof s=="string"&&(m.preventDefault(),m.returnValue=s)},[s,r]),{capture:!0})}function Prompt({when:s,message:r,...e}){return usePrompt(s?r:!1,e),null}const ReplInput=s=>{const{onFocus:r,onBlur:e}=s,a=reactExports.useRef(null),m=reactExports.useRef(null),h=s.handleBrowseHistoryDown,p=s.handleBrowseHistoryUp,u=()=>{s.handleReplEval(),m.current&&!s.disableScrolling&&m.current.scrollIntoView()};reactExports.useEffect(()=>{if(!a.current)return;const f=a.current.editor;r&&f.on("focus",()=>r(f)),e&&f.on("blur",e)}),reactExports.useEffect(()=>{!m.current||s.disableScrolling||m.current.clientWidth>=window.innerWidth-50||m.current.scrollIntoView()}),selectMode(s.sourceChapter,s.sourceVariant,s.externalLibrary);const c=()=>s.replButtons;return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(_default,{className:"repl-react-ace react-ace",mode:getModeString(s.sourceChapter,s.sourceVariant,s.externalLibrary),theme:"source",height:"1px",width:"100%",value:s.replValue,onChange:s.handleReplValueChange,commands:[{name:"browseHistoryDown",bindKey:{win:"Down",mac:"Down"},exec:h},{name:"browseHistoryUp",bindKey:{win:"Up",mac:"Up"},exec:p},{name:"evaluate",bindKey:{win:"Shift-Enter",mac:"Shift-Enter"},exec:u}],minLines:1,maxLines:20,fontSize:17,highlightActiveLine:!1,showGutter:!1,showPrintMargin:!1,setOptions:{fontFamily:"'Inconsolata', 'Consolas', monospace"},ref:a}),jsxRuntimeExports.jsx("div",{className:classNames(BUTTON_GROUP,DARK),children:c()}),jsxRuntimeExports.jsx(MediaQuery,{minWidth:769,children:jsxRuntimeExports.jsx("div",{ref:m})})]})},Repl=s=>{const r=s.output.map((e,a)=>jsxRuntimeExports.jsx(Output,{output:e,usingSubst:s.usingSubst??!1,isHtml:s.sourceChapter===types$3.Chapter.HTML},a));return jsxRuntimeExports.jsx("div",{className:"Repl",style:{display:s.hidden?"none":void 0},children:jsxRuntimeExports.jsxs("div",{className:"repl-output-parent",children:[r,!s.inputHidden&&jsxRuntimeExports.jsx(index_esExports.HotKeys,{className:classNames("repl-input-parent","row",CARD,ELEVATION_0),handlers,children:jsxRuntimeExports.jsx(ReplInput,{...s})})]})})},Output=s=>{switch(s.output.type){case"code":return jsxRuntimeExports.jsx(Card,{children:jsxRuntimeExports.jsx(Pre,{className:"code-output",children:s.output.value})});case"running":return jsxRuntimeExports.jsx(Card,{children:jsxRuntimeExports.jsx(Pre,{className:"log-output",children:s.output.consoleLogs.join(`
`)})});case"result":return s.usingSubst&&s.output.value instanceof Array?jsxRuntimeExports.jsx(Card,{children:jsxRuntimeExports.jsx(Pre,{className:"log-output",children:"Check out the Stepper tab!"})}):s.isHtml?jsxRuntimeExports.jsx(Card,{children:jsxRuntimeExports.jsx(Pre,{className:"log-output",children:"Check out the HTML Display tab!"})}):s.output.consoleLogs.length===0?jsxRuntimeExports.jsx(Card,{children:jsxRuntimeExports.jsx(Pre,{className:"result-output",children:s.output.value})}):jsxRuntimeExports.jsxs(Card,{children:[jsxRuntimeExports.jsx(Pre,{className:"log-output",children:s.output.consoleLogs.join(`
`)}),jsxRuntimeExports.jsx(Pre,{className:"result-output",children:s.output.value})]});case"errors":return s.output.consoleLogs.length===0?jsxRuntimeExports.jsx(Card,{children:jsxRuntimeExports.jsx(Pre,{className:"error-output",children:distExports.parseError(s.output.errors)})}):jsxRuntimeExports.jsxs(Card,{children:[jsxRuntimeExports.jsx(Pre,{className:"log-output",children:s.output.consoleLogs.join(`
`)}),jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx(Pre,{className:"error-output",children:distExports.parseError(s.output.errors)})]});default:return jsxRuntimeExports.jsx(Card,{children:"''"})}},handlers={goGreen:()=>{}},requireProvider=s=>{const r={react:React$3,"react-dom":ReactDOM,"react/jsx-runtime":JSXRuntime};if(!(s in r))throw new Error(`Dynamic require of ${s} is not supported`);return r[s]},getDynamicTabs=s=>{const r=s?.context?.moduleContexts;return r?Object.values(r).flatMap(({tabs:e})=>e??[]).map(e=>e(requireProvider)).filter(({toSpawn:e})=>!e||e(s)).map(e=>({...e,body:e.body(s),id:SideContentType.module})):[]},generateIconId=s=>`${s}-icon`,GenericSideContent=s=>{const{tabs:r,onChange:e}=s,[a,m]=React$3.useState(r.beforeDynamicTabs.concat(r.afterDynamicTabs)),h=useTypedSelector(u=>s.workspaceLocation&&u.workspaces[s.workspaceLocation].debuggerContext);React$3.useEffect(()=>{const u=r.beforeDynamicTabs.concat(getDynamicTabs(h||{})).concat(r.afterDynamicTabs);m(u)},[r,h]);const p=React$3.useCallback((u,c,f)=>{const n=t=>{const o=generateIconId(t),l=document.getElementById(o);l&&l.classList.remove("side-content-tab-alert")};e===void 0||e(u,c,f),n(c)},[e]);return s.renderFunction(a,p)},propsAreEqual=(s,r)=>lodashExports.isEqual(s,r),SideBar=s=>{const{tabs:r,isExpanded:e,expandSideBar:a,collapseSideBar:m}=s,[h,p]=React$3.useState(0),u=c=>{if(h===c){e?m():a();return}p(c),a()};return r.length===0?jsxRuntimeExports.jsx("div",{className:"sidebar-container"}):jsxRuntimeExports.jsxs("div",{className:"sidebar-container",children:[jsxRuntimeExports.jsx("div",{className:"sidebar-tab-container",children:r.map((c,f)=>jsxRuntimeExports.jsxs(Card,{className:classNames("sidebar-tab",{selected:e&&h===f}),onClick:()=>u(f),children:[jsxRuntimeExports.jsx(Icon,{className:"sidebar-tab-icon",icon:c.iconName,size:14}),c.label]},f))}),h!==null&&jsxRuntimeExports.jsx(Card,{className:"sidebar-panel",children:r[h].body})]})},assertType=()=>s=>s,generateClassName=s=>s===SideContentType.module||s===SideContentType.htmlDisplay?"side-content-tooltip side-content-tab-alert":"side-content-tooltip",renderTab=(s,r,e,a)=>{const h=s.id===void 0||s.id===SideContentType.module?s.label:s.id,p=jsxRuntimeExports.jsx(Tooltip2,{content:s.label,children:jsxRuntimeExports.jsx("div",{className:generateClassName(s.id),id:generateIconId(h),children:jsxRuntimeExports.jsx(Icon,{icon:s.iconName,iconSize:20})})}),u=assertType()({id:h,title:p,disabled:s.disabled,className:"side-content-tab"});if(!s.body)return jsxRuntimeExports.jsx(Tab,{...u},h);const c=r?{...s.body,props:{...s.body.props,workspaceLocation:r,editorWidth:e,sideContentHeight:a}}:s.body,f=jsxRuntimeExports.jsx("div",{className:"side-content-text",children:c});return jsxRuntimeExports.jsx(Tab,{...u,panel:f},h)},SideContent=({selectedTabId:s,renderActiveTabPanelOnly:r,editorWidth:e,sideContentHeight:a,...m})=>jsxRuntimeExports.jsx(GenericSideContent,{...m,renderFunction:(h,p)=>jsxRuntimeExports.jsx("div",{className:"side-content",children:jsxRuntimeExports.jsx(Card,{children:jsxRuntimeExports.jsx("div",{className:"side-content-tabs",children:jsxRuntimeExports.jsx(Tabs,{id:"side-content-tabs",onChange:p,renderActiveTabPanelOnly:r,selectedTabId:s,children:h.map(u=>renderTab(u,m.workspaceLocation,e,a))})})})})}),SideContent$1=reactExports.memo(SideContent,propsAreEqual),Workspace=s=>{const r=reactExports.useRef(null),e=reactExports.useRef(null),a=reactExports.useRef(null),m=reactExports.useRef(null),h=reactExports.useRef(null),p=reactExports.useRef(null),[u]=useDimensions(e),[c,f]=reactExports.useState(200),[n,t]=reactExports.useState(!0),o=40,l=()=>t(!0),d=()=>t(!1);FocusStyleManager.onlyShowFocusOnTabs(),reactExports.useEffect(()=>{s.sideContentIsResizeable&&h.current===null&&(h.current=p.current.clientHeight)});const v=()=>{const C=(w,$,L,M)=>{const O=L.clientWidth;O!==o&&f(O)},R=s.sideBarProps.tabs.length!==0,g=R?o:"auto";return{enable:R?rightResizeOnly:noResize,minWidth:g,maxWidth:"50%",onResize:E,onResizeStop:C,ref:r,size:{width:R&&n?c:g,height:"100%"},defaultSize:{width:g,height:"100%"}}},y=()=>({className:"resize-editor left-parent",enable:rightResizeOnly,minWidth:0,onResize:T,ref:m,defaultSize:{width:"50%",height:"100%"},as:void 0}),x=()=>({bounds:"parent",className:"resize-side-content",enable:bottomResizeOnly,onResize:k,onResizeStop:(R,g,w)=>s.handleSideContentHeightChange(w.clientHeight)}),E=(C,R,g,w)=>{if(g.clientWidth<100){const M=r.current;if(M===null)throw Error("Reference to SideBar not found when resizing.");M.updateSize({width:o,height:"100%"}),t(!1)}else t(!0)},T=(C,R,g)=>{const L=g.clientWidth/u*100;L>95?m.current.updateSize({width:"100%",height:"100%"}):L<5&&m.current.updateSize({width:"0%",height:"100%"})},k=(C,R,g)=>{h.current=p.current.clientHeight>h.current?p.current.clientHeight:h.current;const w=g.clientHeight,$=g.parentNode.clientHeight;w+h.current+2>$?p.current.style.display="none":p.current.style.display="initial"},b=C=>C.editorContainerProps?jsxRuntimeExports.jsx(EditorContainer,{...C.editorContainerProps}):jsxRuntimeExports.jsx(McqChooser,{...C.mcqProps}),S=jsxRuntimeExports.jsx(SideContent$1,{...s.sideContentProps}),A=jsxRuntimeExports.jsxs(Resizable,{...x(),children:[S,jsxRuntimeExports.jsx("div",{className:"side-content-divider",ref:p})]});return jsxRuntimeExports.jsxs("div",{className:"workspace",children:[jsxRuntimeExports.jsx(Prompt,{when:!!s.hasUnsavedChanges,message:"You have changes that may not be saved. Are you sure you want to leave?"}),jsxRuntimeExports.jsx(ControlBar,{...s.controlBarProps}),jsxRuntimeExports.jsxs("div",{className:"workspace-parent",children:[jsxRuntimeExports.jsx(Resizable,{...v(),children:jsxRuntimeExports.jsx(SideBar,{...s.sideBarProps,isExpanded:n,expandSideBar:l,collapseSideBar:d})}),jsxRuntimeExports.jsxs("div",{className:"row content-parent",ref:e,children:[jsxRuntimeExports.jsx("div",{className:"editor-divider",ref:a}),jsxRuntimeExports.jsx(Resizable,{...y(),children:b(s)}),jsxRuntimeExports.jsxs("div",{className:"right-parent",children:[s.sideContentIsResizeable===void 0||s.sideContentIsResizeable?A:S,jsxRuntimeExports.jsx(Repl,{...s.replProps})]})]})]})]})},rightResizeOnly={right:!0},bottomResizeOnly={bottom:!0},noResize={};export{ControlBar as C,EditorContainer as E,GenericSideContent as G,HighlightRulesSelector_1 as H,ModeSelector_1 as M,Prompt as P,Resizable as R,Workspace as W,_default as _,ControlBarClearButton as a,ControlBarEvalButton as b,convertEditorTabStateToProps as c,ControlBarRunButton as d,createNewSession as e,checkSessionIdExists as f,aceExports as g,Repl as h,index_esExports as i,generateIconId as j,McqChooser as k,propsAreEqual as p};
