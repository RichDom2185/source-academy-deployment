"use strict";(globalThis.webpackChunkfrontend=globalThis.webpackChunkfrontend||[]).push([[184],{22657:(e,t,n)=>{n.d(t,{m:()=>o});var s=n(4245),i=n(49639);function o(e){const t=s.parse(e);for(const[n,s]of Object.entries(t))(0,i.isArray)(s)?t[n]=s.join(","):null===s&&delete t[n];return t}},32184:(e,t,n)=>{n.r(t),n.d(t,{Component:()=>De,default:()=>Fe,handleHash:()=>Te});var s=n(37305),i=n(59118),o=n(65675),r=n(81694),a=n.n(r),l=n(42543),d=n(763),c=n(4235),u=n(72791),h=n(37325),p=n(78687),m=n(57689),g=n(94500),v=n(71594),b=n(17498),x=n(90362),C=n(13152),E=n(89702),y=n(28727),S=n(24334),j=n(95714);var f=n(35772),L=n(5136),k=n(95134),I=n(32881),w=n(60363),T=n(60054),N=n(89360),D=n(27156),F=n(32183),R=n(51411),O=n(95785),P=n(80184);const A=e=>(0,P.jsx)(O.u,{content:"Execution Time",placement:F.Ly.TOP,children:(0,P.jsx)(R.Af,{leftIcon:i.d.TIME,style:{width:80},min:1e3,value:e.execTime,onValueChange:e.handleChangeExecTime})});var M=n(50698),U=n(65047),B=n(17862);const V={INACTIVE:M.S.NONE,SAVED:M.S.PRIMARY,DIRTY:M.S.WARNING},H=e=>{const{isMobileBreakpoint:t}=(0,x.Fs)(),n=e.currentFile?e.isDirty?"DIRTY":"SAVED":"INACTIVE",o=(0,P.jsx)(B.Z,{label:e.currentFile&&e.currentFile.name||"Google Drive",icon:i.d.CLOUD,options:{intent:V[n]},isDisabled:e.isFolderModeEnabled}),r=(0,P.jsx)(B.Z,{label:"Open",icon:i.d.DOCUMENT_OPEN,onClick:e.onClickOpen}),a=(0,P.jsx)(B.Z,{label:"Save",icon:i.d.FLOPPY_DISK,onClick:e.onClickSave,isDisabled:"INACTIVE"===n}),l=(0,P.jsx)(B.Z,{label:"Save as",icon:i.d.SEND_TO,onClick:e.onClickSaveAs}),d=e.loggedInAs&&(0,P.jsx)(O.u,{content:`Logged in as ${e.loggedInAs}`,children:(0,P.jsx)(B.Z,{label:"Log out",icon:i.d.LOG_OUT,onClick:e.onClickLogOut})}),c=e.isFolderModeEnabled?"Currently unsupported in Folder mode":void 0;return(0,P.jsx)(O.u,{content:c,disabled:void 0===c,children:(0,P.jsx)(U.p,{autoFocus:!1,content:(0,P.jsx)("div",{children:(0,P.jsxs)(R.hE,{large:!t,children:[r,a,l,d]})}),onOpening:e.onPopoverOpening,popoverClassName:s.oPt,disabled:e.isFolderModeEnabled,children:o})})};var _=n(722),G=n(78029),z=n(33508),Z=n(44439);function J(e){(0,Z.N9)(`Could not connect: ${e&&e.message||e||"Unknown error"}`)}class $ extends u.PureComponent{constructor(e){super(e),this.inviteInputElem=void 0,this.state={joinElemValue:""},this.handleChange=this.handleChange.bind(this),this.inviteInputElem=u.createRef(),this.selectInviteInputText=this.selectInviteInputText.bind(this)}render(){const e=(0,P.jsxs)(P.Fragment,{children:[(0,P.jsx)("input",{value:this.props.editorSessionId,readOnly:!0,ref:this.inviteInputElem}),(0,P.jsx)(G,{text:""+this.props.editorSessionId,children:(0,P.jsx)(B.Z,{icon:i.d.DUPLICATE,onClick:this.selectInviteInputText})})]}),t=(0,P.jsx)(U.p,{popoverClassName:"Popover-share",inheritDarkTheme:!1,content:e,children:(0,P.jsx)(B.Z,{label:"Invite",icon:i.d.GRAPH,onClick:()=>{""===this.props.editorSessionId&&(0,z.lW)(this.props.getEditorValue()).then((e=>{this.props.handleSetEditorSessionId(e)}),J)}})}),n=(0,P.jsxs)("form",{onSubmit:e=>{e.preventDefault(),(0,z.Ht)(this.state.joinElemValue).then((e=>{e?this.props.handleSetEditorSessionId(this.state.joinElemValue):(this.props.handleSetEditorSessionId(""),(0,Z.N9)("Could not find a session with that ID."))}),(e=>{this.props.handleSetEditorSessionId(""),J(e)}))},children:[(0,P.jsx)("input",{type:"text",value:this.state.joinElemValue,onChange:this.handleChange}),(0,P.jsx)("span",{className:s.oPt,children:(0,P.jsx)(B.Z,{icon:i.d.KEY_ENTER,options:{type:"submit"}})})]}),o=(0,P.jsx)(U.p,{popoverClassName:"Popover-share",inheritDarkTheme:!1,content:n,children:(0,P.jsx)(B.Z,{label:"Join",icon:i.d.LOG_IN})}),r=(0,P.jsx)(B.Z,{label:"Leave",icon:i.d.FEED,onClick:()=>{this.props.handleSetEditorSessionId(""),this.setState({joinElemValue:""})}}),a=this.props.isFolderModeEnabled?"Currently unsupported in Folder mode":void 0;return(0,P.jsx)(O.u,{content:a,disabled:void 0===a,children:(0,P.jsx)(U.p,{content:(0,P.jsxs)(R.v2,{large:!0,children:[t,""===this.props.editorSessionId?o:r]}),disabled:this.props.isFolderModeEnabled,children:(0,P.jsx)(B.Z,{label:"Session",icon:i.d.SOCIAL_MEDIA,options:{iconColor:""===this.props.editorSessionId?void 0:this.props.sharedbConnected?_.w.GREEN3:_.w.RED3},isDisabled:this.props.isFolderModeEnabled})})})}selectInviteInputText(){null!==this.inviteInputElem.current&&(this.inviteInputElem.current.focus(),this.inviteInputElem.current.select())}handleChange(e){this.setState({joinElemValue:e.target.value})}}var Y=n(9631);class q extends u.PureComponent{constructor(e){super(e),this.shareInputElem=void 0,this.selectShareInputText=this.selectShareInputText.bind(this),this.handleChange=this.handleChange.bind(this),this.toggleButton=this.toggleButton.bind(this),this.shareInputElem=u.createRef(),this.state={keyword:"",isLoading:!1}}render(){const e=void 0===this.props.queryString?(0,P.jsx)(R.xv,{children:"Share your programs! Type something into the editor (left), then click on this button again."}):this.props.isSicp?(0,P.jsxs)("div",{children:[(0,P.jsx)("input",{defaultValue:this.props.queryString,readOnly:!0,ref:this.shareInputElem}),(0,P.jsx)(O.u,{content:"Copy link to clipboard",children:(0,P.jsx)(G,{text:this.props.queryString,children:(0,P.jsx)(B.Z,{icon:i.d.DUPLICATE,onClick:this.selectShareInputText})})})]}):(0,P.jsx)(P.Fragment,{children:this.props.shortURL&&"ERROR"!==this.props.shortURL?(0,P.jsxs)("div",{children:[(0,P.jsx)("input",{defaultValue:this.props.shortURL,readOnly:!0,ref:this.shareInputElem}),(0,P.jsx)(O.u,{content:"Copy link to clipboard",children:(0,P.jsx)(G,{text:this.props.shortURL,children:(0,P.jsx)(B.Z,{icon:i.d.DUPLICATE,onClick:this.selectShareInputText})})})]},this.props.shortURL):this.state.isLoading&&"ERROR"!==this.props.shortURL?(0,P.jsx)("div",{children:(0,P.jsx)(R.tR,{description:"Generating Shareable Link...",icon:(0,P.jsx)(R.$j,{size:R.Ey.SMALL})})}):(0,P.jsxs)("div",{children:[Y.Z.urlShortenerBase,"\xa0",(0,P.jsx)("input",{placeholder:"custom string (optional)",onChange:this.handleChange,style:{width:175}}),(0,P.jsx)(B.Z,{label:"Get Link",icon:i.d.SHARE,onClick:()=>{this.props.handleShortenURL(this.state.keyword),this.setState({isLoading:!0})}})]})});return(0,P.jsx)(U.p,{popoverClassName:"Popover-share",inheritDarkTheme:!1,content:e,children:(0,P.jsx)(O.u,{content:"Get shareable link",placement:F.Ly.TOP,children:(0,P.jsx)(B.Z,{label:"Share",icon:i.d.SHARE,onClick:()=>this.toggleButton()})})})}componentDidUpdate(e){this.props.shortURL!==e.shortURL&&this.setState({keyword:"",isLoading:!1})}toggleButton(){this.props.handleGenerateLz&&this.props.handleGenerateLz(),this.props.handleUpdateShortURL(""),this.setState({keyword:"",isLoading:!1})}handleChange(e){this.setState({keyword:e.currentTarget.value})}selectShareInputText(){null!==this.shareInputElem.current&&(this.shareInputElem.current.focus(),this.shareInputElem.current.select())}}const K=e=>(0,P.jsx)(O.u,{content:"Step Limit",placement:F.Ly.TOP,children:(0,P.jsx)(R.Af,{leftIcon:i.d.VERTICAL_BAR_CHART_ASC,style:{width:80},min:500,max:5e3,value:e.stepLimit,stepSize:2,onBlur:()=>{var t;null===(t=e.handleOnBlurAutoScale)||void 0===t||t.call(e,Number(e.stepLimit))},onValueChange:e.handleChangeStepLimit})}),W=e=>{let{isFolderModeEnabled:t,isSessionActive:n,isPersistenceActive:s,toggleFolderMode:o}=e;const r=n?"Currently unsupported while a collaborative session is active":s?"Currently unsupported while a persistence method is active":(t?"Disable":"Enable")+" Folder mode";return(0,P.jsx)(O.u,{content:r,children:(0,P.jsx)(B.Z,{label:"Folder",icon:i.d.FOLDER_CLOSE,options:{iconColor:t?_.w.BLUE4:void 0},onClick:o,isDisabled:n||s})})},Q=e=>{const{isMobileBreakpoint:t}=(0,x.Fs)(),n=e.githubSaveInfo.filePath||"",o=(n.split("\\").pop()||"").split("/").pop()||"",r=void 0!==e.loggedInAs,a=!r,l=r&&""!==n,d=l?o:"GitHub";let c=M.S.NONE;l&&(c=e.isDirty?M.S.WARNING:M.S.PRIMARY);const u=(0,P.jsx)(B.Z,{label:d,icon:i.d.GIT_BRANCH,options:{intent:c},isDisabled:e.isFolderModeEnabled}),h=(0,P.jsx)(B.Z,{label:"Open",icon:i.d.DOCUMENT_OPEN,onClick:e.onClickOpen,isDisabled:a}),p=(0,P.jsx)(B.Z,{label:"Save",icon:i.d.FLOPPY_DISK,onClick:e.onClickSave,isDisabled:a||!l}),m=(0,P.jsx)(B.Z,{label:"Save As",icon:i.d.SEND_TO,onClick:e.onClickSaveAs,isDisabled:a}),g=r?(0,P.jsx)(B.Z,{label:"Log Out",icon:i.d.LOG_OUT,onClick:e.onClickLogOut}):(0,P.jsx)(B.Z,{label:"Log In",icon:i.d.LOG_IN,onClick:e.onClickLogIn}),v=e.isFolderModeEnabled?"Currently unsupported in Folder mode":void 0;return(0,P.jsx)(O.u,{content:v,disabled:void 0===v,children:(0,P.jsx)(U.p,{autoFocus:!1,content:(0,P.jsx)("div",{children:(0,P.jsxs)(R.hE,{large:!t,children:[h,p,m,g]})}),popoverClassName:s.oPt,disabled:e.isFolderModeEnabled,children:u})})};var X=n(29860),ee=n(27448),te=n(67643),ne=n.n(te),se=n(97594),ie=n(84197),oe=n(41383),re=n(23797);const ae=e=>{const{children:t,className:n,createNewFile:i,createNewDirectory:o,open:r,rename:l,remove:d}=e,[c,h]=(0,ie.w)(),[p,m]=u.useState({x:0,y:0});return(0,P.jsxs)("div",{className:n,onContextMenu:e=>{e.preventDefault(),m({x:e.clientX,y:e.clientY}),h(!0)},children:[t,(0,P.jsxs)(oe.B,{menuClassName:a()(s.TUJ,s.Pyr,"context-menu"),...c,anchorPoint:p,onClose:()=>h(!1),children:[i&&(0,P.jsx)(re.s,{className:"context-menu-item",onClick:i,children:"New File"}),o&&(0,P.jsx)(re.s,{className:"context-menu-item",onClick:o,children:"New Directory"}),r&&(0,P.jsx)(re.s,{className:"context-menu-item",onClick:r,children:"Open"}),l&&(0,P.jsx)(re.s,{className:"context-menu-item",onClick:l,children:"Rename"}),d&&(0,P.jsx)(re.s,{className:"context-menu-item",onClick:d,children:"Delete"})]})]})},le=e=>{const{indentationLevel:t}=e,n={paddingLeft:19*t+"px"};return(0,P.jsx)("div",{style:n})},de=e=>{const{children:t,waitInMsBeforeRender:n}=e,[s,i]=u.useState(!1);return u.useEffect((()=>{const e=setTimeout((()=>i(!0)),n);return()=>clearTimeout(e)}),[n]),s?t:(0,P.jsx)(P.Fragment,{})},ce=e=>{const{workspaceLocation:t,fileSystem:n,basePath:s,fileName:i,isDirectory:o,isEditing:r,setIsEditing:a,refreshDirectory:l}=e,[d,c]=u.useState(i),h=(0,p.I0)(),m=()=>{a(!1),c(i)};return(0,P.jsxs)(P.Fragment,{children:[r&&(0,P.jsx)("input",{type:"text",autoFocus:!0,spellCheck:!1,className:"file-system-view-input",value:d,onChange:e=>c(e.target.value),onKeyDown:e=>{if("Enter"===e.key){a(!1);const e=ne().join(s,i),r=ne().join(s,d);if(e===r)return;n.exists(r,(s=>{s?(0,se.qY)({title:"Unable to rename "+(o?"directory":"file"),contents:(0,P.jsxs)("p",{children:["A file or folder ",(0,P.jsx)("b",{children:d})," already exists in this location. Please choose a different name."]}),label:"OK"}).then((()=>c(i))):n.rename(e,r,(n=>{n&&console.error(n),h(o?(0,E.renameEditorTabsForDirectory)(t,e,r):(0,E.renameEditorTabForFile)(t,e,r)),l()}))}))}else"Escape"===e.key&&m()},onFocus:e=>{const t=e.target.value.lastIndexOf(".");-1!==t?e.target.setSelectionRange(0,t):e.target.select()},onBlur:m}),!r&&(0,P.jsx)("div",{className:"file-system-view-file-name",children:i})]})},ue=e=>{const{processFileName:t,removePlaceholder:n}=e,[s,i]=u.useState(""),o=()=>n();return(0,P.jsx)("input",{type:"text",autoFocus:!0,spellCheck:!1,className:"file-system-view-input",value:s,onChange:e=>i(e.target.value),onKeyDown:e=>{"Enter"===e.key?(t(s),n()):"Escape"===e.key&&o()},onBlur:o})},he=e=>{const{workspaceLocation:t,fileSystem:n,basePath:s,directoryName:o,indentationLevel:r,refreshParentDirectory:a}=e,l=ne().join(s,o),[d,c]=u.useState(!1),[h,m]=u.useState(!1),[g,v]=u.useState(!1),[b,x]=u.useState(!1),[C,y]=u.useState(0),S=(0,p.I0)(),j=()=>y((C+1)%2);return(0,P.jsxs)("div",{className:"file-system-view-directory-node-container",children:[(0,P.jsx)(ae,{createNewFile:()=>{c(!0),v(!0)},createNewDirectory:()=>{c(!0),x(!0)},rename:()=>m(!0),remove:()=>{(0,se.pG)({icon:"warning-sign",title:`Are you sure you want to delete '${o}' and its contents?`,contents:(0,P.jsxs)("p",{children:["This will result in all of its contained files & subdirectories being deleted. Once a directory is deleted, its contents cannot be recovered!",(0,P.jsx)("br",{}),(0,P.jsx)("br",{}),(0,P.jsx)("strong",{children:"Do you still want to proceed?"})]}),positiveIntent:"danger",positiveLabel:"Proceed",negativeLabel:"Cancel"}).then((e=>{e&&(S((0,E.removeEditorTabsForDirectory)(t,l)),(0,ee.EY)(n,l).then(a))}))},children:(0,P.jsxs)("div",{className:"file-system-view-node-container",onClick:()=>{h||c(!d)},children:[(0,P.jsx)(le,{indentationLevel:r}),d&&(0,P.jsx)(R.JO,{icon:i.d.CHEVRON_DOWN}),!d&&(0,P.jsx)(R.JO,{icon:i.d.CHEVRON_RIGHT}),(0,P.jsx)(ce,{workspaceLocation:t,fileSystem:n,basePath:s,fileName:o,isDirectory:!0,isEditing:h,setIsEditing:m,refreshDirectory:a})]})}),g&&(0,P.jsxs)("div",{className:"file-system-view-node-container",children:[(0,P.jsx)(le,{indentationLevel:r+1}),(0,P.jsx)(R.JO,{icon:i.d.DOCUMENT}),(0,P.jsx)(ue,{processFileName:e=>{const t=ne().join(s,o,e);n.exists(t,(s=>{s?(0,se.qY)({title:"Unable to create file",contents:(0,P.jsxs)("p",{children:["A file or folder ",(0,P.jsx)("b",{children:e})," already exists in this location. Please choose a different name."]}),label:"OK"}).then((()=>{})):n.writeFile(t,"",(e=>{e&&console.error(e),j()}))}))},removePlaceholder:()=>v(!1)})]}),b&&(0,P.jsxs)("div",{className:"file-system-view-node-container",children:[(0,P.jsx)(le,{indentationLevel:r+1}),(0,P.jsx)(R.JO,{icon:i.d.CHEVRON_RIGHT}),(0,P.jsx)(ue,{processFileName:e=>{const t=ne().join(s,o,e);n.exists(t,(s=>{s?(0,se.qY)({title:"Unable to create directory",contents:(0,P.jsxs)("p",{children:["A file or folder ",(0,P.jsx)("b",{children:e})," already exists in this location. Please choose a different name."]}),label:"OK"}).then((()=>{})):n.mkdir(t,777,(e=>{e&&console.error(e),j()}))}))},removePlaceholder:()=>x(!1)})]}),d&&(0,P.jsx)(me,{workspaceLocation:t,fileSystem:n,basePath:l,indentationLevel:r+1},C)]})},pe=e=>{const{workspaceLocation:t,fileSystem:n,basePath:s,fileName:o,indentationLevel:r,refreshDirectory:a}=e,[l,d]=u.useState(!1),c=(0,p.I0)(),h=ne().join(s,o),m=()=>{n.readFile(h,"utf-8",((e,n)=>{if(e&&console.error(e),void 0===n)throw new Error("File contents are undefined.");c((0,E.addEditorTab)(t,h,n))}))};return(0,P.jsx)(ae,{open:m,rename:()=>d(!0),remove:()=>{(0,se.pG)({icon:"warning-sign",title:`Are you sure you want to delete '${o}'?`,contents:(0,P.jsxs)("p",{children:["Once a file is deleted, it cannot be recovered!",(0,P.jsx)("br",{}),(0,P.jsx)("br",{}),(0,P.jsx)("strong",{children:"Do you still want to proceed?"})]}),positiveIntent:"danger",positiveLabel:"Proceed",negativeLabel:"Cancel"}).then((e=>{e&&n.unlink(h,(e=>{e&&console.error(e),c((0,E.removeEditorTabForFile)(t,h)),a()}))}))},children:(0,P.jsxs)("div",{className:"file-system-view-node-container",onClick:e=>{2===e.detail&&m()},children:[(0,P.jsx)(le,{indentationLevel:r}),(0,P.jsx)(R.JO,{icon:i.d.DOCUMENT}),(0,P.jsx)(ce,{workspaceLocation:t,fileSystem:n,basePath:s,fileName:o,isDirectory:!1,isEditing:l,setIsEditing:d,refreshDirectory:a})]})})},me=e=>{const{workspaceLocation:t,fileSystem:n,basePath:s,indentationLevel:i}=e,[o,r]=u.useState(void 0),[a,l]=u.useState(void 0),d=()=>{n.readdir(s,(async(e,t)=>{if(e&&console.error(e),void 0===t)return;const i=[],o=[];await Promise.all(t.map((e=>{const t=ne().join(s,e);return new Promise(((s,r)=>{n.lstat(t,((t,n)=>{if(t)return r(t);void 0!==n&&(n.isFile()?i.push(e):n.isDirectory()&&o.push(e),s(n))}))}))}))),l(i.sort()),r(o.sort())}))};return u.useEffect(d,[n,s]),a&&o?(0,P.jsxs)("div",{className:"file-system-view-list-container",children:[o.map((e=>(0,P.jsx)(he,{workspaceLocation:t,fileSystem:n,basePath:s,directoryName:e,indentationLevel:i,refreshParentDirectory:d},e))),a.map((e=>(0,P.jsx)(pe,{workspaceLocation:t,fileSystem:n,basePath:s,fileName:e,indentationLevel:i,refreshDirectory:d},e)))]}):(0,P.jsx)(de,{waitInMsBeforeRender:200,children:(0,P.jsx)(R.$j,{className:"file-system-view-spinner",size:R.Ey.SMALL})})},ge=e=>{const{workspaceLocation:t,basePath:n}=e,s=(0,x.ix)((e=>e.fileSystem.inBrowserFileSystem)),[o,r]=u.useState(!1),[a,l]=u.useState(!1),[d,c]=u.useState(0),h=()=>c((d+1)%2);if(null===s)return(0,P.jsx)("div",{className:"file-system-view-error",children:"Unable to load file system."});return(0,P.jsxs)("div",{className:"file-system-view-container",children:[(0,P.jsx)(me,{workspaceLocation:t,fileSystem:s,basePath:n,indentationLevel:0},d),o&&(0,P.jsxs)("div",{className:"file-system-view-node-container",children:[(0,P.jsx)(le,{indentationLevel:0}),(0,P.jsx)(R.JO,{icon:i.d.DOCUMENT}),(0,P.jsx)(ue,{processFileName:e=>{const t=ne().join(n,e);s.exists(t,(n=>{n?(0,se.qY)({title:"Unable to create file",contents:(0,P.jsxs)("p",{children:["A file or folder ",(0,P.jsx)("b",{children:e})," already exists in this location. Please choose a different name."]}),label:"OK"}).then((()=>{})):s.writeFile(t,"",(e=>{e&&console.error(e),h()}))}))},removePlaceholder:()=>r(!1)})]}),a&&(0,P.jsxs)("div",{className:"file-system-view-node-container",children:[(0,P.jsx)(le,{indentationLevel:0}),(0,P.jsx)(R.JO,{icon:i.d.CHEVRON_RIGHT}),(0,P.jsx)(ue,{processFileName:e=>{const t=ne().join(n,e);s.exists(t,(n=>{n?(0,se.qY)({title:"Unable to create directory",contents:(0,P.jsxs)("p",{children:["A file or folder ",(0,P.jsx)("b",{children:e})," already exists in this location. Please choose a different name."]}),label:"OK"}).then((()=>{})):s.mkdir(t,777,(e=>{e&&console.error(e),h()}))}))},removePlaceholder:()=>l(!1)})]}),(0,P.jsx)(ae,{className:"file-system-view-empty-space",createNewFile:()=>r(!0),createNewDirectory:()=>l(!0)})]})};var ve=n(45686),be=n(39215);const xe=`\nWelcome to the Source Academy playground!\n\nThe book [_Structure and Interpretation of Computer Programs, JavaScript Edition_](${Y.y.textbook})\nuses JavaScript sublanguages that we call [_Source_](${Y.y.sourceDocs}). `,Ce=`\n\nIn the editor on the left, you can use the [_Ace keyboard shortcuts_](${Y.y.aceHotkeys}) \nand also the [_Source Academy keyboard shortcuts_](${Y.y.sourceHotkeys}).\n\n`,Ee=(e,t)=>xe+((e,t)=>{if(e===l.Chapter.FULL_JS)return`However, you have chosen full JavaScript; your program will be run directly using JavaScript strict mode [_(ECMAScript 2021)_](${Y.y.ecmaScript_2021}).\n\n<b>Warning:</b> If your program freezes during execution, you can try refreshing the tab. Note that you need to open the browser console (typically by pressing \`F12\`) before using breakpoints.`;if(e===l.Chapter.HTML)return"However, you have chosen HTML, the standard markup language for webpages. Your code will be rendered directly as a HTML document.\n\nJavaScript code can be added to a HTML document using the `<script>` tag; any script errors will be displayed in the output below.\n\n<b>Note:</b> Error messages may differ between browsers, e.g. when using Safari, errors can only be viewed on the browser console itself. Please check the browser console (typically by pressing `F12`) for more detailed errors and warnings.";const n=`${Y.y.sourceDocs}source_${e}${t!==l.Variant.DEFAULT&&t!==l.Variant.NATIVE?`_${t}`:""}/`;return`You have chosen the sublanguage [_${(0,k.w$)(e,t)}_](${n}).`})(e,t)+Ce,ye=e=>{return t=e.chapter,n=e.variant,Ee(t,n);var t,n};var Se=n(90713),je=n(22657),fe=n(40239),Le=n(18465),ke=n(62629),Ie=n(84259);const we={goGreen:"h u l k"};async function Te(e,t,n,s,i){var o;const r=(0,je.m)(e),a=null!==(o=(0,Se.GA)(r.chap))&&void 0!==o?o:void 0;if(a===l.Chapter.FULL_JS)(0,C.oO)();else if(a===l.Chapter.FULL_TS)(0,C.Ze)();else{var d,u,h,p;if(a===l.Chapter.HTML){if(!await(0,C.zZ)())return}const e=void 0===r.prgrm?"":(0,c.decompressFromEncodedURIComponent)(r.prgrm),o=(0,k.CL)(n),m=void 0===r.files?{[o]:e}:(0,je.m)((0,c.decompressFromEncodedURIComponent)(r.files));null!==i&&await(0,ee.c2)(n,i,m),s((0,E.setFolderMode)(n,!1));const g=null!==(d=(0,Se.YF)(r.isFolder))&&void 0!==d&&d;s((0,E.setFolderMode)(n,g));const v=null!==(u=null===(h=r.tabs)||void 0===h?void 0:h.split(",").map(c.decompressFromEncodedURIComponent))&&void 0!==u?u:[o];s((0,E.removeEditorTabsForDirectory)(n,ke.z[n])),v.forEach((e=>{var t;return s((0,E.addEditorTab)(n,e,null!==(t=m[e])&&void 0!==t?t:""))}));const b=null!==(p=(0,Se.GA)(r.tabIdx))&&void 0!==p?p:0;if(s((0,E.updateActiveEditorTabIndex)(n,b)),a){const e=(0,k.C3)(a,r.variant);t.handleChapterSelect(a,e.variant),s((0,L.playgroundConfigLanguage)(e))}const x=Math.max((0,Se.GA)(r.exec||"1000")||1e3,1e3);x&&t.handleChangeExecTime(x)}}const Ne=e=>{const{isSicpEditor:t}=e,n=t?"sicp":"playground",{isMobileBreakpoint:r}=(0,x.Fs)(),[c,C]=(0,u.useState)(),F=(0,m.TH)(),R=(0,m.s0)(),O=(0,p.oR)(),M=new URLSearchParams(F.search).get("add_device"),{editorTabs:U,editorSessionId:B,execTime:V,stepLimit:_,isEditorAutorun:G,isRunning:z,isDebugging:Z,output:J,replValue:ee,sideContentHeight:te,sharedbConnected:ne,usingSubst:se,isFolderModeEnabled:ie,activeEditorTabIndex:oe,context:{chapter:re,variant:ae}}=(0,x.ix)((e=>e.workspaces[n])),le=(0,x.ix)((e=>e.fileSystem.inBrowserFileSystem)),{queryString:de,shortURL:ce,persistenceFile:ue,githubSaveInfo:he}=(0,x.ix)((e=>e.playground)),{sourceChapter:pe,sourceVariant:me,googleUser:xe,githubOctokitObject:Ce}=(0,x.ix)((e=>e.session)),Ee=(0,p.I0)(),{handleChangeExecTime:Se,handleChapterSelect:je,handleEditorValueChange:Ne,handleSetEditorBreakpoints:De,handleReplEval:Fe,handleReplOutputClear:Re,handleUsingEnv:Oe,handleUsingSubst:Pe}=(0,u.useMemo)((()=>({handleChangeExecTime:e=>Ee((0,E.changeExecTime)(e,n)),handleChapterSelect:(e,t)=>Ee((0,E.chapterSelect)(e,t,n)),handleEditorValueChange:(e,t)=>Ee((0,E.updateEditorValue)(n,e,t)),handleSetEditorBreakpoints:(e,t)=>Ee((0,E.setEditorBreakpoint)(n,e,t)),handleReplEval:()=>Ee((0,E.evalRepl)(n)),handleReplOutputClear:()=>Ee((0,E.clearReplOutput)(n)),handleUsingEnv:e=>Ee((0,E.toggleUsingEnv)(e,n)),handleUsingSubst:e=>Ee((0,E.toggleUsingSubst)(e,n))})),[Ee,n]);M&&!c&&(C(M),R(F.pathname,{replace:!0}));const[Ae,Me]=(0,u.useState)(new Date),[Ue,Be]=(0,u.useState)(!1),[Ve,He]=(0,u.useState)(M?be.B.remoteExecution:be.B.introduction),[_e,Ge]=(0,u.useState)(!1),[ze,Ze]=(0,u.useState)((()=>{var e,t;return(0,Le.wH)("playground",{editorValue:null!==(e=null===(t=U[0])||void 0===t?void 0:t.value)&&void 0!==e?e:"",chapter:re})})),Je=(0,u.useMemo)((()=>(0,Ie.sd)(c,C)),[c]),$e=(0,x.ix)((e=>!!e.session.remoteExecutionSession))&&!t,Ye=(0,x.ix)((e=>e.workspaces.playground.externalLibrary));(0,u.useEffect)((()=>{var e,t;Ze((0,Le.wH)("playground",{editorValue:null!==(e=null===(t=U[0])||void 0===t?void 0:t.value)&&void 0!==e?e:"",chapter:re}))}),[B]);const qe=t?e.initialEditorValueHash:F.hash;(0,u.useEffect)((()=>{if(qe)Te(qe,{handleChangeExecTime:Se,handleChapterSelect:je},n,Ee,le);else if(pe&&me){je(pe,me);const e=(0,k.C3)(pe,me);Ee((0,L.playgroundConfigLanguage)(e)),Ee((0,E.setFolderMode)(n,!1))}}),[Ee,le,qe,pe,me,n,je,Se]),(0,u.useEffect)((()=>{r&&Ie.NG.includes(Ve)?He(be.B.mobileEditor):!r&&Ie.JN.includes(Ve)&&He(be.B.introduction)}),[r,Ve]);const Ke=(0,u.useMemo)((()=>({goGreen:()=>Be(!Ue)})),[Ue]),We=u.useCallback(((e,t)=>{Me(new Date),Ne(e,t)}),[Ne]),Qe=(0,u.useCallback)((()=>{Oe(!1),y.Z.clearEnv(),Ee((0,E.updateEnvSteps)(-1,n)),Ee((0,E.updateEnvStepsTotal)(0,n)),Ee((0,E.toggleUpdateEnv)(!0,n)),Ee((0,E.setEditorHighlightedLines)(n,0,[]))}),[Ee,n,Oe]),Xe=(0,u.useCallback)(((e,t,n)=>{e!==t&&(t===be.B.substVisualizer&&e===be.B.mobileEditorRun||(e!==be.B.envVisualizer&&Qe(),!(0,k.lq)(re)||e!==be.B.substVisualizer&&e!==be.B.envVisualizer||(re<=l.Chapter.SOURCE_2?Pe(!0):Oe(!0)),t!==be.B.substVisualizer||_e||(Re(),Pe(!1)),He(e)))}),[_e,Qe,re,Pe,Oe,Re]),et=(0,u.useCallback)((e=>{(0,Le.cM)(ze,e)}),[ze]),tt=(0,u.useMemo)((()=>({handleEditorEval:()=>Ee((0,E.evalEditor)(n)),handleInterruptEval:()=>Ee((0,g.beginInterruptExecution)(n)),handleToggleEditorAutorun:()=>Ee((0,E.toggleEditorAutorun)(n)),handleDebuggerPause:()=>Ee((0,g.beginDebuggerPause)(n)),handleDebuggerReset:()=>Ee((0,g.debuggerReset)(n)),handleDebuggerResume:()=>Ee((0,g.debuggerResume)(n))})),[Ee,n]),nt=(0,x.ix)((e=>e.playground.languageConfig)),st=(0,u.useMemo)((()=>(0,P.jsx)(w.k,{isEntrypointFileDefined:null!==oe,isDebugging:Z,isEditorAutorun:G,isRunning:z,autorunDisabled:$e,sourceChapter:nt.chapter,pauseDisabled:$e||!(0,k.lq)(nt.chapter),...tt},"autorun")),[oe,Z,G,z,nt.chapter,tt,$e]),it=(0,u.useCallback)(((e,t)=>{const{chapter:n,variant:s}=e;(n<=2&&_e||Ve===be.B.substVisualizer)&&Pe(!0),n>2&&(Re(),Pe(!1));const i={time:Date.now(),type:"chapterSelect",data:n};et(i),je(n,s),Ee((0,L.playgroundConfigLanguage)(e))}),[Ee,_e,Ve,et,Re,Pe,je]),ot=(0,u.useMemo)((()=>(0,P.jsx)(T.b,{handleChapterSelect:it,isFolderModeEnabled:ie,sourceChapter:nt.chapter,sourceVariant:nt.variant,disabled:$e},"chapter")),[it,ie,nt.chapter,nt.variant,$e]),rt=(0,u.useMemo)((()=>Ve===be.B.substVisualizer?null:(0,P.jsx)(N._,{handleReplOutputClear:Re},"clear_repl")),[Re,Ve]),at=(0,u.useMemo)((()=>Ve===be.B.substVisualizer?null:(0,P.jsx)(D.e,{handleReplEval:Fe,isRunning:z},"eval_repl")),[Fe,z,Ve]),lt=ue&&(!ue.lastSaved||ue.lastSaved<Ae),dt=(0,u.useMemo)((()=>(0,P.jsx)(H,{isFolderModeEnabled:ie,currentFile:ue,loggedInAs:xe,isDirty:lt,onClickSaveAs:()=>Ee((0,f.persistenceSaveFileAs)()),onClickOpen:()=>Ee((0,f.persistenceOpenPicker)()),onClickSave:ue?()=>Ee((0,f.persistenceSaveFile)(ue)):void 0,onClickLogOut:()=>Ee((0,v.logoutGoogle)()),onPopoverOpening:()=>Ee((0,f.persistenceInitialise)())},"googledrive")),[ie,ue,xe,lt,Ee]),ct=he&&(!he.lastSaved||he.lastSaved<Ae),ut=(0,u.useMemo)((()=>(0,P.jsx)(Q,{isFolderModeEnabled:ie,loggedInAs:Ce.octokit,githubSaveInfo:he,isDirty:ct,onClickOpen:()=>Ee((0,S.action)(j.ak)),onClickSaveAs:()=>Ee((0,S.action)(j.AQ)),onClickSave:()=>Ee((0,S.action)(j.n0)),onClickLogIn:()=>Ee((0,v.loginGitHub)()),onClickLogOut:()=>Ee((0,v.logoutGitHub)())},"github")),[Ee,Ce.octokit,ct,he,ie]),ht=(0,u.useMemo)((()=>(0,P.jsx)(A,{execTime:V,handleChangeExecTime:Se},"execution_time")),[V,Se]),pt=(0,u.useMemo)((()=>(0,P.jsx)(K,{stepLimit:_,handleChangeStepLimit:e=>Ee((0,E.changeStepLimit)(e,n)),handleOnBlurAutoScale:e=>{Ee(e%2===0?(0,E.changeStepLimit)(e,n):(0,E.changeStepLimit)(e+1,n))}},"step_limit")),[Ee,_,n]),mt=(0,u.useCallback)((()=>O.getState().workspaces[n].editorTabs[0].value),[O,n]),gt=(0,u.useMemo)((()=>(0,P.jsx)($,{isFolderModeEnabled:ie,editorSessionId:B,getEditorValue:mt,handleSetEditorSessionId:e=>Ee((0,b.setEditorSessionId)(n,e)),sharedbConnected:ne},"session")),[Ee,mt,ie,B,ne,n]),vt=(0,u.useMemo)((()=>{const n=t?Y.y.playground+"#"+e.initialEditorValueHash:de;return(0,P.jsx)(q,{handleGenerateLz:()=>Ee((0,L.generateLzString)()),handleShortenURL:e=>Ee((0,L.shortenURL)(e)),handleUpdateShortURL:e=>Ee((0,L.updateShortURL)(e)),queryString:n,shortURL:ce,isSicp:t},"share")}),[Ee,t,e.initialEditorValueHash,de,ce]),bt=(0,u.useMemo)((()=>(0,P.jsx)(W,{isFolderModeEnabled:ie,isSessionActive:""!==B,isPersistenceActive:void 0!==ue||""!==he.repoName,toggleFolderMode:()=>Ee((0,E.toggleFolderMode)(n))},"folder")),[Ee,he.repoName,ie,ue,B,n]);(0,u.useEffect)((()=>{const e=(0,k.C3)(re,ae);Ee((0,L.playgroundConfigLanguage)(e))}),[Ee,re,ae]);const xt=nt.supports.dataVisualizer,Ct=nt.supports.envVisualizer,Et=nt.supports.substVisualizer,yt=(0,u.useMemo)((()=>(0,Ie.EG)(ye(nt))),[nt]),St=(0,u.useMemo)((()=>{const e=[yt];return nt.chapter===l.Chapter.HTML?(J.length>0&&"result"===J[0].type&&e.push((0,Ie.nf)(J[0],(e=>Ee((0,E.addHtmlConsoleError)(e,n))))),e):($e||(xt&&e.push(Ie.gM),Ct&&e.push((0,Ie.HE)(n)),Et&&e.push((0,Ie.a0)(J))),t||e.push(Je),e)}),[yt,nt.chapter,J,$e,t,Ee,n,xt,Ct,Et,Je]),jt=[...St].filter((e=>{let{id:t}=e;return!(t&&Ie.NG.includes(t))})),ft=(0,u.useCallback)((t=>{const n=()=>{t.getSession().addFold("    ",new o.Range(1,0,e.prependLength,0)),t.renderer.off("afterRender",n)};t.renderer.on("afterRender",n)}),[e.prependLength]),Lt=(0,u.useCallback)(((e,t)=>{const s={time:Date.now(),type:"codeDelta",data:t};et(s),Ee((0,E.toggleUpdateEnv)(!0,n)),Ee((0,E.setEditorHighlightedLines)(n,0,[]))}),[et,Ee,n]),kt=(0,u.useCallback)((e=>{const t={time:Date.now(),type:"cursorPositionChange",data:e.getCursor()};et(t)}),[et]),It=(0,u.useCallback)((e=>{const t=e.getRange(),n=e.isBackwards();if(!(0,d.isEqual)(t.start,t.end)){const e={time:Date.now(),type:"selectionRangeData",data:{range:t,isBackwards:n}};et(e)}}),[et]),wt=(0,u.useCallback)(((e,t)=>{const s=t.filter((e=>!!e)).length;s>0&&(Ge(!0),re<=2&&Pe(!0)),0===s&&(Ge(!1),Ve!==be.B.substVisualizer&&(Re(),Pe(!1))),De(e,t),Ee((0,E.toggleUpdateEnv)(!0,n))}),[Ve,Ee,n,De,Re,Pe,re]),Tt=!nt.supports.repl||$e,Nt=(0,u.useMemo)((()=>({handleDeclarationNavigate:e=>Ee((0,E.navigateToDeclaration)(n,e)),handlePromptAutocomplete:(e,t,s)=>Ee((0,E.promptAutocomplete)(n,e,t,s)),handleSendReplInputToOutput:e=>Ee((0,E.sendReplInputToOutput)(e,n)),handleSetSharedbConnected:e=>Ee((0,b.setSharedbConnected)(n,e)),setActiveEditorTabIndex:e=>Ee((0,E.updateActiveEditorTabIndex)(n,e)),removeEditorTabByIndex:e=>Ee((0,E.removeEditorTab)(n,e))})),[Ee,n]),Dt={editorSessionId:B,isEditorAutorun:G,editorVariant:"normal",baseFilePath:ke.z[n],isFolderModeEnabled:ie,activeEditorTabIndex:oe,setActiveEditorTabIndex:Nt.setActiveEditorTabIndex,removeEditorTabByIndex:Nt.removeEditorTabByIndex,editorTabs:U.map(X.F),handleDeclarationNavigate:Nt.handleDeclarationNavigate,handleEditorEval:tt.handleEditorEval,handlePromptAutocomplete:Nt.handlePromptAutocomplete,handleSendReplInputToOutput:Nt.handleSendReplInputToOutput,handleSetSharedbConnected:Nt.handleSetSharedbConnected,onChange:Lt,onCursorChange:kt,onSelectionChange:It,onLoad:t&&e.prependLength?ft:void 0,sourceChapter:nt.chapter,externalLibraryName:Ye,sourceVariant:nt.variant,handleEditorValueChange:We,handleEditorUpdateBreakpoints:wt},Ft=(0,u.useMemo)((()=>({handleBrowseHistoryDown:()=>Ee((0,E.browseReplHistoryDown)(n)),handleBrowseHistoryUp:()=>Ee((0,E.browseReplHistoryUp)(n)),handleReplValueChange:e=>Ee((0,E.updateReplValue)(e,n))})),[Ee,n]),Rt={output:J,replValue:ee,handleReplEval:Fe,usingSubst:se,handleBrowseHistoryDown:Ft.handleBrowseHistoryDown,handleBrowseHistoryUp:Ft.handleBrowseHistoryUp,handleReplValueChange:Ft.handleReplValueChange,sourceChapter:nt.chapter,sourceVariant:nt.variant,externalLibrary:I.L.NONE,hidden:Ve===be.B.substVisualizer||Ve===be.B.envVisualizer,inputHidden:Tt,replButtons:[Tt?null:at,rt],disableScrolling:t},Ot=(0,u.useMemo)((()=>({tabs:[...ie?[{label:"Folder",body:(0,P.jsx)(ge,{workspaceLocation:"playground",basePath:ke.z[n]}),iconName:i.d.FOLDER_CLOSE,id:be.B.folder}]:[]]})),[ie,n]),Pt={controlBarProps:{editorButtons:[st,nt.chapter===l.Chapter.FULL_JS?null:vt,ot,t?null:gt,nt.supports.multiFile?bt:null,dt,ut,$e||!(0,k.lq)(nt.chapter)?null:se?pt:ht]},editorContainerProps:Dt,handleSideContentHeightChange:(0,u.useCallback)((e=>Ee((0,E.changeSideContentHeight)(e,n))),[Ee,n]),replProps:Rt,sideBarProps:Ot,sideContentHeight:te,sideContentProps:{selectedTabId:Ve,onChange:Xe,tabs:{beforeDynamicTabs:St,afterDynamicTabs:[]},workspaceLocation:n,sideContentHeight:te},sideContentIsResizeable:Ve!==be.B.substVisualizer&&Ve!==be.B.envVisualizer},At={editorContainerProps:Dt,replProps:Rt,sideBarProps:Ot,mobileSideContentProps:{mobileControlBarProps:{editorButtons:[st,ot,nt.chapter===l.Chapter.FULL_JS?null:vt,t?null:gt,nt.supports.multiFile?bt:null,dt,ut]},selectedTabId:Ve,onChange:Xe,tabs:{beforeDynamicTabs:jt,afterDynamicTabs:[]},workspaceLocation:n}};return r?(0,P.jsx)("div",{className:a()("Playground",s.Pyr,Ue?"GreenScreen":void 0),children:(0,P.jsx)(ve.Z,{...At})}):(0,P.jsx)(h.HotKeys,{className:a()("Playground",s.Pyr,Ue?"GreenScreen":void 0),keyMap:we,handlers:Ke,children:(0,P.jsx)(fe.Z,{...Pt})})},De=Ne;De.displayName="Playground";const Fe=Ne}}]);
//# sourceMappingURL=184.dbf6fd86.chunk.js.map