import{a as p,r as d,C as i,j as t,c as l,D as u,N as h,S as b,b as g,o as y,q as f,d as w}from"./index-6556bce7.js";import{p as m}from"./QueryHelper-b5850c85.js";const C=()=>{const a=p(),e=m(a.search).code,[n,s]=d.useState("initial");return d.useEffect(()=>{n==="initial"&&i.githubClientId&&e&&(s("loading"),x(e,i.githubClientId,()=>s("error")))},[e,n]),i.githubClientId?e?n==="error"?t.jsx(r,{title:"We couldn't authenticate you with GitHub",children:"Connection with server was denied, or incorrect payload received. Please try again or contact the website administrator."}):t.jsx("div",{className:l("NoPage",u),children:t.jsx(h,{description:"Logging In...",icon:t.jsx(b,{size:g.LARGE})})}):t.jsx(r,{title:"We couldn't authenticate you with GitHub",children:"Access code not found in callback URL. Please try again or contact the website administrator."}):t.jsx(r,{title:"We couldn't authenticate you with GitHub",children:"Client ID not included with deployment. Please try again or contact the website administrator."})};async function x(a,e,n){const s=await y(i.githubOAuthProxyUrl,f.stringify({code:a,clientId:e}));let o;try{if(o=await s.json(),typeof o.access_token>"u")throw new Error("Access Token not found in payload")}catch{n();return}try{new BroadcastChannel("GitHubOAuthAccessToken").postMessage(o.access_token),window.close()}catch{}}function r({title:a,children:e}){return t.jsx("div",{className:l("NoPage",u),children:t.jsx(h,{icon:w.ERROR,title:a,description:e})})}const j=C;j.displayName="GitHubCallback";export{j as Component,C as default};
