"use strict";(globalThis.webpackChunkfrontend=globalThis.webpackChunkfrontend||[]).push([[579],{22657:(e,t,n)=>{n.d(t,{m:()=>o});var s=n(4245),i=n(49639);function o(e){const t=s.parse(e);for(const[n,s]of Object.entries(t))(0,i.isArray)(s)?t[n]=s.join(","):null===s&&delete t[n];return t}},94579:(e,t,n)=>{n.r(t),n.d(t,{Component:()=>Ne,default:()=>De,handleHash:()=>we});var s=n(37305),i=n(59118),o=n(65675),r=n(81694),a=n.n(r),l=n(42543),d=n(763),c=n(4235),u=n(72791),h=n(37325),p=n(78687),m=n(57689),g=n(94500),v=n(71594),b=n(17498),x=n(90362),C=n(13152),E=n(89702),y=n(28727),S=n(99439),j=n(35772),f=n(5136),L=n(95134),k=n(32881),I=n(60363),w=n(60054),T=n(89360),N=n(27156),D=n(32183),F=n(34695),R=n(95785),O=n(80184);const P=e=>(0,O.jsx)(R.u,{content:"Execution Time",placement:D.Ly.TOP,children:(0,O.jsx)(F.Af,{leftIcon:i.d.TIME,style:{width:80},min:1e3,value:e.execTime,onValueChange:e.handleChangeExecTime})});var A=n(50698),M=n(18277),U=n(17862);const B={INACTIVE:A.S.NONE,SAVED:A.S.PRIMARY,DIRTY:A.S.WARNING},V=e=>{const{isMobileBreakpoint:t}=(0,x.Fs)(),n=e.currentFile?e.isDirty?"DIRTY":"SAVED":"INACTIVE",o=(0,O.jsx)(U.Z,{label:e.currentFile&&e.currentFile.name||"Google Drive",icon:i.d.CLOUD,options:{intent:B[n]},isDisabled:e.isFolderModeEnabled}),r=(0,O.jsx)(U.Z,{label:"Open",icon:i.d.DOCUMENT_OPEN,onClick:e.onClickOpen}),a=(0,O.jsx)(U.Z,{label:"Save",icon:i.d.FLOPPY_DISK,onClick:e.onClickSave,isDisabled:"INACTIVE"===n}),l=(0,O.jsx)(U.Z,{label:"Save as",icon:i.d.SEND_TO,onClick:e.onClickSaveAs}),d=e.loggedInAs&&(0,O.jsx)(R.u,{content:`Logged in as ${e.loggedInAs}`,children:(0,O.jsx)(U.Z,{label:"Log out",icon:i.d.LOG_OUT,onClick:e.onClickLogOut})}),c=e.isFolderModeEnabled?"Currently unsupported in Folder mode":void 0;return(0,O.jsx)(R.u,{content:c,disabled:void 0===c,children:(0,O.jsx)(M.p,{autoFocus:!1,content:(0,O.jsx)("div",{children:(0,O.jsxs)(F.hE,{large:!t,children:[r,a,l,d]})}),onOpening:e.onPopoverOpening,popoverClassName:s.oPt,disabled:e.isFolderModeEnabled,children:o})})};var H=n(722),_=n(78029),G=n(33508),z=n(44439);function Z(e){(0,z.N9)(`Could not connect: ${e&&e.message||e||"Unknown error"}`)}class J extends u.PureComponent{constructor(e){super(e),this.inviteInputElem=void 0,this.state={joinElemValue:""},this.handleChange=this.handleChange.bind(this),this.inviteInputElem=u.createRef(),this.selectInviteInputText=this.selectInviteInputText.bind(this)}render(){const e=(0,O.jsxs)(O.Fragment,{children:[(0,O.jsx)("input",{value:this.props.editorSessionId,readOnly:!0,ref:this.inviteInputElem}),(0,O.jsx)(_,{text:""+this.props.editorSessionId,children:(0,O.jsx)(U.Z,{icon:i.d.DUPLICATE,onClick:this.selectInviteInputText})})]}),t=(0,O.jsx)(M.p,{popoverClassName:"Popover-share",inheritDarkTheme:!1,content:e,children:(0,O.jsx)(U.Z,{label:"Invite",icon:i.d.GRAPH,onClick:()=>{""===this.props.editorSessionId&&(0,G.lW)(this.props.getEditorValue()).then((e=>{this.props.handleSetEditorSessionId(e)}),Z)}})}),n=(0,O.jsxs)("form",{onSubmit:e=>{e.preventDefault(),(0,G.Ht)(this.state.joinElemValue).then((e=>{e?this.props.handleSetEditorSessionId(this.state.joinElemValue):(this.props.handleSetEditorSessionId(""),(0,z.N9)("Could not find a session with that ID."))}),(e=>{this.props.handleSetEditorSessionId(""),Z(e)}))},children:[(0,O.jsx)("input",{type:"text",value:this.state.joinElemValue,onChange:this.handleChange}),(0,O.jsx)("span",{className:s.oPt,children:(0,O.jsx)(U.Z,{icon:i.d.KEY_ENTER,options:{type:"submit"}})})]}),o=(0,O.jsx)(M.p,{popoverClassName:"Popover-share",inheritDarkTheme:!1,content:n,children:(0,O.jsx)(U.Z,{label:"Join",icon:i.d.LOG_IN})}),r=(0,O.jsx)(U.Z,{label:"Leave",icon:i.d.FEED,onClick:()=>{this.props.handleSetEditorSessionId(""),this.setState({joinElemValue:""})}}),a=this.props.isFolderModeEnabled?"Currently unsupported in Folder mode":void 0;return(0,O.jsx)(R.u,{content:a,disabled:void 0===a,children:(0,O.jsx)(M.p,{content:(0,O.jsxs)(F.v2,{large:!0,children:[t,""===this.props.editorSessionId?o:r]}),disabled:this.props.isFolderModeEnabled,children:(0,O.jsx)(U.Z,{label:"Session",icon:i.d.SOCIAL_MEDIA,options:{iconColor:""===this.props.editorSessionId?void 0:this.props.sharedbConnected?H.w.GREEN3:H.w.RED3},isDisabled:this.props.isFolderModeEnabled})})})}selectInviteInputText(){null!==this.inviteInputElem.current&&(this.inviteInputElem.current.focus(),this.inviteInputElem.current.select())}handleChange(e){this.setState({joinElemValue:e.target.value})}}var $=n(9631);class Y extends u.PureComponent{constructor(e){super(e),this.shareInputElem=void 0,this.selectShareInputText=this.selectShareInputText.bind(this),this.handleChange=this.handleChange.bind(this),this.toggleButton=this.toggleButton.bind(this),this.shareInputElem=u.createRef(),this.state={keyword:"",isLoading:!1}}render(){const e=void 0===this.props.queryString?(0,O.jsx)(F.xv,{children:"Share your programs! Type something into the editor (left), then click on this button again."}):this.props.isSicp?(0,O.jsxs)("div",{children:[(0,O.jsx)("input",{defaultValue:this.props.queryString,readOnly:!0,ref:this.shareInputElem}),(0,O.jsx)(R.u,{content:"Copy link to clipboard",children:(0,O.jsx)(_,{text:this.props.queryString,children:(0,O.jsx)(U.Z,{icon:i.d.DUPLICATE,onClick:this.selectShareInputText})})})]}):(0,O.jsx)(O.Fragment,{children:this.props.shortURL&&"ERROR"!==this.props.shortURL?(0,O.jsxs)("div",{children:[(0,O.jsx)("input",{defaultValue:this.props.shortURL,readOnly:!0,ref:this.shareInputElem}),(0,O.jsx)(R.u,{content:"Copy link to clipboard",children:(0,O.jsx)(_,{text:this.props.shortURL,children:(0,O.jsx)(U.Z,{icon:i.d.DUPLICATE,onClick:this.selectShareInputText})})})]},this.props.shortURL):this.state.isLoading&&"ERROR"!==this.props.shortURL?(0,O.jsx)("div",{children:(0,O.jsx)(F.tR,{description:"Generating Shareable Link...",icon:(0,O.jsx)(F.$j,{size:F.Ey.SMALL})})}):(0,O.jsxs)("div",{children:[$.Z.urlShortenerBase,"\xa0",(0,O.jsx)("input",{placeholder:"custom string (optional)",onChange:this.handleChange,style:{width:175}}),(0,O.jsx)(U.Z,{label:"Get Link",icon:i.d.SHARE,onClick:()=>{this.props.handleShortenURL(this.state.keyword),this.setState({isLoading:!0})}})]})});return(0,O.jsx)(M.p,{popoverClassName:"Popover-share",inheritDarkTheme:!1,content:e,children:(0,O.jsx)(R.u,{content:"Get shareable link",placement:D.Ly.TOP,children:(0,O.jsx)(U.Z,{label:"Share",icon:i.d.SHARE,onClick:()=>this.toggleButton()})})})}componentDidUpdate(e){this.props.shortURL!==e.shortURL&&this.setState({keyword:"",isLoading:!1})}toggleButton(){this.props.handleGenerateLz&&this.props.handleGenerateLz(),this.props.handleUpdateShortURL(""),this.setState({keyword:"",isLoading:!1})}handleChange(e){this.setState({keyword:e.currentTarget.value})}selectShareInputText(){null!==this.shareInputElem.current&&(this.shareInputElem.current.focus(),this.shareInputElem.current.select())}}const q=e=>(0,O.jsx)(R.u,{content:"Step Limit",placement:D.Ly.TOP,children:(0,O.jsx)(F.Af,{leftIcon:i.d.VERTICAL_BAR_CHART_ASC,style:{width:80},min:500,max:5e3,value:e.stepLimit,stepSize:2,onBlur:()=>{var t;null===(t=e.handleOnBlurAutoScale)||void 0===t||t.call(e,Number(e.stepLimit))},onValueChange:e.handleChangeStepLimit})}),K=e=>{let{isFolderModeEnabled:t,isSessionActive:n,isPersistenceActive:s,toggleFolderMode:o}=e;const r=n?"Currently unsupported while a collaborative session is active":s?"Currently unsupported while a persistence method is active":(t?"Disable":"Enable")+" Folder mode";return(0,O.jsx)(R.u,{content:r,children:(0,O.jsx)(U.Z,{label:"Folder",icon:i.d.FOLDER_CLOSE,options:{iconColor:t?H.w.BLUE4:void 0},onClick:o,isDisabled:n||s})})},W=e=>{const{isMobileBreakpoint:t}=(0,x.Fs)(),n=e.githubSaveInfo.filePath||"",o=(n.split("\\").pop()||"").split("/").pop()||"",r=void 0!==e.loggedInAs,a=!r,l=r&&""!==n,d=l?o:"GitHub";let c=A.S.NONE;l&&(c=e.isDirty?A.S.WARNING:A.S.PRIMARY);const u=(0,O.jsx)(U.Z,{label:d,icon:i.d.GIT_BRANCH,options:{intent:c},isDisabled:e.isFolderModeEnabled}),h=(0,O.jsx)(U.Z,{label:"Open",icon:i.d.DOCUMENT_OPEN,onClick:e.onClickOpen,isDisabled:a}),p=(0,O.jsx)(U.Z,{label:"Save",icon:i.d.FLOPPY_DISK,onClick:e.onClickSave,isDisabled:a||!l}),m=(0,O.jsx)(U.Z,{label:"Save As",icon:i.d.SEND_TO,onClick:e.onClickSaveAs,isDisabled:a}),g=r?(0,O.jsx)(U.Z,{label:"Log Out",icon:i.d.LOG_OUT,onClick:e.onClickLogOut}):(0,O.jsx)(U.Z,{label:"Log In",icon:i.d.LOG_IN,onClick:e.onClickLogIn}),v=e.isFolderModeEnabled?"Currently unsupported in Folder mode":void 0;return(0,O.jsx)(R.u,{content:v,disabled:void 0===v,children:(0,O.jsx)(M.p,{autoFocus:!1,content:(0,O.jsx)("div",{children:(0,O.jsxs)(F.hE,{large:!t,children:[h,p,m,g]})}),popoverClassName:s.oPt,disabled:e.isFolderModeEnabled,children:u})})};var X=n(29860),Q=n(27448),ee=n(67643),te=n.n(ee),ne=n(97594),se=n(84197),ie=n(63882),oe=n(23797);const re=e=>{const{children:t,className:n,createNewFile:i,createNewDirectory:o,open:r,rename:l,remove:d}=e,[c,h]=(0,se.w)(),[p,m]=u.useState({x:0,y:0});return(0,O.jsxs)("div",{className:n,onContextMenu:e=>{e.preventDefault(),m({x:e.clientX,y:e.clientY}),h(!0)},children:[t,(0,O.jsxs)(ie.B,{menuClassName:a()(s.TUJ,s.Pyr,"context-menu"),...c,anchorPoint:p,onClose:()=>h(!1),children:[i&&(0,O.jsx)(oe.s,{className:"context-menu-item",onClick:i,children:"New File"}),o&&(0,O.jsx)(oe.s,{className:"context-menu-item",onClick:o,children:"New Directory"}),r&&(0,O.jsx)(oe.s,{className:"context-menu-item",onClick:r,children:"Open"}),l&&(0,O.jsx)(oe.s,{className:"context-menu-item",onClick:l,children:"Rename"}),d&&(0,O.jsx)(oe.s,{className:"context-menu-item",onClick:d,children:"Delete"})]})]})},ae=e=>{const{indentationLevel:t}=e,n={paddingLeft:19*t+"px"};return(0,O.jsx)("div",{style:n})},le=e=>{const{children:t,waitInMsBeforeRender:n}=e,[s,i]=u.useState(!1);return u.useEffect((()=>{const e=setTimeout((()=>i(!0)),n);return()=>clearTimeout(e)}),[n]),s?t:(0,O.jsx)(O.Fragment,{})},de=e=>{const{workspaceLocation:t,fileSystem:n,basePath:s,fileName:i,isDirectory:o,isEditing:r,setIsEditing:a,refreshDirectory:l}=e,[d,c]=u.useState(i),h=(0,p.I0)(),m=()=>{a(!1),c(i)};return(0,O.jsxs)(O.Fragment,{children:[r&&(0,O.jsx)("input",{type:"text",autoFocus:!0,spellCheck:!1,className:"file-system-view-input",value:d,onChange:e=>c(e.target.value),onKeyDown:e=>{if("Enter"===e.key){a(!1);const e=te().join(s,i),r=te().join(s,d);if(e===r)return;n.exists(r,(s=>{s?(0,ne.qY)({title:"Unable to rename "+(o?"directory":"file"),contents:(0,O.jsxs)("p",{children:["A file or folder ",(0,O.jsx)("b",{children:d})," already exists in this location. Please choose a different name."]}),label:"OK"}).then((()=>c(i))):n.rename(e,r,(n=>{n&&console.error(n),h(o?(0,E.renameEditorTabsForDirectory)(t,e,r):(0,E.renameEditorTabForFile)(t,e,r)),l()}))}))}else"Escape"===e.key&&m()},onFocus:e=>{const t=e.target.value.lastIndexOf(".");-1!==t?e.target.setSelectionRange(0,t):e.target.select()},onBlur:m}),!r&&(0,O.jsx)("div",{className:"file-system-view-file-name",children:i})]})},ce=e=>{const{processFileName:t,removePlaceholder:n}=e,[s,i]=u.useState(""),o=()=>n();return(0,O.jsx)("input",{type:"text",autoFocus:!0,spellCheck:!1,className:"file-system-view-input",value:s,onChange:e=>i(e.target.value),onKeyDown:e=>{"Enter"===e.key?(t(s),n()):"Escape"===e.key&&o()},onBlur:o})},ue=e=>{const{workspaceLocation:t,fileSystem:n,basePath:s,directoryName:o,indentationLevel:r,refreshParentDirectory:a}=e,l=te().join(s,o),[d,c]=u.useState(!1),[h,m]=u.useState(!1),[g,v]=u.useState(!1),[b,x]=u.useState(!1),[C,y]=u.useState(0),S=(0,p.I0)(),j=()=>y((C+1)%2);return(0,O.jsxs)("div",{className:"file-system-view-directory-node-container",children:[(0,O.jsx)(re,{createNewFile:()=>{c(!0),v(!0)},createNewDirectory:()=>{c(!0),x(!0)},rename:()=>m(!0),remove:()=>{(0,ne.pG)({icon:"warning-sign",title:`Are you sure you want to delete '${o}' and its contents?`,contents:(0,O.jsxs)("p",{children:["This will result in all of its contained files & subdirectories being deleted. Once a directory is deleted, its contents cannot be recovered!",(0,O.jsx)("br",{}),(0,O.jsx)("br",{}),(0,O.jsx)("strong",{children:"Do you still want to proceed?"})]}),positiveIntent:"danger",positiveLabel:"Proceed",negativeLabel:"Cancel"}).then((e=>{e&&(S((0,E.removeEditorTabsForDirectory)(t,l)),(0,Q.EY)(n,l).then(a))}))},children:(0,O.jsxs)("div",{className:"file-system-view-node-container",onClick:()=>{h||c(!d)},children:[(0,O.jsx)(ae,{indentationLevel:r}),d&&(0,O.jsx)(F.JO,{icon:i.d.CHEVRON_DOWN}),!d&&(0,O.jsx)(F.JO,{icon:i.d.CHEVRON_RIGHT}),(0,O.jsx)(de,{workspaceLocation:t,fileSystem:n,basePath:s,fileName:o,isDirectory:!0,isEditing:h,setIsEditing:m,refreshDirectory:a})]})}),g&&(0,O.jsxs)("div",{className:"file-system-view-node-container",children:[(0,O.jsx)(ae,{indentationLevel:r+1}),(0,O.jsx)(F.JO,{icon:i.d.DOCUMENT}),(0,O.jsx)(ce,{processFileName:e=>{const t=te().join(s,o,e);n.exists(t,(s=>{s?(0,ne.qY)({title:"Unable to create file",contents:(0,O.jsxs)("p",{children:["A file or folder ",(0,O.jsx)("b",{children:e})," already exists in this location. Please choose a different name."]}),label:"OK"}).then((()=>{})):n.writeFile(t,"",(e=>{e&&console.error(e),j()}))}))},removePlaceholder:()=>v(!1)})]}),b&&(0,O.jsxs)("div",{className:"file-system-view-node-container",children:[(0,O.jsx)(ae,{indentationLevel:r+1}),(0,O.jsx)(F.JO,{icon:i.d.CHEVRON_RIGHT}),(0,O.jsx)(ce,{processFileName:e=>{const t=te().join(s,o,e);n.exists(t,(s=>{s?(0,ne.qY)({title:"Unable to create directory",contents:(0,O.jsxs)("p",{children:["A file or folder ",(0,O.jsx)("b",{children:e})," already exists in this location. Please choose a different name."]}),label:"OK"}).then((()=>{})):n.mkdir(t,777,(e=>{e&&console.error(e),j()}))}))},removePlaceholder:()=>x(!1)})]}),d&&(0,O.jsx)(pe,{workspaceLocation:t,fileSystem:n,basePath:l,indentationLevel:r+1},C)]})},he=e=>{const{workspaceLocation:t,fileSystem:n,basePath:s,fileName:o,indentationLevel:r,refreshDirectory:a}=e,[l,d]=u.useState(!1),c=(0,p.I0)(),h=te().join(s,o),m=()=>{n.readFile(h,"utf-8",((e,n)=>{if(e&&console.error(e),void 0===n)throw new Error("File contents are undefined.");c((0,E.addEditorTab)(t,h,n))}))};return(0,O.jsx)(re,{open:m,rename:()=>d(!0),remove:()=>{(0,ne.pG)({icon:"warning-sign",title:`Are you sure you want to delete '${o}'?`,contents:(0,O.jsxs)("p",{children:["Once a file is deleted, it cannot be recovered!",(0,O.jsx)("br",{}),(0,O.jsx)("br",{}),(0,O.jsx)("strong",{children:"Do you still want to proceed?"})]}),positiveIntent:"danger",positiveLabel:"Proceed",negativeLabel:"Cancel"}).then((e=>{e&&n.unlink(h,(e=>{e&&console.error(e),c((0,E.removeEditorTabForFile)(t,h)),a()}))}))},children:(0,O.jsxs)("div",{className:"file-system-view-node-container",onClick:e=>{2===e.detail&&m()},children:[(0,O.jsx)(ae,{indentationLevel:r}),(0,O.jsx)(F.JO,{icon:i.d.DOCUMENT}),(0,O.jsx)(de,{workspaceLocation:t,fileSystem:n,basePath:s,fileName:o,isDirectory:!1,isEditing:l,setIsEditing:d,refreshDirectory:a})]})})},pe=e=>{const{workspaceLocation:t,fileSystem:n,basePath:s,indentationLevel:i}=e,[o,r]=u.useState(void 0),[a,l]=u.useState(void 0),d=()=>{n.readdir(s,(async(e,t)=>{if(e&&console.error(e),void 0===t)return;const i=[],o=[];await Promise.all(t.map((e=>{const t=te().join(s,e);return new Promise(((s,r)=>{n.lstat(t,((t,n)=>{if(t)return r(t);void 0!==n&&(n.isFile()?i.push(e):n.isDirectory()&&o.push(e),s(n))}))}))}))),l(i.sort()),r(o.sort())}))};return u.useEffect(d,[n,s]),a&&o?(0,O.jsxs)("div",{className:"file-system-view-list-container",children:[o.map((e=>(0,O.jsx)(ue,{workspaceLocation:t,fileSystem:n,basePath:s,directoryName:e,indentationLevel:i,refreshParentDirectory:d},e))),a.map((e=>(0,O.jsx)(he,{workspaceLocation:t,fileSystem:n,basePath:s,fileName:e,indentationLevel:i,refreshDirectory:d},e)))]}):(0,O.jsx)(le,{waitInMsBeforeRender:200,children:(0,O.jsx)(F.$j,{className:"file-system-view-spinner",size:F.Ey.SMALL})})},me=e=>{const{workspaceLocation:t,basePath:n}=e,s=(0,x.ix)((e=>e.fileSystem.inBrowserFileSystem)),[o,r]=u.useState(!1),[a,l]=u.useState(!1),[d,c]=u.useState(0),h=()=>c((d+1)%2);if(null===s)return(0,O.jsx)("div",{className:"file-system-view-error",children:"Unable to load file system."});return(0,O.jsxs)("div",{className:"file-system-view-container",children:[(0,O.jsx)(pe,{workspaceLocation:t,fileSystem:s,basePath:n,indentationLevel:0},d),o&&(0,O.jsxs)("div",{className:"file-system-view-node-container",children:[(0,O.jsx)(ae,{indentationLevel:0}),(0,O.jsx)(F.JO,{icon:i.d.DOCUMENT}),(0,O.jsx)(ce,{processFileName:e=>{const t=te().join(n,e);s.exists(t,(n=>{n?(0,ne.qY)({title:"Unable to create file",contents:(0,O.jsxs)("p",{children:["A file or folder ",(0,O.jsx)("b",{children:e})," already exists in this location. Please choose a different name."]}),label:"OK"}).then((()=>{})):s.writeFile(t,"",(e=>{e&&console.error(e),h()}))}))},removePlaceholder:()=>r(!1)})]}),a&&(0,O.jsxs)("div",{className:"file-system-view-node-container",children:[(0,O.jsx)(ae,{indentationLevel:0}),(0,O.jsx)(F.JO,{icon:i.d.CHEVRON_RIGHT}),(0,O.jsx)(ce,{processFileName:e=>{const t=te().join(n,e);s.exists(t,(n=>{n?(0,ne.qY)({title:"Unable to create directory",contents:(0,O.jsxs)("p",{children:["A file or folder ",(0,O.jsx)("b",{children:e})," already exists in this location. Please choose a different name."]}),label:"OK"}).then((()=>{})):s.mkdir(t,777,(e=>{e&&console.error(e),h()}))}))},removePlaceholder:()=>l(!1)})]}),(0,O.jsx)(re,{className:"file-system-view-empty-space",createNewFile:()=>r(!0),createNewDirectory:()=>l(!0)})]})};var ge=n(45686),ve=n(39215);const be=`\nWelcome to the Source Academy playground!\n\nThe book [_Structure and Interpretation of Computer Programs, JavaScript Edition_](${$.y.textbook})\nuses JavaScript sublanguages that we call [_Source_](${$.y.sourceDocs}). `,xe=`\n\nIn the editor on the left, you can use the [_Ace keyboard shortcuts_](${$.y.aceHotkeys}) \nand also the [_Source Academy keyboard shortcuts_](${$.y.sourceHotkeys}).\n\n`,Ce=(e,t)=>be+((e,t)=>{if(e===l.Chapter.FULL_JS)return`However, you have chosen full JavaScript; your program will be run directly using JavaScript strict mode [_(ECMAScript 2021)_](${$.y.ecmaScript_2021}).\n\n<b>Warning:</b> If your program freezes during execution, you can try refreshing the tab. Note that you need to open the browser console (typically by pressing \`F12\`) before using breakpoints.`;if(e===l.Chapter.HTML)return"However, you have chosen HTML, the standard markup language for webpages. Your code will be rendered directly as a HTML document.\n\nJavaScript code can be added to a HTML document using the `<script>` tag; any script errors will be displayed in the output below.\n\n<b>Note:</b> Error messages may differ between browsers, e.g. when using Safari, errors can only be viewed on the browser console itself. Please check the browser console (typically by pressing `F12`) for more detailed errors and warnings.";const n=`${$.y.sourceDocs}source_${e}${t!==l.Variant.DEFAULT&&t!==l.Variant.NATIVE?`_${t}`:""}/`;return`You have chosen the sublanguage [_${(0,L.w$)(e,t)}_](${n}).`})(e,t)+xe,Ee=e=>{return t=e.chapter,n=e.variant,Ce(t,n);var t,n};var ye=n(90713),Se=n(22657),je=n(37035),fe=n(18465),Le=n(62629),ke=n(84259);const Ie={goGreen:"h u l k"};async function we(e,t,n,s,i){var o;const r=(0,Se.m)(e),a=null!==(o=(0,ye.GA)(r.chap))&&void 0!==o?o:void 0;if(a===l.Chapter.FULL_JS)(0,C.oO)();else if(a===l.Chapter.FULL_TS)(0,C.Ze)();else{var d,u,h,p;if(a===l.Chapter.HTML){if(!await(0,C.zZ)())return}const e=void 0===r.prgrm?"":(0,c.decompressFromEncodedURIComponent)(r.prgrm),o=(0,L.CL)(n),m=void 0===r.files?{[o]:e}:(0,Se.m)((0,c.decompressFromEncodedURIComponent)(r.files));null!==i&&await(0,Q.c2)(n,i,m),s((0,E.setFolderMode)(n,!1));const g=null!==(d=(0,ye.YF)(r.isFolder))&&void 0!==d&&d;s((0,E.setFolderMode)(n,g));const v=null!==(u=null===(h=r.tabs)||void 0===h?void 0:h.split(",").map(c.decompressFromEncodedURIComponent))&&void 0!==u?u:[o];s((0,E.removeEditorTabsForDirectory)(n,Le.z[n])),v.forEach((e=>{var t;return s((0,E.addEditorTab)(n,e,null!==(t=m[e])&&void 0!==t?t:""))}));const b=null!==(p=(0,ye.GA)(r.tabIdx))&&void 0!==p?p:0;if(s((0,E.updateActiveEditorTabIndex)(n,b)),a){const e=(0,L.C3)(a,r.variant);t.handleChapterSelect(a,e.variant),s((0,f.playgroundConfigLanguage)(e))}const x=Math.max((0,ye.GA)(r.exec||"1000")||1e3,1e3);x&&t.handleChangeExecTime(x)}}const Te=e=>{const{isSicpEditor:t}=e,n=t?"sicp":"playground",{isMobileBreakpoint:r}=(0,x.Fs)(),[c,C]=(0,u.useState)(),D=(0,m.TH)(),F=(0,m.s0)(),R=(0,p.oR)(),A=new URLSearchParams(D.search).get("add_device"),{editorTabs:M,editorSessionId:U,execTime:B,stepLimit:H,isEditorAutorun:_,isRunning:G,isDebugging:z,output:Z,replValue:Q,sideContentHeight:ee,sharedbConnected:te,usingSubst:ne,isFolderModeEnabled:se,activeEditorTabIndex:ie,context:{chapter:oe,variant:re}}=(0,x.ix)((e=>e.workspaces[n])),ae=(0,x.ix)((e=>e.fileSystem.inBrowserFileSystem)),{queryString:le,shortURL:de,persistenceFile:ce,githubSaveInfo:ue}=(0,x.ix)((e=>e.playground)),{sourceChapter:he,sourceVariant:pe,googleUser:be,githubOctokitObject:xe}=(0,x.ix)((e=>e.session)),Ce=(0,p.I0)(),{handleChangeExecTime:ye,handleChapterSelect:Se,handleEditorValueChange:Te,handleSetEditorBreakpoints:Ne,handleReplEval:De,handleReplOutputClear:Fe,handleUsingEnv:Re,handleUsingSubst:Oe}=(0,u.useMemo)((()=>({handleChangeExecTime:e=>Ce((0,E.changeExecTime)(e,n)),handleChapterSelect:(e,t)=>Ce((0,E.chapterSelect)(e,t,n)),handleEditorValueChange:(e,t)=>Ce((0,E.updateEditorValue)(n,e,t)),handleSetEditorBreakpoints:(e,t)=>Ce((0,E.setEditorBreakpoint)(n,e,t)),handleReplEval:()=>Ce((0,E.evalRepl)(n)),handleReplOutputClear:()=>Ce((0,E.clearReplOutput)(n)),handleUsingEnv:e=>Ce((0,E.toggleUsingEnv)(e,n)),handleUsingSubst:e=>Ce((0,E.toggleUsingSubst)(e,n))})),[Ce,n]);A&&!c&&(C(A),F(D.pathname,{replace:!0}));const[Pe,Ae]=(0,u.useState)(new Date),[Me,Ue]=(0,u.useState)(!1),[Be,Ve]=(0,u.useState)(A?ve.B.remoteExecution:ve.B.introduction),[He,_e]=(0,u.useState)(!1),[Ge,ze]=(0,u.useState)((()=>{var e,t;return(0,fe.wH)("playground",{editorValue:null!==(e=null===(t=M[0])||void 0===t?void 0:t.value)&&void 0!==e?e:"",chapter:oe})})),Ze=(0,u.useMemo)((()=>(0,ke.sd)(c,C)),[c]),Je=(0,x.ix)((e=>!!e.session.remoteExecutionSession))&&!t,$e=(0,x.ix)((e=>e.workspaces.playground.externalLibrary));(0,u.useEffect)((()=>{var e,t;ze((0,fe.wH)("playground",{editorValue:null!==(e=null===(t=M[0])||void 0===t?void 0:t.value)&&void 0!==e?e:"",chapter:oe}))}),[U]);const Ye=t?e.initialEditorValueHash:D.hash;(0,u.useEffect)((()=>{if(Ye)we(Ye,{handleChangeExecTime:ye,handleChapterSelect:Se},n,Ce,ae);else if(he&&pe){Se(he,pe);const e=(0,L.C3)(he,pe);Ce((0,f.playgroundConfigLanguage)(e)),Ce((0,E.setFolderMode)(n,!1))}}),[Ce,ae,Ye,he,pe,n,Se,ye]),(0,u.useEffect)((()=>{r&&ke.NG.includes(Be)?Ve(ve.B.mobileEditor):!r&&ke.JN.includes(Be)&&Ve(ve.B.introduction)}),[r,Be]);const qe=(0,u.useMemo)((()=>({goGreen:()=>Ue(!Me)})),[Me]),Ke=u.useCallback(((e,t)=>{Ae(new Date),Te(e,t)}),[Te]),We=(0,u.useCallback)((()=>{Re(!1),y.Z.clearEnv(),Ce((0,E.updateEnvSteps)(-1,n)),Ce((0,E.updateEnvStepsTotal)(0,n)),Ce((0,E.toggleUpdateEnv)(!0,n)),Ce((0,E.setEditorHighlightedLines)(n,0,[]))}),[Ce,n,Re]),Xe=(0,u.useCallback)(((e,t,n)=>{e!==t&&(t===ve.B.substVisualizer&&e===ve.B.mobileEditorRun||(e!==ve.B.envVisualizer&&We(),!(0,L.lq)(oe)||e!==ve.B.substVisualizer&&e!==ve.B.envVisualizer||(oe<=l.Chapter.SOURCE_2?Oe(!0):Re(!0)),t!==ve.B.substVisualizer||He||(Fe(),Oe(!1)),Ve(e)))}),[He,We,oe,Oe,Re,Fe]),Qe=(0,u.useCallback)((e=>{(0,fe.cM)(Ge,e)}),[Ge]),et=(0,u.useMemo)((()=>({handleEditorEval:()=>Ce((0,E.evalEditor)(n)),handleInterruptEval:()=>Ce((0,g.beginInterruptExecution)(n)),handleToggleEditorAutorun:()=>Ce((0,E.toggleEditorAutorun)(n)),handleDebuggerPause:()=>Ce((0,g.beginDebuggerPause)(n)),handleDebuggerReset:()=>Ce((0,g.debuggerReset)(n)),handleDebuggerResume:()=>Ce((0,g.debuggerResume)(n))})),[Ce,n]),tt=(0,x.ix)((e=>e.playground.languageConfig)),nt=(0,u.useMemo)((()=>(0,O.jsx)(I.k,{isEntrypointFileDefined:null!==ie,isDebugging:z,isEditorAutorun:_,isRunning:G,autorunDisabled:Je,sourceChapter:tt.chapter,pauseDisabled:Je||!(0,L.lq)(tt.chapter),...et},"autorun")),[ie,z,_,G,tt.chapter,et,Je]),st=(0,u.useCallback)(((e,t)=>{const{chapter:n,variant:s}=e;(n<=2&&He||Be===ve.B.substVisualizer)&&Oe(!0),n>2&&(Fe(),Oe(!1));const i={time:Date.now(),type:"chapterSelect",data:n};Qe(i),Se(n,s),Ce((0,f.playgroundConfigLanguage)(e))}),[Ce,He,Be,Qe,Fe,Oe,Se]),it=(0,u.useMemo)((()=>(0,O.jsx)(w.b,{handleChapterSelect:st,isFolderModeEnabled:se,sourceChapter:tt.chapter,sourceVariant:tt.variant,disabled:Je},"chapter")),[st,se,tt.chapter,tt.variant,Je]),ot=(0,u.useMemo)((()=>Be===ve.B.substVisualizer?null:(0,O.jsx)(T._,{handleReplOutputClear:Fe},"clear_repl")),[Fe,Be]),rt=(0,u.useMemo)((()=>Be===ve.B.substVisualizer?null:(0,O.jsx)(N.e,{handleReplEval:De,isRunning:G},"eval_repl")),[De,G,Be]),at=ce&&(!ce.lastSaved||ce.lastSaved<Pe),lt=(0,u.useMemo)((()=>(0,O.jsx)(V,{isFolderModeEnabled:se,currentFile:ce,loggedInAs:be,isDirty:at,onClickSaveAs:()=>Ce((0,j.persistenceSaveFileAs)()),onClickOpen:()=>Ce((0,j.persistenceOpenPicker)()),onClickSave:ce?()=>Ce((0,j.persistenceSaveFile)(ce)):void 0,onClickLogOut:()=>Ce((0,v.logoutGoogle)()),onPopoverOpening:()=>Ce((0,j.persistenceInitialise)())},"googledrive")),[se,ce,be,at,Ce]),dt=ue&&(!ue.lastSaved||ue.lastSaved<Pe),ct=(0,u.useMemo)((()=>(0,O.jsx)(W,{isFolderModeEnabled:se,loggedInAs:xe.octokit,githubSaveInfo:ue,isDirty:dt,onClickOpen:()=>Ce((0,S.githubOpenFile)()),onClickSaveAs:()=>Ce((0,S.githubSaveFileAs)()),onClickSave:()=>Ce((0,S.githubSaveFile)()),onClickLogIn:()=>Ce((0,v.loginGitHub)()),onClickLogOut:()=>Ce((0,v.logoutGitHub)())},"github")),[Ce,xe.octokit,dt,ue,se]),ut=(0,u.useMemo)((()=>(0,O.jsx)(P,{execTime:B,handleChangeExecTime:ye},"execution_time")),[B,ye]),ht=(0,u.useMemo)((()=>(0,O.jsx)(q,{stepLimit:H,handleChangeStepLimit:e=>Ce((0,E.changeStepLimit)(e,n)),handleOnBlurAutoScale:e=>{Ce(e%2===0?(0,E.changeStepLimit)(e,n):(0,E.changeStepLimit)(e+1,n))}},"step_limit")),[Ce,H,n]),pt=(0,u.useCallback)((()=>R.getState().workspaces[n].editorTabs[0].value),[R,n]),mt=(0,u.useMemo)((()=>(0,O.jsx)(J,{isFolderModeEnabled:se,editorSessionId:U,getEditorValue:pt,handleSetEditorSessionId:e=>Ce((0,b.setEditorSessionId)(n,e)),sharedbConnected:te},"session")),[Ce,pt,se,U,te,n]),gt=(0,u.useMemo)((()=>{const n=t?$.y.playground+"#"+e.initialEditorValueHash:le;return(0,O.jsx)(Y,{handleGenerateLz:()=>Ce((0,f.generateLzString)()),handleShortenURL:e=>Ce((0,f.shortenURL)(e)),handleUpdateShortURL:e=>Ce((0,f.updateShortURL)(e)),queryString:n,shortURL:de,isSicp:t},"share")}),[Ce,t,e.initialEditorValueHash,le,de]),vt=(0,u.useMemo)((()=>(0,O.jsx)(K,{isFolderModeEnabled:se,isSessionActive:""!==U,isPersistenceActive:void 0!==ce||""!==ue.repoName,toggleFolderMode:()=>Ce((0,E.toggleFolderMode)(n))},"folder")),[Ce,ue.repoName,se,ce,U,n]);(0,u.useEffect)((()=>{const e=(0,L.C3)(oe,re);Ce((0,f.playgroundConfigLanguage)(e))}),[Ce,oe,re]);const bt=tt.supports.dataVisualizer,xt=tt.supports.envVisualizer,Ct=tt.supports.substVisualizer,Et=(0,u.useMemo)((()=>(0,ke.EG)(Ee(tt))),[tt]),yt=(0,u.useMemo)((()=>{const e=[Et];return tt.chapter===l.Chapter.HTML?(Z.length>0&&"result"===Z[0].type&&e.push((0,ke.nf)(Z[0],(e=>Ce((0,E.addHtmlConsoleError)(e,n))))),e):(Je||(bt&&e.push(ke.gM),xt&&e.push((0,ke.HE)(n)),Ct&&e.push((0,ke.a0)(Z))),t||e.push(Ze),e)}),[Et,tt.chapter,Z,Je,t,Ce,n,bt,xt,Ct,Ze]),St=[...yt].filter((e=>{let{id:t}=e;return!(t&&ke.NG.includes(t))})),jt=(0,u.useCallback)((t=>{const n=()=>{t.getSession().addFold("    ",new o.Range(1,0,e.prependLength,0)),t.renderer.off("afterRender",n)};t.renderer.on("afterRender",n)}),[e.prependLength]),ft=(0,u.useCallback)(((e,t)=>{const s={time:Date.now(),type:"codeDelta",data:t};Qe(s),Ce((0,E.toggleUpdateEnv)(!0,n)),Ce((0,E.setEditorHighlightedLines)(n,0,[]))}),[Qe,Ce,n]),Lt=(0,u.useCallback)((e=>{const t={time:Date.now(),type:"cursorPositionChange",data:e.getCursor()};Qe(t)}),[Qe]),kt=(0,u.useCallback)((e=>{const t=e.getRange(),n=e.isBackwards();if(!(0,d.isEqual)(t.start,t.end)){const e={time:Date.now(),type:"selectionRangeData",data:{range:t,isBackwards:n}};Qe(e)}}),[Qe]),It=(0,u.useCallback)(((e,t)=>{const s=t.filter((e=>!!e)).length;s>0&&(_e(!0),oe<=2&&Oe(!0)),0===s&&(_e(!1),Be!==ve.B.substVisualizer&&(Fe(),Oe(!1))),Ne(e,t),Ce((0,E.toggleUpdateEnv)(!0,n))}),[Be,Ce,n,Ne,Fe,Oe,oe]),wt=!tt.supports.repl||Je,Tt=(0,u.useMemo)((()=>({handleDeclarationNavigate:e=>Ce((0,E.navigateToDeclaration)(n,e)),handlePromptAutocomplete:(e,t,s)=>Ce((0,E.promptAutocomplete)(n,e,t,s)),handleSendReplInputToOutput:e=>Ce((0,E.sendReplInputToOutput)(e,n)),handleSetSharedbConnected:e=>Ce((0,b.setSharedbConnected)(n,e)),setActiveEditorTabIndex:e=>Ce((0,E.updateActiveEditorTabIndex)(n,e)),removeEditorTabByIndex:e=>Ce((0,E.removeEditorTab)(n,e))})),[Ce,n]),Nt={editorSessionId:U,isEditorAutorun:_,editorVariant:"normal",baseFilePath:Le.z[n],isFolderModeEnabled:se,activeEditorTabIndex:ie,setActiveEditorTabIndex:Tt.setActiveEditorTabIndex,removeEditorTabByIndex:Tt.removeEditorTabByIndex,editorTabs:M.map(X.F),handleDeclarationNavigate:Tt.handleDeclarationNavigate,handleEditorEval:et.handleEditorEval,handlePromptAutocomplete:Tt.handlePromptAutocomplete,handleSendReplInputToOutput:Tt.handleSendReplInputToOutput,handleSetSharedbConnected:Tt.handleSetSharedbConnected,onChange:ft,onCursorChange:Lt,onSelectionChange:kt,onLoad:t&&e.prependLength?jt:void 0,sourceChapter:tt.chapter,externalLibraryName:$e,sourceVariant:tt.variant,handleEditorValueChange:Ke,handleEditorUpdateBreakpoints:It},Dt=(0,u.useMemo)((()=>({handleBrowseHistoryDown:()=>Ce((0,E.browseReplHistoryDown)(n)),handleBrowseHistoryUp:()=>Ce((0,E.browseReplHistoryUp)(n)),handleReplValueChange:e=>Ce((0,E.updateReplValue)(e,n))})),[Ce,n]),Ft={output:Z,replValue:Q,handleReplEval:De,usingSubst:ne,handleBrowseHistoryDown:Dt.handleBrowseHistoryDown,handleBrowseHistoryUp:Dt.handleBrowseHistoryUp,handleReplValueChange:Dt.handleReplValueChange,sourceChapter:tt.chapter,sourceVariant:tt.variant,externalLibrary:k.L.NONE,hidden:Be===ve.B.substVisualizer||Be===ve.B.envVisualizer,inputHidden:wt,replButtons:[wt?null:rt,ot],disableScrolling:t},Rt=(0,u.useMemo)((()=>({tabs:[...se?[{label:"Folder",body:(0,O.jsx)(me,{workspaceLocation:"playground",basePath:Le.z[n]}),iconName:i.d.FOLDER_CLOSE,id:ve.B.folder}]:[]]})),[se,n]),Ot={controlBarProps:{editorButtons:[nt,tt.chapter===l.Chapter.FULL_JS?null:gt,it,t?null:mt,tt.supports.multiFile?vt:null,lt,ct,Je||!(0,L.lq)(tt.chapter)?null:ne?ht:ut]},editorContainerProps:Nt,handleSideContentHeightChange:(0,u.useCallback)((e=>Ce((0,E.changeSideContentHeight)(e,n))),[Ce,n]),replProps:Ft,sideBarProps:Rt,sideContentHeight:ee,sideContentProps:{selectedTabId:Be,onChange:Xe,tabs:{beforeDynamicTabs:yt,afterDynamicTabs:[]},workspaceLocation:n,sideContentHeight:ee},sideContentIsResizeable:Be!==ve.B.substVisualizer&&Be!==ve.B.envVisualizer},Pt={editorContainerProps:Nt,replProps:Ft,sideBarProps:Rt,mobileSideContentProps:{mobileControlBarProps:{editorButtons:[nt,it,tt.chapter===l.Chapter.FULL_JS?null:gt,t?null:mt,tt.supports.multiFile?vt:null,lt,ct]},selectedTabId:Be,onChange:Xe,tabs:{beforeDynamicTabs:St,afterDynamicTabs:[]},workspaceLocation:n}};return r?(0,O.jsx)("div",{className:a()("Playground",s.Pyr,Me?"GreenScreen":void 0),children:(0,O.jsx)(ge.Z,{...Pt})}):(0,O.jsx)(h.HotKeys,{className:a()("Playground",s.Pyr,Me?"GreenScreen":void 0),keyMap:Ie,handlers:qe,children:(0,O.jsx)(je.Z,{...Ot})})},Ne=Te;Ne.displayName="Playground";const De=Te}}]);
//# sourceMappingURL=579.b67b11d3.chunk.js.map